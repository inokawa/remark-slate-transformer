import{s as Zs,m as Xs,a as ha,g as Er,i as er,_ as St,h as ma,k as tr,l as Qs,u as Fi,r as eu,c as Bi,d as $i,e as tu,b as ru,j as Or,T as nu,t as Lo,f as au}from"./article-a65c482c.js";import{c as Zr,g as Nr,r as ra}from"./index-2c43ba65.js";const ou=t=>na(t),na=t=>t.reduce((n,r)=>{const e=iu(r);return e&&n.push(e),n},[]),iu=t=>{switch(t.object){case"block":{const{type:n,nodes:r,data:e}=t;return{type:n,children:na(r),...e}}case"inline":{const{type:n,nodes:r,data:e}=t;return{type:n,children:na(r),...e}}case"text":{const{text:n="",marks:r}=t;return{text:n,...r==null?void 0:r.reduce((e,o)=>(e[o.type]=!0,e),{})}}}return null},su=function(){return function(t){return Zs({type:"root",children:ou(t.children)},{})}},uu=su,cu=t=>({object:"value",document:{object:"document",nodes:aa(t)}}),aa=t=>t.reduce((n,r)=>{const e=fu(r);return e&&n.push(e),n},[]),fu=t=>{if("text"in t){const{text:n,...r}=t,e=Object.keys(r).reduce((i,u)=>(r[u]&&i.push({object:"mark",type:u}),i),[]);return{object:"text",text:n,marks:e}}switch(t.type){case"paragraph":case"heading":case"blockquote":case"list":case"listItem":case"table":case"tableRow":case"tableCell":case"html":case"code":case"yaml":case"toml":case"thematicBreak":case"definition":case"break":case"math":{const{type:n,children:r,...e}=t;return{object:"block",type:n,nodes:aa(r),data:{...e}}}case"footnoteDefinition":case"link":case"linkReference":case"image":case"imageReference":case"footnote":case"footnoteReference":case"inlineMath":{const{type:n,children:r,...e}=t;return{object:"inline",type:n,nodes:aa(r),data:{...e}}}}return null},lu=function(){this.Compiler=function(t){return cu(Xs(t,{}))}},vu=lu;var Ii={exports:{}};(function(t,n){(function(r,e){t.exports=e()})(Zr,function(){var r=Array.prototype.slice;function e(a,s){s&&(a.prototype=Object.create(s.prototype)),a.prototype.constructor=a}function o(a){return f(a)?a:Se(a)}e(i,o);function i(a){return v(a)?a:$e(a)}e(u,o);function u(a){return h(a)?a:ne(a)}e(c,o);function c(a){return f(a)&&!m(a)?a:Ve(a)}function f(a){return!!(a&&a[_])}function v(a){return!!(a&&a[w])}function h(a){return!!(a&&a[x])}function m(a){return v(a)||h(a)}function g(a){return!!(a&&a[O])}o.isIterable=f,o.isKeyed=v,o.isIndexed=h,o.isAssociative=m,o.isOrdered=g,o.Keyed=i,o.Indexed=u,o.Set=c;var _="@@__IMMUTABLE_ITERABLE__@@",w="@@__IMMUTABLE_KEYED__@@",x="@@__IMMUTABLE_INDEXED__@@",O="@@__IMMUTABLE_ORDERED__@@",F="delete",P=5,L=1<<P,M=L-1,B={},D={value:!1},te={value:!1};function oe(a){return a.value=!1,a}function U(a){a&&(a.value=!0)}function se(){}function j(a,s){s=s||0;for(var l=Math.max(0,a.length-s),d=new Array(l),y=0;y<l;y++)d[y]=a[y+s];return d}function ue(a){return a.size===void 0&&(a.size=a.__iterate(Y)),a.size}function ve(a,s){if(typeof s!="number"){var l=s>>>0;if(""+l!==s||l===4294967295)return NaN;s=l}return s<0?ue(a)+s:s}function Y(){return!0}function re(a,s,l){return(a===0||l!==void 0&&a<=-l)&&(s===void 0||l!==void 0&&s>=l)}function Z(a,s){return G(a,s,0)}function J(a,s){return G(a,s,s)}function G(a,s,l){return a===void 0?l:a<0?Math.max(0,s+a):s===void 0?a:Math.min(s,a)}var Je=0,Te=1,Be=2,be=typeof Symbol=="function"&&Symbol.iterator,Ee="@@iterator",Ue=be||Ee;function V(a){this.next=a}V.prototype.toString=function(){return"[Iterator]"},V.KEYS=Je,V.VALUES=Te,V.ENTRIES=Be,V.prototype.inspect=V.prototype.toSource=function(){return this.toString()},V.prototype[Ue]=function(){return this};function X(a,s,l,d){var y=a===0?s:a===1?l:[s,l];return d?d.value=y:d={value:y,done:!1},d}function pe(){return{value:void 0,done:!0}}function ct(a){return!!_t(a)}function Qe(a){return a&&typeof a.next=="function"}function ot(a){var s=_t(a);return s&&s.call(a)}function _t(a){var s=a&&(be&&a[be]||a[Ee]);if(typeof s=="function")return s}function zt(a){return a&&typeof a.length=="number"}e(Se,o);function Se(a){return a==null?Dt():f(a)?a.toSeq():mn(a)}Se.of=function(){return Se(arguments)},Se.prototype.toSeq=function(){return this},Se.prototype.toString=function(){return this.__toString("Seq {","}")},Se.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},Se.prototype.__iterate=function(a,s){return Mr(this,a,s,!0)},Se.prototype.__iterator=function(a,s){return Rr(this,a,s,!0)},e($e,Se);function $e(a){return a==null?Dt().toKeyedSeq():f(a)?v(a)?a.toSeq():a.fromEntrySeq():Ir(a)}$e.prototype.toKeyedSeq=function(){return this},e(ne,Se);function ne(a){return a==null?Dt():f(a)?v(a)?a.entrySeq():a.toIndexedSeq():Ft(a)}ne.of=function(){return ne(arguments)},ne.prototype.toIndexedSeq=function(){return this},ne.prototype.toString=function(){return this.__toString("Seq [","]")},ne.prototype.__iterate=function(a,s){return Mr(this,a,s,!1)},ne.prototype.__iterator=function(a,s){return Rr(this,a,s,!1)},e(Ve,Se);function Ve(a){return(a==null?Dt():f(a)?v(a)?a.entrySeq():a:Ft(a)).toSetSeq()}Ve.of=function(){return Ve(arguments)},Ve.prototype.toSetSeq=function(){return this},Se.isSeq=yr,Se.Keyed=$e,Se.Set=Ve,Se.Indexed=ne;var Br="@@__IMMUTABLE_SEQ__@@";Se.prototype[Br]=!0,e(et,ne);function et(a){this._array=a,this.size=a.length}et.prototype.get=function(a,s){return this.has(a)?this._array[ve(this,a)]:s},et.prototype.__iterate=function(a,s){for(var l=this._array,d=l.length-1,y=0;y<=d;y++)if(a(l[s?d-y:y],y,this)===!1)return y+1;return y},et.prototype.__iterator=function(a,s){var l=this._array,d=l.length-1,y=0;return new V(function(){return y>d?pe():X(a,y,l[s?d-y++:y++])})},e(ft,$e);function ft(a){var s=Object.keys(a);this._object=a,this._keys=s,this.size=s.length}ft.prototype.get=function(a,s){return s!==void 0&&!this.has(a)?s:this._object[a]},ft.prototype.has=function(a){return this._object.hasOwnProperty(a)},ft.prototype.__iterate=function(a,s){for(var l=this._object,d=this._keys,y=d.length-1,p=0;p<=y;p++){var k=d[s?y-p:p];if(a(l[k],k,this)===!1)return p+1}return p},ft.prototype.__iterator=function(a,s){var l=this._object,d=this._keys,y=d.length-1,p=0;return new V(function(){var k=d[s?y-p:p];return p++>y?pe():X(a,k,l[k])})},ft.prototype[O]=!0,e(Nt,ne);function Nt(a){this._iterable=a,this.size=a.length||a.size}Nt.prototype.__iterateUncached=function(a,s){if(s)return this.cacheResult().__iterate(a,s);var l=this._iterable,d=ot(l),y=0;if(Qe(d))for(var p;!(p=d.next()).done&&a(p.value,y++,this)!==!1;);return y},Nt.prototype.__iteratorUncached=function(a,s){if(s)return this.cacheResult().__iterator(a,s);var l=this._iterable,d=ot(l);if(!Qe(d))return new V(pe);var y=0;return new V(function(){var p=d.next();return p.done?p:X(a,y++,p.value)})},e(Pt,ne);function Pt(a){this._iterator=a,this._iteratorCache=[]}Pt.prototype.__iterateUncached=function(a,s){if(s)return this.cacheResult().__iterate(a,s);for(var l=this._iterator,d=this._iteratorCache,y=0;y<d.length;)if(a(d[y],y++,this)===!1)return y;for(var p;!(p=l.next()).done;){var k=p.value;if(d[y]=k,a(k,y++,this)===!1)break}return y},Pt.prototype.__iteratorUncached=function(a,s){if(s)return this.cacheResult().__iterator(a,s);var l=this._iterator,d=this._iteratorCache,y=0;return new V(function(){if(y>=d.length){var p=l.next();if(p.done)return p;d[y]=p.value}return X(a,y,d[y++])})};function yr(a){return!!(a&&a[Br])}var $r;function Dt(){return $r||($r=new et([]))}function Ir(a){var s=Array.isArray(a)?new et(a).fromEntrySeq():Qe(a)?new Pt(a).fromEntrySeq():ct(a)?new Nt(a).fromEntrySeq():typeof a=="object"?new ft(a):void 0;if(!s)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+a);return s}function Ft(a){var s=Cr(a);if(!s)throw new TypeError("Expected Array or iterable object of values: "+a);return s}function mn(a){var s=Cr(a)||typeof a=="object"&&new ft(a);if(!s)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+a);return s}function Cr(a){return zt(a)?new et(a):Qe(a)?new Pt(a):ct(a)?new Nt(a):void 0}function Mr(a,s,l,d){var y=a._cache;if(y){for(var p=y.length-1,k=0;k<=p;k++){var A=y[l?p-k:k];if(s(A[1],d?A[0]:k,a)===!1)return k+1}return k}return a.__iterateUncached(s,l)}function Rr(a,s,l,d){var y=a._cache;if(y){var p=y.length-1,k=0;return new V(function(){var A=y[l?p-k:k];return k++>p?pe():X(s,d?A[0]:k-1,A[1])})}return a.__iteratorUncached(s,l)}function yn(a,s){return s?gn(s,a,"",{"":a}):pn(a)}function gn(a,s,l,d){return Array.isArray(s)?a.call(d,l,ne(s).map(function(y,p){return gn(a,y,p,s)})):Ja(s)?a.call(d,l,$e(s).map(function(y,p){return gn(a,y,p,s)})):s}function pn(a){return Array.isArray(a)?ne(a).map(pn).toList():Ja(a)?$e(a).map(pn).toMap():a}function Ja(a){return a&&(a.constructor===Object||a.constructor===void 0)}function Ne(a,s){if(a===s||a!==a&&s!==s)return!0;if(!a||!s)return!1;if(typeof a.valueOf=="function"&&typeof s.valueOf=="function"){if(a=a.valueOf(),s=s.valueOf(),a===s||a!==a&&s!==s)return!0;if(!a||!s)return!1}return!!(typeof a.equals=="function"&&typeof s.equals=="function"&&a.equals(s))}function _n(a,s){if(a===s)return!0;if(!f(s)||a.size!==void 0&&s.size!==void 0&&a.size!==s.size||a.__hash!==void 0&&s.__hash!==void 0&&a.__hash!==s.__hash||v(a)!==v(s)||h(a)!==h(s)||g(a)!==g(s))return!1;if(a.size===0&&s.size===0)return!0;var l=!m(a);if(g(a)){var d=a.entries();return s.every(function(T,b){var N=d.next().value;return N&&Ne(N[1],T)&&(l||Ne(N[0],b))})&&d.next().done}var y=!1;if(a.size===void 0)if(s.size===void 0)typeof a.cacheResult=="function"&&a.cacheResult();else{y=!0;var p=a;a=s,s=p}var k=!0,A=s.__iterate(function(T,b){if(l?!a.has(T):y?!Ne(T,a.get(b,B)):!Ne(a.get(b,B),T))return k=!1,!1});return k&&a.size===A}e(Re,ne);function Re(a,s){if(!(this instanceof Re))return new Re(a,s);if(this._value=a,this.size=s===void 0?1/0:Math.max(0,s),this.size===0){if(kn)return kn;kn=this}}Re.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Re.prototype.get=function(a,s){return this.has(a)?this._value:s},Re.prototype.includes=function(a){return Ne(this._value,a)},Re.prototype.slice=function(a,s){var l=this.size;return re(a,s,l)?this:new Re(this._value,J(s,l)-Z(a,l))},Re.prototype.reverse=function(){return this},Re.prototype.indexOf=function(a){return Ne(this._value,a)?0:-1},Re.prototype.lastIndexOf=function(a){return Ne(this._value,a)?this.size:-1},Re.prototype.__iterate=function(a,s){for(var l=0;l<this.size;l++)if(a(this._value,l,this)===!1)return l+1;return l},Re.prototype.__iterator=function(a,s){var l=this,d=0;return new V(function(){return d<l.size?X(a,d++,l._value):pe()})},Re.prototype.equals=function(a){return a instanceof Re?Ne(this._value,a._value):_n(a)};var kn;function Lr(a,s){if(!a)throw new Error(s)}e(Ie,ne);function Ie(a,s,l){if(!(this instanceof Ie))return new Ie(a,s,l);if(Lr(l!==0,"Cannot step a Range by 0"),a=a||0,s===void 0&&(s=1/0),l=l===void 0?1:Math.abs(l),s<a&&(l=-l),this._start=a,this._end=s,this._step=l,this.size=Math.max(0,Math.ceil((s-a)/l-1)+1),this.size===0){if(An)return An;An=this}}Ie.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},Ie.prototype.get=function(a,s){return this.has(a)?this._start+ve(this,a)*this._step:s},Ie.prototype.includes=function(a){var s=(a-this._start)/this._step;return s>=0&&s<this.size&&s===Math.floor(s)},Ie.prototype.slice=function(a,s){return re(a,s,this.size)?this:(a=Z(a,this.size),s=J(s,this.size),s<=a?new Ie(0,0):new Ie(this.get(a,this._end),this.get(s,this._end),this._step))},Ie.prototype.indexOf=function(a){var s=a-this._start;if(s%this._step===0){var l=s/this._step;if(l>=0&&l<this.size)return l}return-1},Ie.prototype.lastIndexOf=function(a){return this.indexOf(a)},Ie.prototype.__iterate=function(a,s){for(var l=this.size-1,d=this._step,y=s?this._start+l*d:this._start,p=0;p<=l;p++){if(a(y,p,this)===!1)return p+1;y+=s?-d:d}return p},Ie.prototype.__iterator=function(a,s){var l=this.size-1,d=this._step,y=s?this._start+l*d:this._start,p=0;return new V(function(){var k=y;return y+=s?-d:d,p>l?pe():X(a,p++,k)})},Ie.prototype.equals=function(a){return a instanceof Ie?this._start===a._start&&this._end===a._end&&this._step===a._step:_n(this,a)};var An;e(wt,o);function wt(){throw TypeError("Abstract")}e(gr,wt);function gr(){}e(jt,wt);function jt(){}e(zr,wt);function zr(){}wt.Keyed=gr,wt.Indexed=jt,wt.Set=zr;var pr=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(s,l){s=s|0,l=l|0;var d=s&65535,y=l&65535;return d*y+((s>>>16)*y+d*(l>>>16)<<16>>>0)|0};function Sn(a){return a>>>1&1073741824|a&3221225471}function We(a){if(a===!1||a===null||a===void 0||typeof a.valueOf=="function"&&(a=a.valueOf(),a===!1||a===null||a===void 0))return 0;if(a===!0)return 1;var s=typeof a;if(s==="number"){if(a!==a||a===1/0)return 0;var l=a|0;for(l!==a&&(l^=a*4294967295);a>4294967295;)a/=4294967295,l^=a;return Sn(l)}if(s==="string")return a.length>bs?ws(a):wn(a);if(typeof a.hashCode=="function")return a.hashCode();if(s==="object")return Ts(a);if(typeof a.toString=="function")return wn(a.toString());throw new Error("Value type "+s+" cannot be hashed.")}function ws(a){var s=En[a];return s===void 0&&(s=wn(a),xn===xs&&(xn=0,En={}),xn++,En[a]=s),s}function wn(a){for(var s=0,l=0;l<a.length;l++)s=31*s+a.charCodeAt(l)|0;return Sn(s)}function Ts(a){var s;if(Tn&&(s=On.get(a),s!==void 0)||(s=a[Bt],s!==void 0)||!Va&&(s=a.propertyIsEnumerable&&a.propertyIsEnumerable[Bt],s!==void 0||(s=Os(a),s!==void 0)))return s;if(s=++bn,bn&1073741824&&(bn=0),Tn)On.set(a,s);else{if(Ua!==void 0&&Ua(a)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Va)Object.defineProperty(a,Bt,{enumerable:!1,configurable:!1,writable:!1,value:s});else if(a.propertyIsEnumerable!==void 0&&a.propertyIsEnumerable===a.constructor.prototype.propertyIsEnumerable)a.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},a.propertyIsEnumerable[Bt]=s;else if(a.nodeType!==void 0)a[Bt]=s;else throw new Error("Unable to set a non-enumerable property on object.")}return s}var Ua=Object.isExtensible,Va=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function Os(a){if(a&&a.nodeType>0)switch(a.nodeType){case 1:return a.uniqueID;case 9:return a.documentElement&&a.documentElement.uniqueID}}var Tn=typeof WeakMap=="function",On;Tn&&(On=new WeakMap);var bn=0,Bt="__immutablehash__";typeof Symbol=="function"&&(Bt=Symbol(Bt));var bs=16,xs=255,xn=0,En={};function Ge(a){Lr(a!==1/0,"Cannot perform this action with an infinite size.")}e(Q,gr);function Q(a){return a==null?it():Nn(a)&&!g(a)?a:it().withMutations(function(s){var l=i(a);Ge(l.size),l.forEach(function(d,y){return s.set(y,d)})})}Q.of=function(){var a=r.call(arguments,0);return it().withMutations(function(s){for(var l=0;l<a.length;l+=2){if(l+1>=a.length)throw new Error("Missing value for key: "+a[l]);s.set(a[l],a[l+1])}})},Q.prototype.toString=function(){return this.__toString("Map {","}")},Q.prototype.get=function(a,s){return this._root?this._root.get(0,void 0,a,s):s},Q.prototype.set=function(a,s){return Ya(this,a,s)},Q.prototype.setIn=function(a,s){return this.updateIn(a,B,function(){return s})},Q.prototype.remove=function(a){return Ya(this,a,B)},Q.prototype.deleteIn=function(a){return this.updateIn(a,function(){return B})},Q.prototype.update=function(a,s,l){return arguments.length===1?a(this):this.updateIn([a],s,l)},Q.prototype.updateIn=function(a,s,l){l||(l=s,s=void 0);var d=to(this,wo(a),s,l);return d===B?void 0:d},Q.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):it()},Q.prototype.merge=function(){return Dr(this,void 0,arguments)},Q.prototype.mergeWith=function(a){var s=r.call(arguments,1);return Dr(this,a,s)},Q.prototype.mergeIn=function(a){var s=r.call(arguments,1);return this.updateIn(a,it(),function(l){return typeof l.merge=="function"?l.merge.apply(l,s):s[s.length-1]})},Q.prototype.mergeDeep=function(){return Dr(this,Xa,arguments)},Q.prototype.mergeDeepWith=function(a){var s=r.call(arguments,1);return Dr(this,Qa(a),s)},Q.prototype.mergeDeepIn=function(a){var s=r.call(arguments,1);return this.updateIn(a,it(),function(l){return typeof l.mergeDeep=="function"?l.mergeDeep.apply(l,s):s[s.length-1]})},Q.prototype.sort=function(a){return xe(Gt(this,a))},Q.prototype.sortBy=function(a,s){return xe(Gt(this,s,a))},Q.prototype.withMutations=function(a){var s=this.asMutable();return a(s),s.wasAltered()?s.__ensureOwner(this.__ownerID):this},Q.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new se)},Q.prototype.asImmutable=function(){return this.__ensureOwner()},Q.prototype.wasAltered=function(){return this.__altered},Q.prototype.__iterator=function(a,s){return new Pn(this,a,s)},Q.prototype.__iterate=function(a,s){var l=this,d=0;return this._root&&this._root.iterate(function(y){return d++,a(y[1],y[0],l)},s),d},Q.prototype.__ensureOwner=function(a){return a===this.__ownerID?this:a?Bn(this.size,this._root,a,this.__hash):(this.__ownerID=a,this.__altered=!1,this)};function Nn(a){return!!(a&&a[Wa])}Q.isMap=Nn;var Wa="@@__IMMUTABLE_MAP__@@",H=Q.prototype;H[Wa]=!0,H[F]=H.remove,H.removeIn=H.deleteIn;function _r(a,s){this.ownerID=a,this.entries=s}_r.prototype.get=function(a,s,l,d){for(var y=this.entries,p=0,k=y.length;p<k;p++)if(Ne(l,y[p][0]))return y[p][1];return d},_r.prototype.update=function(a,s,l,d,y,p,k){for(var A=y===B,T=this.entries,b=0,N=T.length;b<N&&!Ne(d,T[b][0]);b++);var I=b<N;if(I?T[b][1]===y:A)return this;if(U(k),(A||!I)&&U(p),!(A&&T.length===1)){if(!I&&!A&&T.length>=$s)return Es(a,T,d,y);var R=a&&a===this.ownerID,q=R?T:j(T);return I?A?b===N-1?q.pop():q[b]=q.pop():q[b]=[d,y]:q.push([d,y]),R?(this.entries=q,this):new _r(a,q)}};function Kt(a,s,l){this.ownerID=a,this.bitmap=s,this.nodes=l}Kt.prototype.get=function(a,s,l,d){s===void 0&&(s=We(l));var y=1<<((a===0?s:s>>>a)&M),p=this.bitmap;return p&y?this.nodes[ro(p&y-1)].get(a+P,s,l,d):d},Kt.prototype.update=function(a,s,l,d,y,p,k){l===void 0&&(l=We(d));var A=(s===0?l:l>>>s)&M,T=1<<A,b=this.bitmap,N=(b&T)!==0;if(!N&&y===B)return this;var I=ro(b&T-1),R=this.nodes,q=N?R[I]:void 0,W=$n(q,a,s+P,l,d,y,p,k);if(W===q)return this;if(!N&&W&&R.length>=Is)return Ps(a,R,b,A,W);if(N&&!W&&R.length===2&&Za(R[I^1]))return R[I^1];if(N&&W&&R.length===1&&Za(W))return W;var ke=a&&a===this.ownerID,st=N?W?b:b^T:b|T,ht=N?W?no(R,I,W,ke):Bs(R,I,ke):Fs(R,I,W,ke);return ke?(this.bitmap=st,this.nodes=ht,this):new Kt(a,st,ht)};function kr(a,s,l){this.ownerID=a,this.count=s,this.nodes=l}kr.prototype.get=function(a,s,l,d){s===void 0&&(s=We(l));var y=(a===0?s:s>>>a)&M,p=this.nodes[y];return p?p.get(a+P,s,l,d):d},kr.prototype.update=function(a,s,l,d,y,p,k){l===void 0&&(l=We(d));var A=(s===0?l:l>>>s)&M,T=y===B,b=this.nodes,N=b[A];if(T&&!N)return this;var I=$n(N,a,s+P,l,d,y,p,k);if(I===N)return this;var R=this.count;if(!N)R++;else if(!I&&(R--,R<Cs))return Ns(a,b,R,A);var q=a&&a===this.ownerID,W=no(b,A,I,q);return q?(this.count=R,this.nodes=W,this):new kr(a,R,W)};function qt(a,s,l){this.ownerID=a,this.keyHash=s,this.entries=l}qt.prototype.get=function(a,s,l,d){for(var y=this.entries,p=0,k=y.length;p<k;p++)if(Ne(l,y[p][0]))return y[p][1];return d},qt.prototype.update=function(a,s,l,d,y,p,k){l===void 0&&(l=We(d));var A=y===B;if(l!==this.keyHash)return A?this:(U(k),U(p),In(this,a,s,l,[d,y]));for(var T=this.entries,b=0,N=T.length;b<N&&!Ne(d,T[b][0]);b++);var I=b<N;if(I?T[b][1]===y:A)return this;if(U(k),(A||!I)&&U(p),A&&N===2)return new kt(a,this.keyHash,T[b^1]);var R=a&&a===this.ownerID,q=R?T:j(T);return I?A?b===N-1?q.pop():q[b]=q.pop():q[b]=[d,y]:q.push([d,y]),R?(this.entries=q,this):new qt(a,this.keyHash,q)};function kt(a,s,l){this.ownerID=a,this.keyHash=s,this.entry=l}kt.prototype.get=function(a,s,l,d){return Ne(l,this.entry[0])?this.entry[1]:d},kt.prototype.update=function(a,s,l,d,y,p,k){var A=y===B,T=Ne(d,this.entry[0]);if(T?y===this.entry[1]:A)return this;if(U(k),A){U(p);return}return T?a&&a===this.ownerID?(this.entry[1]=y,this):new kt(a,this.keyHash,[d,y]):(U(p),In(this,a,s,We(d),[d,y]))},_r.prototype.iterate=qt.prototype.iterate=function(a,s){for(var l=this.entries,d=0,y=l.length-1;d<=y;d++)if(a(l[s?y-d:d])===!1)return!1},Kt.prototype.iterate=kr.prototype.iterate=function(a,s){for(var l=this.nodes,d=0,y=l.length-1;d<=y;d++){var p=l[s?y-d:d];if(p&&p.iterate(a,s)===!1)return!1}},kt.prototype.iterate=function(a,s){return a(this.entry)},e(Pn,V);function Pn(a,s,l){this._type=s,this._reverse=l,this._stack=a._root&&Ga(a._root)}Pn.prototype.next=function(){for(var a=this._type,s=this._stack;s;){var l=s.node,d=s.index++,y;if(l.entry){if(d===0)return Fn(a,l.entry)}else if(l.entries){if(y=l.entries.length-1,d<=y)return Fn(a,l.entries[this._reverse?y-d:d])}else if(y=l.nodes.length-1,d<=y){var p=l.nodes[this._reverse?y-d:d];if(p){if(p.entry)return Fn(a,p.entry);s=this._stack=Ga(p,s)}continue}s=this._stack=this._stack.__prev}return pe()};function Fn(a,s){return X(a,s[0],s[1])}function Ga(a,s){return{node:a,index:0,__prev:s}}function Bn(a,s,l,d){var y=Object.create(H);return y.size=a,y._root=s,y.__ownerID=l,y.__hash=d,y.__altered=!1,y}var Ha;function it(){return Ha||(Ha=Bn(0))}function Ya(a,s,l){var d,y;if(a._root){var p=oe(D),k=oe(te);if(d=$n(a._root,a.__ownerID,0,void 0,s,l,p,k),!k.value)return a;y=a.size+(p.value?l===B?-1:1:0)}else{if(l===B)return a;y=1,d=new _r(a.__ownerID,[[s,l]])}return a.__ownerID?(a.size=y,a._root=d,a.__hash=void 0,a.__altered=!0,a):d?Bn(y,d):it()}function $n(a,s,l,d,y,p,k,A){return a?a.update(s,l,d,y,p,k,A):p===B?a:(U(A),U(k),new kt(s,d,[y,p]))}function Za(a){return a.constructor===kt||a.constructor===qt}function In(a,s,l,d,y){if(a.keyHash===d)return new qt(s,d,[a.entry,y]);var p=(l===0?a.keyHash:a.keyHash>>>l)&M,k=(l===0?d:d>>>l)&M,A,T=p===k?[In(a,s,l+P,d,y)]:(A=new kt(s,d,y),p<k?[a,A]:[A,a]);return new Kt(s,1<<p|1<<k,T)}function Es(a,s,l,d){a||(a=new se);for(var y=new kt(a,We(l),[l,d]),p=0;p<s.length;p++){var k=s[p];y=y.update(a,0,void 0,k[0],k[1])}return y}function Ns(a,s,l,d){for(var y=0,p=0,k=new Array(l),A=0,T=1,b=s.length;A<b;A++,T<<=1){var N=s[A];N!==void 0&&A!==d&&(y|=T,k[p++]=N)}return new Kt(a,y,k)}function Ps(a,s,l,d,y){for(var p=0,k=new Array(L),A=0;l!==0;A++,l>>>=1)k[A]=l&1?s[p++]:void 0;return k[d]=y,new kr(a,p+1,k)}function Dr(a,s,l){for(var d=[],y=0;y<l.length;y++){var p=l[y],k=i(p);f(p)||(k=k.map(function(A){return yn(A)})),d.push(k)}return eo(a,s,d)}function Xa(a,s,l){return a&&a.mergeDeep&&f(s)?a.mergeDeep(s):Ne(a,s)?a:s}function Qa(a){return function(s,l,d){if(s&&s.mergeDeepWith&&f(l))return s.mergeDeepWith(a,l);var y=a(s,l,d);return Ne(s,y)?s:y}}function eo(a,s,l){return l=l.filter(function(d){return d.size!==0}),l.length===0?a:a.size===0&&!a.__ownerID&&l.length===1?a.constructor(l[0]):a.withMutations(function(d){for(var y=s?function(k,A){d.update(A,B,function(T){return T===B?k:s(T,k,A)})}:function(k,A){d.set(A,k)},p=0;p<l.length;p++)l[p].forEach(y)})}function to(a,s,l,d){var y=a===B,p=s.next();if(p.done){var k=y?l:a,A=d(k);return A===k?a:A}Lr(y||a&&a.set,"invalid keyPath");var T=p.value,b=y?B:a.get(T,B),N=to(b,s,l,d);return N===b?a:N===B?a.remove(T):(y?it():a).set(T,N)}function ro(a){return a=a-(a>>1&1431655765),a=(a&858993459)+(a>>2&858993459),a=a+(a>>4)&252645135,a=a+(a>>8),a=a+(a>>16),a&127}function no(a,s,l,d){var y=d?a:j(a);return y[s]=l,y}function Fs(a,s,l,d){var y=a.length+1;if(d&&s+1===y)return a[s]=l,a;for(var p=new Array(y),k=0,A=0;A<y;A++)A===s?(p[A]=l,k=-1):p[A]=a[A+k];return p}function Bs(a,s,l){var d=a.length-1;if(l&&s===d)return a.pop(),a;for(var y=new Array(d),p=0,k=0;k<d;k++)k===s&&(p=1),y[k]=a[k+p];return y}var $s=L/4,Is=L/2,Cs=L/4;e(me,jt);function me(a){var s=Cn();if(a==null)return s;if(ao(a))return a;var l=u(a),d=l.size;return d===0?s:(Ge(d),d>0&&d<L?Sr(0,d,P,null,new Tt(l.toArray())):s.withMutations(function(y){y.setSize(d),l.forEach(function(p,k){return y.set(k,p)})}))}me.of=function(){return this(arguments)},me.prototype.toString=function(){return this.__toString("List [","]")},me.prototype.get=function(a,s){if(a=ve(this,a),a>=0&&a<this.size){a+=this._origin;var l=uo(this,a);return l&&l.array[a&M]}return s},me.prototype.set=function(a,s){return Ms(this,a,s)},me.prototype.remove=function(a){return this.has(a)?a===0?this.shift():a===this.size-1?this.pop():this.splice(a,1):this},me.prototype.insert=function(a,s){return this.splice(a,0,s)},me.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=P,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Cn()},me.prototype.push=function(){var a=arguments,s=this.size;return this.withMutations(function(l){Ot(l,0,s+a.length);for(var d=0;d<a.length;d++)l.set(s+d,a[d])})},me.prototype.pop=function(){return Ot(this,0,-1)},me.prototype.unshift=function(){var a=arguments;return this.withMutations(function(s){Ot(s,-a.length);for(var l=0;l<a.length;l++)s.set(l,a[l])})},me.prototype.shift=function(){return Ot(this,1)},me.prototype.merge=function(){return jr(this,void 0,arguments)},me.prototype.mergeWith=function(a){var s=r.call(arguments,1);return jr(this,a,s)},me.prototype.mergeDeep=function(){return jr(this,Xa,arguments)},me.prototype.mergeDeepWith=function(a){var s=r.call(arguments,1);return jr(this,Qa(a),s)},me.prototype.setSize=function(a){return Ot(this,0,a)},me.prototype.slice=function(a,s){var l=this.size;return re(a,s,l)?this:Ot(this,Z(a,l),J(s,l))},me.prototype.__iterator=function(a,s){var l=0,d=io(this,s);return new V(function(){var y=d();return y===Ar?pe():X(a,l++,y)})},me.prototype.__iterate=function(a,s){for(var l=0,d=io(this,s),y;(y=d())!==Ar&&a(y,l++,this)!==!1;);return l},me.prototype.__ensureOwner=function(a){return a===this.__ownerID?this:a?Sr(this._origin,this._capacity,this._level,this._root,this._tail,a,this.__hash):(this.__ownerID=a,this)};function ao(a){return!!(a&&a[oo])}me.isList=ao;var oo="@@__IMMUTABLE_LIST__@@",Le=me.prototype;Le[oo]=!0,Le[F]=Le.remove,Le.setIn=H.setIn,Le.deleteIn=Le.removeIn=H.removeIn,Le.update=H.update,Le.updateIn=H.updateIn,Le.mergeIn=H.mergeIn,Le.mergeDeepIn=H.mergeDeepIn,Le.withMutations=H.withMutations,Le.asMutable=H.asMutable,Le.asImmutable=H.asImmutable,Le.wasAltered=H.wasAltered;function Tt(a,s){this.array=a,this.ownerID=s}Tt.prototype.removeBefore=function(a,s,l){if(l===s?1<<s:this.array.length===0)return this;var d=l>>>s&M;if(d>=this.array.length)return new Tt([],a);var y=d===0,p;if(s>0){var k=this.array[d];if(p=k&&k.removeBefore(a,s-P,l),p===k&&y)return this}if(y&&!p)return this;var A=Jt(this,a);if(!y)for(var T=0;T<d;T++)A.array[T]=void 0;return p&&(A.array[d]=p),A},Tt.prototype.removeAfter=function(a,s,l){if(l===(s?1<<s:0)||this.array.length===0)return this;var d=l-1>>>s&M;if(d>=this.array.length)return this;var y;if(s>0){var p=this.array[d];if(y=p&&p.removeAfter(a,s-P,l),y===p&&d===this.array.length-1)return this}var k=Jt(this,a);return k.array.splice(d+1),y&&(k.array[d]=y),k};var Ar={};function io(a,s){var l=a._origin,d=a._capacity,y=wr(d),p=a._tail;return k(a._root,a._level,0);function k(b,N,I){return N===0?A(b,I):T(b,N,I)}function A(b,N){var I=N===y?p&&p.array:b&&b.array,R=N>l?0:l-N,q=d-N;return q>L&&(q=L),function(){if(R===q)return Ar;var W=s?--q:R++;return I&&I[W]}}function T(b,N,I){var R,q=b&&b.array,W=I>l?0:l-I>>N,ke=(d-I>>N)+1;return ke>L&&(ke=L),function(){do{if(R){var st=R();if(st!==Ar)return st;R=null}if(W===ke)return Ar;var ht=s?--ke:W++;R=k(q&&q[ht],N-P,I+(ht<<N))}while(!0)}}}function Sr(a,s,l,d,y,p,k){var A=Object.create(Le);return A.size=s-a,A._origin=a,A._capacity=s,A._level=l,A._root=d,A._tail=y,A.__ownerID=p,A.__hash=k,A.__altered=!1,A}var so;function Cn(){return so||(so=Sr(0,0,P))}function Ms(a,s,l){if(s=ve(a,s),s!==s)return a;if(s>=a.size||s<0)return a.withMutations(function(k){s<0?Ot(k,s).set(0,l):Ot(k,0,s+1).set(s,l)});s+=a._origin;var d=a._tail,y=a._root,p=oe(te);return s>=wr(a._capacity)?d=Mn(d,a.__ownerID,0,s,l,p):y=Mn(y,a.__ownerID,a._level,s,l,p),p.value?a.__ownerID?(a._root=y,a._tail=d,a.__hash=void 0,a.__altered=!0,a):Sr(a._origin,a._capacity,a._level,y,d):a}function Mn(a,s,l,d,y,p){var k=d>>>l&M,A=a&&k<a.array.length;if(!A&&y===void 0)return a;var T;if(l>0){var b=a&&a.array[k],N=Mn(b,s,l-P,d,y,p);return N===b?a:(T=Jt(a,s),T.array[k]=N,T)}return A&&a.array[k]===y?a:(U(p),T=Jt(a,s),y===void 0&&k===T.array.length-1?T.array.pop():T.array[k]=y,T)}function Jt(a,s){return s&&a&&s===a.ownerID?a:new Tt(a?a.array.slice():[],s)}function uo(a,s){if(s>=wr(a._capacity))return a._tail;if(s<1<<a._level+P){for(var l=a._root,d=a._level;l&&d>0;)l=l.array[s>>>d&M],d-=P;return l}}function Ot(a,s,l){s!==void 0&&(s=s|0),l!==void 0&&(l=l|0);var d=a.__ownerID||new se,y=a._origin,p=a._capacity,k=y+s,A=l===void 0?p:l<0?p+l:y+l;if(k===y&&A===p)return a;if(k>=A)return a.clear();for(var T=a._level,b=a._root,N=0;k+N<0;)b=new Tt(b&&b.array.length?[void 0,b]:[],d),T+=P,N+=1<<T;N&&(k+=N,y+=N,A+=N,p+=N);for(var I=wr(p),R=wr(A);R>=1<<T+P;)b=new Tt(b&&b.array.length?[b]:[],d),T+=P;var q=a._tail,W=R<I?uo(a,A-1):R>I?new Tt([],d):q;if(q&&R>I&&k<p&&q.array.length){b=Jt(b,d);for(var ke=b,st=T;st>P;st-=P){var ht=I>>>st&M;ke=ke.array[ht]=Jt(ke.array[ht],d)}ke.array[I>>>P&M]=q}if(A<p&&(W=W&&W.removeAfter(d,0,A)),k>=R)k-=R,A-=R,T=P,b=null,W=W&&W.removeBefore(d,0,k);else if(k>y||R<I){for(N=0;b;){var Gr=k>>>T&M;if(Gr!==R>>>T&M)break;Gr&&(N+=(1<<T)*Gr),T-=P,b=b.array[Gr]}b&&k>y&&(b=b.removeBefore(d,T,k-N)),b&&R<I&&(b=b.removeAfter(d,T,R-N)),N&&(k-=N,A-=N)}return a.__ownerID?(a.size=A-k,a._origin=k,a._capacity=A,a._level=T,a._root=b,a._tail=W,a.__hash=void 0,a.__altered=!0,a):Sr(k,A,T,b,W)}function jr(a,s,l){for(var d=[],y=0,p=0;p<l.length;p++){var k=l[p],A=u(k);A.size>y&&(y=A.size),f(k)||(A=A.map(function(T){return yn(T)})),d.push(A)}return y>a.size&&(a=a.setSize(y)),eo(a,s,d)}function wr(a){return a<L?0:a-1>>>P<<P}e(xe,Q);function xe(a){return a==null?Kr():co(a)?a:Kr().withMutations(function(s){var l=i(a);Ge(l.size),l.forEach(function(d,y){return s.set(y,d)})})}xe.of=function(){return this(arguments)},xe.prototype.toString=function(){return this.__toString("OrderedMap {","}")},xe.prototype.get=function(a,s){var l=this._map.get(a);return l!==void 0?this._list.get(l)[1]:s},xe.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Kr()},xe.prototype.set=function(a,s){return lo(this,a,s)},xe.prototype.remove=function(a){return lo(this,a,B)},xe.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},xe.prototype.__iterate=function(a,s){var l=this;return this._list.__iterate(function(d){return d&&a(d[1],d[0],l)},s)},xe.prototype.__iterator=function(a,s){return this._list.fromEntrySeq().__iterator(a,s)},xe.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var s=this._map.__ensureOwner(a),l=this._list.__ensureOwner(a);return a?Rn(s,l,a,this.__hash):(this.__ownerID=a,this._map=s,this._list=l,this)};function co(a){return Nn(a)&&g(a)}xe.isOrderedMap=co,xe.prototype[O]=!0,xe.prototype[F]=xe.prototype.remove;function Rn(a,s,l,d){var y=Object.create(xe.prototype);return y.size=a?a.size:0,y._map=a,y._list=s,y.__ownerID=l,y.__hash=d,y}var fo;function Kr(){return fo||(fo=Rn(it(),Cn()))}function lo(a,s,l){var d=a._map,y=a._list,p=d.get(s),k=p!==void 0,A,T;if(l===B){if(!k)return a;y.size>=L&&y.size>=d.size*2?(T=y.filter(function(b,N){return b!==void 0&&p!==N}),A=T.toKeyedSeq().map(function(b){return b[0]}).flip().toMap(),a.__ownerID&&(A.__ownerID=T.__ownerID=a.__ownerID)):(A=d.remove(s),T=p===y.size-1?y.pop():y.set(p,void 0))}else if(k){if(l===y.get(p)[1])return a;A=d,T=y.set(p,[s,l])}else A=d.set(s,y.size),T=y.set(y.size,[s,l]);return a.__ownerID?(a.size=A.size,a._map=A,a._list=T,a.__hash=void 0,a):Rn(A,T)}e(tt,$e);function tt(a,s){this._iter=a,this._useKeys=s,this.size=a.size}tt.prototype.get=function(a,s){return this._iter.get(a,s)},tt.prototype.has=function(a){return this._iter.has(a)},tt.prototype.valueSeq=function(){return this._iter.valueSeq()},tt.prototype.reverse=function(){var a=this,s=Ln(this,!0);return this._useKeys||(s.valueSeq=function(){return a._iter.toSeq().reverse()}),s},tt.prototype.map=function(a,s){var l=this,d=ho(this,a,s);return this._useKeys||(d.valueSeq=function(){return l._iter.toSeq().map(a,s)}),d},tt.prototype.__iterate=function(a,s){var l=this,d;return this._iter.__iterate(this._useKeys?function(y,p){return a(y,p,l)}:(d=s?ko(this):0,function(y){return a(y,s?--d:d++,l)}),s)},tt.prototype.__iterator=function(a,s){if(this._useKeys)return this._iter.__iterator(a,s);var l=this._iter.__iterator(Te,s),d=s?ko(this):0;return new V(function(){var y=l.next();return y.done?y:X(a,s?--d:d++,y.value,y)})},tt.prototype[O]=!0,e(Ut,ne);function Ut(a){this._iter=a,this.size=a.size}Ut.prototype.includes=function(a){return this._iter.includes(a)},Ut.prototype.__iterate=function(a,s){var l=this,d=0;return this._iter.__iterate(function(y){return a(y,d++,l)},s)},Ut.prototype.__iterator=function(a,s){var l=this._iter.__iterator(Te,s),d=0;return new V(function(){var y=l.next();return y.done?y:X(a,d++,y.value,y)})},e(Vt,Ve);function Vt(a){this._iter=a,this.size=a.size}Vt.prototype.has=function(a){return this._iter.includes(a)},Vt.prototype.__iterate=function(a,s){var l=this;return this._iter.__iterate(function(d){return a(d,d,l)},s)},Vt.prototype.__iterator=function(a,s){var l=this._iter.__iterator(Te,s);return new V(function(){var d=l.next();return d.done?d:X(a,d.value,d.value,d)})},e(Wt,$e);function Wt(a){this._iter=a,this.size=a.size}Wt.prototype.entrySeq=function(){return this._iter.toSeq()},Wt.prototype.__iterate=function(a,s){var l=this;return this._iter.__iterate(function(d){if(d){_o(d);var y=f(d);return a(y?d.get(1):d[1],y?d.get(0):d[0],l)}},s)},Wt.prototype.__iterator=function(a,s){var l=this._iter.__iterator(Te,s);return new V(function(){for(;;){var d=l.next();if(d.done)return d;var y=d.value;if(y){_o(y);var p=f(y);return X(a,p?y.get(0):y[0],p?y.get(1):y[1],d)}}})},Ut.prototype.cacheResult=tt.prototype.cacheResult=Vt.prototype.cacheResult=Wt.prototype.cacheResult=jn;function vo(a){var s=lt(a);return s._iter=a,s.size=a.size,s.flip=function(){return a},s.reverse=function(){var l=a.reverse.apply(this);return l.flip=function(){return a.reverse()},l},s.has=function(l){return a.includes(l)},s.includes=function(l){return a.has(l)},s.cacheResult=jn,s.__iterateUncached=function(l,d){var y=this;return a.__iterate(function(p,k){return l(k,p,y)!==!1},d)},s.__iteratorUncached=function(l,d){if(l===Be){var y=a.__iterator(l,d);return new V(function(){var p=y.next();if(!p.done){var k=p.value[0];p.value[0]=p.value[1],p.value[1]=k}return p})}return a.__iterator(l===Te?Je:Te,d)},s}function ho(a,s,l){var d=lt(a);return d.size=a.size,d.has=function(y){return a.has(y)},d.get=function(y,p){var k=a.get(y,B);return k===B?p:s.call(l,k,y,a)},d.__iterateUncached=function(y,p){var k=this;return a.__iterate(function(A,T,b){return y(s.call(l,A,T,b),T,k)!==!1},p)},d.__iteratorUncached=function(y,p){var k=a.__iterator(Be,p);return new V(function(){var A=k.next();if(A.done)return A;var T=A.value,b=T[0];return X(y,b,s.call(l,T[1],b,a),A)})},d}function Ln(a,s){var l=lt(a);return l._iter=a,l.size=a.size,l.reverse=function(){return a},a.flip&&(l.flip=function(){var d=vo(a);return d.reverse=function(){return a.flip()},d}),l.get=function(d,y){return a.get(s?d:-1-d,y)},l.has=function(d){return a.has(s?d:-1-d)},l.includes=function(d){return a.includes(d)},l.cacheResult=jn,l.__iterate=function(d,y){var p=this;return a.__iterate(function(k,A){return d(k,A,p)},!y)},l.__iterator=function(d,y){return a.__iterator(d,!y)},l}function mo(a,s,l,d){var y=lt(a);return d&&(y.has=function(p){var k=a.get(p,B);return k!==B&&!!s.call(l,k,p,a)},y.get=function(p,k){var A=a.get(p,B);return A!==B&&s.call(l,A,p,a)?A:k}),y.__iterateUncached=function(p,k){var A=this,T=0;return a.__iterate(function(b,N,I){if(s.call(l,b,N,I))return T++,p(b,d?N:T-1,A)},k),T},y.__iteratorUncached=function(p,k){var A=a.__iterator(Be,k),T=0;return new V(function(){for(;;){var b=A.next();if(b.done)return b;var N=b.value,I=N[0],R=N[1];if(s.call(l,R,I,a))return X(p,d?I:T++,R,b)}})},y}function Rs(a,s,l){var d=Q().asMutable();return a.__iterate(function(y,p){d.update(s.call(l,y,p,a),0,function(k){return k+1})}),d.asImmutable()}function Ls(a,s,l){var d=v(a),y=(g(a)?xe():Q()).asMutable();a.__iterate(function(k,A){y.update(s.call(l,k,A,a),function(T){return T=T||[],T.push(d?[A,k]:k),T})});var p=Ao(a);return y.map(function(k){return fe(a,p(k))})}function zn(a,s,l,d){var y=a.size;if(s!==void 0&&(s=s|0),l!==void 0&&(l===1/0?l=y:l=l|0),re(s,l,y))return a;var p=Z(s,y),k=J(l,y);if(p!==p||k!==k)return zn(a.toSeq().cacheResult(),s,l,d);var A=k-p,T;A===A&&(T=A<0?0:A);var b=lt(a);return b.size=T===0?T:a.size&&T||void 0,!d&&yr(a)&&T>=0&&(b.get=function(N,I){return N=ve(this,N),N>=0&&N<T?a.get(N+p,I):I}),b.__iterateUncached=function(N,I){var R=this;if(T===0)return 0;if(I)return this.cacheResult().__iterate(N,I);var q=0,W=!0,ke=0;return a.__iterate(function(st,ht){if(!(W&&(W=q++<p)))return ke++,N(st,d?ht:ke-1,R)!==!1&&ke!==T}),ke},b.__iteratorUncached=function(N,I){if(T!==0&&I)return this.cacheResult().__iterator(N,I);var R=T!==0&&a.__iterator(N,I),q=0,W=0;return new V(function(){for(;q++<p;)R.next();if(++W>T)return pe();var ke=R.next();return d||N===Te?ke:N===Je?X(N,W-1,void 0,ke):X(N,W-1,ke.value[1],ke)})},b}function zs(a,s,l){var d=lt(a);return d.__iterateUncached=function(y,p){var k=this;if(p)return this.cacheResult().__iterate(y,p);var A=0;return a.__iterate(function(T,b,N){return s.call(l,T,b,N)&&++A&&y(T,b,k)}),A},d.__iteratorUncached=function(y,p){var k=this;if(p)return this.cacheResult().__iterator(y,p);var A=a.__iterator(Be,p),T=!0;return new V(function(){if(!T)return pe();var b=A.next();if(b.done)return b;var N=b.value,I=N[0],R=N[1];return s.call(l,R,I,k)?y===Be?b:X(y,I,R,b):(T=!1,pe())})},d}function yo(a,s,l,d){var y=lt(a);return y.__iterateUncached=function(p,k){var A=this;if(k)return this.cacheResult().__iterate(p,k);var T=!0,b=0;return a.__iterate(function(N,I,R){if(!(T&&(T=s.call(l,N,I,R))))return b++,p(N,d?I:b-1,A)}),b},y.__iteratorUncached=function(p,k){var A=this;if(k)return this.cacheResult().__iterator(p,k);var T=a.__iterator(Be,k),b=!0,N=0;return new V(function(){var I,R,q;do{if(I=T.next(),I.done)return d||p===Te?I:p===Je?X(p,N++,void 0,I):X(p,N++,I.value[1],I);var W=I.value;R=W[0],q=W[1],b&&(b=s.call(l,q,R,A))}while(b);return p===Be?I:X(p,R,q,I)})},y}function Ds(a,s){var l=v(a),d=[a].concat(s).map(function(k){return f(k)?l&&(k=i(k)):k=l?Ir(k):Ft(Array.isArray(k)?k:[k]),k}).filter(function(k){return k.size!==0});if(d.length===0)return a;if(d.length===1){var y=d[0];if(y===a||l&&v(y)||h(a)&&h(y))return y}var p=new et(d);return l?p=p.toKeyedSeq():h(a)||(p=p.toSetSeq()),p=p.flatten(!0),p.size=d.reduce(function(k,A){if(k!==void 0){var T=A.size;if(T!==void 0)return k+T}},0),p}function go(a,s,l){var d=lt(a);return d.__iterateUncached=function(y,p){var k=0,A=!1;function T(b,N){var I=this;b.__iterate(function(R,q){return(!s||N<s)&&f(R)?T(R,N+1):y(R,l?q:k++,I)===!1&&(A=!0),!A},p)}return T(a,0),k},d.__iteratorUncached=function(y,p){var k=a.__iterator(y,p),A=[],T=0;return new V(function(){for(;k;){var b=k.next();if(b.done!==!1){k=A.pop();continue}var N=b.value;if(y===Be&&(N=N[1]),(!s||A.length<s)&&f(N))A.push(k),k=N.__iterator(y,p);else return l?b:X(y,T++,N,b)}return pe()})},d}function js(a,s,l){var d=Ao(a);return a.toSeq().map(function(y,p){return d(s.call(l,y,p,a))}).flatten(!0)}function Ks(a,s){var l=lt(a);return l.size=a.size&&a.size*2-1,l.__iterateUncached=function(d,y){var p=this,k=0;return a.__iterate(function(A,T){return(!k||d(s,k++,p)!==!1)&&d(A,k++,p)!==!1},y),k},l.__iteratorUncached=function(d,y){var p=a.__iterator(Te,y),k=0,A;return new V(function(){return(!A||k%2)&&(A=p.next(),A.done)?A:k%2?X(d,k++,s):X(d,k++,A.value,A)})},l}function Gt(a,s,l){s||(s=So);var d=v(a),y=0,p=a.toSeq().map(function(k,A){return[A,k,y++,l?l(k,A,a):k]}).toArray();return p.sort(function(k,A){return s(k[3],A[3])||k[2]-A[2]}).forEach(d?function(k,A){p[A].length=2}:function(k,A){p[A]=k[1]}),d?$e(p):h(a)?ne(p):Ve(p)}function qr(a,s,l){if(s||(s=So),l){var d=a.toSeq().map(function(y,p){return[y,l(y,p,a)]}).reduce(function(y,p){return po(s,y[1],p[1])?p:y});return d&&d[0]}else return a.reduce(function(y,p){return po(s,y,p)?p:y})}function po(a,s,l){var d=a(l,s);return d===0&&l!==s&&(l==null||l!==l)||d>0}function Dn(a,s,l){var d=lt(a);return d.size=new et(l).map(function(y){return y.size}).min(),d.__iterate=function(y,p){for(var k=this.__iterator(Te,p),A,T=0;!(A=k.next()).done&&y(A.value,T++,this)!==!1;);return T},d.__iteratorUncached=function(y,p){var k=l.map(function(b){return b=o(b),ot(p?b.reverse():b)}),A=0,T=!1;return new V(function(){var b;return T||(b=k.map(function(N){return N.next()}),T=b.some(function(N){return N.done})),T?pe():X(y,A++,s.apply(null,b.map(function(N){return N.value})))})},d}function fe(a,s){return yr(a)?s:a.constructor(s)}function _o(a){if(a!==Object(a))throw new TypeError("Expected [K, V] tuple: "+a)}function ko(a){return Ge(a.size),ue(a)}function Ao(a){return v(a)?i:h(a)?u:c}function lt(a){return Object.create((v(a)?$e:h(a)?ne:Ve).prototype)}function jn(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Se.prototype.cacheResult.call(this)}function So(a,s){return a>s?1:a<s?-1:0}function wo(a){var s=ot(a);if(!s){if(!zt(a))throw new TypeError("Expected iterable or array-like: "+a);s=ot(o(a))}return s}e(He,gr);function He(a,s){var l,d=function(k){if(k instanceof d)return k;if(!(this instanceof d))return new d(k);if(!l){l=!0;var A=Object.keys(a);qs(y,A),y.size=A.length,y._name=s,y._keys=A,y._defaultValues=a}this._map=Q(k)},y=d.prototype=Object.create(Ce);return y.constructor=d,d}He.prototype.toString=function(){return this.__toString(To(this)+" {","}")},He.prototype.has=function(a){return this._defaultValues.hasOwnProperty(a)},He.prototype.get=function(a,s){if(!this.has(a))return s;var l=this._defaultValues[a];return this._map?this._map.get(a,l):l},He.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var a=this.constructor;return a._empty||(a._empty=Jr(this,it()))},He.prototype.set=function(a,s){if(!this.has(a))throw new Error('Cannot set unknown key "'+a+'" on '+To(this));if(this._map&&!this._map.has(a)){var l=this._defaultValues[a];if(s===l)return this}var d=this._map&&this._map.set(a,s);return this.__ownerID||d===this._map?this:Jr(this,d)},He.prototype.remove=function(a){if(!this.has(a))return this;var s=this._map&&this._map.remove(a);return this.__ownerID||s===this._map?this:Jr(this,s)},He.prototype.wasAltered=function(){return this._map.wasAltered()},He.prototype.__iterator=function(a,s){var l=this;return i(this._defaultValues).map(function(d,y){return l.get(y)}).__iterator(a,s)},He.prototype.__iterate=function(a,s){var l=this;return i(this._defaultValues).map(function(d,y){return l.get(y)}).__iterate(a,s)},He.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var s=this._map&&this._map.__ensureOwner(a);return a?Jr(this,s,a):(this.__ownerID=a,this._map=s,this)};var Ce=He.prototype;Ce[F]=Ce.remove,Ce.deleteIn=Ce.removeIn=H.removeIn,Ce.merge=H.merge,Ce.mergeWith=H.mergeWith,Ce.mergeIn=H.mergeIn,Ce.mergeDeep=H.mergeDeep,Ce.mergeDeepWith=H.mergeDeepWith,Ce.mergeDeepIn=H.mergeDeepIn,Ce.setIn=H.setIn,Ce.update=H.update,Ce.updateIn=H.updateIn,Ce.withMutations=H.withMutations,Ce.asMutable=H.asMutable,Ce.asImmutable=H.asImmutable;function Jr(a,s,l){var d=Object.create(Object.getPrototypeOf(a));return d._map=s,d.__ownerID=l,d}function To(a){return a._name||a.constructor.name||"Record"}function qs(a,s){try{s.forEach(Js.bind(void 0,a))}catch{}}function Js(a,s){Object.defineProperty(a,s,{get:function(){return this.get(s)},set:function(l){Lr(this.__ownerID,"Cannot set on an immutable record."),this.set(s,l)}})}e(_e,zr);function _e(a){return a==null?Jn():Kn(a)&&!g(a)?a:Jn().withMutations(function(s){var l=c(a);Ge(l.size),l.forEach(function(d){return s.add(d)})})}_e.of=function(){return this(arguments)},_e.fromKeys=function(a){return this(i(a).keySeq())},_e.prototype.toString=function(){return this.__toString("Set {","}")},_e.prototype.has=function(a){return this._map.has(a)},_e.prototype.add=function(a){return qn(this,this._map.set(a,!0))},_e.prototype.remove=function(a){return qn(this,this._map.remove(a))},_e.prototype.clear=function(){return qn(this,this._map.clear())},_e.prototype.union=function(){var a=r.call(arguments,0);return a=a.filter(function(s){return s.size!==0}),a.length===0?this:this.size===0&&!this.__ownerID&&a.length===1?this.constructor(a[0]):this.withMutations(function(s){for(var l=0;l<a.length;l++)c(a[l]).forEach(function(d){return s.add(d)})})},_e.prototype.intersect=function(){var a=r.call(arguments,0);if(a.length===0)return this;a=a.map(function(l){return c(l)});var s=this;return this.withMutations(function(l){s.forEach(function(d){a.every(function(y){return y.includes(d)})||l.remove(d)})})},_e.prototype.subtract=function(){var a=r.call(arguments,0);if(a.length===0)return this;a=a.map(function(l){return c(l)});var s=this;return this.withMutations(function(l){s.forEach(function(d){a.some(function(y){return y.includes(d)})&&l.remove(d)})})},_e.prototype.merge=function(){return this.union.apply(this,arguments)},_e.prototype.mergeWith=function(a){var s=r.call(arguments,1);return this.union.apply(this,s)},_e.prototype.sort=function(a){return vt(Gt(this,a))},_e.prototype.sortBy=function(a,s){return vt(Gt(this,s,a))},_e.prototype.wasAltered=function(){return this._map.wasAltered()},_e.prototype.__iterate=function(a,s){var l=this;return this._map.__iterate(function(d,y){return a(y,y,l)},s)},_e.prototype.__iterator=function(a,s){return this._map.map(function(l,d){return d}).__iterator(a,s)},_e.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var s=this._map.__ensureOwner(a);return a?this.__make(s,a):(this.__ownerID=a,this._map=s,this)};function Kn(a){return!!(a&&a[Oo])}_e.isSet=Kn;var Oo="@@__IMMUTABLE_SET__@@",Ye=_e.prototype;Ye[Oo]=!0,Ye[F]=Ye.remove,Ye.mergeDeep=Ye.merge,Ye.mergeDeepWith=Ye.mergeWith,Ye.withMutations=H.withMutations,Ye.asMutable=H.asMutable,Ye.asImmutable=H.asImmutable,Ye.__empty=Jn,Ye.__make=bo;function qn(a,s){return a.__ownerID?(a.size=s.size,a._map=s,a):s===a._map?a:s.size===0?a.__empty():a.__make(s)}function bo(a,s){var l=Object.create(Ye);return l.size=a?a.size:0,l._map=a,l.__ownerID=s,l}var xo;function Jn(){return xo||(xo=bo(it()))}e(vt,_e);function vt(a){return a==null?Un():Eo(a)?a:Un().withMutations(function(s){var l=c(a);Ge(l.size),l.forEach(function(d){return s.add(d)})})}vt.of=function(){return this(arguments)},vt.fromKeys=function(a){return this(i(a).keySeq())},vt.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function Eo(a){return Kn(a)&&g(a)}vt.isOrderedSet=Eo;var Ur=vt.prototype;Ur[O]=!0,Ur.__empty=Un,Ur.__make=No;function No(a,s){var l=Object.create(Ur);return l.size=a?a.size:0,l._map=a,l.__ownerID=s,l}var Po;function Un(){return Po||(Po=No(Kr()))}e(Pe,jt);function Pe(a){return a==null?Vn():Fo(a)?a:Vn().unshiftAll(a)}Pe.of=function(){return this(arguments)},Pe.prototype.toString=function(){return this.__toString("Stack [","]")},Pe.prototype.get=function(a,s){var l=this._head;for(a=ve(this,a);l&&a--;)l=l.next;return l?l.value:s},Pe.prototype.peek=function(){return this._head&&this._head.value},Pe.prototype.push=function(){if(arguments.length===0)return this;for(var a=this.size+arguments.length,s=this._head,l=arguments.length-1;l>=0;l--)s={value:arguments[l],next:s};return this.__ownerID?(this.size=a,this._head=s,this.__hash=void 0,this.__altered=!0,this):Tr(a,s)},Pe.prototype.pushAll=function(a){if(a=u(a),a.size===0)return this;Ge(a.size);var s=this.size,l=this._head;return a.reverse().forEach(function(d){s++,l={value:d,next:l}}),this.__ownerID?(this.size=s,this._head=l,this.__hash=void 0,this.__altered=!0,this):Tr(s,l)},Pe.prototype.pop=function(){return this.slice(1)},Pe.prototype.unshift=function(){return this.push.apply(this,arguments)},Pe.prototype.unshiftAll=function(a){return this.pushAll(a)},Pe.prototype.shift=function(){return this.pop.apply(this,arguments)},Pe.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Vn()},Pe.prototype.slice=function(a,s){if(re(a,s,this.size))return this;var l=Z(a,this.size),d=J(s,this.size);if(d!==this.size)return jt.prototype.slice.call(this,a,s);for(var y=this.size-l,p=this._head;l--;)p=p.next;return this.__ownerID?(this.size=y,this._head=p,this.__hash=void 0,this.__altered=!0,this):Tr(y,p)},Pe.prototype.__ensureOwner=function(a){return a===this.__ownerID?this:a?Tr(this.size,this._head,a,this.__hash):(this.__ownerID=a,this.__altered=!1,this)},Pe.prototype.__iterate=function(a,s){if(s)return this.reverse().__iterate(a);for(var l=0,d=this._head;d&&a(d.value,l++,this)!==!1;)d=d.next;return l},Pe.prototype.__iterator=function(a,s){if(s)return this.reverse().__iterator(a);var l=0,d=this._head;return new V(function(){if(d){var y=d.value;return d=d.next,X(a,l++,y)}return pe()})};function Fo(a){return!!(a&&a[Bo])}Pe.isStack=Fo;var Bo="@@__IMMUTABLE_STACK__@@",Ht=Pe.prototype;Ht[Bo]=!0,Ht.withMutations=H.withMutations,Ht.asMutable=H.asMutable,Ht.asImmutable=H.asImmutable,Ht.wasAltered=H.wasAltered;function Tr(a,s,l,d){var y=Object.create(Ht);return y.size=a,y._head=s,y.__ownerID=l,y.__hash=d,y.__altered=!1,y}var $o;function Vn(){return $o||($o=Tr(0))}function dt(a,s){var l=function(d){a.prototype[d]=s[d]};return Object.keys(s).forEach(l),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(s).forEach(l),a}o.Iterator=V,dt(o,{toArray:function(){Ge(this.size);var a=new Array(this.size||0);return this.valueSeq().__iterate(function(s,l){a[l]=s}),a},toIndexedSeq:function(){return new Ut(this)},toJS:function(){return this.toSeq().map(function(a){return a&&typeof a.toJS=="function"?a.toJS():a}).__toJS()},toJSON:function(){return this.toSeq().map(function(a){return a&&typeof a.toJSON=="function"?a.toJSON():a}).__toJS()},toKeyedSeq:function(){return new tt(this,!0)},toMap:function(){return Q(this.toKeyedSeq())},toObject:function(){Ge(this.size);var a={};return this.__iterate(function(s,l){a[l]=s}),a},toOrderedMap:function(){return xe(this.toKeyedSeq())},toOrderedSet:function(){return vt(v(this)?this.valueSeq():this)},toSet:function(){return _e(v(this)?this.valueSeq():this)},toSetSeq:function(){return new Vt(this)},toSeq:function(){return h(this)?this.toIndexedSeq():v(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Pe(v(this)?this.valueSeq():this)},toList:function(){return me(v(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(a,s){return this.size===0?a+s:a+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+s},concat:function(){var a=r.call(arguments,0);return fe(this,Ds(this,a))},includes:function(a){return this.some(function(s){return Ne(s,a)})},entries:function(){return this.__iterator(Be)},every:function(a,s){Ge(this.size);var l=!0;return this.__iterate(function(d,y,p){if(!a.call(s,d,y,p))return l=!1,!1}),l},filter:function(a,s){return fe(this,mo(this,a,s,!0))},find:function(a,s,l){var d=this.findEntry(a,s);return d?d[1]:l},forEach:function(a,s){return Ge(this.size),this.__iterate(s?a.bind(s):a)},join:function(a){Ge(this.size),a=a!==void 0?""+a:",";var s="",l=!0;return this.__iterate(function(d){l?l=!1:s+=a,s+=d!=null?d.toString():""}),s},keys:function(){return this.__iterator(Je)},map:function(a,s){return fe(this,ho(this,a,s))},reduce:function(a,s,l){Ge(this.size);var d,y;return arguments.length<2?y=!0:d=s,this.__iterate(function(p,k,A){y?(y=!1,d=p):d=a.call(l,d,p,k,A)}),d},reduceRight:function(a,s,l){var d=this.toKeyedSeq().reverse();return d.reduce.apply(d,arguments)},reverse:function(){return fe(this,Ln(this,!0))},slice:function(a,s){return fe(this,zn(this,a,s,!0))},some:function(a,s){return!this.every(Wr(a),s)},sort:function(a){return fe(this,Gt(this,a))},values:function(){return this.__iterator(Te)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(a,s){return ue(a?this.toSeq().filter(a,s):this)},countBy:function(a,s){return Rs(this,a,s)},equals:function(a){return _n(this,a)},entrySeq:function(){var a=this;if(a._cache)return new et(a._cache);var s=a.toSeq().map(Vs).toIndexedSeq();return s.fromEntrySeq=function(){return a.toSeq()},s},filterNot:function(a,s){return this.filter(Wr(a),s)},findEntry:function(a,s,l){var d=l;return this.__iterate(function(y,p,k){if(a.call(s,y,p,k))return d=[p,y],!1}),d},findKey:function(a,s){var l=this.findEntry(a,s);return l&&l[0]},findLast:function(a,s,l){return this.toKeyedSeq().reverse().find(a,s,l)},findLastEntry:function(a,s,l){return this.toKeyedSeq().reverse().findEntry(a,s,l)},findLastKey:function(a,s){return this.toKeyedSeq().reverse().findKey(a,s)},first:function(){return this.find(Y)},flatMap:function(a,s){return fe(this,js(this,a,s))},flatten:function(a){return fe(this,go(this,a,!0))},fromEntrySeq:function(){return new Wt(this)},get:function(a,s){return this.find(function(l,d){return Ne(d,a)},void 0,s)},getIn:function(a,s){for(var l=this,d=wo(a),y;!(y=d.next()).done;){var p=y.value;if(l=l&&l.get?l.get(p,B):B,l===B)return s}return l},groupBy:function(a,s){return Ls(this,a,s)},has:function(a){return this.get(a,B)!==B},hasIn:function(a){return this.getIn(a,B)!==B},isSubset:function(a){return a=typeof a.includes=="function"?a:o(a),this.every(function(s){return a.includes(s)})},isSuperset:function(a){return a=typeof a.isSubset=="function"?a:o(a),a.isSubset(this)},keyOf:function(a){return this.findKey(function(s){return Ne(s,a)})},keySeq:function(){return this.toSeq().map(Us).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(a){return this.toKeyedSeq().reverse().keyOf(a)},max:function(a){return qr(this,a)},maxBy:function(a,s){return qr(this,s,a)},min:function(a){return qr(this,a?Io(a):Mo)},minBy:function(a,s){return qr(this,s?Io(s):Mo,a)},rest:function(){return this.slice(1)},skip:function(a){return this.slice(Math.max(0,a))},skipLast:function(a){return fe(this,this.toSeq().reverse().skip(a).reverse())},skipWhile:function(a,s){return fe(this,yo(this,a,s,!0))},skipUntil:function(a,s){return this.skipWhile(Wr(a),s)},sortBy:function(a,s){return fe(this,Gt(this,s,a))},take:function(a){return this.slice(0,Math.max(0,a))},takeLast:function(a){return fe(this,this.toSeq().reverse().take(a).reverse())},takeWhile:function(a,s){return fe(this,zs(this,a,s))},takeUntil:function(a,s){return this.takeWhile(Wr(a),s)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Gs(this))}});var ze=o.prototype;ze[_]=!0,ze[Ue]=ze.values,ze.__toJS=ze.toArray,ze.__toStringMapper=Co,ze.inspect=ze.toSource=function(){return this.toString()},ze.chain=ze.flatMap,ze.contains=ze.includes,dt(i,{flip:function(){return fe(this,vo(this))},mapEntries:function(a,s){var l=this,d=0;return fe(this,this.toSeq().map(function(y,p){return a.call(s,[p,y],d++,l)}).fromEntrySeq())},mapKeys:function(a,s){var l=this;return fe(this,this.toSeq().flip().map(function(d,y){return a.call(s,d,y,l)}).flip())}});var Vr=i.prototype;Vr[w]=!0,Vr[Ue]=ze.entries,Vr.__toJS=ze.toObject,Vr.__toStringMapper=function(a,s){return JSON.stringify(s)+": "+Co(a)},dt(u,{toKeyedSeq:function(){return new tt(this,!1)},filter:function(a,s){return fe(this,mo(this,a,s,!1))},findIndex:function(a,s){var l=this.findEntry(a,s);return l?l[0]:-1},indexOf:function(a){var s=this.keyOf(a);return s===void 0?-1:s},lastIndexOf:function(a){var s=this.lastKeyOf(a);return s===void 0?-1:s},reverse:function(){return fe(this,Ln(this,!1))},slice:function(a,s){return fe(this,zn(this,a,s,!1))},splice:function(a,s){var l=arguments.length;if(s=Math.max(s|0,0),l===0||l===2&&!s)return this;a=Z(a,a<0?this.count():this.size);var d=this.slice(0,a);return fe(this,l===1?d:d.concat(j(arguments,2),this.slice(a+s)))},findLastIndex:function(a,s){var l=this.findLastEntry(a,s);return l?l[0]:-1},first:function(){return this.get(0)},flatten:function(a){return fe(this,go(this,a,!1))},get:function(a,s){return a=ve(this,a),a<0||this.size===1/0||this.size!==void 0&&a>this.size?s:this.find(function(l,d){return d===a},void 0,s)},has:function(a){return a=ve(this,a),a>=0&&(this.size!==void 0?this.size===1/0||a<this.size:this.indexOf(a)!==-1)},interpose:function(a){return fe(this,Ks(this,a))},interleave:function(){var a=[this].concat(j(arguments)),s=Dn(this.toSeq(),ne.of,a),l=s.flatten(!0);return s.size&&(l.size=s.size*a.length),fe(this,l)},keySeq:function(){return Ie(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(a,s){return fe(this,yo(this,a,s,!1))},zip:function(){var a=[this].concat(j(arguments));return fe(this,Dn(this,Ws,a))},zipWith:function(a){var s=j(arguments);return s[0]=this,fe(this,Dn(this,a,s))}}),u.prototype[x]=!0,u.prototype[O]=!0,dt(c,{get:function(a,s){return this.has(a)?a:s},includes:function(a){return this.has(a)},keySeq:function(){return this.valueSeq()}}),c.prototype.has=ze.includes,c.prototype.contains=c.prototype.includes,dt($e,i.prototype),dt(ne,u.prototype),dt(Ve,c.prototype),dt(gr,i.prototype),dt(jt,u.prototype),dt(zr,c.prototype);function Us(a,s){return s}function Vs(a,s){return[s,a]}function Wr(a){return function(){return!a.apply(this,arguments)}}function Io(a){return function(){return-a.apply(this,arguments)}}function Co(a){return typeof a=="string"?JSON.stringify(a):String(a)}function Ws(){return j(arguments)}function Mo(a,s){return a<s?1:a>s?-1:0}function Gs(a){if(a.size===1/0)return 0;var s=g(a),l=v(a),d=s?1:0,y=a.__iterate(l?s?function(p,k){d=31*d+Ro(We(p),We(k))|0}:function(p,k){d=d+Ro(We(p),We(k))|0}:s?function(p){d=31*d+We(p)|0}:function(p){d=d+We(p)|0});return Hs(y,d)}function Hs(a,s){return s=pr(s,3432918353),s=pr(s<<15|s>>>-15,461845907),s=pr(s<<13|s>>>-13,5),s=(s+3864292196|0)^a,s=pr(s^s>>>16,2246822507),s=pr(s^s>>>13,3266489909),s=Sn(s^s>>>16),s}function Ro(a,s){return a^s+2654435769+(a<<6)+(a>>2)|0}var Ys={Iterable:o,Seq:Se,Collection:wt,Map:Q,OrderedMap:xe,List:me,Stack:Pe,Set:_e,OrderedSet:vt,Record:He,Range:Ie,Repeat:Re,is:Ne,fromJS:yn};return Ys})})(Ii);var E=Ii.exports;/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var du=function(n){return n!=null&&typeof n=="object"&&Array.isArray(n)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var hu=du;function zo(t){return hu(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}var mu=function(n){var r,e;return!(zo(n)===!1||(r=n.constructor,typeof r!="function")||(e=r.prototype,zo(e)===!1)||e.hasOwnProperty("isPrototypeOf")===!1)};const he=Nr(mu);var yu=function(t,n){};const z=yu;var gu=!0,Wn="Invariant failed";function rt(t,n){if(!t){if(gu)throw new Error(Wn);var r=typeof n=="function"?n():n,e=r?"".concat(Wn,": ").concat(r):Wn;throw new Error(e)}}var oa={exports:{}},Gn,Do;function pu(){if(Do)return Gn;Do=1;var t=1e3,n=t*60,r=n*60,e=r*24,o=e*7,i=e*365.25;Gn=function(h,m){m=m||{};var g=typeof h;if(g==="string"&&h.length>0)return u(h);if(g==="number"&&isFinite(h))return m.long?f(h):c(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function u(h){if(h=String(h),!(h.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(m){var g=parseFloat(m[1]),_=(m[2]||"ms").toLowerCase();switch(_){case"years":case"year":case"yrs":case"yr":case"y":return g*i;case"weeks":case"week":case"w":return g*o;case"days":case"day":case"d":return g*e;case"hours":case"hour":case"hrs":case"hr":case"h":return g*r;case"minutes":case"minute":case"mins":case"min":case"m":return g*n;case"seconds":case"second":case"secs":case"sec":case"s":return g*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function c(h){var m=Math.abs(h);return m>=e?Math.round(h/e)+"d":m>=r?Math.round(h/r)+"h":m>=n?Math.round(h/n)+"m":m>=t?Math.round(h/t)+"s":h+"ms"}function f(h){var m=Math.abs(h);return m>=e?v(h,m,e,"day"):m>=r?v(h,m,r,"hour"):m>=n?v(h,m,n,"minute"):m>=t?v(h,m,t,"second"):h+" ms"}function v(h,m,g,_){var w=m>=g*1.5;return Math.round(h/g)+" "+_+(w?"s":"")}return Gn}function _u(t){r.debug=r,r.default=r,r.coerce=f,r.disable=u,r.enable=i,r.enabled=c,r.humanize=pu(),Object.keys(t).forEach(function(v){r[v]=t[v]}),r.instances=[],r.names=[],r.skips=[],r.formatters={};function n(v){for(var h=0,m=0;m<v.length;m++)h=(h<<5)-h+v.charCodeAt(m),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=n;function r(v){var h;function m(){if(m.enabled){for(var g=arguments.length,_=new Array(g),w=0;w<g;w++)_[w]=arguments[w];var x=m,O=Number(new Date),F=O-(h||O);x.diff=F,x.prev=h,x.curr=O,h=O,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");var P=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,function(M,B){if(M==="%%")return M;P++;var D=r.formatters[B];if(typeof D=="function"){var te=_[P];M=D.call(x,te),_.splice(P,1),P--}return M}),r.formatArgs.call(x,_);var L=x.log||r.log;L.apply(x,_)}}return m.namespace=v,m.enabled=r.enabled(v),m.useColors=r.useColors(),m.color=n(v),m.destroy=e,m.extend=o,typeof r.init=="function"&&r.init(m),r.instances.push(m),m}function e(){var v=r.instances.indexOf(this);return v!==-1?(r.instances.splice(v,1),!0):!1}function o(v,h){return r(this.namespace+(typeof h>"u"?":":h)+v)}function i(v){r.save(v),r.names=[],r.skips=[];var h,m=(typeof v=="string"?v:"").split(/[\s,]+/),g=m.length;for(h=0;h<g;h++)m[h]&&(v=m[h].replace(/\*/g,".*?"),v[0]==="-"?r.skips.push(new RegExp("^"+v.substr(1)+"$")):r.names.push(new RegExp("^"+v+"$")));for(h=0;h<r.instances.length;h++){var _=r.instances[h];_.enabled=r.enabled(_.namespace)}}function u(){r.enable("")}function c(v){if(v[v.length-1]==="*")return!0;var h,m;for(h=0,m=r.skips.length;h<m;h++)if(r.skips[h].test(v))return!1;for(h=0,m=r.names.length;h<m;h++)if(r.names[h].test(v))return!0;return!1}function f(v){return v instanceof Error?v.stack||v.message:v}return r.enable(r.load()),r}var ku=_u;(function(t,n){function r(h){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(g){return typeof g}:r=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},r(h)}n.log=i,n.formatArgs=o,n.save=u,n.load=c,n.useColors=e,n.storage=f(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function e(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(h){if(h[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+h[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!!this.useColors){var m="color: "+this.color;h.splice(1,0,m,"color: inherit");var g=0,_=0;h[0].replace(/%[a-zA-Z%]/g,function(w){w!=="%%"&&(g++,w==="%c"&&(_=g))}),h.splice(_,0,m)}}function i(){var h;return(typeof console>"u"?"undefined":r(console))==="object"&&console.log&&(h=console).log.apply(h,arguments)}function u(h){try{h?n.storage.setItem("debug",h):n.storage.removeItem("debug")}catch{}}function c(){var h;try{h=n.storage.getItem("debug")}catch{}return!h&&typeof process<"u"&&"env"in process&&(h={}.DEBUG),h}function f(){try{return localStorage}catch{}}t.exports=ku(n);var v=t.exports.formatters;v.j=function(h){try{return JSON.stringify(h)}catch(m){return"[UnexpectedJSONParseError]: "+m.message}}})(oa,oa.exports);var Au=oa.exports;const ya=Nr(Au);var en={exports:{}};/*! https://mths.be/esrever v0.2.0 by @mathias */en.exports;(function(t,n){(function(r){var e=n,o=t&&t.exports==e&&t,i=typeof Zr=="object"&&Zr;(i.global===i||i.window===i)&&(r=i);var u=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,c=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g,f=function(m){m=m.replace(u,function(w,x,O){return f(O)+x}).replace(c,"$2$1");for(var g="",_=m.length;_--;)g+=m.charAt(_);return g},v={version:"0.2.0",reverse:f};if(e&&!e.nodeType)if(o)o.exports=v;else for(var h in v)v.hasOwnProperty(h)&&(e[h]=v[h]);else r.esrever=v})(Zr)})(en,en.exports);var Ci=en.exports,Su=Array.isArray,xt=Su,wu=xt,Tu=ha,Ou=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bu=/^\w*$/;function xu(t,n){if(wu(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Tu(t)?!0:bu.test(t)||!Ou.test(t)||n!=null&&t in Object(n)}var Eu=xu,Nu=Er,Pu=er,Fu="[object AsyncFunction]",Bu="[object Function]",$u="[object GeneratorFunction]",Iu="[object Proxy]";function Cu(t){if(!Pu(t))return!1;var n=Nu(t);return n==Bu||n==$u||n==Fu||n==Iu}var Mi=Cu,Mu=St,Ru=Mu["__core-js_shared__"],Lu=Ru,Hn=Lu,jo=function(){var t=/[^.]+$/.exec(Hn&&Hn.keys&&Hn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function zu(t){return!!jo&&jo in t}var Du=zu,ju=Function.prototype,Ku=ju.toString;function qu(t){if(t!=null){try{return Ku.call(t)}catch{}try{return t+""}catch{}}return""}var Ri=qu,Ju=Mi,Uu=Du,Vu=er,Wu=Ri,Gu=/[\\^$.*+?()[\]{}|]/g,Hu=/^\[object .+?Constructor\]$/,Yu=Function.prototype,Zu=Object.prototype,Xu=Yu.toString,Qu=Zu.hasOwnProperty,ec=RegExp("^"+Xu.call(Qu).replace(Gu,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function tc(t){if(!Vu(t)||Uu(t))return!1;var n=Ju(t)?ec:Hu;return n.test(Wu(t))}var rc=tc;function nc(t,n){return t==null?void 0:t[n]}var ac=nc,oc=rc,ic=ac;function sc(t,n){var r=ic(t,n);return oc(r)?r:void 0}var Rt=sc,uc=Rt,cc=uc(Object,"create"),on=cc,Ko=on;function fc(){this.__data__=Ko?Ko(null):{},this.size=0}var lc=fc;function vc(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var dc=vc,hc=on,mc="__lodash_hash_undefined__",yc=Object.prototype,gc=yc.hasOwnProperty;function pc(t){var n=this.__data__;if(hc){var r=n[t];return r===mc?void 0:r}return gc.call(n,t)?n[t]:void 0}var _c=pc,kc=on,Ac=Object.prototype,Sc=Ac.hasOwnProperty;function wc(t){var n=this.__data__;return kc?n[t]!==void 0:Sc.call(n,t)}var Tc=wc,Oc=on,bc="__lodash_hash_undefined__";function xc(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Oc&&n===void 0?bc:n,this}var Ec=xc,Nc=lc,Pc=dc,Fc=_c,Bc=Tc,$c=Ec;function rr(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}rr.prototype.clear=Nc;rr.prototype.delete=Pc;rr.prototype.get=Fc;rr.prototype.has=Bc;rr.prototype.set=$c;var Ic=rr;function Cc(){this.__data__=[],this.size=0}var Mc=Cc;function Rc(t,n){return t===n||t!==t&&n!==n}var Li=Rc,Lc=Li;function zc(t,n){for(var r=t.length;r--;)if(Lc(t[r][0],n))return r;return-1}var sn=zc,Dc=sn,jc=Array.prototype,Kc=jc.splice;function qc(t){var n=this.__data__,r=Dc(n,t);if(r<0)return!1;var e=n.length-1;return r==e?n.pop():Kc.call(n,r,1),--this.size,!0}var Jc=qc,Uc=sn;function Vc(t){var n=this.__data__,r=Uc(n,t);return r<0?void 0:n[r][1]}var Wc=Vc,Gc=sn;function Hc(t){return Gc(this.__data__,t)>-1}var Yc=Hc,Zc=sn;function Xc(t,n){var r=this.__data__,e=Zc(r,t);return e<0?(++this.size,r.push([t,n])):r[e][1]=n,this}var Qc=Xc,ef=Mc,tf=Jc,rf=Wc,nf=Yc,af=Qc;function nr(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}nr.prototype.clear=ef;nr.prototype.delete=tf;nr.prototype.get=rf;nr.prototype.has=nf;nr.prototype.set=af;var un=nr,of=Rt,sf=St,uf=of(sf,"Map"),ga=uf,qo=Ic,cf=un,ff=ga;function lf(){this.size=0,this.__data__={hash:new qo,map:new(ff||cf),string:new qo}}var vf=lf;function df(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}var hf=df,mf=hf;function yf(t,n){var r=t.__data__;return mf(n)?r[typeof n=="string"?"string":"hash"]:r.map}var cn=yf,gf=cn;function pf(t){var n=gf(this,t).delete(t);return this.size-=n?1:0,n}var _f=pf,kf=cn;function Af(t){return kf(this,t).get(t)}var Sf=Af,wf=cn;function Tf(t){return wf(this,t).has(t)}var Of=Tf,bf=cn;function xf(t,n){var r=bf(this,t),e=r.size;return r.set(t,n),this.size+=r.size==e?0:1,this}var Ef=xf,Nf=vf,Pf=_f,Ff=Sf,Bf=Of,$f=Ef;function ar(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}ar.prototype.clear=Nf;ar.prototype.delete=Pf;ar.prototype.get=Ff;ar.prototype.has=Bf;ar.prototype.set=$f;var zi=ar,Di=zi,If="Expected a function";function pa(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new TypeError(If);var r=function(){var e=arguments,o=n?n.apply(this,e):e[0],i=r.cache;if(i.has(o))return i.get(o);var u=t.apply(this,e);return r.cache=i.set(o,u)||i,u};return r.cache=new(pa.Cache||Di),r}pa.Cache=Di;var Cf=pa,Mf=Cf,Rf=500;function Lf(t){var n=Mf(t,function(e){return r.size===Rf&&r.clear(),e}),r=n.cache;return n}var zf=Lf,Df=zf,jf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Kf=/\\(\\)?/g,qf=Df(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(jf,function(r,e,o,i){n.push(o?i.replace(Kf,"$1"):e||r)}),n}),Jf=qf;function Uf(t,n){for(var r=-1,e=t==null?0:t.length,o=Array(e);++r<e;)o[r]=n(t[r],r,t);return o}var ji=Uf,Jo=ma,Vf=ji,Wf=xt,Gf=ha,Hf=1/0,Uo=Jo?Jo.prototype:void 0,Vo=Uo?Uo.toString:void 0;function Ki(t){if(typeof t=="string")return t;if(Wf(t))return Vf(t,Ki)+"";if(Gf(t))return Vo?Vo.call(t):"";var n=t+"";return n=="0"&&1/t==-Hf?"-0":n}var Yf=Ki,Zf=Yf;function Xf(t){return t==null?"":Zf(t)}var Qf=Xf,el=xt,tl=Eu,rl=Jf,nl=Qf;function al(t,n){return el(t)?t:tl(t,n)?[t]:rl(nl(t))}var or=al,ol=ha,il=1/0;function sl(t){if(typeof t=="string"||ol(t))return t;var n=t+"";return n=="0"&&1/t==-il?"-0":n}var fn=sl,ul=or,cl=fn;function fl(t,n){n=ul(n,t);for(var r=0,e=n.length;t!=null&&r<e;)t=t[cl(n[r++])];return r&&r==e?t:void 0}var qi=fl,ll=Rt,vl=function(){try{var t=ll(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Ji=vl,Wo=Ji;function dl(t,n,r){n=="__proto__"&&Wo?Wo(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r}var Ui=dl,hl=Ui,ml=Li,yl=Object.prototype,gl=yl.hasOwnProperty;function pl(t,n,r){var e=t[n];(!(gl.call(t,n)&&ml(e,r))||r===void 0&&!(n in t))&&hl(t,n,r)}var _a=pl,_l=9007199254740991,kl=/^(?:0|[1-9]\d*)$/;function Al(t,n){var r=typeof t;return n=n??_l,!!n&&(r=="number"||r!="symbol"&&kl.test(t))&&t>-1&&t%1==0&&t<n}var ka=Al,Sl=_a,wl=or,Tl=ka,Go=er,Ol=fn;function bl(t,n,r,e){if(!Go(t))return t;n=wl(n,t);for(var o=-1,i=n.length,u=i-1,c=t;c!=null&&++o<i;){var f=Ol(n[o]),v=r;if(f==="__proto__"||f==="constructor"||f==="prototype")return t;if(o!=u){var h=c[f];v=e?e(h,f,c):void 0,v===void 0&&(v=Go(h)?h:Tl(n[o+1])?[]:{})}Sl(c,f,v),c=c[f]}return t}var xl=bl,El=qi,Nl=xl,Pl=or;function Fl(t,n,r){for(var e=-1,o=n.length,i={};++e<o;){var u=n[e],c=El(t,u);r(c,u)&&Nl(i,Pl(u,t),c)}return i}var Bl=Fl;function $l(t,n){return t!=null&&n in Object(t)}var Il=$l,Cl=Er,Ml=tr,Rl="[object Arguments]";function Ll(t){return Ml(t)&&Cl(t)==Rl}var zl=Ll,Ho=zl,Dl=tr,Vi=Object.prototype,jl=Vi.hasOwnProperty,Kl=Vi.propertyIsEnumerable,ql=Ho(function(){return arguments}())?Ho:function(t){return Dl(t)&&jl.call(t,"callee")&&!Kl.call(t,"callee")},Aa=ql,Jl=9007199254740991;function Ul(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Jl}var Sa=Ul,Vl=or,Wl=Aa,Gl=xt,Hl=ka,Yl=Sa,Zl=fn;function Xl(t,n,r){n=Vl(n,t);for(var e=-1,o=n.length,i=!1;++e<o;){var u=Zl(n[e]);if(!(i=t!=null&&r(t,u)))break;t=t[u]}return i||++e!=o?i:(o=t==null?0:t.length,!!o&&Yl(o)&&Hl(u,o)&&(Gl(t)||Wl(t)))}var Ql=Xl,ev=Il,tv=Ql;function rv(t,n){return t!=null&&tv(t,n,ev)}var nv=rv,av=Bl,ov=nv;function iv(t,n){return av(t,n,function(r,e){return ov(t,e)})}var sv=iv;function uv(t,n){for(var r=-1,e=n.length,o=t.length;++r<e;)t[o+r]=n[r];return t}var wa=uv,Yo=ma,cv=Aa,fv=xt,Zo=Yo?Yo.isConcatSpreadable:void 0;function lv(t){return fv(t)||cv(t)||!!(Zo&&t&&t[Zo])}var vv=lv,dv=wa,hv=vv;function Wi(t,n,r,e,o){var i=-1,u=t.length;for(r||(r=hv),o||(o=[]);++i<u;){var c=t[i];n>0&&r(c)?n>1?Wi(c,n-1,r,e,o):dv(o,c):e||(o[o.length]=c)}return o}var mv=Wi,yv=mv;function gv(t){var n=t==null?0:t.length;return n?yv(t,1):[]}var pv=gv;function _v(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}var kv=_v,Av=kv,Xo=Math.max;function Sv(t,n,r){return n=Xo(n===void 0?t.length-1:n,0),function(){for(var e=arguments,o=-1,i=Xo(e.length-n,0),u=Array(i);++o<i;)u[o]=e[n+o];o=-1;for(var c=Array(n+1);++o<n;)c[o]=e[o];return c[n]=r(u),Av(t,this,c)}}var wv=Sv;function Tv(t){return function(){return t}}var Ov=Tv;function bv(t){return t}var xv=bv,Ev=Ov,Qo=Ji,Nv=xv,Pv=Qo?function(t,n){return Qo(t,"toString",{configurable:!0,enumerable:!1,value:Ev(n),writable:!0})}:Nv,Fv=Pv,Bv=800,$v=16,Iv=Date.now;function Cv(t){var n=0,r=0;return function(){var e=Iv(),o=$v-(e-r);if(r=e,o>0){if(++n>=Bv)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}var Mv=Cv,Rv=Fv,Lv=Mv,zv=Lv(Rv),Dv=zv,jv=pv,Kv=wv,qv=Dv;function Jv(t){return qv(Kv(t,void 0,jv),t+"")}var Gi=Jv,Uv=sv,Vv=Gi,Wv=Vv(function(t,n){return t==null?{}:Uv(t,n)}),Gv=Wv;const xr=Nr(Gv);var Hv=un;function Yv(){this.__data__=new Hv,this.size=0}var Zv=Yv;function Xv(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}var Qv=Xv;function ed(t){return this.__data__.get(t)}var td=ed;function rd(t){return this.__data__.has(t)}var nd=rd,ad=un,od=ga,id=zi,sd=200;function ud(t,n){var r=this.__data__;if(r instanceof ad){var e=r.__data__;if(!od||e.length<sd-1)return e.push([t,n]),this.size=++r.size,this;r=this.__data__=new id(e)}return r.set(t,n),this.size=r.size,this}var cd=ud,fd=un,ld=Zv,vd=Qv,dd=td,hd=nd,md=cd;function ir(t){var n=this.__data__=new fd(t);this.size=n.size}ir.prototype.clear=ld;ir.prototype.delete=vd;ir.prototype.get=dd;ir.prototype.has=hd;ir.prototype.set=md;var yd=ir;function gd(t,n){for(var r=-1,e=t==null?0:t.length;++r<e&&n(t[r],r,t)!==!1;);return t}var pd=gd,_d=_a,kd=Ui;function Ad(t,n,r,e){var o=!r;r||(r={});for(var i=-1,u=n.length;++i<u;){var c=n[i],f=e?e(r[c],t[c],c,r,t):void 0;f===void 0&&(f=t[c]),o?kd(r,c,f):_d(r,c,f)}return r}var Pr=Ad;function Sd(t,n){for(var r=-1,e=Array(t);++r<t;)e[r]=n(r);return e}var wd=Sd,tn={exports:{}};function Td(){return!1}var Od=Td;tn.exports;(function(t,n){var r=St,e=Od,o=n&&!n.nodeType&&n,i=o&&!0&&t&&!t.nodeType&&t,u=i&&i.exports===o,c=u?r.Buffer:void 0,f=c?c.isBuffer:void 0,v=f||e;t.exports=v})(tn,tn.exports);var Hi=tn.exports,bd=Er,xd=Sa,Ed=tr,Nd="[object Arguments]",Pd="[object Array]",Fd="[object Boolean]",Bd="[object Date]",$d="[object Error]",Id="[object Function]",Cd="[object Map]",Md="[object Number]",Rd="[object Object]",Ld="[object RegExp]",zd="[object Set]",Dd="[object String]",jd="[object WeakMap]",Kd="[object ArrayBuffer]",qd="[object DataView]",Jd="[object Float32Array]",Ud="[object Float64Array]",Vd="[object Int8Array]",Wd="[object Int16Array]",Gd="[object Int32Array]",Hd="[object Uint8Array]",Yd="[object Uint8ClampedArray]",Zd="[object Uint16Array]",Xd="[object Uint32Array]",ye={};ye[Jd]=ye[Ud]=ye[Vd]=ye[Wd]=ye[Gd]=ye[Hd]=ye[Yd]=ye[Zd]=ye[Xd]=!0;ye[Nd]=ye[Pd]=ye[Kd]=ye[Fd]=ye[qd]=ye[Bd]=ye[$d]=ye[Id]=ye[Cd]=ye[Md]=ye[Rd]=ye[Ld]=ye[zd]=ye[Dd]=ye[jd]=!1;function Qd(t){return Ed(t)&&xd(t.length)&&!!ye[bd(t)]}var eh=Qd;function th(t){return function(n){return t(n)}}var Ta=th,rn={exports:{}};rn.exports;(function(t,n){var r=Qs,e=n&&!n.nodeType&&n,o=e&&!0&&t&&!t.nodeType&&t,i=o&&o.exports===e,u=i&&r.process,c=function(){try{var f=o&&o.require&&o.require("util").types;return f||u&&u.binding&&u.binding("util")}catch{}}();t.exports=c})(rn,rn.exports);var Oa=rn.exports,rh=eh,nh=Ta,ei=Oa,ti=ei&&ei.isTypedArray,ah=ti?nh(ti):rh,oh=ah,ih=wd,sh=Aa,uh=xt,ch=Hi,fh=ka,lh=oh,vh=Object.prototype,dh=vh.hasOwnProperty;function hh(t,n){var r=uh(t),e=!r&&sh(t),o=!r&&!e&&ch(t),i=!r&&!e&&!o&&lh(t),u=r||e||o||i,c=u?ih(t.length,String):[],f=c.length;for(var v in t)(n||dh.call(t,v))&&!(u&&(v=="length"||o&&(v=="offset"||v=="parent")||i&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||fh(v,f)))&&c.push(v);return c}var Yi=hh,mh=Object.prototype;function yh(t){var n=t&&t.constructor,r=typeof n=="function"&&n.prototype||mh;return t===r}var ba=yh;function gh(t,n){return function(r){return t(n(r))}}var Zi=gh,ph=Zi,_h=ph(Object.keys,Object),kh=_h,Ah=ba,Sh=kh,wh=Object.prototype,Th=wh.hasOwnProperty;function Oh(t){if(!Ah(t))return Sh(t);var n=[];for(var r in Object(t))Th.call(t,r)&&r!="constructor"&&n.push(r);return n}var bh=Oh,xh=Mi,Eh=Sa;function Nh(t){return t!=null&&Eh(t.length)&&!xh(t)}var Xi=Nh,Ph=Yi,Fh=bh,Bh=Xi;function $h(t){return Bh(t)?Ph(t):Fh(t)}var xa=$h,Ih=Pr,Ch=xa;function Mh(t,n){return t&&Ih(n,Ch(n),t)}var Rh=Mh;function Lh(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}var zh=Lh,Dh=er,jh=ba,Kh=zh,qh=Object.prototype,Jh=qh.hasOwnProperty;function Uh(t){if(!Dh(t))return Kh(t);var n=jh(t),r=[];for(var e in t)e=="constructor"&&(n||!Jh.call(t,e))||r.push(e);return r}var Vh=Uh,Wh=Yi,Gh=Vh,Hh=Xi;function Yh(t){return Hh(t)?Wh(t,!0):Gh(t)}var Ea=Yh,Zh=Pr,Xh=Ea;function Qh(t,n){return t&&Zh(n,Xh(n),t)}var em=Qh,nn={exports:{}};nn.exports;(function(t,n){var r=St,e=n&&!n.nodeType&&n,o=e&&!0&&t&&!t.nodeType&&t,i=o&&o.exports===e,u=i?r.Buffer:void 0,c=u?u.allocUnsafe:void 0;function f(v,h){if(h)return v.slice();var m=v.length,g=c?c(m):new v.constructor(m);return v.copy(g),g}t.exports=f})(nn,nn.exports);var tm=nn.exports;function rm(t,n){var r=-1,e=t.length;for(n||(n=Array(e));++r<e;)n[r]=t[r];return n}var nm=rm;function am(t,n){for(var r=-1,e=t==null?0:t.length,o=0,i=[];++r<e;){var u=t[r];n(u,r,t)&&(i[o++]=u)}return i}var om=am;function im(){return[]}var Qi=im,sm=om,um=Qi,cm=Object.prototype,fm=cm.propertyIsEnumerable,ri=Object.getOwnPropertySymbols,lm=ri?function(t){return t==null?[]:(t=Object(t),sm(ri(t),function(n){return fm.call(t,n)}))}:um,Na=lm,vm=Pr,dm=Na;function hm(t,n){return vm(t,dm(t),n)}var mm=hm,ym=Zi,gm=ym(Object.getPrototypeOf,Object),Pa=gm,pm=wa,_m=Pa,km=Na,Am=Qi,Sm=Object.getOwnPropertySymbols,wm=Sm?function(t){for(var n=[];t;)pm(n,km(t)),t=_m(t);return n}:Am,es=wm,Tm=Pr,Om=es;function bm(t,n){return Tm(t,Om(t),n)}var xm=bm,Em=wa,Nm=xt;function Pm(t,n,r){var e=n(t);return Nm(t)?e:Em(e,r(t))}var ts=Pm,Fm=ts,Bm=Na,$m=xa;function Im(t){return Fm(t,$m,Bm)}var Cm=Im,Mm=ts,Rm=es,Lm=Ea;function zm(t){return Mm(t,Lm,Rm)}var rs=zm,Dm=Rt,jm=St,Km=Dm(jm,"DataView"),qm=Km,Jm=Rt,Um=St,Vm=Jm(Um,"Promise"),Wm=Vm,Gm=Rt,Hm=St,Ym=Gm(Hm,"Set"),Zm=Ym,Xm=Rt,Qm=St,ey=Xm(Qm,"WeakMap"),ty=ey,ia=qm,sa=ga,ua=Wm,ca=Zm,fa=ty,ns=Er,sr=Ri,ni="[object Map]",ry="[object Object]",ai="[object Promise]",oi="[object Set]",ii="[object WeakMap]",si="[object DataView]",ny=sr(ia),ay=sr(sa),oy=sr(ua),iy=sr(ca),sy=sr(fa),$t=ns;(ia&&$t(new ia(new ArrayBuffer(1)))!=si||sa&&$t(new sa)!=ni||ua&&$t(ua.resolve())!=ai||ca&&$t(new ca)!=oi||fa&&$t(new fa)!=ii)&&($t=function(t){var n=ns(t),r=n==ry?t.constructor:void 0,e=r?sr(r):"";if(e)switch(e){case ny:return si;case ay:return ni;case oy:return ai;case iy:return oi;case sy:return ii}return n});var Fa=$t,uy=Object.prototype,cy=uy.hasOwnProperty;function fy(t){var n=t.length,r=new t.constructor(n);return n&&typeof t[0]=="string"&&cy.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var ly=fy,vy=St,dy=vy.Uint8Array,hy=dy,ui=hy;function my(t){var n=new t.constructor(t.byteLength);return new ui(n).set(new ui(t)),n}var Ba=my,yy=Ba;function gy(t,n){var r=n?yy(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var py=gy,_y=/\w*$/;function ky(t){var n=new t.constructor(t.source,_y.exec(t));return n.lastIndex=t.lastIndex,n}var Ay=ky,ci=ma,fi=ci?ci.prototype:void 0,li=fi?fi.valueOf:void 0;function Sy(t){return li?Object(li.call(t)):{}}var wy=Sy,Ty=Ba;function Oy(t,n){var r=n?Ty(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var by=Oy,xy=Ba,Ey=py,Ny=Ay,Py=wy,Fy=by,By="[object Boolean]",$y="[object Date]",Iy="[object Map]",Cy="[object Number]",My="[object RegExp]",Ry="[object Set]",Ly="[object String]",zy="[object Symbol]",Dy="[object ArrayBuffer]",jy="[object DataView]",Ky="[object Float32Array]",qy="[object Float64Array]",Jy="[object Int8Array]",Uy="[object Int16Array]",Vy="[object Int32Array]",Wy="[object Uint8Array]",Gy="[object Uint8ClampedArray]",Hy="[object Uint16Array]",Yy="[object Uint32Array]";function Zy(t,n,r){var e=t.constructor;switch(n){case Dy:return xy(t);case By:case $y:return new e(+t);case jy:return Ey(t,r);case Ky:case qy:case Jy:case Uy:case Vy:case Wy:case Gy:case Hy:case Yy:return Fy(t,r);case Iy:return new e;case Cy:case Ly:return new e(t);case My:return Ny(t);case Ry:return new e;case zy:return Py(t)}}var Xy=Zy,Qy=er,vi=Object.create,eg=function(){function t(){}return function(n){if(!Qy(n))return{};if(vi)return vi(n);t.prototype=n;var r=new t;return t.prototype=void 0,r}}(),tg=eg,rg=tg,ng=Pa,ag=ba;function og(t){return typeof t.constructor=="function"&&!ag(t)?rg(ng(t)):{}}var ig=og,sg=Fa,ug=tr,cg="[object Map]";function fg(t){return ug(t)&&sg(t)==cg}var lg=fg,vg=lg,dg=Ta,di=Oa,hi=di&&di.isMap,hg=hi?dg(hi):vg,mg=hg,yg=Fa,gg=tr,pg="[object Set]";function _g(t){return gg(t)&&yg(t)==pg}var kg=_g,Ag=kg,Sg=Ta,mi=Oa,yi=mi&&mi.isSet,wg=yi?Sg(yi):Ag,Tg=wg,Og=yd,bg=pd,xg=_a,Eg=Rh,Ng=em,Pg=tm,Fg=nm,Bg=mm,$g=xm,Ig=Cm,Cg=rs,Mg=Fa,Rg=ly,Lg=Xy,zg=ig,Dg=xt,jg=Hi,Kg=mg,qg=er,Jg=Tg,Ug=xa,Vg=Ea,Wg=1,Gg=2,Hg=4,as="[object Arguments]",Yg="[object Array]",Zg="[object Boolean]",Xg="[object Date]",Qg="[object Error]",os="[object Function]",ep="[object GeneratorFunction]",tp="[object Map]",rp="[object Number]",is="[object Object]",np="[object RegExp]",ap="[object Set]",op="[object String]",ip="[object Symbol]",sp="[object WeakMap]",up="[object ArrayBuffer]",cp="[object DataView]",fp="[object Float32Array]",lp="[object Float64Array]",vp="[object Int8Array]",dp="[object Int16Array]",hp="[object Int32Array]",mp="[object Uint8Array]",yp="[object Uint8ClampedArray]",gp="[object Uint16Array]",pp="[object Uint32Array]",de={};de[as]=de[Yg]=de[up]=de[cp]=de[Zg]=de[Xg]=de[fp]=de[lp]=de[vp]=de[dp]=de[hp]=de[tp]=de[rp]=de[is]=de[np]=de[ap]=de[op]=de[ip]=de[mp]=de[yp]=de[gp]=de[pp]=!0;de[Qg]=de[os]=de[sp]=!1;function Xr(t,n,r,e,o,i){var u,c=n&Wg,f=n&Gg,v=n&Hg;if(r&&(u=o?r(t,e,o,i):r(t)),u!==void 0)return u;if(!qg(t))return t;var h=Dg(t);if(h){if(u=Rg(t),!c)return Fg(t,u)}else{var m=Mg(t),g=m==os||m==ep;if(jg(t))return Pg(t,c);if(m==is||m==as||g&&!o){if(u=f||g?{}:zg(t),!c)return f?$g(t,Ng(u,t)):Bg(t,Eg(u,t))}else{if(!de[m])return o?t:{};u=Lg(t,m,c)}}i||(i=new Og);var _=i.get(t);if(_)return _;i.set(t,u),Jg(t)?t.forEach(function(O){u.add(Xr(O,n,r,O,t,i))}):Kg(t)&&t.forEach(function(O,F){u.set(F,Xr(O,n,r,F,t,i))});var w=v?f?Cg:Ig:f?Vg:Ug,x=h?void 0:w(t);return bg(x||t,function(O,F){x&&(F=O,O=t[F]),xg(u,F,Xr(O,n,r,F,t,i))}),u}var _p=Xr;function kp(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}var Ap=kp;function Sp(t,n,r){var e=-1,o=t.length;n<0&&(n=-n>o?0:o+n),r=r>o?o:r,r<0&&(r+=o),o=n>r?0:r-n>>>0,n>>>=0;for(var i=Array(o);++e<o;)i[e]=t[e+n];return i}var wp=Sp,Tp=qi,Op=wp;function bp(t,n){return n.length<2?t:Tp(t,Op(n,0,-1))}var xp=bp,Ep=or,Np=Ap,Pp=xp,Fp=fn;function Bp(t,n){return n=Ep(n,t),t=Pp(t,n),t==null||delete t[Fp(Np(n))]}var $p=Bp,Ip=Er,Cp=Pa,Mp=tr,Rp="[object Object]",Lp=Function.prototype,zp=Object.prototype,ss=Lp.toString,Dp=zp.hasOwnProperty,jp=ss.call(Object);function Kp(t){if(!Mp(t)||Ip(t)!=Rp)return!1;var n=Cp(t);if(n===null)return!0;var r=Dp.call(n,"constructor")&&n.constructor;return typeof r=="function"&&r instanceof r&&ss.call(r)==jp}var qp=Kp,Jp=qp;function Up(t){return Jp(t)?void 0:t}var Vp=Up,Wp=ji,Gp=_p,Hp=$p,Yp=or,Zp=Pr,Xp=Vp,Qp=Gi,e_=rs,t_=1,r_=2,n_=4,a_=Qp(function(t,n){var r={};if(t==null)return r;var e=!1;n=Wp(n,function(i){return i=Yp(i,t),e||(e=i.length>1),i}),Zp(t,e_(t),r),e&&(r=Gp(r,t_|r_|n_,Xp));for(var o=n.length;o--;)Hp(r,n[o]);return r}),o_=a_;const us=Nr(o_);var $a,Ia,cs,fs;$a="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿";Ia="֑-߿יִ-﷽ﹰ-ﻼ";cs=new RegExp("^[^"+Ia+"]*["+$a+"]");fs=new RegExp("^[^"+$a+"]*["+Ia+"]");function i_(t){return t=t.toString(),fs.test(t)?"rtl":cs.test(t)?"ltr":"neutral"}var s_=i_;const u_=Nr(s_);var gi=void 0,Ca=void 0;function c_(t){if(t==null)return Ca();if(typeof t=="string")return t;throw new Error("Keys must be strings, but you passed: "+t)}function f_(t){Ca=t}function ls(){gi=0,Ca=function(){return""+gi++}}ls();var ur={create:c_,setGenerator:f_,resetGenerator:ls},Ma=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},we=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},Oe=function(){function t(n,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}}(),la=function(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t},De=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}return t},Ke=function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},Zt=function(t,n){var r={};for(var e in t)n.indexOf(e)>=0||Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r},qe=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:t},C=function(){function t(n,r){var e=[],o=!0,i=!1,u=void 0;try{for(var c=n[Symbol.iterator](),f;!(o=(f=c.next()).done)&&(e.push(f.value),!(r&&e.length===r));o=!0);}catch(v){i=!0,u=v}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return e}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Fe=function(t){if(Array.isArray(t)){for(var n=0,r=Array(t.length);n<t.length;n++)r[n]=t[n];return r}else return Array.from(t)};function ln(t,n){for(var r=vn(t,n),e=0;e<r;e++){var o=t.get(e),i=n.get(e);if(o<i)return-1;if(o>i)return 1}return t.size===n.size?0:null}function vs(t){if(t==null)return null;if(E.List.isList(t))return t;if(Array.isArray(t))return E.List(t);throw new Error("Paths can only be created from arrays or lists, but you passed: "+t)}function cr(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vn(t,n),e=t.slice(0,r),o=n.slice(0,r);return[e,o]}function It(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.size-1;return bt(t,0-n,r)}function l_(t){var n=E.List().withMutations(function(r){for(var e=0;e<t.size;e++)r.push(t.slice(0,e))});return n}function bt(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.size-1,e=t.get(r),o=e+n,i=t.set(r,o);return i}function va(t,n){var r=cr(t,n),e=C(r,2),o=e[0],i=e[1];return t.size<n.size&&ln(o,i)===0}function v_(t,n){var r=cr(t,n),e=C(r,2),o=e[0],i=e[1];return ln(o,i)===1}function d_(t,n){var r=cr(t,n),e=C(r,2),o=e[0],i=e[1];return ln(o,i)===-1}function Xt(t,n){return t.equals(n)}function h_(t,n){var r=t.size-1,e=cr(t,n,r),o=C(e,2),i=o[0],u=o[1],c=t.get(r),f=n.get(r);return Xt(i,u)&&c>f}function m_(t){return(E.List.isList(t)||Array.isArray(t))&&t.every(function(n){return typeof n=="number"})}function y_(t,n){if(t.size!==n.size)return!1;var r=t.butLast(),e=n.butLast();return r.equals(e)}function Qr(t,n){var r=t.size-1,e=cr(t,n,r),o=C(e,2),i=o[0],u=o[1],c=t.get(r),f=n.get(r);return Xt(i,u)&&c<f}function g_(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=t.slice(0,-1*n);return r}function p_(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=t.slice(n);return r}function __(t,n){var r=Math.max(t.size,n.size);return r}function vn(t,n){var r=Math.min(t.size,n.size);return r}function k_(t,n){for(var r=[],e=0;e<t.size&&e<n.size;e++){var o=t.get(e),i=n.get(e);if(o!==i)break;r.push(o)}var u=vs(r);return u}function A_(t,n){var r=n.type,e=n.position,o=n.path;if(r==="add_mark"||r==="insert_text"||r==="remove_mark"||r==="remove_text"||r==="set_mark"||r==="set_node"||r==="set_selection"||r==="set_value"||r==="add_annotation"||r==="remove_annotation"||r==="set_annotation"||t.size===0)return E.List([t]);var i=o.size-1,u=Xt(o,t),c=Qr(o,t),f=va(o,t);if(r==="insert_node"&&(u||c||f)&&(t=bt(t,1,i)),r==="remove_node"&&(c?t=It(t,1,i):(u||f)&&(t=[])),r==="merge_node"&&(u||c?t=It(t,1,i):f&&(t=It(t,1,i),t=bt(t,e,i+1))),r==="split_node"&&(u?t=[t,bt(t)]:c?t=bt(t,1,i):f&&t.get(i+1)>=e&&(t=bt(t,1,i),t=It(t,e,i+1))),r==="move_node"){var v=n.newPath;if(Xt(o,v))return E.List([t]);f||u?Qr(o,v)&&o.size<v.size?t=It(v,1,vn(v,o)-1).concat(t.slice(o.size)):t=v.concat(t.slice(o.size)):(c&&(t=It(t,1,i)),(Qr(v,t)||Xt(v,t)||va(v,t))&&(t=bt(t,1,v.size-1)))}var h=Array.isArray(t)?t:[t];return E.List(h)}var $={compare:ln,create:vs,crop:cr,decrement:It,getAncestors:l_,increment:bt,isAbove:va,isAfter:v_,isBefore:d_,isEqual:Xt,isOlder:h_,isPath:m_,isSibling:y_,isYounger:Qr,lift:g_,drop:p_,max:__,min:vn,relate:k_,transform:A_},S_={key:void 0,offset:void 0,path:void 0},ee=function(t){Ke(n,t);function n(){return we(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Oe(n,[{key:"isAfterPoint",value:function(e){if(this.isUnset)return!1;var o=this.key===e.key&&this.offset>e.offset||$.compare(this.path,e.path)===1;return o}},{key:"isAfterRange",value:function(e){if(this.isUnset)return!1;var o=this.isAfterPoint(e.end);return o}},{key:"isAtEndOfRange",value:function(e){if(this.isUnset)return!1;var o=this.equals(e.end);return o}},{key:"isAtStartOfRange",value:function(e){if(this.isUnset)return!1;var o=this.equals(e.start);return o}},{key:"isBeforePoint",value:function(e){if(this.isUnset)return!1;var o=this.key===e.key&&this.offset<e.offset||$.compare(this.path,e.path)===-1;return o}},{key:"isBeforeRange",value:function(e){if(this.isUnset)return!1;var o=this.isBeforePoint(e.start);return o}},{key:"isInRange",value:function(e){if(this.isUnset)return!1;var o=this.equals(e.start)||this.equals(e.end)||this.isAfterPoint(e.start)&&this.isBeforePoint(e.end);return o}},{key:"isAtEndOfNode",value:function(e){if(this.isUnset)return!1;var o=e.getLastText(),i=this.key===o.key&&this.offset===o.text.length;return i}},{key:"isAtStartOfNode",value:function(e){if(this.isUnset||this.offset!==0)return!1;var o=e.getFirstText(),i=this.key===o.key;return i}},{key:"isInNode",value:function(e){return this.isUnset?!1:!!(e.object==="text"&&e.key===this.key||e.hasNode(this.key))}},{key:"moveBackward",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(e===0)return this;if(e<0)return this.moveForward(-e);var o=this.setOffset(this.offset-e);return o}},{key:"moveForward",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(e===0)return this;if(e<0)return this.moveBackward(-e);var o=this.setOffset(this.offset+e);return o}},{key:"moveTo",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=this.key;typeof e=="number"?(o=e,e=this.path):typeof e=="string"?(i=e,e=i===this.key?this.path:null):i=e.equals(this.path)?this.key:null;var u=this.merge({key:i,path:e,offset:o});return u}},{key:"moveToStartOfNode",value:function(e){var o=e.getFirstText(),i=this.moveTo(o.key,0);return i}},{key:"moveToEndOfNode",value:function(e){var o=e.getLastText(),i=this.moveTo(o.key,o.text.length);return i}},{key:"normalize",value:function(e){if(this.key==null&&this.path==null)return this.setOffset(null);var o=this.key,i=this.offset,u=this.path,c=u&&e.getNode(u);if(!c&&(c=e.getNode(o),c)){var f=this.merge({path:e.getPath(o)});return f}if(!c){z();var v=e.getFirstText();if(!v)return n.create();var h=this.merge({key:v.key,offset:0,path:e.getPath(v.key)});return h}if(c.object!=="text"){z();var m=c.getTextAtOffset(i),g=c.getOffset(m.key),_=this.merge({offset:i-g,key:m.key,path:e.getPath(m.key)});return _}c&&u&&o&&o!==c.key&&z();var w=this.merge({key:c.key,path:u??e.getPath(c.key),offset:i==null?0:Math.min(i,c.text.length)});if(w.offset===c.text.length){var x=e.getClosestBlock(w.path),O=x.getNextText();O&&(w=w.merge({key:O.key,path:e.getPath(O.key),offset:0}))}return w}},{key:"setKey",value:function(e){e!=null&&(e=ur.create(e));var o=this.set("key",e);return o}},{key:"setOffset",value:function(e){var o=this.set("offset",e);return o}},{key:"setPath",value:function(e){e!=null&&(e=$.create(e));var o=this.set("path",e);return o}},{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,key:this.key,offset:this.offset,path:this.path&&this.path.toArray()};return e.preserveKeys||delete o.key,o}},{key:"unset",value:function(){return this.merge({key:null,offset:null,path:null})}},{key:"isSet",get:function(){return this.key!=null&&this.offset!=null&&this.path!=null}},{key:"isUnset",get:function(){return!this.isSet}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isPoint(e))return e;if(he(e))return n.fromJSON(e);throw new Error("`Point.create` only accepts objects or points, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isPoint(e))return{key:e.key,offset:e.offset,path:e.path};if(he(e)){var o={};return"key"in e&&(o.key=e.key),"offset"in e&&(o.offset=e.offset),"path"in e&&(o.path=$.create(e.path)),"path"in e&&!("key"in e)&&(o.key=null),"key"in e&&!("path"in e)&&(o.path=null),o}throw new Error("`Point.createProperties` only accepts objects or points, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.key,i=o===void 0?null:o,u=e.offset,c=u===void 0?null:u,f=e.path,v=f===void 0?null:f,h=new n({key:i,offset:c,path:$.create(v)});return h}}]),n}(E.Record(S_)),yt=function(){function t(){we(this,t)}return Oe(t,null,[{key:"create",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(E.Map.isMap(r))return r;if(he(r))return t.fromJSON(r);throw new Error("`Data.create` only accepts objects or maps, but you passed it: "+r)}},{key:"fromJSON",value:function(r){return new E.Map(r)}}]),t}();yt.fromJS=yt.fromJSON;var w_={data:void 0,type:void 0},ie=function(t){Ke(n,t);function n(){return we(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Oe(n,[{key:"toJSON",value:function(){var e={object:this.object,type:this.type,data:this.data.toJSON()};return e}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isMark(e))return e;if(typeof e=="string"&&(e={type:e}),he(e))return n.fromJSON(e);throw new Error("`Mark.create` only accepts objects, strings or marks, but you passed it: "+e)}},{key:"createSet",value:function(e){if(E.Set.isSet(e)||Array.isArray(e)){var o=new E.Set(e.map(n.create));return o}if(e==null)return E.Set();throw new Error("`Mark.createSet` only accepts sets, arrays or null, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isMark(e))return{data:e.data,type:e.type};if(typeof e=="string")return{type:e};if(he(e)){var o={};return"type"in e&&(o.type=e.type),"data"in e&&(o.data=yt.create(e.data)),o}throw new Error("`Mark.createProperties` only accepts objects, strings or marks, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.data,i=o===void 0?{}:o,u=e.type;if(typeof u!="string")throw new Error("`Mark.fromJS` requires a `type` string.");var c=new n({type:u,data:new E.Map(i)});return c}},{key:"isMarkSet",value:function(e){return E.Set.isSet(e)&&e.every(function(o){return n.isMark(o)})}}]),n}(E.Record(w_)),T_={type:void 0,data:void 0,anchor:void 0,focus:void 0},Mt=function(t){Ke(n,t);function n(){return we(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Oe(n,[{key:"setProperties",value:function(e){e=n.createProperties(e);var o=this.merge(e);return o}},{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,type:this.type,data:this.data.toJSON(),anchor:this.anchor.toJSON(e),focus:this.focus.toJSON(e)};return o}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isDecoration(e))return e;if(je.isRange(e))return n.fromJSON(je.createProperties(e));if(he(e))return n.fromJSON(e);throw new Error("`Decoration.create` only accepts objects or decorations, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(E.List.isList(e)||Array.isArray(e)){var o=new E.List(e.map(n.create));return o}throw new Error("`Decoration.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isDecoration(e))return{type:e.type,data:e.data,anchor:ee.createProperties(e.anchor),focus:ee.createProperties(e.focus),mark:ie.create(e.mark)};if(he(e)){var o={};return"type"in e&&(o.type=e.type),"data"in e&&(o.data=yt.create(e.data)),"anchor"in e&&(o.anchor=ee.create(e.anchor)),"focus"in e&&(o.focus=ee.create(e.focus)),o}throw new Error("`Decoration.createProperties` only accepts objects or decorations, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.anchor,i=e.focus,u=e.type,c=e.data;if(e.mark&&!u&&(z(),u=e.mark.type,c=e.mark.data),!u)throw new Error("Decorations must be created with a `type`, but you passed: "+JSON.stringify(e));var f=new n({type:u,data:yt.create(c||{}),anchor:ee.fromJSON(o||{}),focus:ee.fromJSON(i||{})});return f}}]),n}(E.Record(T_)),O_={anchor:void 0,focus:void 0,isFocused:void 0,marks:void 0},At=function(t){Ke(n,t);function n(){return we(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Oe(n,[{key:"setIsFocused",value:function(e){var o=this.set("isFocused",e);return o}},{key:"setMarks",value:function(e){var o=this.set("marks",e);return o}},{key:"setProperties",value:function(e){e=n.createProperties(e);var o=e,i=o.anchor,u=o.focus,c=Zt(o,["anchor","focus"]);i&&(c.anchor=ee.create(i)),u&&(c.focus=ee.create(u));var f=this.merge(c);return f}},{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,anchor:this.anchor.toJSON(e),focus:this.focus.toJSON(e),isFocused:this.isFocused,marks:this.marks==null?null:this.marks.toArray().map(function(i){return i.toJSON()})};return o}},{key:"isBlurred",get:function(){return!this.isFocused}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isSelection(e))return e;if(je.isRange(e))return n.fromJSON(je.createProperties(e));if(he(e))return n.fromJSON(e);throw new Error("`Selection.create` only accepts objects, ranges or selections, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isSelection(e))return{anchor:ee.createProperties(e.anchor),focus:ee.createProperties(e.focus),isFocused:e.isFocused,marks:e.marks};if(je.isRange(e))return{anchor:ee.createProperties(e.anchor),focus:ee.createProperties(e.focus)};if(he(e)){var o={};return"anchor"in e&&(o.anchor=ee.create(e.anchor)),"focus"in e&&(o.focus=ee.create(e.focus)),"isFocused"in e&&(o.isFocused=e.isFocused),"marks"in e&&(o.marks=e.marks==null?null:ie.createSet(e.marks)),o}throw new Error("`Selection.createProperties` only accepts objects, ranges or selections, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.anchor,i=e.focus,u=e.isFocused,c=u===void 0?!1:u,f=e.marks,v=f===void 0?null:f,h=new n({anchor:ee.fromJSON(o||{}),focus:ee.fromJSON(i||{}),isFocused:c,marks:v==null?null:new E.Set(v.map(ie.fromJSON))});return h}}]),n}(E.Record(O_)),ds={annotation:"@@__SLATE_ANNOTATION__@@",block:"@@__SLATE_BLOCK__@@",change:"@@__SLATE_CHANGE__@@",decoration:"@@__SLATE_DECORATION__@@",document:"@@__SLATE_DOCUMENT__@@",editor:"@@__SLATE_EDITOR__@@",inline:"@@__SLATE_INLINE__@@",leaf:"@@__SLATE_LEAF__@@",mark:"@@__SLATE_MARK__@@",operation:"@@__SLATE_OPERATION__@@",point:"@@__SLATE_POINT__@@",range:"@@__SLATE_RANGE__@@",selection:"@@__SLATE_SELECTION__@@",text:"@@__SLATE_TEXT__@@",value:"@@__SLATE_VALUE__@@"};function hs(t,n){return!!(n&&n[ds[t]])}var b_={anchor:void 0,focus:void 0},je=function(t){Ke(n,t);function n(){return we(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Oe(n,[{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,anchor:this.anchor.toJSON(e),focus:this.focus.toJSON(e)};return o}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isRange(e))return e.object==="range"?e:n.fromJSON(n.createProperties(e));if(he(e))return n.fromJSON(e);throw new Error("`Range.create` only accepts objects or ranges, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(E.List.isList(e)||Array.isArray(e)){var o=new E.List(e.map(n.create));return o}throw new Error("`Range.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isRange(e))return{anchor:ee.createProperties(e.anchor),focus:ee.createProperties(e.focus)};if(he(e)){var o={};return"anchor"in e&&(o.anchor=ee.create(e.anchor)),"focus"in e&&(o.focus=ee.create(e.focus)),o}throw new Error("`Range.createProperties` only accepts objects, annotations, decorations, ranges or selections, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.anchor,i=e.focus,u=new n({anchor:ee.fromJSON(o||{}),focus:ee.fromJSON(i||{})});return u}},{key:"isRange",value:function(e){return hs("range",e)||Mt.isDecoration(e)||At.isSelection(e)}}]),n}(E.Record(b_)),x_={key:void 0,type:void 0,data:void 0,anchor:void 0,focus:void 0},Me=function(t){Ke(n,t);function n(){return we(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Oe(n,[{key:"setProperties",value:function(e){e=n.createProperties(e);var o=this.merge(e);return o}},{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,key:this.key,type:this.type,data:this.data.toJSON(),anchor:this.anchor.toJSON(e),focus:this.focus.toJSON(e)};return o}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isAnnotation(e))return e;if(je.isRange(e))return n.fromJSON(je.createProperties(e));if(he(e))return n.fromJSON(e);throw new Error("`Annotation.create` only accepts objects or annotations, but you passed it: "+e)}},{key:"createMap",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(E.Map.isMap(e))return e;if(he(e)){var o={};for(var i in e){var u=e[i],c=n.create(u);o[i]=c}return E.Map(o)}throw new Error("`Annotation.createMap` only accepts arrays or lists, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isAnnotation(e))return{key:e.key,type:e.type,data:e.data,anchor:ee.createProperties(e.anchor),focus:ee.createProperties(e.focus)};if(he(e)){var o={};return"key"in e&&(o.key=e.key),"type"in e&&(o.type=e.type),"data"in e&&(o.data=yt.create(e.data)),"anchor"in e&&(o.anchor=ee.create(e.anchor)),"focus"in e&&(o.focus=ee.create(e.focus)),o}throw new Error("`Annotation.createProperties` only accepts objects or annotations, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.key,i=e.type,u=e.data,c=e.anchor,f=e.focus;if(!o)throw new Error("Annotations must be created with a `key`, but you passed: "+JSON.stringify(e));if(!i)throw new Error("Annotations must be created with a `type`, but you passed: "+JSON.stringify(e));var v=new n({key:o,type:i,data:yt.create(u||{}),anchor:ee.fromJSON(c||{}),focus:ee.fromJSON(f||{})});return v}}]),n}(E.Record(x_)),E_={data:void 0,key:void 0,nodes:void 0},ut=function(t){Ke(n,t);function n(){return we(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Oe(n,[{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,data:this.data.toJSON(),nodes:this.nodes.toArray().map(function(i){return i.toJSON(e)})};return e.preserveKeys&&(o.key=this.key),o}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isDocument(e))return e;if((E.List.isList(e)||Array.isArray(e))&&(e={nodes:e}),he(e))return n.fromJSON(e);throw new Error("`Document.create` only accepts objects, arrays, lists or documents, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(n.isDocument(e))return e;var o=e.data,i=o===void 0?{}:o,u=e.key,c=u===void 0?ur.create():u,f=e.nodes,v=f===void 0?[]:f,h=new n({key:c,data:new E.Map(i),nodes:Xe.createList(v)});return h}}]),n}(E.Record(E_)),N_={data:void 0,key:void 0,nodes:void 0,type:void 0},nt=function(t){Ke(n,t);function n(){return we(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Oe(n,[{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,type:this.type,data:this.data.toJSON(),nodes:this.nodes.toArray().map(function(i){return i.toJSON(e)})};return e.preserveKeys&&(o.key=this.key),o}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isInline(e))return e;if(typeof e=="string"&&(e={type:e}),he(e))return n.fromJSON(e);throw new Error("`Inline.create` only accepts objects, strings or inlines, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(E.List.isList(e)||Array.isArray(e)){var o=new E.List(e.map(n.create));return o}throw new Error("`Inline.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(n.isInline(e))return e;var o=e.data,i=o===void 0?{}:o,u=e.key,c=u===void 0?ur.create():u,f=e.nodes,v=f===void 0?[]:f,h=e.type;if(typeof h!="string")throw new Error("`Inline.fromJS` requires a `type` string.");var m=new n({key:c,type:h,data:new E.Map(i),nodes:Xe.createList(v)});return m}},{key:"isInlineList",value:function(e){return E.List.isList(e)&&e.every(function(o){return n.isInline(o)})}}]),n}(E.Record(N_)),P_={key:void 0,marks:void 0,text:void 0},F_=E.Record({text:void 0,marks:void 0,annotations:void 0,decorations:void 0}),mt=function(t){Ke(n,t);function n(){return we(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Oe(n,[{key:"addMark",value:function(e){e=ie.create(e);var o=this.marks,i=o.add(e),u=this.set("marks",i);return u}},{key:"addMarks",value:function(e){e=ie.createSet(e);var o=this.set("marks",this.marks.union(e));return o}},{key:"getLeaves",value:function(e,o){var i=this.text,u=this.marks,c=[{text:i,marks:u,annotations:[],decorations:[]}],f=function(g,_){return[{text:g.text.slice(0,_),marks:g.marks,annotations:[].concat(Fe(g.annotations)),decorations:[].concat(Fe(g.decorations))},{text:g.text.slice(_),marks:g.marks,annotations:[].concat(Fe(g.annotations)),decorations:[].concat(Fe(g.decorations))}]},v=function(g){var _=g==="annotations"?e.values():o,w=!0,x=!1,O=void 0;try{for(var F=_[Symbol.iterator](),P;!(w=(P=F.next()).done);w=!0){var L=P.value,M=L.start,B=L.end,D=[],te=0,oe=!0,U=!1,se=void 0;try{for(var j=c[Symbol.iterator](),ue;!(oe=(ue=j.next()).done);oe=!0){var ve=ue.value,Y=ve.text.length,re=te;if(te+=Y,M.offset<=re&&B.offset>=re+Y){ve[g].push(L),D.push(ve);continue}if(M.offset>re+Y||B.offset<re||B.offset===re&&re!==0){D.push(ve);continue}var Z=ve,J=void 0,G=void 0;if(B.offset<re+Y){var Je=f(Z,B.offset-re),Te=C(Je,2);Z=Te[0],G=Te[1]}if(M.offset>re){var Be=f(Z,M.offset-re),be=C(Be,2);J=be[0],Z=be[1]}Z[g].push(L),J&&D.push(J),D.push(Z),G&&D.push(G)}}catch(Ee){U=!0,se=Ee}finally{try{!oe&&j.return&&j.return()}finally{if(U)throw se}}c=D}}catch(Ee){x=!0,O=Ee}finally{try{!w&&F.return&&F.return()}finally{if(x)throw O}}};v("annotations"),v("decorations"),c=c.map(function(m){return new F_(De({},m,{annotations:E.List(m.annotations),decorations:E.List(m.decorations)}))});var h=E.List(c);return h}},{key:"insertText",value:function(e,o){var i=this.text,u=i.slice(0,e)+o+i.slice(e),c=this.set("text",u);return c}},{key:"removeMark",value:function(e){e=ie.create(e);var o=this.marks,i=o.remove(e),u=this.set("marks",i);return u}},{key:"removeText",value:function(e,o){var i=this.text,u=i.slice(0,e)+i.slice(e+o),c=this.set("text",u);return c}},{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,text:this.text,marks:this.marks.toArray().map(function(i){return i.toJSON()})};return e.preserveKeys&&(o.key=this.key),o}},{key:"setMark",value:function(e,o){var i=this.marks,u=ie.create(e),c=u.merge(o),f=i.remove(u).add(c),v=this.set("marks",f);return v}},{key:"splitText",value:function(e){var o=this.text,i=this.set("text",o.slice(0,e)),u=this.set("text",o.slice(e)).regenerateKey();return[i,u]}},{key:"mergeText",value:function(e){var o=this.text+e.text,i=this.set("text",o);return i}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(n.isText(e))return e;if(typeof e=="string"&&(e={text:e}),he(e))return n.fromJSON(e);throw new Error("`Text.create` only accepts objects, arrays, strings or texts, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(E.List.isList(e)||Array.isArray(e)){var o=new E.List(e.map(n.create));return o}throw new Error("`Text.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(n.isText(e))return e;rt(e.leaves==null,"As of slate@0.46, the `leaves` property of text nodes has been removed! Each individual leaf should be created as a text node instead.");var o=e.text,i=o===void 0?"":o,u=e.marks,c=u===void 0?[]:u,f=e.key,v=f===void 0?ur.create():f,h=new n({key:v,text:i,marks:ie.createSet(c)});return h}},{key:"isTextList",value:function(e){return E.List.isList(e)&&e.every(function(o){return n.isText(o)})}}]),n}(E.Record(P_)),Xe=function(){function t(){we(this,t)}return Oe(t,null,[{key:"create",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.isNode(r))return r;if(he(r)){var e=r.object;switch(!e&&r.kind&&(z(),e=r.kind),e){case"block":return at.create(r);case"document":return ut.create(r);case"inline":return nt.create(r);case"text":return mt.create(r);default:throw new Error("`Node.create` requires a `object` string.")}}throw new Error("`Node.create` only accepts objects or nodes but you passed it: "+r)}},{key:"createList",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(E.List.isList(r)||Array.isArray(r)){var e=[];r.forEach(function(i){if(i&&i.object==="text"&&i.leaves&&Array.isArray(i.leaves)){z();var u=mt.createList(i.leaves).toArray();e=e.concat(u);return}var c=t.create(i);e.push(c)});var o=E.List(e);return o}throw new Error("`Node.createList` only accepts lists or arrays, but you passed it: "+r)}},{key:"createProperties",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(at.isBlock(r)||nt.isInline(r))return{data:r.data,type:r.type};if(typeof r=="string")return{type:r};if(he(r)){var e={};return"type"in r&&(e.type=r.type),"data"in r&&(e.data=yt.create(r.data)),e}throw new Error("`Node.createProperties` only accepts objects, strings, blocks or inlines, but you passed it: "+r)}},{key:"fromJSON",value:function(r){var e=r.object;switch(!e&&r.kind&&(z(),e=r.kind),e){case"block":return at.fromJSON(r);case"document":return ut.fromJSON(r);case"inline":return nt.fromJSON(r);case"text":return mt.fromJSON(r);default:throw new Error("`Node.fromJSON` requires an `object` of either 'block', 'document', 'inline' or 'text', but you passed: "+r)}}},{key:"isNode",value:function(r){return at.isBlock(r)||ut.isDocument(r)||nt.isInline(r)||mt.isText(r)}},{key:"isNodeList",value:function(r){return E.List.isList(r)&&r.every(function(e){return t.isNode(e)})}}]),t}(),B_={data:void 0,key:void 0,nodes:void 0,type:void 0},at=function(t){Ke(n,t);function n(){return we(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Oe(n,[{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,type:this.type,data:this.data.toJSON(),nodes:this.nodes.toArray().map(function(i){return i.toJSON(e)})};return e.preserveKeys&&(o.key=this.key),o}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isBlock(e))return e;if(typeof e=="string"&&(e={type:e}),he(e))return n.fromJSON(e);throw new Error("`Block.create` only accepts objects, strings or blocks, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(E.List.isList(e)||Array.isArray(e)){var o=new E.List(e.map(n.create));return o}throw new Error("`Block.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(n.isBlock(e))return e;var o=e.data,i=o===void 0?{}:o,u=e.key,c=u===void 0?ur.create():u,f=e.nodes,v=f===void 0?[]:f,h=e.type;if(typeof h!="string")throw new Error("`Block.fromJSON` requires a `type` string.");var m=new n({key:c,type:h,data:E.Map(i),nodes:Xe.createList(v)});return m}},{key:"isBlockList",value:function(e){return E.List.isList(e)&&e.every(function(o){return n.isBlock(o)})}}]),n}(E.Record(B_)),$_={annotations:void 0,data:void 0,document:void 0,selection:void 0},gt=function(t){Ke(n,t);function n(){return we(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Oe(n,[{key:"addAnnotation",value:function(e){e=Me.create(e);var o=this,i=o,u=i.annotations,c=i.document,f=e,v=f.key;return e=e.updatePoints(function(h){return h.normalize(c)}),u=u.set(v,e),o=o.set("annotations",u),o}},{key:"addMark",value:function(e,o){o=ie.create(o);var i=this,u=i,c=u.document;return c=c.addMark(e,o),i=i.set("document",c),i}},{key:"insertNode",value:function(e,o){var i=this,u=i,c=u.document;return c=c.insertNode(e,o),i=i.set("document",c),i=i.mapRanges(function(f){return f.updatePoints(function(v){return v.setPath(null)})}),i}},{key:"insertText",value:function(e,o,i){var u=this,c=u,f=c.document,v=f.assertNode(e);return f=f.insertText(e,o,i),v=f.assertNode(e),u=u.set("document",f),u=u.mapPoints(function(h){return h.key===v.key&&h.offset>=o?h.setOffset(h.offset+i.length):h}),u}},{key:"mergeNode",value:function(e){var o=this,i=o,u=i.document,c=u.mergeNode(e);e=u.resolvePath(e);var f=$.decrement(e),v=u.getNode(f),h=u.getNode(e);return o=o.set("document",c),o=o.mapRanges(function(m){if(h.object==="text"){var g=v.text.length;m.anchor.key===h.key&&(m=m.moveAnchorTo(v.key,g+m.anchor.offset)),m.focus.key===h.key&&(m=m.moveFocusTo(v.key,g+m.focus.offset))}return m=m.updatePoints(function(_){return _.setPath(null)}),m}),o}},{key:"moveNode",value:function(e,o){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=this,c=u,f=c.document;return $.isEqual(e,o)||(f=f.moveNode(e,o,i),u=u.set("document",f),u=u.mapPoints(function(v){return v.setPath(null)})),u}},{key:"removeAnnotation",value:function(e){e=Me.create(e);var o=this,i=o,u=i.annotations,c=e,f=c.key;return u=u.delete(f),o=o.set("annotations",u),o}},{key:"removeMark",value:function(e,o){o=ie.create(o);var i=this,u=i,c=u.document;return c=c.removeMark(e,o),i=i.set("document",c),i}},{key:"removeNode",value:function(e){var o=this,i=o,u=i.document,c=u.assertNode(e),f=c.object==="text"?c:c.getFirstText()||c,v=c.object==="text"?c:c.getLastText()||c,h=u.getPreviousText(f.key),m=u.getNextText(v.key);return u=u.removeNode(e),o=o.set("document",u),o=o.mapRanges(function(g){var _=g,w=_.anchor,x=_.focus;return c.hasNode(w.key)&&(g=h?g.moveAnchorTo(h.key,h.text.length):m?g.moveAnchorTo(m.key,0):g.unset()),c.hasNode(x.key)&&(g=h?g.moveFocusTo(h.key,h.text.length):m?g.moveFocusTo(m.key,0):g.unset()),g=g.updatePoints(function(O){return O.setPath(null)}),g}),o}},{key:"removeText",value:function(e,o,i){var u=this,c=u,f=c.document,v=f.assertNode(e);f=f.removeText(e,o,i),u=u.set("document",f);var h=i.length,m=o,g=o+h;return u=u.mapPoints(function(_){return _.key!==v.key?_:_.offset>=g?_.setOffset(_.offset-h):_.offset>m?_.setOffset(m):_}),u}},{key:"setAnnotation",value:function(e,o){o=Me.createProperties(o);var i=Me.create(e),u=i.merge(o),c=this,f=c,v=f.annotations,h=i.key;return v=v.set(h,u),c=c.set("annotations",v),c}},{key:"setNode",value:function(e,o){var i=this,u=i,c=u.document;return c=c.setNode(e,o),i=i.set("document",c),i}},{key:"setMark",value:function(e,o,i){var u=this,c=u,f=c.document;return f=f.setMark(e,o,i),u=u.set("document",f),u}},{key:"setProperties",value:function(e){var o=this,i=o,u=i.document,c=e.data,f=e.annotations,v={};return c&&(v.data=c),f&&(v.annotations=f.map(function(h){return h.isSet?h:u.resolveAnnotation(h)})),o=o.merge(v),o}},{key:"setSelection",value:function(e){var o=this,i=o,u=i.document,c=i.selection,f=c.setProperties(e);return c=u.resolveSelection(f),o=o.set("selection",c),o}},{key:"splitNode",value:function(e,o,i){var u=this,c=u,f=c.document,v=f.splitNode(e,o,i),h=f.assertNode(e);return u=u.set("document",v),u=u.mapRanges(function(m){var g=v.getNextText(h.key),_=m,w=_.anchor,x=_.focus;return h.key===w.key&&o<=w.offset&&(m=m.moveAnchorTo(g.key,w.offset-o)),h.key===x.key&&o<=x.offset&&(m=m.moveFocusTo(g.key,x.offset-o)),m=m.updatePoints(function(O){return O.setPath(null)}),m}),u}},{key:"mapRanges",value:function(e){var o=this,i=o,u=i.document,c=i.selection,f=i.annotations,v=c.isSet?e(c):c;v||(v=c.unset()),v!==c&&(v=u.createSelection(v)),o=o.set("selection",v);var h=f.map(function(m){var g=m.isSet?e(m):m;return g&&g!==m&&(g=u.createAnnotation(g)),g});return h=h.filter(function(m){return!!m}),o=o.set("annotations",h),o}},{key:"mapPoints",value:function(e){return this.mapRanges(function(o){return o.updatePoints(e)})}},{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,document:this.document.toJSON(e)};return e.preserveData&&(o.data=this.data.toJSON(e)),e.preserveAnnotations&&(o.annotations=this.annotations.map(function(i){return i.toJSON(e)}).toObject()),e.preserveSelection&&(o.selection=this.selection.toJSON(e)),o}},{key:"change",value:function(){rt(!1,"As of Slate 0.42.0, value object are no longer schema-aware, and the `value.change()` method is no longer available. Use the `editor.change()` method on the new `Editor` controller instead.")}},{key:"startBlock",get:function(){return this.selection.start.key&&this.document.getClosestBlock(this.selection.start.key)}},{key:"endBlock",get:function(){return this.selection.end.key&&this.document.getClosestBlock(this.selection.end.key)}},{key:"anchorBlock",get:function(){return this.selection.anchor.key&&this.document.getClosestBlock(this.selection.anchor.key)}},{key:"focusBlock",get:function(){return this.selection.focus.key&&this.document.getClosestBlock(this.selection.focus.key)}},{key:"startInline",get:function(){return this.selection.start.key&&this.document.getClosestInline(this.selection.start.key)}},{key:"endInline",get:function(){return this.selection.end.key&&this.document.getClosestInline(this.selection.end.key)}},{key:"anchorInline",get:function(){return this.selection.anchor.key&&this.document.getClosestInline(this.selection.anchor.key)}},{key:"focusInline",get:function(){return this.selection.focus.key&&this.document.getClosestInline(this.selection.focus.key)}},{key:"startText",get:function(){return this.selection.start.key&&this.document.getDescendant(this.selection.start.key)}},{key:"endText",get:function(){return this.selection.end.key&&this.document.getDescendant(this.selection.end.key)}},{key:"anchorText",get:function(){return this.selection.anchor.key&&this.document.getDescendant(this.selection.anchor.key)}},{key:"focusText",get:function(){return this.selection.focus.key&&this.document.getDescendant(this.selection.focus.key)}},{key:"nextBlock",get:function(){return this.selection.end.key&&this.document.getNextBlock(this.selection.end.key)}},{key:"previousBlock",get:function(){return this.selection.start.key&&this.document.getPreviousBlock(this.selection.start.key)}},{key:"nextInline",get:function(){return this.selection.end.key&&this.document.getNextInline(this.selection.end.key)}},{key:"previousInline",get:function(){return this.selection.start.key&&this.document.getPreviousInline(this.selection.start.key)}},{key:"nextText",get:function(){return this.selection.end.key&&this.document.getNextText(this.selection.end.key)}},{key:"previousText",get:function(){return this.selection.start.key&&this.document.getPreviousText(this.selection.start.key)}},{key:"marks",get:function(){return this.selection.isUnset?new E.Set:this.selection.marks||this.document.getMarksAtRange(this.selection)}},{key:"activeMarks",get:function(){return this.selection.isUnset?new E.Set:this.selection.marks||this.document.getActiveMarksAtRange(this.selection)}},{key:"blocks",get:function(){return this.selection.isUnset?new E.List:this.document.getLeafBlocksAtRange(this.selection)}},{key:"fragment",get:function(){return this.selection.isUnset?ut.create():this.document.getFragmentAtRange(this.selection)}},{key:"inlines",get:function(){return this.selection.isUnset?new E.List:this.document.getLeafInlinesAtRange(this.selection)}},{key:"texts",get:function(){return this.selection.isUnset?new E.List:this.document.getTextsAtRange(this.selection)}},{key:"history",get:function(){rt(!1,"As of Slate 0.42.0, the `value.history` model no longer exists, and the history is stored in `value.data` instead using plugins.")}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n.isValue(e))return e;if(he(e))return n.fromJSON(e,o);throw new Error("`Value.create` only accepts objects or values, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isValue(e))return{annotations:e.annotations,data:e.data};if(he(e)){var o={};return"annotations"in e&&(o.annotations=Me.createMap(e.annotations)),"data"in e&&(o.data=yt.create(e.data)),o}throw new Error("`Value.createProperties` only accepts objects or values, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.data,i=o===void 0?{}:o,u=e.annotations,c=u===void 0?{}:u,f=e.document,v=f===void 0?{}:f,h=e.selection,m=h===void 0?{}:h;if(i=yt.fromJSON(i),v=ut.fromJSON(v),m=v.createSelection(m),c=Me.createMap(c),m.isUnset){var g=v.getFirstText();g&&(m=m.moveToStartOfNode(g)),m=v.createSelection(m)}var _=new n({annotations:c,data:i,document:v,selection:m});return _}}]),n}(E.Record($_)),I_=ya("slate:operation:apply");function C_(t,n){n=Lt.create(n);var r=n,e=r.type;switch(I_(e,n),e){case"add_annotation":{var o=n,i=o.annotation,u=t.addAnnotation(i);return u}case"add_mark":{var c=n,f=c.path,v=c.mark,h=t.addMark(f,v);return h}case"insert_node":{var m=n,g=m.path,_=m.node,w=t.insertNode(g,_);return w}case"insert_text":{var x=n,O=x.path,F=x.offset,P=x.text,L=x.marks,M=t.insertText(O,F,P,L);return M}case"merge_node":{var B=n,D=B.path,te=t.mergeNode(D);return te}case"move_node":{var oe=n,U=oe.path,se=oe.newPath,j=t.moveNode(U,se);return j}case"remove_annotation":{var ue=n,ve=ue.annotation,Y=t.removeAnnotation(ve);return Y}case"remove_mark":{var re=n,Z=re.path,J=re.mark,G=t.removeMark(Z,J);return G}case"remove_node":{var Je=n,Te=Je.path,Be=t.removeNode(Te);return Be}case"remove_text":{var be=n,Ee=be.path,Ue=be.offset,V=be.text,X=t.removeText(Ee,Ue,V);return X}case"set_annotation":{var pe=n,ct=pe.properties,Qe=pe.newProperties,ot=t.setAnnotation(ct,Qe);return ot}case"set_mark":{var _t=n,zt=_t.path,Se=_t.properties,$e=_t.newProperties,ne=t.setMark(zt,Se,$e);return ne}case"set_node":{var Ve=n,Br=Ve.path,et=Ve.newProperties,ft=t.setNode(Br,et);return ft}case"set_selection":{var Nt=n,Pt=Nt.newProperties,yr=t.setSelection(Pt);return yr}case"set_value":{var $r=n,Dt=$r.newProperties,Ir=t.setProperties(Dt);return Ir}case"split_node":{var Ft=n,mn=Ft.path,Cr=Ft.position,Mr=Ft.properties,Rr=t.splitNode(mn,Cr,Mr);return Rr}default:throw new Error('Unknown operation type: "'+e+'".')}}var M_=ya("slate:operation:invert");function R_(t){t=Lt.create(t);var n=t,r=n.type;switch(M_(r,t),r){case"move_node":{var e=t,o=e.newPath,i=e.path;if($.isEqual(o,i))return t;var u=$.transform(i,t).first(),c=$.transform($.increment(i),t).first(),f=t.set("path",u).set("newPath",c);return f}case"merge_node":{var v=t,h=v.path,m=$.decrement(h),g=t.set("type","split_node").set("path",m);return g}case"split_node":{var _=t,w=_.path,x=$.increment(w),O=t.set("type","merge_node").set("path",x);return O}case"set_annotation":case"set_node":case"set_value":case"set_selection":case"set_mark":{var F=t,P=F.properties,L=F.newProperties,M=t.set("properties",L).set("newProperties",P);return M}case"insert_node":case"insert_text":{var B=t.set("type",r.replace("insert_","remove_"));return B}case"remove_node":case"remove_text":{var D=t.set("type",r.replace("remove_","insert_"));return D}case"add_annotation":case"add_mark":{var te=t.set("type",r.replace("add_","remove_"));return te}case"remove_annotation":case"remove_mark":{var oe=t.set("type",r.replace("remove_","add_"));return oe}default:throw new Error('Unknown operation type: "'+r+'".')}}var pi={add_mark:["path","mark","data"],add_annotation:["annotation","data"],insert_node:["path","node","data"],insert_text:["path","offset","text","data"],merge_node:["path","position","properties","target","data"],move_node:["path","newPath","data"],remove_annotation:["annotation","data"],remove_mark:["path","mark","data"],remove_node:["path","node","data"],remove_text:["path","offset","text","data"],set_annotation:["properties","newProperties","data"],set_mark:["path","properties","newProperties","data"],set_node:["path","properties","newProperties","data"],set_selection:["properties","newProperties","data"],set_value:["properties","newProperties","data"],split_node:["path","position","properties","target","data"]},L_={annotation:void 0,data:void 0,length:void 0,mark:void 0,marks:void 0,newPath:void 0,newProperties:void 0,node:void 0,offset:void 0,path:void 0,position:void 0,properties:void 0,target:void 0,text:void 0,type:void 0},Lt=function(t){Ke(n,t);function n(){return we(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Oe(n,[{key:"apply",value:function(e){var o=C_(e,this);return o}},{key:"invert",value:function(){var e=R_(this);return e}},{key:"toJSON",value:function(){var e=this.object,o=this.type,i={object:e,type:o},u=pi[o],c=!0,f=!1,v=void 0;try{for(var h=u[Symbol.iterator](),m;!(c=(m=h.next()).done);c=!0){var g=m.value,_=this[g];if((g==="annotation"||g==="mark"||g==="marks"||g==="node"||g==="path"||g==="newPath")&&(_=_.toJSON()),g==="properties"&&o==="merge_node"){var w={};"data"in _&&(w.data=_.data.toJS()),"type"in _&&(w.type=_.type),_=w}if((g==="properties"||g==="newProperties")&&o==="set_annotation"){var x={};"anchor"in _&&(x.anchor=_.anchor.toJS()),"focus"in _&&(x.focus=_.focus.toJS()),"key"in _&&(x.key=_.key),"data"in _&&(x.data=_.data.toJS()),"type"in _&&(x.type=_.type),_=x}if((g==="properties"||g==="newProperties")&&o==="set_mark"){var O={};"data"in _&&(O.data=_.data.toJS()),"type"in _&&(O.type=_.type),_=O}if((g==="properties"||g==="newProperties")&&o==="set_node"){var F={};"data"in _&&(F.data=_.data.toJS()),"type"in _&&(F.type=_.type),_=F}if((g==="properties"||g==="newProperties")&&o==="set_selection"){var P={};"anchor"in _&&(P.anchor=_.anchor.toJSON()),"focus"in _&&(P.focus=_.focus.toJSON()),"isFocused"in _&&(P.isFocused=_.isFocused),"marks"in _&&(P.marks=_.marks&&_.marks.toJSON()),_=P}if((g==="properties"||g==="newProperties")&&o==="set_value"){var L={};"data"in _&&(L.data=_.data.toJS()),_=L}if(g==="properties"&&o==="split_node"){var M={};"data"in _&&(M.data=_.data.toJS()),"type"in _&&(M.type=_.type),_=M}g==="data"&&(_=_.toJSON()),i[g]=_}}catch(B){f=!0,v=B}finally{try{!c&&h.return&&h.return()}finally{if(f)throw v}}return i}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isOperation(e))return e;if(he(e))return n.fromJSON(e);throw new Error("`Operation.create` only accepts objects or operations, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(E.List.isList(e)||Array.isArray(e)){var o=new E.List(e.map(n.create));return o}throw new Error("`Operation.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(n.isOperation(e))return e;var o=e.type,i=pi[o],u={type:o};if(!i)throw new Error('`Operation.fromJSON` was passed an unrecognized operation type: "'+o+'"');var c=!0,f=!1,v=void 0;try{for(var h=i[Symbol.iterator](),m;!(c=(m=h.next()).done);c=!0){var g=m.value,_=e[g];if(g==="data"&&_===void 0&&(_={}),_===void 0)throw new Error('`Operation.fromJSON` was passed a "'+o+'" operation without the required "'+g+'" attribute.');g==="annotation"&&(_=Me.create(_)),(g==="path"||g==="newPath")&&(_=$.create(_)),g==="mark"&&(_=ie.create(_)),g==="node"&&(_=Xe.create(_)),(g==="properties"||g==="newProperties")&&o==="set_annotation"&&(_=Me.createProperties(_)),(g==="properties"||g==="newProperties")&&o==="set_mark"&&(_=ie.createProperties(_)),(g==="properties"||g==="newProperties")&&(o==="set_node"||o==="merge_node"||o==="split_node")&&(_=Xe.createProperties(_)),(g==="properties"||g==="newProperties")&&o==="set_selection"&&(_=At.createProperties(_)),(g==="properties"||g==="newProperties")&&o==="set_value"&&(_=gt.createProperties(_)),g==="data"&&(_=E.Map(_)),u[g]=_}}catch(x){f=!0,v=x}finally{try{!c&&h.return&&h.return()}finally{if(f)throw v}}var w=new n(u);return w}},{key:"isOperationList",value:function(e){return E.List.isList(e)&&e.every(function(o){return n.isOperation(o)})}}]),n}(E.Record(L_)),z_={operations:void 0,value:void 0},D_=function(t){Ke(n,t);function n(){return we(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Oe(n,[{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,value:this.value.toJSON(e),operations:this.operations.toArray().map(function(i){return i.toJSON(e)})};return o}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isChange(e))return e;if(he(e))return n.fromJSON(e);throw new Error("`Change.create` only accepts objects or changes, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.value,i=e.operations,u=i===void 0?[]:i,c=new n({value:gt.create(o),operations:Lt.createList(u)});return c}}]),n}(E.Record(z_));function ms(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function n(e,o,i){var u=e.type,c=e.args,f=t[u];if(!f)return i();o.command.apply(o,[f].concat(Fe(c)))}function r(e,o){for(var i in t)e.registerCommand(i);return o()}return{onCommand:n,onConstruct:r}}var j_=55296,K_=57343,q_=/\s/,J_=/['\u2018\u2019]/,U_=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/;function Ra(t){return j_<=t&&t<=K_}function _i(t,n,r){if(t===55356){var e=n.charCodeAt(r+1);return e<=57343&&e>=57339}return!1}function V_(t){return t<=65039&&t>=65024}function W_(t){return t===10084||t===9794||t===9792||t===9760||t===9877||t===9992||t===9711}function La(t,n){if(q_.test(t))return!1;if(J_.test(t)){var r=n.charAt(0),e=za(r);r=n.slice(0,e);var o=n.slice(e);if(La(r,o))return!0}return!U_.test(t)}function za(t){return Ra(t.charCodeAt(0))?2:1}function Da(t,n,r){var e=0;if(t==="")return 1;for(var o=0;o<n;o++)for(var i=null,u=t.charCodeAt(e);u;){if(Ra(u)){var c=_i(u,t,e);if(r){if(!c&&i&&i!=="ZWJ"||c&&i&&i!=="SURR")break}else if(i==="SURR"||i==="BMP")break;e+=2,i=c?"MOD":"SURR",u=t.charCodeAt(e);continue}if(u===8205){e+=1,i="ZWJ",u=t.charCodeAt(e);continue}if(W_(u)){if(r&&i==="VAR"||i&&i!=="ZWJ"&&i!=="VAR")break;e+=1,i="BMP",u=t.charCodeAt(e);continue}if(V_(u)){if(!r&&i&&i!=="ZWJ")break;e+=1,i="VAR",u=t.charCodeAt(e);continue}if(r){var f=t.charCodeAt(e+1);if(_i(f,t,e+1)){e+=3,i="MOD",u=t.charCodeAt(e);continue}}else if(i==="MOD"){e+=1;break}i===null&&(e+=1);break}return e}function G_(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return t=t.slice(0,n),t=Ci.reverse(t),Da(t,r)}function H_(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return t=t.slice(n),Da(t,r,!0)}function ja(t){for(var n=0,r=0,e=!1,o=void 0;o=t.charAt(r);){var i=za(o);o=t.slice(r,r+i);var u=t.slice(r+i);if(La(o,u))e=!0,n+=i;else if(!e)n+=i;else break;r+=i}return n}function Y_(t,n){t=t.slice(0,n),t=Ci.reverse(t);var r=ja(t);return r}function Z_(t,n){t=t.slice(n);var r=ja(t);return r}var Et={getCharLength:za,getCharOffset:Da,getCharOffsetBackward:G_,getCharOffsetForward:H_,getWordOffset:ja,getWordOffsetBackward:Y_,getWordOffsetForward:Z_,isSurrogate:Ra,isWord:La};function fr(t,n){n.isExpanded&&t.deleteAtRange(n);var r=t.value,e=r.document,o=n,i=o.start,u=o.end;return e.hasDescendant(i.path)?n=n.moveToStart():n=n.moveTo(u.path,0).normalize(e),n}var le={};le.addMarkAtRange=function(t,n,r){if(!n.isCollapsed){var e=t.value,o=e.document,i=n.start,u=n.end,c=o.getTextsAtRange(n);t.withoutNormalizing(function(){c.forEach(function(f){var v=f.key,h=0,m=f.text.length;v===i.key&&(h=i.offset),v===u.key&&(m=u.offset),v===i.key&&v===u.key&&(m=u.offset-i.offset),t.addMarkByKey(v,h,m,r)})})}};le.addMarksAtRange=function(t,n,r){r.forEach(function(e){return t.addMarkAtRange(n,e)})};le.deleteAtRange=function(t,n){t.snapshotSelection();var r=t.value,e=n.start,o=n.end,i=e.key,u=e.offset,c=o.key,f=o.offset,v=r.document,h=v.hasVoidParent(i,t),m=v.hasVoidParent(c,t),g=v.getClosestBlock(i),_=v.getClosestBlock(c),w=u===0&&f===0&&h===!1&&i===g.getFirstText().key&&c===_.getFirstText().key&&i!==c;if(w&&m){var x=v.getPreviousText(c);c=x.key,f=x.text.length,m=v.hasVoidParent(c,t)}t.withoutNormalizing(function(){for(;h;){var O=v.getClosestVoid(i,t),F=v.getNextText(i);if(t.removeNodeByKey(O.key),i===c||!F)return;v=t.value.document,i=F.key,u=0,h=v.hasVoidParent(i,t)}for(;m;){var P=v.getClosestVoid(c,t),L=v.getPreviousText(c);t.removeNodeByKey(P.key),v=t.value.document,c=L.key,f=L.text.length,m=v.hasVoidParent(c,t)}if(i===c&&w){t.removeNodeByKey(g.key);return}else if(i===c){var M=u,B=f-u;t.removeTextByKey(i,M,B);return}else{g=v.getClosestBlock(i),_=v.getClosestBlock(c);var D=v.getNode(i),te=v.getNode(c),oe=D.text.length-u,U=f,se=v.getCommonAncestor(i,c),j=se.getFurthestChild(i),ue=se.getFurthestChild(c),ve=v.getParent(g.key),Y=ve.nodes.indexOf(g),re=ve.nodes.indexOf(_),Z=void 0;for(Z=D;Z.key!==j.key;){var J=v.getParent(Z.key),G=J.nodes.indexOf(Z),Je=J.nodes.slice(G+1);Je.reverse().forEach(function(ne){t.removeNodeByKey(ne.key)}),Z=J}var Te=se.nodes.indexOf(j),Be=se.nodes.indexOf(ue),be=se.nodes.slice(Te+1,Be);for(be.reverse().forEach(function(ne){t.removeNodeByKey(ne.key)}),Z=te;Z.key!==ue.key;){var Ee=v.getParent(Z.key),Ue=Ee.nodes.indexOf(Z),V=Ee.nodes.slice(0,Ue);V.reverse().forEach(function(ne){t.removeNodeByKey(ne.key)}),Z=Ee}if(oe!==0&&t.removeTextByKey(i,u,oe),U!==0&&t.removeTextByKey(c,0,f),g.key!==_.key){v=t.value.document;var X=void 0,pe=!0,ct=!1,Qe=void 0;try{for(var ot=v.ancestors(_.key)[Symbol.iterator](),_t;!(pe=(_t=ot.next()).done);pe=!0){var zt=_t.value,Se=C(zt,1),$e=Se[0];if($e.nodes.size>1)break;X=$e}}catch(ne){ct=!0,Qe=ne}finally{try{!pe&&ot.return&&ot.return()}finally{if(ct)throw Qe}}re!==Y+1&&t.moveNodeByKey(_.key,ve.key,Y+1),w?t.removeNodeByKey(g.key):t.mergeNodeByKey(_.key),X&&t.removeNodeByKey(X.key)}}})};le.deleteBackwardAtRange=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(r!==0){var e=t.value,o=e.document,i=n,u=i.start,c=i.focus;if(n.isExpanded){t.deleteAtRange(n);return}var f=o.getClosestVoid(u.path,t);if(f){t.removeNodeByKey(f.key);return}if(!u.isAtStartOfNode(o)){var v=o.getClosestBlock(u.path);if(o.nodes.size!==1&&v&&v.text===""&&v.nodes.size===1){t.removeNodeByKey(v.key);return}var h=o.getDescendant(u.path);if(u.isAtStartOfNode(h)){var m=o.getPreviousText(h.key),g=o.getClosestInline(h.key);g&&m.text===""&&(m=o.getPreviousText(m.key));var _=o.getClosestBlock(m.key),w=o.getClosestVoid(m.key,t);if(w){t.removeNodeByKey(w.key);return}if(r===1&&_!==v){n=n.moveAnchorTo(m.key,m.text.length),t.deleteAtRange(n);return}}if(r<=c.offset){n=n.moveFocusBackward(r),t.deleteAtRange(n);return}for(var x=h,O=0,F=c.offset;r>F;){x=o.getPreviousText(x.key);var P=F+x.text.length;if(r<=P){O=P-r;break}else F=P}n=n.moveAnchorTo(x.key,O),t.deleteAtRange(n)}}};le.deleteCharBackwardAtRange=function(t,n){if(n.isExpanded){t.deleteAtRange(n);return}var r=t.value,e=r.document,o=n.start,i=e.getClosestBlock(o.path),u=i.getOffset(o.key),c=u+o.offset,f=i.text,v=Et.getCharOffsetBackward(f,c);t.deleteBackwardAtRange(n,v)};le.deleteCharForwardAtRange=function(t,n){if(n.isExpanded){t.deleteAtRange(n);return}var r=t.value,e=r.document,o=n.start,i=e.getClosestBlock(o.path),u=i.getOffset(o.key),c=u+o.offset,f=i.text,v=Et.getCharOffsetForward(f,c);t.deleteForwardAtRange(n,v)};le.deleteForwardAtRange=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(r!==0){var e=t.value,o=e.document,i=n,u=i.start,c=i.focus;if(n.isExpanded){t.deleteAtRange(n);return}var f=o.getClosestVoid(u.path,t);if(f){t.removeNodeByKey(f.key);return}var v=o.getClosestBlock(u.path);if(v&&!t.isVoid(v)&&v.text===""&&o.nodes.size!==1){var h=o.getNextBlock(v.key);t.removeNodeByKey(v.key),h&&h.key&&t.moveToStartOfNode(h);return}if(!u.isAtEndOfNode(o)){var m=o.getDescendant(u.path);if(u.isAtEndOfNode(m)){var g=o.getNextText(m.key),_=o.getClosestBlock(g.key),w=o.getClosestVoid(g.key,t);if(w){t.removeNodeByKey(w.key);return}if(r===1&&_!==v){n=n.moveFocusTo(g.key,0),t.deleteAtRange(n);return}}if(r<=m.text.length-c.offset){n=n.moveFocusForward(r),t.deleteAtRange(n);return}for(var x=m,O=c.offset,F=m.text.length-c.offset;r>F;){x=o.getNextText(x.key);var P=F+x.text.length;if(r<=P){O=r-F;break}else F=P}n=n.moveFocusTo(x.key,O),t.deleteAtRange(n)}}};le.deleteLineBackwardAtRange=function(t,n){if(n.isExpanded){t.deleteAtRange(n);return}var r=t.value,e=r.document,o=n.start,i=e.getClosestBlock(o.path),u=i.getOffset(o.key),c=u+o.offset;t.deleteBackwardAtRange(n,c)};le.deleteLineForwardAtRange=function(t,n){if(n.isExpanded){t.deleteAtRange(n);return}var r=t.value,e=r.document,o=n.start,i=e.getClosestBlock(o.path),u=i.getOffset(o.key),c=u+o.offset;t.deleteForwardAtRange(n,i.text.length-c)};le.deleteWordBackwardAtRange=function(t,n){if(n.isExpanded){t.deleteAtRange(n);return}var r=t.value,e=r.document,o=n.start,i=e.getClosestBlock(o.path),u=i.getOffset(o.key),c=u+o.offset,f=i.text,v=c===0?1:Et.getWordOffsetBackward(f,c);t.deleteBackwardAtRange(n,v)};le.deleteWordForwardAtRange=function(t,n){if(n.isExpanded){t.deleteAtRange(n);return}var r=t.value,e=r.document,o=n.start,i=e.getClosestBlock(o.path),u=i.getOffset(o.key),c=u+o.offset,f=i.text,v=Et.getWordOffsetForward(f,c),h=v===0?1:v;t.deleteForwardAtRange(n,h)};le.insertBlockAtRange=function(t,n,r){n=fr(t,n),r=at.create(r);var e=t.value,o=e.document,i=n,u=i.start,c=u.key,f=u.offset,v=o.getClosestBlock(c),h=o.getClosestInline(c),m=o.getParent(v.key),g=m.nodes.indexOf(v),_=ys(t,n);if(_==="before")t.insertNodeByKey(m.key,g,r);else if(_==="behind")t.insertNodeByKey(m.key,g+1,r);else{if(h&&t.isVoid(h)){var w=u.isAtEndOfNode(h),x=w?o.getNextText(c):o.getPreviousText(c),O=w?n.moveToStartOfNode(x):n.moveToEndOfNode(x);c=O.start.key,f=O.start.offset}t.withoutNormalizing(function(){t.splitDescendantsByKey(v.key,c,f),t.insertNodeByKey(m.key,g+1,r)})}};var ys=function(n,r){var e=n.value,o=e.document,i=r.start,u=i.key,c=o.getClosestBlock(u),f=o.getClosestInline(u);return n.isVoid(c)?i.isAtEndOfNode(c)?"behind":"before":!f&&c.text===""?"behind":i.isAtStartOfNode(c)?"before":i.isAtEndOfNode(c)?"behind":"split"};le.insertFragmentAtRange=function(t,n,r){t.withoutNormalizing(function(){if(n=fr(t,n),!!r.nodes.size){r=r.mapDescendants(function(Y){return Y.regenerateKey()});var e=n,o=e.start,i=t.value,u=i.document,c=u.getDescendant(o.path),f=u.getClosestBlock(c.key),v=f.getFurthestChild(c.key),h=o.isAtStartOfNode(f),m=u.getParent(f.key),g=m.nodes.indexOf(f),_=r.getBlocks(),w=r.nodes.first(),x=r.nodes.last(),O=_.first(),F=_.last(),P=X_(r,u,f.key);if(O===F&&t.isVoid(O)){t.insertBlockAtRange(n,O);return}if(P===r&&(w.hasBlockChildren()||x.hasBlockChildren())){var L=ys(t,n),M=L==="before"?r.nodes:r.nodes.reverse();M.forEach(function(Y){t.insertBlockAtRange(n,Y)});return}if(O!==F){var B=P.getFurthest(O.key,function(Y){return Y.nodes.size===1}),D=B||O,te=m.nodes.indexOf(f),oe=P.removeNode(D.key);oe.nodes.forEach(function(Y,re){var Z=te+re+1;t.insertNodeByKey(m.key,Z,Y)})}if(o.offset!==0&&t.splitDescendantsByKey(v.key,o.key,o.offset),u=t.value.document,c=u.getDescendant(o.key),f=u.getClosestBlock(o.key),v=f.getFurthestChild(c.key),O!==F){var U=h?v:f.getNextSibling(v.key),se=U?f.nodes.skipUntil(function(Y){return Y.key===U.key}):E.List(),j=F.nodes.size;se.forEach(function(Y,re){var Z=j+re;t.moveNodeByKey(Y.key,F.key,Z)})}if(!t.isVoid(f)&&f.text===""&&!f.findDescendant(function(Y){return t.isVoid(Y)}))t.removeNodeByKey(f.key),t.insertNodeByKey(m.key,g,O);else{var ue=f.getFurthestChild(c.key),ve=f.nodes.indexOf(ue);O.nodes.forEach(function(Y,re){var Z=o.offset===0?0:1,J=ve+re+Z;t.insertNodeByKey(f.key,J,Y)})}}})};var X_=function(n,r,e){var o=function(g){for(var _=g;_.nodes.size===1&&_.nodes.first().object==="block";)_=_.nodes.first();return _===g?null:_},i=function(g,_){return _.size>=g.size&&g.every(function(w,x){return _.get(x).type===w.type})},u=function(g,_){var w=g.size-_.size;if(w<0)return n;for(var x=0;x<_.size;x++)for(var O=0;O<=w;O++)if(i(_.slice(x),g.slice(O)))return _.get(x);return n},c=function(g,_){return g.getAncestors(_).slice(1).push(g.getNode(_)).reverse()},f=o(n);if(!f)return n;var v=c(r,e),h=c(n,f.key);return u(v,h)};le.insertInlineAtRange=function(t,n,r){r=nt.create(r),t.withoutNormalizing(function(){n=fr(t,n);var e=t.value,o=e.document,i=n,u=i.start,c=o.getParent(u.path),f=o.assertDescendant(u.path),v=c.nodes.indexOf(f);t.isVoid(c)||(t.splitNodeByPath(u.path,u.offset),t.insertNodeByKey(c.key,v+1,r))})};le.insertTextAtRange=function(t,n,r,e){t.withoutNormalizing(function(){n=fr(t,n);var o=t.value,i=o.document,u=n,c=u.start,f=c.offset,v=i.getParent(c.path);t.isVoid(v)||t.insertTextByPath(c.path,f,r,e)})};le.removeMarkAtRange=function(t,n,r){if(!n.isCollapsed){var e=t.value,o=e.document,i=o.getTextsAtRange(n),u=n.start,c=n.end;t.withoutNormalizing(function(){i.forEach(function(f){var v=f.key,h=0,m=f.text.length;v===u.key&&(h=u.offset),v===c.key&&(m=c.offset),v===u.key&&v===c.key&&(m=c.offset-u.offset),t.removeMarkByKey(v,h,m,r)})})}};le.setBlocksAtRange=function(t,n,r){var e=t.value,o=e.document,i=o.getLeafBlocksAtRange(n),u=n.start,c=n.end,f=n.isCollapsed,v=o.hasVoidParent(u.path,t),h=o.getClosestBlock(u.path),m=o.getClosestBlock(c.key),g=f===!1&&u.offset===0&&c.offset===0&&v===!1&&u.key===h.getFirstText().key&&c.key===m.getFirstText().key,_=g?i.slice(0,-1):i;t.withoutNormalizing(function(){_.forEach(function(w){t.setNodeByKey(w.key,r)})})};le.setInlinesAtRange=function(t,n,r){var e=t.value,o=e.document,i=o.getLeafInlinesAtRange(n);t.withoutNormalizing(function(){i.forEach(function(u){t.setNodeByKey(u.key,r)})})};le.splitBlockAtRange=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;n=fr(t,n);for(var e=n,o=e.start,i=e.end,u=t.value,c=u,f=c.document,v=f.assertDescendant(o.path),h=f.getClosestBlock(v.key),m=0;h&&h.object==="block"&&m<r;)v=h,h=f.getClosestBlock(h.key),m++;t.withoutNormalizing(function(){if(t.splitDescendantsByKey(v.key,o.path,o.offset),u=t.value,f=u.document,n.isExpanded){n.isBackward&&(n=n.flip());var g=f.getNextBlock(v.key);n=n.moveAnchorToStartOfNode(g),n=n.setFocus(n.focus.setPath(null)),o.path.equals(i.path)&&(n=n.moveFocusTo(n.anchor.key,i.offset-o.offset)),n=f.resolveRange(n),t.deleteAtRange(n)}})};le.splitInlineAtRange=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1/0;n=fr(t,n);for(var e=n,o=e.start,i=t.value,u=i.document,c=u.assertDescendant(o.path),f=u.getClosestInline(c.key),v=0;f&&f.object==="inline"&&v<r;)c=f,f=u.getClosestInline(f.key),v++;t.splitDescendantsByKey(c.key,o.path,o.offset)};le.toggleMarkAtRange=function(t,n,r){if(!n.isCollapsed){r=ie.create(r);var e=t.value,o=e.document,i=o.getActiveMarksAtRange(n),u=i.some(function(c){return c.equals(r)});u?t.removeMarkAtRange(n,r):t.addMarkAtRange(n,r)}};le.unwrapBlockAtRange=function(t,n,r){r=Xe.createProperties(r);var e=t.value,o=e.document,i=o.getLeafBlocksAtRange(n),u=i.map(function(c){return o.getClosest(c.key,function(f){return!(f.object!=="block"||r.type!=null&&f.type!==r.type||r.data!=null&&!f.data.isSuperset(r.data))})}).filter(function(c){return c}).toOrderedSet().toList();t.withoutNormalizing(function(){u.forEach(function(c){var f=c.nodes.first(),v=c.nodes.last(),h=t.value.document.getParent(c.key),m=h.nodes.indexOf(c),g=c.nodes.filter(function(O){return i.some(function(F){return O===F||O.hasDescendant(F.key)})}),_=g.first(),w=g.last();if(f===_&&v===w)c.nodes.forEach(function(O,F){t.moveNodeByKey(O.key,h.key,m+F)}),t.removeNodeByKey(c.key);else if(v===w)c.nodes.skipUntil(function(O){return O===_}).forEach(function(O,F){t.moveNodeByKey(O.key,h.key,m+1+F)});else if(f===_)c.nodes.takeUntil(function(O){return O===w}).push(w).forEach(function(O,F){t.moveNodeByKey(O.key,h.key,m+F)});else{var x=_.getFirstText();t.splitDescendantsByKey(c.key,x.key,0),o=t.value.document,g.forEach(function(O,F){if(F===0){var P=O;O=o.getNextBlock(O.key),t.removeNodeByKey(P.key)}t.moveNodeByKey(O.key,h.key,m+1+F)})}})})};le.unwrapInlineAtRange=function(t,n,r){r=Xe.createProperties(r);var e=t.value,o=e.document,i=o.getTextsAtRange(n),u=i.map(function(c){return o.getClosest(c.key,function(f){return!(f.object!=="inline"||r.type!=null&&f.type!==r.type||r.data!=null&&!f.data.isSuperset(r.data))})}).filter(function(c){return c}).toOrderedSet().toList();t.withoutNormalizing(function(){u.forEach(function(c){var f=t.value.document.getParent(c.key),v=f.nodes.indexOf(c);c.nodes.forEach(function(h,m){t.moveNodeByKey(h.key,f.key,v+m)}),t.removeNodeByKey(c.key)})})};le.wrapBlockAtRange=function(t,n,r){r=at.create(r),r=r.set("nodes",r.nodes.clear());var e=t.value,o=e.document,i=o.getLeafBlocksAtRange(n),u=i.first(),c=i.last(),f=void 0,v=void 0,h=void 0;if(i.length===1?(f=o.getParent(u.key),v=i):f=o.getClosest(u.key,function(g){return!!o.getClosest(c.key,function(_){return g===_})}),f==null&&(f=o),v==null){var m=f.nodes.reduce(function(g,_,w){return(_===u||_.hasDescendant(u.key))&&(g[0]=w),(_===c||_.hasDescendant(c.key))&&(g[1]=w),g},[]);h=m[0],v=f.nodes.slice(m[0],m[1]+1)}h==null&&(h=f.nodes.indexOf(v.first())),t.withoutNormalizing(function(){t.insertNodeByKey(f.key,h,r),v.forEach(function(g,_){t.moveNodeByKey(g.key,r.key,_)})})};le.wrapInlineAtRange=function(t,n,r){var e=t.value,o=e.document,i=n.start,u=n.end;if(n.isCollapsed){var c=o.getClosestInline(i.path);return!c||!t.isVoid(c)?void 0:t.wrapInlineByKey(c.key,r)}r=nt.create(r),r=r.set("nodes",r.nodes.clear());var f=o.getLeafBlocksAtRange(n),v=o.getClosestBlock(i.path),h=o.getClosestBlock(u.path),m=o.getClosestInline(i.path),g=o.getClosestInline(u.path),_=v.getFurthestChild(i.key),w=h.getFurthestChild(u.key);t.withoutNormalizing(function(){(!m||m!==g)&&(t.splitDescendantsByKey(w.key,u.key,u.offset),t.splitDescendantsByKey(_.key,i.key,i.offset)),o=t.value.document,v=o.getDescendant(v.key),h=o.getDescendant(h.key),_=v.getFurthestChild(i.key),w=h.getFurthestChild(u.key);var x=v.nodes.indexOf(_),O=h.nodes.indexOf(w);if(m&&m===g){var F=v.getTextsAtRange(n).map(function(j){return i.key===j.key&&u.key===j.key?j.splitText(i.offset)[1].splitText(u.offset-i.offset)[0].regenerateKey():i.key===j.key?j.splitText(i.offset)[1].regenerateKey():u.key===j.key?j.splitText(u.offset)[0].regenerateKey():j.regenerateKey()});r=r.set("nodes",F),t.insertInlineAtRange(n,r)}else if(v===h){o=t.value.document,v=o.getClosestBlock(i.key),_=v.getFurthestChild(i.key);var P=o.getNextSibling(_.key),L=v.nodes.indexOf(P),M=i.key===u.key?P:v.getFurthestChild(u.key),B=v.nodes.skipUntil(function(j){return j===P}).takeUntil(function(j){return j===M}).push(M),D=r.regenerateKey();t.insertNodeByKey(v.key,L,D),B.forEach(function(j,ue){t.moveNodeByKey(j.key,D.key,ue)})}else{var te=v.nodes.slice(x+1),oe=h.nodes.slice(0,O+1),U=r.regenerateKey(),se=r.regenerateKey();t.insertNodeByKey(v.key,x+1,U),t.insertNodeByKey(h.key,O,se),te.forEach(function(j,ue){t.moveNodeByKey(j.key,U.key,ue)}),oe.forEach(function(j,ue){t.moveNodeByKey(j.key,se.key,ue)}),f.slice(1,-1).forEach(function(j){var ue=r.regenerateKey();t.insertNodeByKey(j.key,0,ue),j.nodes.forEach(function(ve,Y){t.moveNodeByKey(ve.key,ue.key,Y)})})}})};le.wrapTextAtRange=function(t,n,r){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r,o=n.start,i=n.end,u=n.moveToStart(),c=n.moveToEnd();o.path.equals(i.path)&&(c=c.moveForward(r.length)),t.withoutNormalizing(function(){t.insertTextAtRange(u,r),t.insertTextAtRange(c,e)})};var ae={};ae.addMarkByPath=function(t,n,r,e,o){o=ie.create(o),t.addMarksByPath(n,r,e,[o])};ae.addMarksByPath=function(t,n,r,e,o){if(o=ie.createSet(o),!!o.size){var i=t.value,u=i.document,c=u.assertNode(n);t.withoutNormalizing(function(){r+e<c.text.length&&t.splitNodeByPath(n,r+e),r>0&&(t.splitNodeByPath(n,r),n=$.increment(n),r=0),o.forEach(function(f){t.applyOperation({type:"add_mark",path:n,mark:ie.create(f)})})})}};ae.replaceMarksByPath=function(t,n,r,e,o){var i=ie.createSet(o),u=t.value,c=u.document,f=c.assertNode(n);f.marks.equals(i)||t.withoutNormalizing(function(){r+e<f.text.length&&t.splitNodeByPath(n,r+e),r>0&&(t.splitNodeByPath(n,r),n=$.increment(n),r=0);var v=i.subtract(f.marks),h=f.marks.subtract(i);h.forEach(function(m){t.applyOperation({type:"remove_mark",path:n,mark:ie.create(m)})}),v.forEach(function(m){t.applyOperation({type:"add_mark",path:n,mark:ie.create(m)})})})};ae.insertFragmentByPath=function(t,n,r,e){e.nodes.forEach(function(o,i){t.insertNodeByPath(n,r+i,o)})};ae.insertNodeByPath=function(t,n,r,e){t.applyOperation({type:"insert_node",path:n.concat(r),node:e})};ae.insertTextByPath=function(t,n,r,e,o){var i=t.value,u=i.annotations,c=i.document;c.assertNode(n),t.withoutNormalizing(function(){var f=!0,v=!1,h=void 0;try{for(var m=u.values()[Symbol.iterator](),g;!(f=(g=m.next()).done);f=!0){var _=g.value,w=_.start,x=_.end,O=t.isAtomic(_);O&&w.path.equals(n)&&w.offset<r&&(!x.path.equals(n)||x.offset>r)&&t.removeAnnotation(_)}}catch(F){v=!0,h=F}finally{try{!f&&m.return&&m.return()}finally{if(v)throw h}}t.applyOperation({type:"insert_text",path:n,offset:r,text:e}),o&&t.replaceMarksByPath(n,r,e.length,o)})};ae.mergeNodeByPath=function(t,n){var r=t.value,e=r.document,o=e.getDescendant(n),i=e.getPreviousSibling(n);if(!i)throw new Error('Unable to merge node with path "'+n+'", because it has no previous sibling.');var u=i.object==="text"?i.text.length:i.nodes.size;t.applyOperation({type:"merge_node",path:n,position:u,properties:{type:o.type,data:o.data},target:null})};ae.moveNodeByPath=function(t,n,r,e){if($.isEqual(n,r))return t;var o=r.concat(e);if($.isEqual(n,o))return t;t.applyOperation({type:"move_node",path:n,newPath:o})};ae.removeMarkByPath=function(t,n,r,e,o){o=ie.create(o),t.removeMarksByPath(n,r,e,[o])};ae.removeMarksByPath=function(t,n,r,e,o){if(o=ie.createSet(o),!!o.size){var i=t.value,u=i.document,c=u.assertNode(n);o.intersect(c.marks).isEmpty()||t.withoutNormalizing(function(){r+e<c.text.length&&t.splitNodeByPath(n,r+e),r>0&&(t.splitNodeByPath(n,r),n=$.increment(n),r=0),o.forEach(function(f){t.applyOperation({type:"remove_mark",path:n,offset:r,length:e,mark:f})})})}};ae.removeAllMarksByPath=function(t,n){var r=t.state,e=r.document,o=e.assertNode(n);t.withoutNormalizing(function(){if(o.object==="text"){t.removeMarksByPath(n,0,o.text.length,o.marks);return}var i=!0,u=!1,c=void 0;try{for(var f=o.texts()[Symbol.iterator](),v;!(i=(v=f.next()).done);i=!0){var h=v.value,m=C(h,2),g=m[0],_=m[1],w=n.concat(_);t.removeMarksByPath(w,0,g.text.length,g.marks)}}catch(x){u=!0,c=x}finally{try{!i&&f.return&&f.return()}finally{if(u)throw c}}})};ae.removeNodeByPath=function(t,n){var r=t.value,e=r.document,o=e.assertNode(n);t.applyOperation({type:"remove_node",path:n,node:o})};ae.removeTextByPath=function(t,n,r,e){var o=t.value,i=o.document,u=o.annotations,c=i.assertNode(n),f=c.text.slice(r,r+e);t.withoutNormalizing(function(){var v=!0,h=!1,m=void 0;try{for(var g=u.values()[Symbol.iterator](),_;!(v=(_=g.next()).done);v=!0){var w=_.value,x=w.start,O=w.end,F=t.isAtomic(w);F&&x.path.equals(n)&&x.offset<r&&(!O.path.equals(n)||O.offset>r)&&t.removeAnnotation(w)}}catch(P){h=!0,m=P}finally{try{!v&&g.return&&g.return()}finally{if(h)throw m}}t.applyOperation({type:"remove_text",path:n,offset:r,text:f})})};ae.replaceNodeByPath=function(t,n,r){r=Xe.create(r);var e=n.last(),o=$.lift(n);t.withoutNormalizing(function(){t.removeNodeByPath(n),t.insertNodeByPath(o,e,r)})};ae.replaceTextByPath=function(t,n,r,e,o,i){t.withoutNormalizing(function(){t.removeTextByPath(n,r,e),t.insertTextByPath(n,r,o,i)})};ae.setMarkByPath=function(t,n,r,e,o,i){o=ie.create(o),i=ie.createProperties(i);var u=t.value,c=u.document,f=c.assertNode(n);t.withoutNormalizing(function(){r+e<f.text.length&&t.splitNodeByPath(n,r+e),r>0&&(t.splitNodeByPath(n,r),n=$.increment(n),r=0),t.applyOperation({type:"set_mark",path:n,properties:o,newProperties:i})})};ae.setNodeByPath=function(t,n,r){var e=t.value,o=e.document,i=o.assertNode(n);r=Xe.createProperties(r);var u=xr(i,Object.keys(r));t.applyOperation({type:"set_node",path:n,properties:u,newProperties:r})};ae.setTextByPath=function(t,n,r,e){var o=t.value,i=o.document,u=i.assertNode(n),c=u.text.length;t.replaceTextByPath(n,0,c,r,e)};ae.splitNodeByPath=function(t,n,r){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=e.target,i=o===void 0?null:o,u=t.value,c=u.document,f=c.getDescendant(n);t.applyOperation({type:"split_node",path:n,position:r,target:i,properties:{type:f.type,data:f.data}})};ae.splitDescendantsByPath=function(t,n,r,e){if(n.equals(r)){t.splitNodeByPath(r,e);return}var o=t.value,i=o.document,u=e,c=r;t.withoutNormalizing(function(){t.splitNodeByKey(r,e);var f=!0,v=!1,h=void 0;try{for(var m=i.ancestors(r)[Symbol.iterator](),g;!(f=(g=m.next()).done);f=!0){var _=g.value,w=C(_,2),x=w[1],O=u;if(u=c.last()+1,c=x,t.splitNodeByPath(x,u,{target:O}),x.equals(n))break}}catch(F){v=!0,h=F}finally{try{!f&&m.return&&m.return()}finally{if(v)throw h}}})};ae.unwrapInlineByPath=function(t,n,r){var e=t.value,o=e.document,i=e.selection,u=o.assertNode(n),c=u.getFirstText(),f=u.getLastText(),v=i.moveToRangeOfNode(c,f);t.unwrapInlineAtRange(v,r)};ae.unwrapBlockByPath=function(t,n,r){var e=t.value,o=e.document,i=e.selection,u=o.assertNode(n),c=u.getFirstText(),f=u.getLastText(),v=i.moveToRangeOfNode(c,f);t.unwrapBlockAtRange(v,r)};ae.unwrapNodeByPath=function(t,n){var r=t.value,e=r.document;e.assertNode(n);var o=$.lift(n),i=e.assertNode(o),u=n.last(),c=o.last(),f=$.lift(o),v=u===0,h=u===i.nodes.size-1;t.withoutNormalizing(function(){if(i.nodes.size===1)t.moveNodeByPath(n,f,c+1),t.removeNodeByPath(o);else if(v)t.moveNodeByPath(n,f,c);else if(h)t.moveNodeByPath(n,f,c+1);else{var m=$.increment(n,1,o.size-1);m=m.set(m.size-1,0),t.splitNodeByPath(o,u),t.moveNodeByPath(m,f,c+1)}})};ae.unwrapChildrenByPath=function(t,n){n=$.create(n);var r=t.value,e=r.document,o=e.assertNode(n),i=$.lift(n),u=n.last(),c=o.nodes;t.withoutNormalizing(function(){c.reverse().forEach(function(f,v){var h=c.size-v-1,m=n.push(h);t.moveNodeByPath(m,i,u+1)}),t.removeNodeByPath(n)})};ae.wrapBlockByPath=function(t,n,r){r=at.create(r),r=r.set("nodes",r.nodes.clear());var e=$.lift(n),o=n.last(),i=$.increment(n);t.withoutNormalizing(function(){t.insertNodeByPath(e,o,r),t.moveNodeByPath(i,n,0)})};ae.wrapInlineByPath=function(t,n,r){r=nt.create(r),r=r.set("nodes",r.nodes.clear());var e=$.lift(n),o=n.last(),i=$.increment(n);t.withoutNormalizing(function(){t.insertNodeByPath(e,o,r),t.moveNodeByPath(i,n,0)})};ae.wrapNodeByPath=function(t,n,r){r=Xe.create(r),r.object==="block"?t.wrapBlockByPath(n,r):r.object==="inline"&&t.wrapInlineByPath(n,r)};var Q_=["addMark","insertFragment","insertNode","insertText","mergeNode","removeAllMarks","removeMark","removeNode","removeText","replaceMarks","replaceNode","replaceText","setMark","setNode","setText","splitNode","unwrapBlock","unwrapChildren","unwrapInline","unwrapNode","wrapBlock","wrapInline","wrapNode"],e0=function(n){ae[n+"ByKey"]=function(r,e){for(var o=arguments.length,i=Array(o>2?o-2:0),u=2;u<o;u++)i[u-2]=arguments[u];var c=r.value,f=c.document,v=f.assertPath(e);r[n+"ByPath"].apply(r,[v].concat(i))}},Yn=!0,ki=!1,Ai=void 0;try{for(var Zn=Q_[Symbol.iterator](),Si;!(Yn=(Si=Zn.next()).done);Yn=!0){var t0=Si.value;e0(t0)}}catch(t){ki=!0,Ai=t}finally{try{!Yn&&Zn.return&&Zn.return()}finally{if(ki)throw Ai}}ae.moveNodeByKey=function(t,n,r){for(var e=arguments.length,o=Array(e>3?e-3:0),i=3;i<e;i++)o[i-3]=arguments[i];var u=t.value,c=u.document,f=c.assertPath(n),v=c.assertPath(r);t.moveNodeByPath.apply(t,[f,v].concat(o))};ae.splitDescendantsByKey=function(t,n,r){for(var e=arguments.length,o=Array(e>3?e-3:0),i=3;i<e;i++)o[i-3]=arguments[i];var u=t.value,c=u.document,f=c.assertPath(n),v=c.assertPath(r);t.splitDescendantsByPath.apply(t,[f,v].concat(o))};var lr={};lr.save=function(t,n){var r=t.operations,e=t.value,o=e.data,i=t.tmp,u=i.save,c=i.merge;if(!(u===!1||!n0(n))){var f=o.get("undos")||E.List(),v=f.last(),h=v&&v.last();if(c==null&&(r.size!==0?c=!0:c=r0(n,h)),c&&v){var m=v.push(n);f=f.pop(),f=f.push(m)}else{var g=E.List([n]);f=f.push(g)}f.size>100&&(f=f.takeLast(100)),t.withoutSaving(function(){var _=E.List(),w=o.set("undos",f).set("redos",_);t.setData(w)})}};lr.redo=function(t){var n=t.value,r=n.data,e=r.get("redos")||E.List(),o=r.get("undos")||E.List(),i=e.last();i&&t.withoutSaving(function(){t.withoutNormalizing(function(){i.forEach(function(c){var f=c,v=f.type,h=f.newProperties;v==="set_selection"&&(c=c.set("newProperties",us(h,"isFocused"))),t.applyOperation(c)}),e=e.pop(),o=o.push(i);var u=r.set("undos",o).set("redos",e);t.setData(u)})})};lr.undo=function(t){var n=t.value,r=n.data,e=r.get("redos")||E.List(),o=r.get("undos")||E.List(),i=o.last();i&&t.withoutSaving(function(){t.withoutNormalizing(function(){i.slice().reverse().map(function(c){return c.invert()}).forEach(function(c){var f=c,v=f.type,h=f.newProperties;v==="set_selection"&&(c=c.set("newProperties",us(h,"isFocused"))),t.applyOperation(c)}),e=e.push(i),o=o.pop();var u=r.set("undos",o).set("redos",e);t.setData(u)})})};lr.withoutMerging=function(t,n){var r=t.tmp.merge;t.tmp.merge=!1,n(t),t.tmp.merge=r};lr.withoutSaving=function(t,n){var r=t.tmp.save;t.tmp.save=!1,n(t),t.tmp.save=r};function r0(t,n){if(!n)return!1;var r=t.type==="set_selection"&&n.type==="set_selection"||t.type==="insert_text"&&n.type==="insert_text"&&t.offset===n.offset+n.text.length&&t.path.equals(n.path)||t.type==="remove_text"&&n.type==="remove_text"&&t.offset+t.text.length===n.offset&&t.path.equals(n.path);return r}function n0(t){if(t.type==="set_selection"){var n=t.newProperties,r=n.isFocused,e=n.anchor,o=n.focus;if(r!==void 0&&!e&&!o)return!1}return!0}var S={};S.blur=function(t){t.select({isFocused:!1})};S.deselect=function(t){var n=At.create();t.select(n)};S.focus=function(t){t.select({isFocused:!0})};S.flip=function(t){t.command(ge,"flip")};S.moveAnchorBackward=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[vr,"anchor"].concat(r))};S.moveAnchorWordBackward=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[dn,"anchor"].concat(r))};S.moveAnchorForward=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[dr,"anchor"].concat(r))};S.moveAnchorWordForward=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[hn,"anchor"].concat(r))};S.moveAnchorTo=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"moveAnchorTo"].concat(r))};S.moveAnchorToEndOfBlock=function(t){t.command(Ae,"anchor","end","block")};S.moveAnchorToEndOfInline=function(t){t.command(Ae,"anchor","end","inline")};S.moveAnchorToEndOfDocument=function(t){t.moveAnchorToEndOfNode(t.value.document).moveToAnchor()};S.moveAnchorToEndOfNextBlock=function(t){t.command(K,"anchor","end","next","block")};S.moveAnchorToEndOfNextInline=function(t){t.command(K,"anchor","end","next","inline")};S.moveAnchorToEndOfNextText=function(t){t.command(K,"anchor","end","next","text")};S.moveAnchorToEndOfNode=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"moveAnchorToEndOfNode"].concat(r))};S.moveAnchorToEndOfPreviousBlock=function(t){t.command(K,"anchor","end","previous","block")};S.moveAnchorToEndOfPreviousInline=function(t){t.command(K,"anchor","end","previous","inline")};S.moveAnchorToEndOfPreviousText=function(t){t.command(K,"anchor","end","previous","text")};S.moveAnchorToEndOfText=function(t){t.command(Ae,"anchor","end","text")};S.moveAnchorToStartOfBlock=function(t){t.command(Ae,"anchor","start","block")};S.moveAnchorToStartOfDocument=function(t){t.moveAnchorToStartOfNode(t.value.document).moveToAnchor()};S.moveAnchorToStartOfInline=function(t){t.command(Ae,"anchor","start","inline")};S.moveAnchorToStartOfNextBlock=function(t){t.command(K,"anchor","start","next","block")};S.moveAnchorToStartOfNextInline=function(t){t.command(K,"anchor","start","next","inline")};S.moveAnchorToStartOfNextText=function(t){t.command(K,"anchor","start","next","text")};S.moveAnchorToStartOfNode=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"moveAnchorToStartOfNode"].concat(r))};S.moveAnchorToStartOfPreviousBlock=function(t){t.command(K,"anchor","start","previous","block")};S.moveAnchorToStartOfPreviousInline=function(t){t.command(K,"anchor","start","previous","inline")};S.moveAnchorToStartOfPreviousText=function(t){t.command(K,"anchor","start","previous","text")};S.moveAnchorToStartOfText=function(t){t.command(Ae,"anchor","start","text")};S.moveBackward=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(n!==0){var r=t.value,e=r.document,o=r.selection,i=o.start,u=e.getClosestBlock(i.key),c=u.getOffset(i.key),f=c+i.offset,v=u.text,h=Et.getCharOffsetBackward(v,f,n);t.moveAnchorBackward(h).moveFocusBackward(h)}};S.moveWordBackward=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.moveFocusWordBackward.apply(t,r).moveToFocus()};S.moveEndBackward=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[vr,"end"].concat(r))};S.moveEndWordBackward=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[dn,"end"].concat(r))};S.moveEndForward=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[dr,"end"].concat(r))};S.moveEndWordForward=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[hn,"end"].concat(r))};S.moveEndTo=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"moveEndTo"].concat(r))};S.moveEndToEndOfBlock=function(t){t.command(Ae,"end","end","block")};S.moveEndToEndOfDocument=function(t){t.moveEndToEndOfNode(t.value.document).moveToEnd()};S.moveEndToEndOfInline=function(t){t.command(Ae,"end","end","inline")};S.moveEndToEndOfNextBlock=function(t){t.command(K,"end","end","next","block")};S.moveEndToEndOfNextInline=function(t){t.command(K,"end","end","next","inline")};S.moveEndToEndOfNextText=function(t){t.command(K,"end","end","next","text")};S.moveEndToEndOfNode=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"moveEndToEndOfNode"].concat(r))};S.moveEndToEndOfPreviousBlock=function(t){t.command(K,"end","end","previous","block")};S.moveEndToEndOfPreviousInline=function(t){t.command(K,"end","end","previous","inline")};S.moveEndToEndOfPreviousText=function(t){t.command(K,"end","end","previous","text")};S.moveEndToEndOfText=function(t){t.command(Ae,"end","end","text")};S.moveEndToStartOfBlock=function(t){t.command(Ae,"end","start","block")};S.moveEndToStartOfDocument=function(t){t.moveEndToStartOfNode(t.value.document).moveToEnd()};S.moveEndToStartOfInline=function(t){t.command(Ae,"end","start","inline")};S.moveEndToStartOfNextBlock=function(t){t.command(K,"end","start","next","block")};S.moveEndToStartOfNextInline=function(t){t.command(K,"end","start","next","inline")};S.moveEndToStartOfNextText=function(t){t.command(K,"end","start","next","text")};S.moveEndToStartOfNode=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"moveEndToStartOfNode"].concat(r))};S.moveEndToStartOfPreviousBlock=function(t){t.command(K,"end","start","previous","block")};S.moveEndToStartOfPreviousInline=function(t){t.command(K,"end","start","previous","inline")};S.moveEndToStartOfPreviousText=function(t){t.command(K,"end","start","previous","text")};S.moveEndToStartOfText=function(t){t.command(Ae,"end","start","text")};S.moveFocusBackward=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[vr,"focus"].concat(r))};S.moveFocusWordBackward=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[dn,"focus"].concat(r))};S.moveFocusForward=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[dr,"focus"].concat(r))};S.moveFocusWordForward=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[hn,"focus"].concat(r))};S.moveFocusTo=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"moveFocusTo"].concat(r))};S.moveFocusToEndOfBlock=function(t){t.command(Ae,"focus","end","block")};S.moveFocusToEndOfDocument=function(t){t.moveFocusToEndOfNode(t.value.document).moveToFocus()};S.moveFocusToEndOfInline=function(t){t.command(Ae,"focus","end","inline")};S.moveFocusToEndOfNextBlock=function(t){t.command(K,"focus","end","next","block")};S.moveFocusToEndOfNextInline=function(t){t.command(K,"focus","end","next","inline")};S.moveFocusToEndOfNextText=function(t){t.command(K,"focus","end","next","text")};S.moveFocusToEndOfNode=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"moveFocusToEndOfNode"].concat(r))};S.moveFocusToEndOfPreviousBlock=function(t){t.command(K,"focus","end","previous","block")};S.moveFocusToEndOfPreviousInline=function(t){t.command(K,"focus","end","previous","inline")};S.moveFocusToEndOfPreviousText=function(t){t.command(K,"focus","end","previous","text")};S.moveFocusToEndOfText=function(t){t.command(Ae,"focus","end","text")};S.moveFocusToStartOfBlock=function(t){t.command(Ae,"focus","start","block")};S.moveFocusToStartOfDocument=function(t){t.moveFocusToStartOfNode(t.value.document).moveToFocus()};S.moveFocusToStartOfInline=function(t){t.command(Ae,"focus","start","inline")};S.moveFocusToStartOfNextBlock=function(t){t.command(K,"focus","start","next","block")};S.moveFocusToStartOfNextInline=function(t){t.command(K,"focus","start","next","inline")};S.moveFocusToStartOfNextText=function(t){t.command(K,"focus","start","next","text")};S.moveFocusToStartOfNode=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"moveFocusToStartOfNode"].concat(r))};S.moveFocusToStartOfPreviousBlock=function(t){t.command(K,"focus","start","previous","block")};S.moveFocusToStartOfPreviousInline=function(t){t.command(K,"focus","start","previous","inline")};S.moveFocusToStartOfPreviousText=function(t){t.command(K,"focus","start","previous","text")};S.moveFocusToStartOfText=function(t){t.command(Ae,"focus","start","text")};S.moveForward=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(n!==0){var r=t.value,e=r.document,o=r.selection,i=o.start,u=e.getClosestBlock(i.path),c=u.getOffset(i.key),f=c+i.offset,v=u.text,h=Et.getCharOffsetForward(v,f,n);t.moveAnchorForward(h).moveFocusForward(h)}};S.moveWordForward=function(t){for(var n,r=arguments.length,e=Array(r>1?r-1:0),o=1;o<r;o++)e[o-1]=arguments[o];(n=t.moveFocusWordForward.apply(t,e)).moveToFocus.apply(n,e)};S.moveStartBackward=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[vr,"start"].concat(r))};S.moveStartWordBackward=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[dn,"start"].concat(r))};S.moveStartForward=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[dr,"start"].concat(r))};S.moveStartWordForward=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[hn,"start"].concat(r))};S.moveStartTo=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"moveStartTo"].concat(r))};S.moveStartToEndOfBlock=function(t){t.command(Ae,"start","end","block")};S.moveStartToEndOfDocument=function(t){t.moveStartToEndOfNode(t.value.document).moveToStart()};S.moveStartToEndOfInline=function(t){t.command(Ae,"start","end","inline")};S.moveStartToEndOfNextBlock=function(t){t.command(K,"start","end","next","block")};S.moveStartToEndOfNextInline=function(t){t.command(K,"start","end","next","inline")};S.moveStartToEndOfNextText=function(t){t.command(K,"start","end","next","text")};S.moveStartToEndOfNode=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"moveStartToEndOfNode"].concat(r))};S.moveStartToEndOfPreviousBlock=function(t){t.command(K,"start","end","previous","block")};S.moveStartToEndOfPreviousInline=function(t){t.command(K,"start","end","previous","inline")};S.moveStartToEndOfPreviousText=function(t){t.command(K,"start","end","previous","text")};S.moveStartToEndOfText=function(t){t.command(Ae,"start","end","text")};S.moveStartToStartOfBlock=function(t){t.command(Ae,"start","start","block")};S.moveStartToStartOfDocument=function(t){t.moveStartToStartOfNode(t.value.document).moveToStart()};S.moveStartToStartOfInline=function(t){t.command(Ae,"start","start","inline")};S.moveStartToStartOfNextBlock=function(t){t.command(K,"start","start","next","block")};S.moveStartToStartOfNextInline=function(t){t.command(K,"start","start","next","inline")};S.moveStartToStartOfNextText=function(t){t.command(K,"start","start","next","text")};S.moveStartToStartOfNode=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"moveStartToStartOfNode"].concat(r))};S.moveStartToStartOfPreviousBlock=function(t){t.command(K,"start","start","previous","block")};S.moveStartToStartOfPreviousInline=function(t){t.command(K,"start","start","previous","inline")};S.moveStartToStartOfPreviousText=function(t){t.command(K,"start","start","previous","text")};S.moveStartToStartOfText=function(t){t.command(Ae,"start","start","text")};S.moveTo=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"moveTo"].concat(r))};S.moveToAnchor=function(t){t.command(ge,"moveToAnchor")};S.moveToEnd=function(t){t.command(ge,"moveToEnd")};S.moveToEndOfBlock=function(t){t.moveEndToEndOfBlock().moveToEnd()};S.moveToEndOfDocument=function(t){t.moveEndToEndOfNode(t.value.document).moveToEnd()};S.moveToEndOfInline=function(t){t.moveEndToEndOfInline().moveToEnd()};S.moveToEndOfNextBlock=function(t){t.moveEndToEndOfNextBlock().moveToEnd()};S.moveToEndOfNextInline=function(t){t.moveEndToEndOfNextInline().moveToEnd()};S.moveToEndOfNextText=function(t){t.moveEndToEndOfNextText().moveToEnd()};S.moveToEndOfNode=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"moveToEndOfNode"].concat(r))};S.moveToEndOfPreviousBlock=function(t){t.moveStartToEndOfPreviousBlock().moveToStart()};S.moveToEndOfPreviousInline=function(t){t.moveStartToEndOfPreviousInline().moveToStart()};S.moveToEndOfPreviousText=function(t){t.moveStartToEndOfPreviousText().moveToStart()};S.moveToEndOfText=function(t){t.moveEndToEndOfText().moveToEnd()};S.moveToFocus=function(t){t.command(ge,"moveToFocus")};S.moveToRangeOfDocument=function(t){t.moveToRangeOfNode(t.value.document)};S.moveToRangeOfNode=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"moveToRangeOfNode"].concat(r))};S.moveToStart=function(t){t.command(ge,"moveToStart")};S.moveToStartOfBlock=function(t){t.moveStartToStartOfBlock().moveToStart()};S.moveToStartOfDocument=function(t){t.moveStartToStartOfNode(t.value.document).moveToStart()};S.moveToStartOfInline=function(t){t.moveStartToStartOfInline().moveToStart()};S.moveToStartOfNextBlock=function(t){t.moveEndToStartOfNextBlock().moveToEnd()};S.moveToStartOfNextInline=function(t){t.moveEndToStartOfNextInline().moveToEnd()};S.moveToStartOfNextText=function(t){t.moveEndToStartOfNextText().moveToEnd()};S.moveToStartOfNode=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"moveToStartOfNode"].concat(r))};S.moveToStartOfPreviousBlock=function(t){t.moveStartToStartOfPreviousBlock().moveToStart()};S.moveToStartOfPreviousInline=function(t){t.moveStartToStartOfPreviousInline().moveToStart()};S.moveToStartOfPreviousText=function(t){t.moveStartToStartOfPreviousText().moveToStart()};S.moveToStartOfText=function(t){t.moveStartToStartOfText().moveToStart()};S.select=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n=At.createProperties(n);var e=r.snapshot,o=e===void 0?!1:e,i=t.value,u=i.document,c=i.selection,f={},v=c.setProperties(n);v=u.resolveSelection(v),n=xr(v,Object.keys(n));for(var h in n)(o===!0||!E.is(n[h],c[h]))&&(f[h]=n[h]);if(c.marks&&!f.marks&&(f.anchor||f.focus)&&(f.marks=null),Object.keys(f).length!==0){var m=xr(c.toJSON(),Object.keys(f));t.applyOperation({type:"set_selection",value:i,properties:m,newProperties:f},o?{skip:!1,merge:!1}:{})}};S.setAnchor=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"setAnchor"].concat(r))};S.setEnd=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"setEnd"].concat(r))};S.setFocus=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"setFocus"].concat(r))};S.setStart=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];t.command.apply(t,[ge,"setStart"].concat(r))};S.snapshotSelection=function(t){t.withoutMerging(function(){t.select(t.value.selection,{snapshot:!0})})};function ge(t,n){for(var r,e=arguments.length,o=Array(e>2?e-2:0),i=2;i<e;i++)o[i-2]=arguments[i];var u=(r=t.value.selection)[n].apply(r,o);t.select(u)}function Ae(t,n,r,e){var o=n.slice(0,1).toUpperCase()+n.slice(1),i=r.slice(0,1).toUpperCase()+r.slice(1),u=e.slice(0,1).toUpperCase()+e.slice(1),c="move"+o+"To"+i+"OfNode",f=e==="text"?"getNode":"getClosest"+u,v=t.value,h=v.document,m=v.selection,g=m[n],_=h[f](g.key);_&&t[c](_)}function K(t,n,r,e,o){var i=n.slice(0,1).toUpperCase()+n.slice(1),u=r.slice(0,1).toUpperCase()+r.slice(1),c=e.slice(0,1).toUpperCase()+e.slice(1),f=o.slice(0,1).toUpperCase()+o.slice(1),v="move"+i+"To"+u+"OfNode",h=o==="text"?"getNode":"getClosest"+f,m="get"+c+f,g=t.value,_=g.document,w=g.selection,x=w[n],O=_[h](x.key);if(O){var F=_[m](O.key);F&&t[v](F)}}function vr(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(r!==0){if(r<0)return dr(t,n,-r);var e=n.slice(0,1).toUpperCase()+n.slice(1),o=t.value,i=o.document,u=o.selection,c=u[n],f=i.hasVoidParent(c.path,t);if(!f&&c.offset-r>=0){var v=u["move"+e+"Backward"](r);t.select(v);return}var h=i.getPreviousText(c.path);if(h){var m=i.getClosestBlock(c.path),g=m.hasNode(h.key),_=h&&i.hasVoidParent(h.key,t);if(t["move"+e+"ToEndOfNode"](h),!f&&!_&&g){var w=t.value.selection["move"+e+"Backward"](r);t.select(w)}}}}function dr(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(r!==0){if(r<0)return vr(t,n,-r);var e=n.slice(0,1).toUpperCase()+n.slice(1),o=t.value,i=o.document,u=o.selection,c=u[n],f=i.getNode(c.path),v=i.hasVoidParent(c.path,t);if(!v&&c.offset+r<=f.text.length){var h=u["move"+e+"Forward"](r);t.select(h);return}var m=i.getNextText(c.path);if(m){var g=i.getClosestBlock(c.path),_=g.hasNode(m.key),w=i.hasVoidParent(m.key,t);if(t["move"+e+"ToStartOfNode"](m),!v&&!w&&_){var x=t.value.selection["move"+e+"Forward"](r);t.select(x)}}}}function dn(t,n){var r=t.value,e=r.document,o=r.selection,i=o[n],u=e.getClosestBlock(i.key),c=u.getOffset(i.key),f=c+i.offset,v=u.text,h=Et.getWordOffsetBackward(v,f);t.command(vr,n,h>0?h:1)}function hn(t,n){var r=t.value,e=r.document,o=r.selection,i=o[n],u=e.getClosestBlock(i.key),c=u.getOffset(i.key),f=c+i.offset,v=u.text,h=Et.getWordOffsetForward(v,f);t.command(dr,n,h>0?h:1)}var hr={};hr.setData=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.value,e=gt.createProperties({data:n}),o=xr(r,Object.keys(e));t.applyOperation({type:"set_value",properties:o,newProperties:e})};hr.addAnnotation=function(t,n){n=Me.create(n),t.applyOperation({type:"add_annotation",annotation:n})};hr.removeAnnotation=function(t,n){n=Me.create(n),t.applyOperation({type:"remove_annotation",annotation:n})};hr.setAnnotation=function(t,n,r){n=Me.create(n),r=Me.createProperties(r),t.applyOperation({type:"set_annotation",properties:n,newProperties:r})};hr.setAnnotations=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=t.value,e=gt.createProperties({annotations:n}),o=xr(r,Object.keys(e));t.applyOperation({type:"set_value",properties:o,newProperties:e})};function Ka(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function n(e,o){for(var i in t)e.registerQuery(i);return o()}function r(e,o,i){var u=e.type,c=e.args,f=t[u];if(!f)return i();var v=f.apply(void 0,[o].concat(Fe(c)));return v===void 0?i():v}return{onConstruct:n,onQuery:r}}var a0=function(t){Ke(n,t);function n(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};we(this,n);var o=qe(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,r));o.code=r;for(var i in e)o[i]=e[i];return Error.captureStackTrace?Error.captureStackTrace(o,o.constructor):o.stack=new Error().stack,o}return n}(Error);function gs(t){var n=t.rules,r=t.document,e=t.blocks,o=t.inlines,i=t.marks,u=t.annotations,c=t.decorations,f=[];if(n&&(f=f.concat(n)),r&&f.push(De({match:[{object:"document"}]},r)),e)for(var v in e)f.push(De({match:[{object:"block",type:v}]},e[v]));if(o)for(var h in o)f.push(De({match:[{object:"inline",type:h}]},o[h]));if(i)for(var m in i)f.push(De({match:[{object:"mark",type:m}]},i[m]));if(u)for(var g in u)f.push(De({match:[{object:"annotation",type:g}]},u[g]));if(c)for(var _ in c)f.push(De({match:[{object:"decoration",type:_}]},c[_]));function w(L,M){var B=f.find(function(D){return"isAtomic"in D&&Qt(M,D.match)});return B&&B.isAtomic}function x(L,M){var B=f.find(function(D){return"isVoid"in D&&Qt(M,D.match)});return B&&B.isVoid}function O(L,M,B){var D=F(L,M,function(){});return D?function(){var te=D.rule,oe=M.operations.size;te.normalize&&te.normalize(M,D),M.operations.size===oe&&o0(M,D)}:B()}function F(L,M,B){var D=f.filter(function(U){return Qt(L,U.match)}),te=pt(L,D,f,{every:!0});if(!te)return B();var oe=new a0(te.code,te);return oe}var P=Ka({isAtomic:w,isVoid:x});return[{normalizeNode:O,validateNode:F},P]}function o0(t,n){var r=n.code,e=n.node,o=n.child,i=n.next,u=n.previous,c=n.key,f=n.mark;switch(r){case"child_max_invalid":case"child_object_invalid":case"child_type_invalid":case"child_unknown":case"first_child_object_invalid":case"first_child_type_invalid":case"last_child_object_invalid":case"last_child_type_invalid":return o.object==="text"&&e.object==="block"&&e.nodes.size===1?t.removeNodeByKey(e.key):t.removeNodeByKey(o.key);case"previous_sibling_object_invalid":case"previous_sibling_type_invalid":return u.object==="text"&&e.object==="block"&&e.nodes.size===1?t.removeNodeByKey(e.key):t.removeNodeByKey(u.key);case"next_sibling_object_invalid":case"next_sibling_type_invalid":return i.object==="text"&&e.object==="block"&&e.nodes.size===1?t.removeNodeByKey(e.key):t.removeNodeByKey(i.key);case"child_min_invalid":case"node_text_invalid":case"parent_object_invalid":case"parent_type_invalid":return e.object==="document"?e.nodes.forEach(function(v){return t.removeNodeByKey(v.key)}):t.removeNodeByKey(e.key);case"node_data_invalid":return e.data.get(c)===void 0&&e.object!=="document"?t.removeNodeByKey(e.key):t.setNodeByKey(e.key,{data:e.data.delete(c)});case"node_mark_invalid":return e.getTexts().forEach(function(v){return t.removeMarkByKey(v.key,0,v.text.length,f)});default:return t.removeNodeByKey(e.key)}}function Qt(t,n){var r=pt(t,n);return!r}function pt(t,n,r){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=e.every,i=o===void 0?!1:o,u=e.match,c=u===void 0?null:u;if(typeof n=="function"){var f=n(t,c);return f?null:Ze("node_invalid",{rule:n,node:t})}if(Array.isArray(n)){var v=n.length?n:[{}],h=void 0,m=!0,g=!1,_=void 0;try{for(var w=v[Symbol.iterator](),x;!(m=(x=w.next()).done);m=!0){var O=x.value,F=pt(t,O,r);if(h=h||F,i&&F)return F;if(!i&&!F)return}}catch(L){g=!0,_=L}finally{try{!m&&w.return&&w.return()}finally{if(g)throw _}}return h}var P=i0(t,n)||s0(t,n)||u0(t,n)||c0(t,n)||f0(t,n)||l0(t,n)||v0(t,n)||d0(t,n,r);return P}function i0(t,n){if(n.object!=null&&n.object!==t.object&&!(typeof n.object=="function"&&n.object(t.object)))return Ze("node_object_invalid",{rule:n,node:t})}function s0(t,n){if(n.type!=null&&n.type!==t.type&&!(typeof n.type=="function"&&n.type(t.type)))return Ze("node_type_invalid",{rule:n,node:t})}function u0(t,n){if(n.data!=null&&t.data!=null){if(typeof n.data=="function")return n.data(t.data)?void 0:Ze("node_data_invalid",{rule:n,node:t});for(var r in n.data){var e=n.data[r],o=t.data&&t.data.get(r),i=typeof e=="function"?e(o):e===o;if(!i)return Ze("node_data_invalid",{rule:n,node:t,key:r,value:o})}}}function c0(t,n){if(n.marks!=null){var r=t.object==="text"?t.marks.toArray():t.getMarks().toArray(),e=function(g){var _=n.marks.some(function(w){return typeof w.type=="function"?w.type(g.type):w.type===g.type});return _?"continue":{v:Ze("node_mark_invalid",{rule:n,node:t,mark:g})}},o=!0,i=!1,u=void 0;try{for(var c=r[Symbol.iterator](),f;!(o=(f=c.next()).done);o=!0){var v=f.value,h=e(v);switch(h){case"continue":continue;default:if((typeof h>"u"?"undefined":Ma(h))==="object")return h.v}}}catch(m){i=!0,u=m}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}}}function f0(t,n){if(n.text!=null){var r=t.text,e=typeof n.text=="function"?n.text(r):n.text.test(r);if(!e)return Ze("node_text_invalid",{rule:n,node:t,text:r})}}function l0(t,n){if(n.first!=null){var r=t.nodes.first();if(r){var e=pt(r,n.first);if(e)return e.rule=n,e.node=t,e.child=r,e.code=e.code.replace("node_","first_child_"),e}}}function v0(t,n){if(n.last!=null){var r=t.nodes.last();if(r){var e=pt(r,n.last);if(e)return e.rule=n,e.node=t,e.child=r,e.code=e.code.replace("node_","last_child_"),e}}}function d0(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(t.nodes==null)return;var e=t.nodes,o=n.nodes!=null?n.nodes.slice():[],i=0,u=0,c=null,f=-1,v=null,h=null,m=null,g=null,_=null;function w(){return o.length===0?!1:(v=o.shift(),u=i,i=0,c=v.min||null,h=v.max||null,!0)}function x(){return f+=1,g=f?e.get(f-1):null,m=e.get(f),_=e.get(f+1),m?(u=i,i+=1,!0):!1}function O(){f>0&&(f-=1,i=u)}for(n.nodes!=null&&w();x();){var F=h0(t,m,r)||m0(t,m,g,f,r)||y0(t,m,_,f,r);if(F)return F;if(n.nodes!=null){if(!v)return Ze("child_unknown",{rule:n,node:t,child:m,index:f});if(v.match){var P=pt(m,v.match);if(P){if(h!=null&&i-1>h)return O(),Ze("child_max_invalid",{rule:n,node:t,index:f,child:e.get(f),count:i,limit:h});var L=c;if(w()){if(u-1>=L){f-=1;continue}return pt(m,v.match)==null?(O(),Ze("child_min_invalid",{rule:n,node:t,index:f,count:u-1,limit:L})):(P.rule=n,P.node=t,P.child=m,P.index=f,P.code=P.code.replace("node_","child_"),P)}return h!=null&&i>h?Ze("child_unknown",{rule:n,node:t,child:m,index:f}):(P.rule=n,P.node=t,P.child=m,P.index=f,P.code=P.code.replace("node_","child_"),P)}}}}if(h!=null&&i>h)return Ze("child_max_invalid",{rule:n,node:t,index:f-1,count:i,child:e.get(f-1),limit:h});if(n.nodes!=null)do if(i<c)return Ze("child_min_invalid",{rule:n,node:t,index:f,count:i,limit:c});while(w())}function h0(t,n,r){var e=!0,o=!1,i=void 0;try{for(var u=r[Symbol.iterator](),c;!(e=(c=u.next()).done);e=!0){var f=c.value;if(f.parent!=null&&Qt(n,f.match)){var v=pt(t,f.parent);if(v)return v.rule=f,v.parent=t,v.node=n,v.code=v.code.replace("node_","parent_"),v}}}catch(h){o=!0,i=h}finally{try{!e&&u.return&&u.return()}finally{if(o)throw i}}}function m0(t,n,r,e,o){if(r){var i=!0,u=!1,c=void 0;try{for(var f=o[Symbol.iterator](),v;!(i=(v=f.next()).done);i=!0){var h=v.value;if(h.previous!=null&&Qt(n,h.match)){var m=pt(r,h.previous);if(m)return m.rule=h,m.node=t,m.child=n,m.index=e,m.previous=r,m.code=m.code.replace("node_","previous_sibling_"),m}}}catch(g){u=!0,c=g}finally{try{!i&&f.return&&f.return()}finally{if(u)throw c}}}}function y0(t,n,r,e,o){if(r){var i=!0,u=!1,c=void 0;try{for(var f=o[Symbol.iterator](),v;!(i=(v=f.next()).done);i=!0){var h=v.value;if(h.next!=null&&Qt(n,h.match)){var m=pt(r,h.next,[],{match:n});if(m)return m.rule=h,m.node=t,m.child=n,m.index=e,m.next=r,m.code=m.code.replace("node_","next_sibling_"),m}}}catch(g){u=!0,c=g}finally{try{!i&&f.return&&f.return()}finally{if(u)throw c}}}}function Ze(t,n){return De({code:t},n)}function mr(t){var n=t.value,r=n.selection;r.isExpanded&&t.delete()}var ce={};ce.addMark=function(t,n){n=ie.create(n);var r=t.value,e=r.document,o=r.selection;if(o.isExpanded)t.addMarkAtRange(o,n);else if(o.marks){var i=o.marks.add(n),u=o.set("marks",i);t.select(u)}else{var c=e.getActiveMarksAtRange(o).add(n),f=o.set("marks",c);t.select(f)}};ce.addMarks=function(t,n){n.forEach(function(r){return t.addMark(r)})};ce.delete=function(t){var n=t.value,r=n.selection;t.deleteAtRange(r),t.moveToFocus()};ce.deleteBackward=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=t.value,e=r.selection;e.isExpanded?t.delete():t.deleteBackwardAtRange(e,n)};ce.deleteCharBackward=function(t){var n=t.value,r=n.selection;r.isExpanded?t.delete():t.deleteCharBackwardAtRange(r)};ce.deleteLineBackward=function(t){var n=t.value,r=n.selection;r.isExpanded?t.delete():t.deleteLineBackwardAtRange(r)};ce.deleteWordBackward=function(t){var n=t.value,r=n.selection;r.isExpanded?t.delete():t.deleteWordBackwardAtRange(r)};ce.deleteForward=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=t.value,e=r.selection;e.isExpanded?t.delete():t.deleteForwardAtRange(e,n)};ce.deleteCharForward=function(t){var n=t.value,r=n.selection;r.isExpanded?t.delete():t.deleteCharForwardAtRange(r)};ce.deleteLineForward=function(t){var n=t.value,r=n.selection;r.isExpanded?t.delete():t.deleteLineForwardAtRange(r)};ce.deleteWordForward=function(t){var n=t.value,r=n.selection;r.isExpanded?t.delete():t.deleteWordForwardAtRange(r)};ce.insertBlock=function(t,n){mr(t),n=at.create(n);var r=t.value,e=r.selection;t.insertBlockAtRange(e,n);var o=t.value.document.getNode(n.key);o&&t.moveToEndOfNode(o)};ce.insertFragment=function(t,n){if(n.nodes.size){mr(t);var r=t.value,e=r,o=e.document,i=e.selection,u=i.start,c=Array.from(o.texts(),function(w){var x=C(w,1),O=x[0];return O.key});t.insertFragmentAtRange(i,n),r=t.value,o=r.document;var f=o.getTexts().filter(function(w){return!c.includes(w.key)});if(f.size!==0){var v=n.text.length,h=o.getNode(u.key)||f.first(),m=f.last()||h;if(h===m){t.moveTo(m.key,v);return}var g=o.getCommonAncestor(h.key,m.key),_=g.getOffset(h.key)+(u.key===h.key?u.offset:0);m=g.getTextAtOffset(_+v-1)||m,t.moveTo(m.key,_+v-g.getOffset(m.key))}}};ce.insertInline=function(t,n){mr(t),n=nt.create(n);var r=t.value,e=r.selection;t.insertInlineAtRange(e,n);var o=t.value.document.getNode(n.key);o&&t.moveToEndOfNode(o)};ce.insertText=function(t,n,r){mr(t);var e=t.value,o=e.document,i=e.selection;r=r||i.marks||o.getInsertMarksAtRange(i),t.withoutNormalizing(function(){t.insertTextAtRange(i,n,r),i.marks&&o!==t.value.document&&t.select({marks:null})})};ce.removeMark=function(t,n){n=ie.create(n);var r=t.value,e=r.document,o=r.selection;if(o.isExpanded)t.removeMarkAtRange(o,n);else if(o.marks){var i=o.marks.remove(n),u=o.set("marks",i);t.select(u)}else{var c=e.getActiveMarksAtRange(o).remove(n),f=o.set("marks",c);t.select(f)}};ce.replaceMark=function(t,n,r){t.removeMark(n),t.addMark(r)};ce.setBlocks=function(t,n){var r=t.value,e=r.selection;t.setBlocksAtRange(e,n)};ce.setInlines=function(t,n){var r=t.value,e=r.selection;t.setInlinesAtRange(e,n)};ce.splitBlock=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;mr(t);var r=t.value,e=r.selection,o=r.document,i=e.marks||o.getInsertMarksAtRange(e);t.splitBlockAtRange(e,n).moveToEnd(),i&&i.size!==0&&t.select({marks:i})};ce.splitInline=function(t,n){mr(t);var r=t.value,e=r.selection;t.splitInlineAtRange(e,n)};ce.toggleMark=function(t,n){n=ie.create(n);var r=t.value,e=r.activeMarks.has(n);e?t.removeMark(n):t.addMark(n)};ce.unwrapBlock=function(t,n){var r=t.value,e=r.selection;t.unwrapBlockAtRange(e,n)};ce.unwrapInline=function(t,n){var r=t.value,e=r.selection;t.unwrapInlineAtRange(e,n)};ce.wrapBlock=function(t,n){var r=t.value,e=r.selection;t.wrapBlockAtRange(e,n)};ce.wrapInline=function(t,n){var r=t.value,e=r.selection;t.wrapInlineAtRange(e,n)};ce.wrapText=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:n,e=t.value,o=e.selection;t.wrapTextAtRange(o,n,r),o.isCollapsed&&t.moveStartBackward(n.length),t.moveEndBackward(r.length),o.isForward!==t.value.selection.isForward&&t.flip()};function g0(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.plugins,r=n===void 0?[]:n,e=ms(De({},le,ae,lr,S,hr,ce)),o=Ka({isAtomic:function(){return!1},isVoid:function(){return!1}}),i=gs({rules:[{match:{object:"document"},nodes:[{match:{object:"block"}}]},{match:{object:"block",first:{object:"block"}},nodes:[{match:{object:"block"}}]},{match:{object:"block",first:[{object:"inline"},{object:"text"}]},nodes:[{match:[{object:"inline"},{object:"text"}]}]},{match:{object:"inline"},nodes:[{match:[{object:"inline"},{object:"text"}]}]},{match:[{object:"block"},{object:"inline"}],nodes:[{min:1}],normalize:function(c,f){var v=f.code,h=f.node;v==="child_min_invalid"&&h.nodes.isEmpty()&&c.insertNodeByKey(h.key,0,mt.create())}},{match:{object:"block"},first:[{object:"block"},{object:"text"}],last:[{object:"block"},{object:"text"}],normalize:function(c,f){var v=f.code,h=f.node,m=mt.create(),g=void 0;if(v==="first_child_object_invalid")g=0;else if(v==="last_child_object_invalid")g=h.nodes.size;else return;c.insertNodeByKey(h.key,g,m)}},{match:{object:"inline"},first:[{object:"block"},{object:"text"}],last:[{object:"block"},{object:"text"}],previous:[{object:"block"},{object:"text"}],next:[{object:"block"},{object:"text"}],normalize:function(c,f){var v=f.code,h=f.node,m=f.index,g=mt.create(),_=void 0;if(v==="first_child_object_invalid")_=0;else if(v==="last_child_object_invalid")_=h.nodes.size;else if(v==="previous_sibling_object_invalid")_=m;else if(v==="next_sibling_object_invalid")_=m+1;else return;c.insertNodeByKey(h.key,_,g)}},{match:{object:"text"},next:function(c,f){return c.object!=="text"||!f.marks.equals(c.marks)},normalize:function(c,f){var v=f.code,h=f.next;v==="next_sibling_invalid"&&c.mergeNodeByKey(h.key)}},{match:{object:"text"},previous:function(c){return c.object!=="text"||c.text!==""},next:function(c){return c.object!=="text"||c.text!==""},normalize:function(c,f){var v=f.code,h=f.next,m=f.previous;v==="next_sibling_invalid"?c.removeNodeByKey(h.key):v==="previous_sibling_invalid"&&c.removeNodeByKey(m.key)}}]});return[i].concat(Fe(r),[e,o])}var Xn=ya("slate:editor"),p0=function(){function t(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};we(this,t);var e=r.controller,o=e===void 0?this:e,i=r.construct,u=i===void 0?!0:i,c=n.onChange,f=c===void 0?function(){}:c,v=n.plugins,h=v===void 0?[]:v,m=n.readOnly,g=m===void 0?!1:m,_=n.value,w=_===void 0?gt.create():_;this.controller=o,this.middleware={},this.onChange=f,this.operations=E.List(),this.readOnly=null,this.value=null,this.tmp={dirty:[],flushing:!1,merge:null,normalize:!0,save:!0};var x=g0({plugins:h});br(this,x),u&&(this.run("onConstruct"),this.setReadOnly(g),this.setValue(w,r))}return Oe(t,[{key:"applyOperation",value:function(r){var e=this,o=this.operations,i=this.controller,u=this.value;he(r)&&(r=De({},r,{value:u})),r=Lt.create(r),this.withoutNormalizing(function(){i.save(r),u=e.value}),Xn("apply",{operation:r}),this.value=r.apply(u),this.operations=o.push(r);var c=_0(r),f=this.tmp.dirty.map(function(m){m=$.create(m);var g=$.transform(m,r);return g.toArray()}),v={},h=Array.prototype.concat.apply(c,f);return this.tmp.dirty=[],h.forEach(function(m){var g=m.join(",");v[g]||e.tmp.dirty.push(m),v[g]=!0}),this.tmp.flushing||(this.tmp.flushing=!0,Promise.resolve().then(function(){return e.flush()})),i}},{key:"flush",value:function(){this.run("onChange");var r=this.value,e=this.operations,o=this.controller,i={value:r,operations:e};return this.operations=E.List(),this.tmp.flushing=!1,this.onChange(i),o}},{key:"command",value:function(r){for(var e=arguments.length,o=Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];var u=this.controller;if(typeof r=="function")return r.apply(void 0,[u].concat(o)),Hr(this),u;Xn("command",{type:r,args:o});var c={type:r,args:o};return this.run("onCommand",c),Hr(this),u}},{key:"hasCommand",value:function(r){var e=this.controller,o=r in e&&e[r].__command;return o}},{key:"hasQuery",value:function(r){var e=this.controller,o=r in e&&e[r].__query;return o}},{key:"normalize",value:function(){var r=this.value,e=this.controller,o=r.document,i=o.getKeysToPathsTable(),u=Object.values(i).map($.create);this.tmp.dirty=this.tmp.dirty.concat(u),Hr(this);var c=r.selection;return o=r.document,c.isUnset&&o.nodes.size&&e.moveToStartOfDocument(),e}},{key:"query",value:function(r){for(var e=arguments.length,o=Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];var u=this.controller;if(typeof r=="function")return r.apply(void 0,[u].concat(o));Xn("query",{type:r,args:o});var c={type:r,args:o};return this.run("onQuery",c)}},{key:"registerCommand",value:function(r){var e=this,o=this.controller;if(r in o&&o[r].__command)return o;rt(!(r in o),"You cannot register a `"+r+"` command because it would overwrite an existing property of the `Editor`.");var i=function(){for(var c=arguments.length,f=Array(c),v=0;v<c;v++)f[v]=arguments[v];return e.command.apply(e,[r].concat(f))};return o[r]=i,i.__command=!0,o}},{key:"registerQuery",value:function(r){var e=this,o=this.controller;if(r in o&&o[r].__query)return o;rt(!(r in o),"You cannot register a `"+r+"` query because it would overwrite an existing property of the `Editor`.");var i=function(){for(var c=arguments.length,f=Array(c),v=0;v<c;v++)f[v]=arguments[v];return e.query.apply(e,[r].concat(f))};return o[r]=i,i.__query=!0,o}},{key:"run",value:function(r){for(var e=arguments.length,o=Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];var u=this.controller,c=this.middleware,f=c[r]||[],v=0;function h(){var m=f[v++];if(m){for(var g=arguments.length,_=Array(g),w=0;w<g;w++)_[w]=arguments[w];_.length&&(o=_);var x=m.apply(void 0,Fe(o).concat([u,h]));return x}}return Object.defineProperty(h,"change",{get:function(){rt(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(h,"onChange",{get:function(){rt(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(h,"props",{get:function(){rt(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(h,"schema",{get:function(){rt(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(h,"stack",{get:function(){rt(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),h()}},{key:"setReadOnly",value:function(r){return this.readOnly=r,this}},{key:"setValue",value:function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=e.normalize,i=o===void 0?r!==this.value:o;return this.value=r,i&&this.normalize(),this}},{key:"withoutNormalizing",value:function(r){var e=this.controller,o=this.tmp.normalize;return this.tmp.normalize=!1,r(e),this.tmp.normalize=o,Hr(this),e}},{key:"change",value:function(r){z();for(var e=arguments.length,o=Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];r.apply(void 0,[this.controller].concat(o))}},{key:"call",value:function(r){z();for(var e=arguments.length,o=Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];return r.apply(void 0,[this.controller].concat(o)),this.controller}},{key:"applyOperations",value:function(r){var e=this;return z(),r.forEach(function(o){return e.applyOperation(o)}),this.controller}},{key:"setOperationFlag",value:function(r,e){return z(),this.tmp[r]=e,this}},{key:"getFlag",value:function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return z(),e[r]!==void 0?e[r]:this.tmp[r]}},{key:"unsetOperationFlag",value:function(r){return z(),delete this.tmp[r],this}},{key:"withoutNormalization",value:function(r){return z(),this.withoutNormalizing(r)}},{key:"editor",get:function(){return z(),this.controller}}]),t}();function _0(t){var n=t.type,r=t.node,e=t.path,o=t.newPath;switch(n){case"add_mark":case"insert_text":case"remove_mark":case"remove_text":case"set_mark":case"set_node":{var i=$.getAncestors(e).toArray();return[].concat(Fe(i),[e])}case"insert_node":{var u=r.getKeysToPathsTable(),c=Object.values(u).map(function(O){return e.concat(O)}),f=$.getAncestors(e).toArray();return[].concat(Fe(f),[e],Fe(c))}case"split_node":{var v=$.getAncestors(e).toArray(),h=$.increment(e);return[].concat(Fe(v),[e,h])}case"merge_node":{var m=$.getAncestors(e).toArray(),g=$.decrement(e);return[].concat(Fe(m),[g])}case"move_node":{if($.isEqual(e,o))return[];var _=$.getAncestors(e).reduce(function(O,F){return O.push.apply(O,Fe($.transform(F,t).toArray())),O},[]),w=$.getAncestors(o).reduce(function(O,F){return O.push.apply(O,Fe($.transform(F,t).toArray())),O},[]);return[].concat(Fe(_),Fe(w))}case"remove_node":{var x=$.getAncestors(e).toArray();return[].concat(Fe(x))}default:return[]}}function Hr(t){t.tmp.normalize&&t.tmp.dirty.length&&t.withoutNormalizing(function(){for(;t.tmp.dirty.length;){var n=t.tmp.dirty.pop();k0(t,n)}})}function k0(t,n){for(var r=t.controller,e=t.value,o=e,i=o.document,u=i.assertNode(n),c=0,f=100+(u.object==="text"?1:u.nodes.size);u;){var v=u.normalize(r);if(!v)break;v(r),e=t.value,i=e.document;var h=u,m=h.key,g=i.getDescendant(n);if(g&&g.key===m)u=g;else if(g=i.getDescendant(m),g)u=g,n=i.getPath(m);else break;if(c++,c>f)throw new Error("A schema rule could not be normalized after sufficient iterations. This is usually due to a `rule.normalize` or `plugin.normalizeNode` function of a schema being incorrectly written, causing an infinite loop.")}}function br(t,n){if(Array.isArray(n)){n.forEach(function(g){return br(t,g)});return}if(n!=null){var r=n.commands,e=n.queries,o=n.schema,i=Zt(n,["commands","queries","schema"]);if(r){var u=ms(r);br(t,u)}if(e){var c=Ka(e);br(t,c)}if(o){var f=gs(o);br(t,f)}for(var v in i){var h=i[v],m=t.middleware[v]=t.middleware[v]||[];m.push(h)}}}var A0={marks:void 0,text:void 0},ps=function(t){Ke(n,t);function n(){return we(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Oe(n,[{key:"updateMark",value:function(e,o){var i=this.marks;if(o.equals(e))return this;if(!i.has(e))return this;var u=i.withMutations(function(c){c.remove(e).add(o)});return this.set("marks",u)}},{key:"addMark",value:function(e){var o=this.marks;return this.set("marks",o.add(e))}},{key:"addMarks",value:function(e){var o=this.marks;return this.set("marks",o.union(e))}},{key:"insertText",value:function(e,o){var i=this.text,u=i.slice(0,e)+o+i.slice(e);return this.set("text",u)}},{key:"removeMark",value:function(e){var o=this.marks;return this.set("marks",o.remove(e))}},{key:"toJSON",value:function(){var e={object:this.object,text:this.text,marks:this.marks.toArray().map(function(o){return o.toJSON()})};return e}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(z(),n.isLeaf(e))return e;if(typeof e=="string"&&(e={text:e}),he(e))return n.fromJSON(e);throw new Error("`Leaf.create` only accepts objects, strings or leaves, but you passed it: "+e)}},{key:"createLeaves",value:function(e){if(e.size<=1)return e;var o=!1,i=E.List().withMutations(function(u){e.findLast(function(c,f){var v=u.first();if(v){if(v.marks.equals(c.marks)){o=!0,u.set(0,v.set("text",""+c.text+v.text));return}if(v.text===""){o=!0,u.set(0,c);return}if(c.text===""){o=!0;return}}u.unshift(c)})});return o?i:e}},{key:"splitLeaves",value:function(e,o){if(o<0)return[E.List(),e];if(e.size===0)return[E.List(),E.List()];var i=0,u=-1,c=void 0,f=void 0;return e.find(function(v){u++;var h=i,m=v.text;if(i+=m.length,i<o||h>o)return!1;var g=o-h;return c=v.set("text",m.slice(0,g)),f=v.set("text",m.slice(g)),!0}),c?c.text===""?u===0?[E.List.of(c),e]:[e.take(u),e.skip(u)]:f.text===""?u===e.size-1?[e,E.List.of(f)]:[e.take(u+1),e.skip(u+1)]:[e.take(u).push(c),e.skip(u+1).unshift(f)]:[e,E.List()]}},{key:"createList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(E.List.isList(e)||Array.isArray(e)){var o=new E.List(e.map(n.create));return o}throw new Error("`Leaf.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.text,i=o===void 0?"":o,u=e.marks,c=u===void 0?[]:u,f=new n({text:i,marks:E.Set(c.map(ie.fromJSON))});return f}},{key:"isLeafList",value:function(e){return E.List.isList(e)&&e.every(function(o){return n.isLeaf(o)})}}]),n}(E.Record(A0));function Fr(t,n){var r=!0,e=!1,o=void 0;try{for(var i=n[Symbol.iterator](),u;!(r=(u=i.next()).done);r=!0){var c=u.value,f=!0,v=!1,h=void 0;try{for(var m=Object.getOwnPropertyNames(t)[Symbol.iterator](),g;!(f=(g=m.next()).done);f=!0){var _=g.value;if(!c.hasOwnProperty(_)){var w=Object.getOwnPropertyDescriptor(t,_);Object.defineProperty(c,_,w)}}}catch(B){v=!0,h=B}finally{try{!f&&m.return&&m.return()}finally{if(v)throw h}}var x=!0,O=!1,F=void 0;try{for(var P=Object.getOwnPropertyNames(t.prototype)[Symbol.iterator](),L;!(x=(L=P.next()).done);x=!0){var M=L.value;if(!c.prototype.hasOwnProperty(M)){var w=Object.getOwnPropertyDescriptor(t.prototype,M);Object.defineProperty(c.prototype,M,w)}}}catch(B){O=!0,F=B}finally{try{!x&&P.return&&P.return()}finally{if(O)throw F}}}}catch(B){e=!0,o=B}finally{try{!r&&i.return&&i.return()}finally{if(e)throw o}}}function S0(t){var n=ds[t],r=""+t.charAt(0).toUpperCase()+t.slice(1),e="is"+r,o=function(){function i(){we(this,i)}return Oe(i,[{key:"object",get:function(){return t}}]),i}();return o[e]=hs.bind(null,t),o.prototype[n]=!0,o}Object.entries({Annotation:Me,Block:at,Change:D_,Decoration:Mt,Document:ut,Editor:p0,Inline:nt,Leaf:ps,Mark:ie,Node:Xe,Operation:Lt,Point:ee,Range:je,Selection:At,Text:mt,Value:gt}).forEach(function(t){var n=C(t,2),r=n[0],e=n[1];return Fr(S0(r.toLowerCase()),[e])});var w0=function(){function t(){we(this,t)}return Oe(t,[{key:"toJS",value:function(){return this.toJSON.apply(this,arguments)}}],[{key:"fromJS",value:function(){return this.fromJSON.apply(this,arguments)}}]),t}();Fr(w0,[Me,at,Mt,ut,nt,ps,ie,Xe,Lt,ee,je,At,mt,gt]);var _s=Symbol("LEAF"),Ct=Symbol("STORE_KEY"),an=Symbol("undefined"),ks=Symbol("null"),da=void 0,Qn=new WeakMap;function As(t,n){var r=function(h){var m=t[h];if(!m)throw new Error('Object does not have a property named "'+h+'".');t[h]=function(){for(var g=arguments.length,_=Array(g),w=0;w<g;w++)_[w]=arguments[w];Qn.has(this)||Qn.set(this,{noArgs:{},hasArgs:{}});var x=Qn.get(this),O=x.noArgs,F=x.hasArgs,P=_.length!==0,L=void 0,M=void 0;if(P?(M=[h].concat(_),L=T0(F,M)):L=O[h],L!==da)return L===an?void 0:L;var B=m.apply(this,_),D=B===void 0?an:B;return P?O0(F,M,D):O[h]=D,B}},e=!0,o=!1,i=void 0;try{for(var u=n[Symbol.iterator](),c;!(e=(c=u.next()).done);e=!0){var f=c.value;r(f)}}catch(v){o=!0,i=v}finally{try{!e&&u.return&&u.return()}finally{if(o)throw i}}}function T0(t,n){var r=!0,e=!1,o=void 0;try{for(var i=n[Symbol.iterator](),u;!(r=(u=i.next()).done);r=!0){var c=u.value;if(c===void 0?c=an:c==null&&(c=ks),(typeof c>"u"?"undefined":Ma(c))==="object"?t=t[Ct]&&t[Ct].get(c):t=t[c],t===da)return da}}catch(f){e=!0,o=f}finally{try{!r&&i.return&&i.return()}finally{if(e)throw o}}return t[_s]}function O0(t,n,r){var e=t,o=!0,i=!1,u=void 0;try{for(var c=n[Symbol.iterator](),f;!(o=(f=c.next()).done);o=!0){var v=f.value;if(v===void 0?v=an:v==null&&(v=ks),(typeof v>"u"?"undefined":Ma(v))!=="object"){e[v]||(e[v]={}),e=e[v];continue}if(e[Ct]||(e[Ct]=new WeakMap),!e[Ct].has(v)){var h={};e[Ct].set(v,h),e=h;continue}e=e[Ct].get(v)}}catch(m){i=!0,u=m}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return e[_s]=r,t}var Ss=function(){function t(){we(this,t)}return Oe(t,[{key:"getFirstText",value:function(){if(this.object==="text")return this;var r=null,e=this.nodes.find(function(o){return o.object==="text"?!0:(r=o.getFirstText(),!!r)});return r||e}},{key:"getKeysToPathsTable",value:function(){var r=la({},this.key,[]);return this.nodes&&this.nodes.forEach(function(e,o){var i=e.getKeysToPathsTable();for(var u in i){var c=i[u];z(),r[u]=[o].concat(Fe(c))}}),r}},{key:"getLastText",value:function(){if(this.object==="text")return this;var r=null,e=this.nodes.findLast(function(o){return o.object==="text"?!0:(r=o.getLastText(),r)});return r||e}},{key:"getNode",value:function(r){if(r=this.resolvePath(r),!r||this.object==="text"&&r.size)return null;var e=r.size?this.getDescendant(r):this;return e}},{key:"getPath",value:function(r){if(E.List.isList(r))return r;if(Xe.isNode(r)&&this.descendants){var e=!0,o=!1,i=void 0;try{for(var u=this.descendants()[Symbol.iterator](),c;!(e=(c=u.next()).done);e=!0){var f=c.value,v=C(f,2),h=v[0],m=v[1];if(r===h)return m}}catch(w){o=!0,i=w}finally{try{!e&&u.return&&u.return()}finally{if(o)throw i}}}var g=this.getKeysToPathsTable(),_=g[r];return _?E.List(_):null}},{key:"getText",value:function(){if(this.object==="text")return this.text;var r=this.nodes.reduce(function(e,o){return e+o.text},"");return r}},{key:"hasNode",value:function(r){var e=this.getNode(r);return!!e}},{key:"normalize",value:function(r){var e=r.run("normalizeNode",this);return e}},{key:"regenerateKey",value:function(){var r=ur.create(),e=this.set("key",r);return e}},{key:"resolvePath",value:function(r,e){return typeof r=="string"?(r=this.getPath(r),e!=null&&(r=r.concat(e))):r=$.create(r),r}},{key:"validate",value:function(r){var e=r.run("validateNode",this);return e}}]),t}();As(Ss.prototype,["getFirstText","getKeysToPathsTable","getLastText","getText","normalize","validate"]);Fr(Ss,[at,ut,nt,mt]);var wi=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function Yt(){return!0}var qa=function(){function t(){we(this,t)}return Oe(t,[{key:"addMark",value:function(r,e){r=this.resolvePath(r);var o=this.assertDescendant(r);o=o.addMark(e);var i=this.replaceNode(r,o);return i}},{key:"ancestors",value:function(r){var e=this.createIterable({path:r,direction:null,downward:!1,includeTargetAncestors:!0,includeRoot:!0});return e}},{key:"blocks",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=r.onlyLeaves,o=r.onlyRoots,i=r.onlyTypes,u=r.match,c=Zt(r,["onlyLeaves","onlyRoots","onlyTypes","match"]),f=this.descendants(De({includeDocument:!1,includeInlines:!1,includeTexts:!1},c,{match:function(h,m){return i&&!i.includes(h.type)||o&&m.size!==1||e&&!h.isLeafBlock()?!1:!(u&&!u(h,m))}}));return f}},{key:"createAnnotation",value:function(r){r=Me.createProperties(r);var e=this.resolveAnnotation(r);return e}},{key:"createDecoration",value:function(r){r=Mt.createProperties(r);var e=this.resolveDecoration(r);return e}},{key:"createIterable",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=r.direction,o=e===void 0?"forward":e,i=r.downward,u=i===void 0?!0:i,c=r.upward,f=c===void 0?!0:c,v=r.includeBlocks,h=v===void 0?!0:v,m=r.includeDocument,g=m===void 0?!0:m,_=r.includeInlines,w=_===void 0?!0:_,x=r.includeRoot,O=x===void 0?!1:x,F=r.includeTarget,P=F===void 0?!!r.range:F,L=r.includeTargetAncestors,M=L===void 0?!1:L,B=r.includeTexts,D=B===void 0?!0:B,te=r.match,oe=te===void 0?null:te,U=this,se=null,j=null;r.range?(j=U.resolveRange(r.range),se=U.resolvePath(j.start.path)):r.path&&(se=U.resolvePath(r.path));var ue=se&&U.assertNode(se),ve=typeof window>"u"?wi.Set:window.Set;return la({},Symbol.iterator,function(){var Y=new ve,re=j&&j.start.path,Z=j&&j.end.path,J=se,G=ue,Je=!1,Te=!1,Be=!1,be=function(){return!J||!G?{done:!0}:!O&&G===U||!h&&G.object==="block"||!g&&G.object==="document"||!w&&G.object==="inline"||!D&&G.object==="text"||oe&&!oe(G,J)?Ee():{value:[G,J],done:!1}},Ee=function Ue(){if(!J||!G)return be();if(re&&!Te)return Be?J.size===re.size-1?(Te=!0,J=se,G=ue,Ue()):(J=re.slice(0,J.size+1),G=U.assertNode(J),be()):(Be=!0,J=$.create([]),G=U,be());if(P&&!Je)return Je=!0,be();if(Z&&J.equals(Z))return G=null,J=null,Ue();if(u&&G.nodes&&G.nodes.size&&!Y.has(G)){Y.add(G);var V=o==="forward"?0:G.nodes.size-1;return J=J.push(V),G=U.assertNode(J),be()}if(o==="forward"){var X=$.increment(J),pe=U.getNode(X);if(pe)return J=X,G=pe,be()}if(o==="backward"&&J.last()!==0){var ct=$.decrement(J),Qe=U.getNode(ct);if(Qe)return J=ct,G=Qe,be()}return f&&J.size?(J=$.lift(J),G=U.assertNode(J),Y.has(G)?Ue():(Y.add(G),M?be():Ue())):(J=null,G=null,Ue())};return{next:Ee}})}},{key:"createPoint",value:function(r){r=ee.createProperties(r);var e=this.resolvePoint(r);return e}},{key:"createRange",value:function(r){r=je.createProperties(r);var e=this.resolveRange(r);return e}},{key:"createSelection",value:function(r){r=At.createProperties(r);var e=this.resolveSelection(r);return e}},{key:"descendants",value:function(r){var e=this.createIterable(De({path:[]},r));return e}},{key:"filterDescendants",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Yt,e=[],o=!0,i=!1,u=void 0;try{for(var c=this.descendants()[Symbol.iterator](),f;!(o=(f=c.next()).done);o=!0){var v=f.value,h=C(v,2),m=h[0],g=h[1];r(m,g)&&e.push(m)}}catch(_){i=!0,u=_}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return E.List(e)}},{key:"findDescendant",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Yt,e=!0,o=!1,i=void 0;try{for(var u=this.descendants()[Symbol.iterator](),c;!(e=(c=u.next()).done);e=!0){var f=c.value,v=C(f,2),h=v[0],m=v[1];if(r(h,m))return h}}catch(g){o=!0,i=g}finally{try{!e&&u.return&&u.return()}finally{if(o)throw i}}return null}},{key:"forEachDescendant",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Yt,e=!0,o=!1,i=void 0;try{for(var u=this.descendants()[Symbol.iterator](),c;!(e=(c=u.next()).done);e=!0){var f=c.value,v=r.apply(void 0,Fe(f));if(v===!1)return}}catch(h){o=!0,i=h}finally{try{!e&&u.return&&u.return()}finally{if(o)throw i}}}},{key:"getActiveMarksAtRange",value:function(r){if(r=this.resolveRange(r),r.isUnset)return E.Set();if(r.isCollapsed){var e=r,o=e.start;return this.getInsertMarksAtPoint(o)}var i=r,u=i.start,c=i.end,f=u.path,v=u.offset,h=c.path,m=c.offset,g=this.getDescendant(f),_=this.getDescendant(h);if(!f.equals(h)){for(;!f.equals(h)&&m===0;){var w=this.texts({path:h,direction:"backward"}),x=C(w,1),O=C(x[0],2);_=O[0],h=O[1],m=_.text.length}for(;!f.equals(h)&&v===g.text.length;){var F=this.texts({path:f}),P=C(F,1),L=C(P[0],2);g=L[0],f=L[1],v=0}}if(f.equals(h))return g.marks;var M=g.marks;if(M.size===0)return E.Set();var B=_.marks,D=M.intersect(B);if(D.size===0)return D;var te=this.texts({path:f}),oe=C(te,1),U=C(oe[0],2);for(g=U[0],f=U[1];!f.equals(h);){if(g.text.length!==0&&(D=D.intersect(g.marks),D.size===0))return E.Set();var se=this.texts({path:f}),j=C(se,1),ue=C(j[0],2);g=ue[0],f=ue[1]}return D}},{key:"getAncestors",value:function(r){var e=this.ancestors(r),o=Array.from(e,function(u){var c=C(u,1),f=c[0];return f}).reverse(),i=E.List(o);return i}},{key:"getBlocks",value:function(){var r=this.blocks({onlyLeaves:!0}),e=Array.from(r,function(i){var u=C(i,1),c=u[0];return c}),o=E.List(e);return o}},{key:"getBlocksByType",value:function(r){var e=this.blocks({onlyLeaves:!0,onlyTypes:[r]}),o=Array.from(e,function(u){var c=C(u,1),f=c[0];return f}),i=E.List(o);return i}},{key:"getChild",value:function(r){if(r=this.resolvePath(r),!r||r.size>1)return null;var e=this.nodes.get(r.first());return e}},{key:"getClosest",value:function(r,e){var o=!0,i=!1,u=void 0;try{for(var c=this.ancestors(r)[Symbol.iterator](),f;!(o=(f=c.next()).done);o=!0){var v=f.value,h=C(v,2),m=h[0],g=h[1];if(e(m,g))return m}}catch(_){i=!0,u=_}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return null}},{key:"getClosestBlock",value:function(r){var e=this.getClosest(r,function(o){return o.object==="block"});return e}},{key:"getClosestInline",value:function(r){var e=this.getClosest(r,function(o){return o.object==="inline"});return e}},{key:"getClosestVoid",value:function(r,e){rt(!gt.isValue(e),"As of Slate 0.42.0, the `node.getClosestVoid` method takes an `editor` instead of a `value`.");var o=this.getClosest(r,function(i){return e.isVoid(i)});return o}},{key:"getCommonAncestor",value:function(r,e){if(r=this.resolvePath(r),e=this.resolvePath(e),!r||!e)return null;var o=$.relate(r,e),i=this.getNode(o);return i}},{key:"getDecorations",value:function(r){var e=r.run("decorateNode",this);return e=Mt.createList(e),e}},{key:"getDepth",value:function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(r=this.resolvePath(r),!r)return null;var o=this.getNode(r),i=o?r.size-1+e:null;return i}},{key:"getDescendant",value:function(r){if(r=this.resolvePath(r),!r||!r.size)return null;var e=this;return r.forEach(function(o){return e=e.getIn(["nodes",o]),!!e}),e}},{key:"getDescendantsAtRange",value:function(r){var e=this.descendants({range:r}),o=Array.from(e,function(u){var c=C(u,1),f=c[0];return f}),i=E.List(o);return i}},{key:"getFragmentAtRange",value:function(r){if(r=this.resolveRange(r),r.isUnset)return ut.create();for(var e=r,o=e.start,i=e.end,u=this,c=i.path,f=i.offset,v="end";c.size;){var h=c.last();u=u.splitNode(c,f),f=h+1,c=$.lift(c),!c.size&&v==="end"&&(c=o.path,f=o.offset,v="start")}var m=o.path.first()+1,g=i.path.first()+2,_=u.nodes.slice(m,g),w=ut.create({nodes:_});return w}},{key:"getFurthest",value:function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yt,o=this.ancestors(r),i=Array.from(o).reverse(),u=!0,c=!1,f=void 0;try{for(var v=i[Symbol.iterator](),h;!(u=(h=v.next()).done);u=!0){var m=h.value,g=C(m,2),_=g[0],w=g[1];if(e(_,w))return _}}catch(x){c=!0,f=x}finally{try{!u&&v.return&&v.return()}finally{if(c)throw f}}return null}},{key:"getFurthestBlock",value:function(r){var e=this.getFurthest(r,function(o){return o.object==="block"});return e}},{key:"getFurthestChild",value:function(r){if(r=this.resolvePath(r),!r||!r.size)return null;var e=this.nodes.get(r.first());return e}},{key:"getFurthestInline",value:function(r){var e=this.getFurthest(r,function(o){return o.object==="inline"});return e}},{key:"getInlines",value:function(){var r=this.inlines({onlyLeaves:!0}),e=Array.from(r,function(i){var u=C(i,1),c=u[0];return c}),o=E.List(e);return o}},{key:"getInlinesByType",value:function(r){var e=this.inlines({onlyLeaves:!0,onlyTypes:[r]}),o=Array.from(e,function(u){var c=C(u,1),f=c[0];return f}),i=E.List(o);return i}},{key:"getInsertMarksAtPoint",value:function(r){r=this.resolvePoint(r);var e=r,o=e.path,i=e.offset,u=this.getDescendant(o);if(i!==0)return u.marks;var c=void 0,f=void 0,v=!0,h=!1,m=void 0;try{for(var g=this.ancestors(o)[Symbol.iterator](),_;!(v=(_=g.next()).done);v=!0){var w=_.value,x=C(w,2),O=x[0],F=x[1];O.object==="block"&&(c=O,f=F)}}catch(oe){h=!0,m=oe}finally{try{!v&&g.return&&g.return()}finally{if(h)throw m}}var P=$.drop(o,f.size),L=c.texts({path:P,direction:"backward"}),M=C(L,1),B=M[0];if(!B)return u.marks;var D=C(B,1),te=D[0];return te.marks}},{key:"getInsertMarksAtRange",value:function(r){r=this.resolveRange(r);var e=r,o=e.start;if(r.isUnset)return E.Set();if(r.isCollapsed)return this.getInsertMarksAtPoint(o);var i=this.getDescendant(o.path);return i.marks}},{key:"getLeafBlocksAtRange",value:function(r){var e=this.blocks({range:r,onlyLeaves:!0}),o=Array.from(e,function(u){var c=C(u,1),f=c[0];return f}),i=E.List(o);return i}},{key:"getLeafInlinesAtRange",value:function(r){var e=this.inlines({range:r,onlyLeaves:!0}),o=Array.from(e,function(u){var c=C(u,1),f=c[0];return f}),i=E.List(o);return i}},{key:"getNodesToPathsMap",value:function(){var r=this,e=typeof window>"u"?new wi.Map:new window.Map;return e.set(r,$.create([])),r.forEachDescendant(function(o,i){e.set(o,i)}),e}},{key:"getMarks",value:function(){var r=this.marks(),e=Array.from(r,function(o){var i=C(o,1),u=i[0];return u});return E.OrderedSet(e)}},{key:"getMarksAtRange",value:function(r){var e=this.marks({range:r}),o=Array.from(e,function(i){var u=C(i,1),c=u[0];return c});return E.OrderedSet(o)}},{key:"getMarksByType",value:function(r){var e=this.marks({onlyTypes:[r]}),o=Array.from(e,function(i){var u=C(i,1),c=u[0];return c});return E.OrderedSet(o)}},{key:"getNextBlock",value:function(r){var e=this.blocks({path:r,onlyLeaves:!0}),o=C(e,1),i=o[0],u=i?i[0]:null;return u}},{key:"getNextNode",value:function(r){var e=this.createIterable({path:r,downward:!1}),o=C(e,1),i=o[0],u=i?i[0]:null;return u}},{key:"getNextSibling",value:function(r){var e=this.siblings(r),o=C(e,1),i=o[0],u=i?i[0]:null;return u}},{key:"getNextText",value:function(r){var e=this.texts({path:r}),o=C(e,1),i=o[0],u=i?i[0]:null;return u}},{key:"getOffset",value:function(r){r=this.resolvePath(r),this.assertDescendant(r);var e=r.first(),o=this.nodes.slice(0,e).reduce(function(u,c){return u+c.text.length},0),i=r.size===1?o:o+this.nodes.get(e).getOffset($.drop(r));return i}},{key:"getOffsetAtRange",value:function(r){if(r=this.resolveRange(r),r.isUnset)throw new Error("The range cannot be unset to calculcate its offset.");if(r.isExpanded)throw new Error("The range must be collapsed to calculcate its offset.");var e=r,o=e.start,i=this.getOffset(o.path)+o.offset;return i}},{key:"getParent",value:function(r){if(r=this.resolvePath(r),!r||!r.size)return null;var e=$.lift(r),o=this.getNode(e);return o}},{key:"getPreviousBlock",value:function(r){var e=this.blocks({path:r,onlyLeaves:!0,direction:"backward"}),o=C(e,1),i=o[0],u=i?i[0]:null;return u}},{key:"getPreviousNode",value:function(r){var e=this.createIterable({path:r,downward:!1,direction:"backward"}),o=C(e,1),i=o[0],u=i?i[0]:null;return u}},{key:"getPreviousSibling",value:function(r){var e=this.siblings(r,{direction:"backward"}),o=C(e,1),i=o[0],u=i?i[0]:null;return u}},{key:"getPreviousText",value:function(r){var e=this.texts({path:r,direction:"backward"}),o=C(e,1),i=o[0],u=i?i[0]:null;return u}},{key:"getRootBlocksAtRange",value:function(r){var e=this.blocks({range:r,onlyRoots:!0}),o=Array.from(e,function(u){var c=C(u,1),f=c[0];return f}),i=E.List(o);return i}},{key:"getRootInlinesAtRange",value:function(r){var e=this.inlines({range:r,onlyRoots:!0}),o=Array.from(e,function(u){var c=C(u,1),f=c[0];return f}),i=E.List(o);return i}},{key:"getTextAtOffset",value:function(r){if(r===0)return this.getFirstText();if(r===this.text.length)return this.getLastText();if(r<0||r>this.text.length)return null;var e=0,o=!0,i=!1,u=void 0;try{for(var c=this.texts()[Symbol.iterator](),f;!(o=(f=c.next()).done);o=!0){var v=f.value,h=C(v,1),m=h[0];if(e+=m.text.length,e>r)return m}}catch(g){i=!0,u=g}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return null}},{key:"getTextDirection",value:function(){var r=u_(this.text);return r==="neutral"?null:r}},{key:"getTexts",value:function(){var r=this.texts(),e=Array.from(r,function(i){var u=C(i,1),c=u[0];return c}),o=E.List(e);return o}},{key:"getTextsAtRange",value:function(r){var e=this.texts({range:r}),o=Array.from(e,function(u){var c=C(u,1),f=c[0];return f}),i=E.List(o);return i}},{key:"hasBlockChildren",value:function(){return!!(this.nodes&&this.nodes.find(function(r){return r.object==="block"}))}},{key:"hasChild",value:function(r){var e=this.getChild(r);return!!e}},{key:"hasInlineChildren",value:function(){return!!(this.nodes&&this.nodes.find(function(r){return r.object==="inline"||r.object==="text"}))}},{key:"hasDescendant",value:function(r){var e=this.getDescendant(r);return!!e}},{key:"hasVoidParent",value:function(r,e){rt(!gt.isValue(e),"As of Slate 0.42.0, the `node.hasVoidParent` method takes an `editor` instead of a `value`.");var o=this.getClosestVoid(r,e);return!!o}},{key:"inlines",value:function(){var r=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=e.onlyLeaves,i=e.onlyRoots,u=e.onlyTypes,c=e.match,f=Zt(e,["onlyLeaves","onlyRoots","onlyTypes","match"]),v=this.descendants(De({includeBlocks:!1,includeTexts:!1,includeDocument:!1},f,{match:function(m,g){return u&&!u.includes(m.type)||o&&!m.isLeafInline()||i&&r.getParent(g).object!=="block"?!1:!(c&&!c(m,g))}}));return v}},{key:"insertNode",value:function(r,e){r=this.resolvePath(r);var o=r.last(),i=$.lift(r),u=this.assertNode(i),c=u.nodes.splice(o,0,e);u=u.set("nodes",c);var f=this.replaceNode(i,u);return f}},{key:"insertText",value:function(r,e,o){r=this.resolvePath(r);var i=this.assertDescendant(r);i=i.insertText(e,o);var u=this.replaceNode(r,i);return u}},{key:"isLeafBlock",value:function(){return!(this.object!=="block"||this.nodes.some(function(r){return r.object==="block"}))}},{key:"isLeafInline",value:function(){return!(this.object!=="inline"||this.nodes.some(function(r){return r.object==="inline"}))}},{key:"isInRange",value:function(r,e){if(r=this.resolvePath(r),e=this.resolveRange(e),e.isUnset)return!1;var o=$.compare(r,e.start.path),i=$.compare(r,e.end.path),u=o!==-1&&i!==1;return u}},{key:"mapChildren",value:function(){var r=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Yt,o=this.nodes;o.forEach(function(u,c){var f=e(u,c,r.nodes);f!==u&&(o=o.set(f.key,f))});var i=this.set("nodes",o);return i}},{key:"mapDescendants",value:function(){var r=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Yt,o=this.nodes;o.forEach(function(u,c){var f=u;f.object!=="text"&&(f=f.mapDescendants(e)),f=e(f,c,r.nodes),f!==u&&(o=o.set(c,f))});var i=this.set("nodes",o);return i}},{key:"marks",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=r.onlyTypes,o=e===void 0?null:e,i=r.match,u=Zt(r,["onlyTypes","match"]),c=this.texts(u);return la({},Symbol.iterator,function(){var f=c[Symbol.iterator](),v=null,h=null,m=[],g=function _(){if(m.length){var w=m.shift();return o&&!o.includes(w.type)||i&&!i(w,v,h)?_():{value:[w,v,h],done:!1}}var x=f.next(),O=x.value,F=x.done;if(F)return{done:!0};var P=C(O,2);return v=P[0],h=P[1],m=v.marks.toArray(),_()};return{next:g}})}},{key:"mergeNode",value:function(r){var e=this.assertNode(r);if(r=this.resolvePath(r),r.last()===0)throw new Error("Unable to merge node because it has no previous sibling: "+e);var o=$.decrement(r),i=this.assertNode(o);if(i.object!==e.object)throw new Error("Unable to merge two different kinds of nodes: "+i+" and "+e);var u=i.object==="text"?i.mergeText(e):i.set("nodes",i.nodes.concat(e.nodes)),c=this;return c=c.removeNode(r),c=c.removeNode(o),c=c.insertNode(o,u),c}},{key:"moveNode",value:function(r,e){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=this.assertNode(r);r=this.resolvePath(r),e=this.resolvePath(e,o);var u=$.lift(e);this.assertNode(u);var c=Lt.create({type:"move_node",path:r,newPath:e});e=$.transform(r,c).first();var f=this;return f=f.removeNode(r),f=f.insertNode(e,i),f}},{key:"removeMark",value:function(r,e){r=this.resolvePath(r);var o=this.assertDescendant(r);o=o.removeMark(e);var i=this.replaceNode(r,o);return i}},{key:"removeNode",value:function(r){this.assertDescendant(r),r=this.resolvePath(r);var e=r.flatMap(function(i){return["nodes",i]}),o=this.deleteIn(e);return o}},{key:"removeText",value:function(r,e,o){var i=this.assertDescendant(r);i=i.removeText(e,o.length);var u=this.replaceNode(r,i);return u}},{key:"replaceNode",value:function(r,e){if(r=this.resolvePath(r),!r)throw new Error("Unable to replace a node because it could not be found in the first place: "+r);if(!r.size)return e;this.assertNode(r);var o=r.flatMap(function(u){return["nodes",u]}),i=this.setIn(o,e);return i}},{key:"resolveAnnotation",value:function(r){return r=Me.create(r),r=r.normalize(this),r}},{key:"resolveDecoration",value:function(r){return r=Mt.create(r),r=r.normalize(this),r}},{key:"resolvePoint",value:function(r){return r=ee.create(r),r=r.normalize(this),r}},{key:"resolveRange",value:function(r){return r=je.create(r),r=r.normalize(this),r}},{key:"resolveSelection",value:function(r){return r=At.create(r),r=r.normalize(this),r}},{key:"setNode",value:function(r,e){var o=this.assertNode(r);o=o.merge(e);var i=this.replaceNode(r,o);return i}},{key:"setMark",value:function(r,e,o){r=this.resolvePath(r);var i=this.assertDescendant(r);i=i.setMark(e,o);var u=this.replaceNode(r,i);return u}},{key:"siblings",value:function(r,e){var o=this.createIterable(De({path:r,upward:!1,downward:!1},e));return o}},{key:"splitNode",value:function(r,e,o){var i=this.assertNode(r);r=this.resolvePath(r);var u=void 0,c=void 0;if(i.object==="text"){var f=i.splitText(e),v=C(f,2);u=v[0],c=v[1]}else{var h=i.nodes.take(e),m=i.nodes.skip(e);u=i.set("nodes",h),c=i.set("nodes",m).regenerateKey()}o&&i.object!=="text"&&(c=c.merge(o));var g=this;return g=g.removeNode(r),g=g.insertNode(r,c),g=g.insertNode(r,u),g}},{key:"texts",value:function(r){var e=this.descendants(De({includeBlocks:!1,includeInlines:!1,includeDocument:!1},r));return e}},{key:"getBlocksAtRange",value:function(r){return z(),this.getLeafBlocksAtRange(r)}},{key:"getBlocksAtRangeAsArray",value:function(r){return z(),this.getLeafBlocksAtRangeAsArray(r)}},{key:"getInlinesAtRange",value:function(r){return z(),this.getLeafInlinesAtRange(r)}},{key:"getInlinesAtRangeAsArray",value:function(r){return z(),this.getLeafInlinesAtRangeAsArray(r)}},{key:"getNextTextAndPath",value:function(r){return z(),this.getNextTextEntry(r)}},{key:"getNextDeepMatchingNodeAndPath",value:function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};z();var o=this.getNextMatchingNodeAndPath(r);if(!o)return null;for(var i=C(o,2),u=i[0],c=i[1],f=void 0,v=function(){return f=u.object!=="text"&&u.findFirstDescendantAndPath(e,c),f};v();){var h=f,m=C(h,2);u=m[0],c=m[1]}return u?e(u)?[u,c]:this.getNextDeepMatchingNodeAndPath(o[1],e):null}},{key:"getPreviousTextAndPath",value:function(r){return z(),this.getPreviousTextEntry(r)}},{key:"findFirstDescendantAndPath",value:function(r,e){return z(),this.findDescendantAndPath(r,e,!1)}},{key:"getPreviousMatchingNodeAndPath",value:function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};if(z(),!r)return null;for(var o=r.size;o>0;o--){var i=r.slice(0,o);if(i.last()!==0){for(var u=$.decrement(i),c=this.getNode(u);c&&!e(c);)u=$.decrement(u),c=this.getNode(u);if(c)return[c,u]}}return null}},{key:"getPreviousDeepMatchingNodeAndPath",value:function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};z();var o=this.getPreviousMatchingNodeAndPath(r);if(!o)return null;for(var i=C(o,2),u=i[0],c=i[1],f=void 0,v=function(){return f=u.object!=="text"&&u.findLastDescendantAndPath(e,c),f};v();){var h=f,m=C(h,2);u=m[0],c=m[1]}return u?e(u)?[u,c]:this.getPreviousDeepMatchingNodeAndPath(o[1],e):null}},{key:"findLastDescendantAndPath",value:function(r,e){return z(),this.findDescendantAndPath(r,e,!0)}},{key:"findDescendantAndPath",value:function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$.create([]),o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;z();var i=void 0,u=void 0;return this.forEachDescendantWithPath(function(c,f,v){if(r(c,f,v))return i=c,u=f,!1},e,o),i?[i,u]:null}},{key:"forEachDescendantWithPath",value:function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$.create([]),o=arguments[2];z();var i=this.nodes,u=void 0;return o&&(i=i.reverse()),i.forEach(function(c,f){var v=e.concat(f);if(r(c,v,i)===!1)return u=!1,!1;if(c.object!=="text")return u=c.forEachDescendantWithPath(r,v,o),u}),u}},{key:"getNextMatchingNodeAndPath",value:function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};if(z(),!r)return null;for(var o=r.size;o>0;o--){for(var i=r.slice(0,o),u=$.increment(i),c=this.getNode(u);c&&!e(c);)u=$.increment(u),c=this.getNode(u);if(c)return[c,u]}return null}},{key:"getSelectionIndexes",value:function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;z();var o=r.start,i=r.end;if(!e||r.isUnset)return null;if(o.path.equals(i.path)){var u=this.getFurthestAncestor(o.path),c=u?this.nodes.indexOf(u):null;return{start:c,end:c+1}}var f=null,v=null;return this.nodes.forEach(function(h,m){return h.object==="text"?(f==null&&h.key===o.key&&(f=m),v==null&&h.key===i.key&&(v=m+1)):(f==null&&h.hasDescendant(o.key)&&(f=m),v==null&&h.hasDescendant(i.key)&&(v=m+1)),f==null||v==null}),e&&f==null&&(f=0),e&&v==null&&(v=this.nodes.size),f==null?null:{start:f,end:v}}},{key:"getTextsBetweenPositionsAsArray",value:function(r,e){return z(),r=this.resolvePath(r),e=this.resolvePath(e),this.getTextsBetweenPathPositionsAsArray(r,e)}},{key:"getOrderedMarksBetweenPositions",value:function(r,e,o,i){z(),r=this.resolvePath(r),o=this.resolvePath(o);var u=this.getDescendant(r);if($.isEqual(r,o))return u.marks;var c=this.getTextsBetweenPathPositionsAsArray(r,o);return E.OrderedSet().withMutations(function(f){c.forEach(function(v){f.union(v.marks)})})}},{key:"getTextsBetweenPathPositionsAsArray",value:function(r,e){if(z(),r&&e&&$.isEqual(r,e))return[this.getDescendant(r)];if(!r&&!e)return this.getTextsAsArray();var o=r?r.get(0,0):0,i=e?e.get(0,this.nodes.size-1):this.nodes.size-1,u=[];return this.nodes.slice(o,i+1).forEach(function(c,f){if(c.object==="text")u.push(c);else{var v=r&&f===0?$.drop(r):null,h=e&&f===i-o?$.drop(e):null;u=u.concat(c.getTextsBetweenPathPositionsAsArray(v,h))}}),u}},{key:"getFurthestAncestor",value:function(r){return z(),this.getFurthestChild(r)}},{key:"getLeafBlocksAtRangeAsArray",value:function(r){if(z(),r=this.resolveRange(r),r.isUnset)return[];var e=r,o=e.start,i=e.end;return this.getLeafBlocksBetweenPathPositionsAsArray(o.path,i.path)}},{key:"getLeafBlocksBetweenPathPositionsAsArray",value:function(r,e){if(z(),r&&e&&$.isEqual(r,e))return[this.getClosestBlock(r)];if(!r&&!e)return this.getBlocksAsArray();var o=r?r.get(0,0):0,i=e?e.get(0,this.nodes.size-1):this.nodes.size-1,u=[];return this.nodes.slice(o,i+1).forEach(function(c,f){if(c.object==="block")if(c.isLeafBlock())u.push(c);else{var v=r&&f===0?$.drop(r):null,h=e&&f===i-o?$.drop(e):null;u=u.concat(c.getLeafBlocksBetweenPathPositionsAsArray(v,h))}}),u}},{key:"getBlocksAsArray",value:function(){z();var r=this.blocks({onlyLeaves:!0}),e=Array.from(r,function(o){var i=C(o,1),u=i[0];return u});return e}},{key:"getBlocksByTypeAsArray",value:function(r){z();var e=this.blocks({onlyLeaves:!0,onlyTypes:[r]}),o=Array.from(e,function(i){var u=C(i,1),c=u[0];return c});return o}},{key:"getFurthestOnlyChildAncestor",value:function(r){z();var e=this.getAncestors(r);if(!e)return null;var o=e.rest().reverse().takeUntil(function(i){return i.nodes.size>1}).last();return o||null}},{key:"getInlinesAsArray",value:function(){z();var r=Array.from(this.inlines({onlyLeaves:!0}),function(e){var o=C(e,1),i=o[0];return i});return r}},{key:"getInlinesByTypeAsArray",value:function(r){z();var e=Array.from(this.inlines({onlyLeaves:!0,onlyTypes:[r]}),function(o){var i=C(o,1),u=i[0];return u});return e}},{key:"getLeafInlinesAtRangeAsArray",value:function(r){var e=this;if(z(),r=this.resolveRange(r),r.isUnset)return[];var o=this.getTextsAtRangeAsArray(r).map(function(i){return e.getClosestInline(i.key)}).filter(function(i){return i});return o}},{key:"getOrderedMarks",value:function(){return z(),this.getMarks()}},{key:"getOrderedMarksAtRange",value:function(r){return z(),this.getMarksAtRange(r)}},{key:"getOrderedMarksByType",value:function(r){return z(),this.getMarksByType(r)}},{key:"getMarksByTypeAsArray",value:function(r){z();var e=this.nodes.reduce(function(o,i){return i.object==="text"?o.concat(i.marks.filter(function(u){return u.type===r})):o.concat(i.getMarksByTypeAsArray(r))},[]);return e}},{key:"getMarksAsArray",value:function(){var r;z();var e=[],o=!0,i=!1,u=void 0;try{for(var c=this.texts()[Symbol.iterator](),f;!(o=(f=c.next()).done);o=!0){var v=f.value,h=C(v,1),m=h[0];e.push(m.marks.toArray())}}catch(_){i=!0,u=_}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}var g=(r=[]).concat.apply(r,e);return g}},{key:"getRootInlinesAtRangeAsArray",value:function(r){var e=this;if(z(),r=this.resolveRange(r),r.isUnset)return E.List();var o=this.getTextsAtRangeAsArray(r).map(function(i){return e.getFurthestInline(i.key)}).filter(function(i){return i});return o}},{key:"getTextsAsArray",value:function(){z();var r=this.texts(),e=Array.from(r,function(o){var i=C(o,1),u=i[0];return u});return e}},{key:"getTextsAtRangeAsArray",value:function(r){z();var e=this.texts({range:r}),o=Array.from(e,function(i){var u=C(i,1),c=u[0];return c});return o}},{key:"getMarksAtPosition",value:function(r,e){z(),r=this.resolvePath(r);var o=this.getDescendant(r),i=o.marks;if(e!==0)return E.OrderedSet(i);var u=this.getClosestBlock(r);if(u.text==="")return E.OrderedSet(i);var c=this.texts({path:r,direction:"backward"}),f=C(c,1),v=f[0];if(!v)return E.OrderedSet();var h=C(v,2),m=h[0],g=h[1];return u.hasDescendant(g)?E.OrderedSet(m.marks):E.OrderedSet(i)}},{key:"getNodesAtRange",value:function(r){z();var e=this.descendants({range:r}),o=Array.from(e,function(u){var c=C(u,1),f=c[0];return f}),i=E.List(o);return i}},{key:"isNodeInRange",value:function(r,e){return z(),this.isInRange(r,e)}},{key:"text",get:function(){return this.getText()}}]),t}(),b0=["Child","Depth","Descendant","Node","Parent","Path"],x0=function(n){qa.prototype["assert"+n]=function(r){for(var e=arguments.length,o=Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];var u=this["get"+n].apply(this,[r].concat(o));if(u==null)throw new Error("`Node.assert"+n+"` could not find node with path or key: "+r);return u}},ea=!0,Ti=!1,Oi=void 0;try{for(var ta=b0[Symbol.iterator](),bi;!(ea=(bi=ta.next()).done);ea=!0){var E0=bi.value;x0(E0)}}catch(t){Ti=!0,Oi=t}finally{try{!ea&&ta.return&&ta.return()}finally{if(Ti)throw Oi}}As(qa.prototype,["getBlocksAsArray","getBlocksByTypeAsArray","getDecorations","getFragmentAtRange","getInlinesAsArray","getInlinesByTypeAsArray","getInsertMarksAtRange","getLeafBlocksAtRangeAsArray","getLeafBlocksAtRangeAsArray","getLeafInlinesAtRangeAsArray","getMarksAsArray","getMarksAtPosition","getMarksByTypeAsArray","getNextBlock","getNodesAtRange","getNodesToPathsMap","getOffset","getOffsetAtRange","getOrderedMarksBetweenPositions","getPreviousBlock","getRootBlocksAtRange","getRootInlinesAtRangeAsArray","getTextAtOffset","getTextDirection","getTextsAsArray","getTextsBetweenPathPositionsAsArray"]);Fr(qa,[at,ut,nt]);var N0=function(){function t(){we(this,t)}return Oe(t,[{key:"flip",value:function(){var r=this.setPoints([this.focus,this.anchor]);return r}},{key:"moveForward",value:function(r){return this.updatePoints(function(e){return e.moveForward(r)})}},{key:"moveBackward",value:function(r){return this.updatePoints(function(e){return e.moveBackward(r)})}},{key:"moveAnchorBackward",value:function(r){var e=this.setAnchor(this.anchor.moveBackward(r));return e}},{key:"moveAnchorForward",value:function(r){var e=this.setAnchor(this.anchor.moveForward(r));return e}},{key:"moveAnchorTo",value:function(r,e){var o=this.setAnchor(this.anchor.moveTo(r,e));return o}},{key:"moveAnchorToStartOfNode",value:function(r){var e=this.setAnchor(this.anchor.moveToStartOfNode(r));return e}},{key:"moveAnchorToEndOfNode",value:function(r){var e=this.setAnchor(this.anchor.moveToEndOfNode(r));return e}},{key:"moveEndBackward",value:function(r){var e=this.setEnd(this.end.moveBackward(r));return e}},{key:"moveEndForward",value:function(r){var e=this.setEnd(this.end.moveForward(r));return e}},{key:"moveEndTo",value:function(r,e){var o=this.setEnd(this.end.moveTo(r,e));return o}},{key:"moveEndToStartOfNode",value:function(r){var e=this.setEnd(this.end.moveToStartOfNode(r));return e}},{key:"moveEndToEndOfNode",value:function(r){var e=this.setEnd(this.end.moveToEndOfNode(r));return e}},{key:"moveFocusBackward",value:function(r){var e=this.setFocus(this.focus.moveBackward(r));return e}},{key:"moveFocusForward",value:function(r){var e=this.setFocus(this.focus.moveForward(r));return e}},{key:"moveFocusTo",value:function(r,e){var o=this.setFocus(this.focus.moveTo(r,e));return o}},{key:"moveFocusToStartOfNode",value:function(r){var e=this.setFocus(this.focus.moveToStartOfNode(r));return e}},{key:"moveFocusToEndOfNode",value:function(r){var e=this.setFocus(this.focus.moveToEndOfNode(r));return e}},{key:"moveStartBackward",value:function(r){var e=this.setStart(this.start.moveBackward(r));return e}},{key:"moveStartForward",value:function(r){var e=this.setStart(this.start.moveForward(r));return e}},{key:"moveStartTo",value:function(r,e){var o=this.setStart(this.start.moveTo(r,e));return o}},{key:"moveStartToStartOfNode",value:function(r){var e=this.setStart(this.start.moveToStartOfNode(r));return e}},{key:"moveStartToEndOfNode",value:function(r){var e=this.setStart(this.start.moveToEndOfNode(r));return e}},{key:"moveTo",value:function(r,e){return this.updatePoints(function(o){return o.moveTo(r,e)})}},{key:"moveToAnchor",value:function(){var r=this.setFocus(this.anchor);return r}},{key:"moveToEnd",value:function(){var r=this.setStart(this.end);return r}},{key:"moveToEndOfNode",value:function(r){return this.updatePoints(function(e){return e.moveToEndOfNode(r)})}},{key:"moveToFocus",value:function(){var r=this.setAnchor(this.focus);return r}},{key:"moveToRangeOfNode",value:function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r,o=this.setPoints([this.anchor.moveToStartOfNode(r),this.focus.moveToEndOfNode(e)]);return o}},{key:"moveToStart",value:function(){var r=this.setEnd(this.start);return r}},{key:"moveToStartOfNode",value:function(r){return this.updatePoints(function(e){return e.moveToStartOfNode(r)})}},{key:"normalize",value:function(r){return this.updatePoints(function(e){return e.normalize(r)})}},{key:"setAnchor",value:function(r){var e=this.set("anchor",r);return e}},{key:"setEnd",value:function(r){var e=this.isBackward?this.setAnchor(r):this.setFocus(r);return e}},{key:"setFocus",value:function(r){var e=this.set("focus",r);return e}},{key:"setPoints",value:function(r){var e=C(r,2),o=e[0],i=e[1],u=this.set("anchor",o).set("focus",i);return u}},{key:"updatePoints",value:function(r){var e=this.anchor,o=this.focus;return e=r(e),o=r(o),this.merge({anchor:e,focus:o})}},{key:"setStart",value:function(r){var e=this.isBackward?this.setFocus(r):this.setAnchor(r);return e}},{key:"setProperties",value:function(r){r=je.createProperties(r);var e=r,o=e.anchor,i=e.focus,u=Zt(e,["anchor","focus"]);o&&(u.anchor=ee.create(o)),i&&(u.focus=ee.create(i));var c=this.merge(u);return c}},{key:"toJSON",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e={object:this.object,anchor:this.anchor.toJSON(r),focus:this.focus.toJSON(r)};return e}},{key:"toRange",value:function(){var r=je.createProperties(this),e=je.create(r);return e}},{key:"unset",value:function(){var r=this.updatePoints(function(e){return e.unset()});return r}},{key:"isCollapsed",get:function(){return this.anchor===this.focus||this.anchor.key===this.focus.key&&this.anchor.offset===this.focus.offset}},{key:"isExpanded",get:function(){return!this.isCollapsed}},{key:"isBackward",get:function(){var r=this.isUnset,e=this.anchor,o=this.focus;if(r)return null;if(e.key===o.key)return e.offset>o.offset;var i=$.isBefore(o.path,e.path);return i}},{key:"isForward",get:function(){var r=this.isBackward,e=r==null?null:!r;return e}},{key:"isUnset",get:function(){var r=this.anchor,e=this.focus,o=r.isUnset||e.isUnset;return o}},{key:"isSet",get:function(){return!this.isUnset}},{key:"start",get:function(){return this.isBackward?this.focus:this.anchor}},{key:"end",get:function(){return this.isBackward?this.anchor:this.focus}}]),t}();Fr(N0,[Me,Mt,je,At]);const P0=Fi().use(eu).use(Bi).use($i).use(vu);Fi().use(uu).use(Bi).use($i).use(tu);const xi=t=>gt.fromJSON(P0.processSync(t).result),I0={title:"Playground/Slate ~0.47"},F0=({children:t})=>Or("div",{style:ra.useMemo(()=>({width:"100vw",height:"100vh",display:"flex",flexDirection:"row",fontSize:"10.5pt"}),[]),children:t}),Yr={render:()=>{const[t,n]=ra.useState(xi(Lo)),r=ra.useRef(null);return ru(F0,{children:[Or(nu,{ref:r,initialValue:Lo}),Or("div",{style:{padding:10},children:Or("button",{style:{height:"100%"},onClick:()=>{r.current&&n(xi(r.current.value))},children:"md -> slate"})}),Or(au,{children:JSON.stringify(t,null,2)})]})}};var Ei,Ni,Pi;Yr.parameters={...Yr.parameters,docs:{...(Ei=Yr.parameters)==null?void 0:Ei.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState(toSlate(text));
    const ref = useRef<HTMLTextAreaElement>(null);
    return <Wrapper>
        <TextEditor ref={ref} initialValue={text} />
        <div style={{
        padding: 10
      }}>
          <button style={{
          height: "100%"
        }} onClick={() => {
          if (!ref.current) return;
          setValue(toSlate(ref.current.value));
        }}>
            {"md -> slate"}
          </button>
        </div>
        <Text>{JSON.stringify(value, null, 2)}</Text>
      </Wrapper>;
  }
}`,...(Pi=(Ni=Yr.parameters)==null?void 0:Ni.docs)==null?void 0:Pi.source}}};const C0=["MarkdownToSlateJson"];export{Yr as MarkdownToSlateJson,C0 as __namedExportsOrder,I0 as default};

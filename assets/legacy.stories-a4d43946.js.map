{"version":3,"file":"legacy.stories-a4d43946.js","sources":["../../src/transformers/slate0.47-to-slate.ts","../../src/plugins/slate0.47-to-remark.ts","../../src/transformers/slate-to-slate0.47.ts","../../src/plugins/remark-to-slate0.47.ts","../../node_modules/immutable/dist/immutable.js","../../node_modules/isobject/index.js","../../node_modules/is-plain-object/index.js","../../node_modules/slate_legacy/node_modules/tiny-warning/dist/tiny-warning.esm.js","../../node_modules/tiny-invariant/dist/tiny-invariant.esm.js","../../node_modules/ms/index.js","../../node_modules/slate_legacy/node_modules/debug/src/common.js","../../node_modules/slate_legacy/node_modules/debug/src/browser.js","../../node_modules/esrever/esrever.js","../../node_modules/lodash/_basePick.js","../../node_modules/lodash/_isFlattenable.js","../../node_modules/lodash/_baseFlatten.js","../../node_modules/lodash/flatten.js","../../node_modules/lodash/_apply.js","../../node_modules/lodash/_overRest.js","../../node_modules/lodash/constant.js","../../node_modules/lodash/_baseSetToString.js","../../node_modules/lodash/_shortOut.js","../../node_modules/lodash/_setToString.js","../../node_modules/lodash/_flatRest.js","../../node_modules/lodash/pick.js","../../node_modules/lodash/last.js","../../node_modules/lodash/_baseSlice.js","../../node_modules/lodash/_parent.js","../../node_modules/lodash/_baseUnset.js","../../node_modules/lodash/_customOmitClone.js","../../node_modules/lodash/omit.js","../../node_modules/slate_legacy/node_modules/direction/index.js","../../node_modules/slate_legacy/lib/slate.es.js"],"sourcesContent":["import type { BlockJSON, InlineJSON, TextJSON } from \"slate_legacy\";\nimport type * as slate from \"../models/slate\";\n\nexport const slate047ToSlate = (\n  nodes: (BlockJSON | InlineJSON | TextJSON)[]\n): slate.Node[] => {\n  return convertNodes(nodes);\n};\n\nconst convertNodes = (\n  nodes: (BlockJSON | InlineJSON | TextJSON)[]\n): slate.Node[] => {\n  return nodes.reduce<slate.Node[]>((acc, n) => {\n    const node = convert(n as BlockJSON);\n    if (node) {\n      acc.push(node);\n    }\n    return acc;\n  }, []);\n};\n\nconst convert = (\n  node: BlockJSON | InlineJSON | TextJSON\n): slate.Node | null => {\n  switch (node.object) {\n    case \"block\": {\n      const { type, nodes, data } = node;\n      return {\n        type,\n        children: convertNodes(nodes as BlockJSON[]),\n        ...data,\n      };\n    }\n    case \"inline\": {\n      const { type, nodes, data } = node;\n      return {\n        type,\n        children: convertNodes(nodes as InlineJSON[]),\n        ...data,\n      };\n    }\n    case \"text\": {\n      const { text = \"\", marks } = node;\n      return {\n        text,\n        ...marks?.reduce((acc, m) => {\n          acc[m.type] = true;\n          return acc;\n        }, {} as { [key: string]: true }),\n      };\n    }\n    default:\n      break;\n  }\n  return null;\n};\n","import type { Plugin } from \"unified\";\nimport { slateToMdast } from \"../transformers/slate-to-mdast\";\nimport { slate047ToSlate } from \"../transformers/slate0.47-to-slate\";\n\nconst plugin: Plugin<[]> = function () {\n  return function (node) {\n    return slateToMdast(\n      {\n        type: \"root\",\n        children: slate047ToSlate((node as any).children),\n      },\n      {}\n    );\n  };\n};\nexport default plugin;\n","import type {\n  ValueJSON,\n  BlockJSON,\n  InlineJSON,\n  TextJSON,\n  MarkJSON,\n} from \"slate_legacy\";\nimport type { Decoration, SlateNode } from \"./mdast-to-slate\";\n\nexport const slateToSlate047 = (nodes: SlateNode[]): ValueJSON => {\n  return {\n    object: \"value\",\n    document: {\n      object: \"document\",\n      nodes: convertNodes(nodes),\n    },\n  };\n};\n\nconst convertNodes = (\n  nodes: SlateNode[]\n): (BlockJSON | InlineJSON | TextJSON)[] => {\n  return nodes.reduce<(BlockJSON | InlineJSON | TextJSON)[]>((acc, n) => {\n    const node = convert(n as SlateNode);\n    if (node) {\n      acc.push(node);\n    }\n    return acc;\n  }, []);\n};\n\nconst convert = (node: SlateNode): BlockJSON | InlineJSON | TextJSON | null => {\n  if (\"text\" in node) {\n    const { text, ...rest } = node;\n    const marks: MarkJSON[] = Object.keys(rest).reduce<\n      { object: \"mark\"; type: string }[]\n    >((acc, type) => {\n      if (!rest[type as keyof Decoration]) return acc;\n      acc.push({\n        object: \"mark\",\n        type,\n      });\n      return acc;\n    }, []);\n    const res: TextJSON = {\n      object: \"text\",\n      text,\n      marks,\n    };\n    return res;\n  }\n  switch (node.type) {\n    case \"paragraph\":\n    case \"heading\":\n    case \"blockquote\":\n    case \"list\":\n    case \"listItem\":\n    case \"table\":\n    case \"tableRow\":\n    case \"tableCell\":\n    case \"html\":\n    case \"code\":\n    case \"yaml\":\n    case \"toml\":\n    case \"thematicBreak\":\n    case \"definition\":\n    case \"break\":\n    case \"math\": {\n      const { type, children, ...rest } = node;\n      const res: BlockJSON = {\n        object: \"block\",\n        type,\n        nodes: convertNodes(children as SlateNode[]),\n        data: {\n          ...rest,\n        },\n      };\n      return res;\n    }\n    case \"footnoteDefinition\":\n    case \"link\":\n    case \"linkReference\":\n    case \"image\":\n    case \"imageReference\":\n    case \"footnote\":\n    case \"footnoteReference\":\n    case \"inlineMath\": {\n      const { type, children, ...rest } = node;\n      const res: InlineJSON = {\n        object: \"inline\",\n        type,\n        nodes: convertNodes(children as SlateNode[]) as InlineJSON[],\n        data: {\n          ...rest,\n        },\n      };\n      return res;\n    }\n    default:\n      break;\n  }\n  return null;\n};\n","import type { Plugin } from \"unified\";\nimport { mdastToSlate, SlateNode } from \"../transformers/mdast-to-slate\";\nimport { slateToSlate047 } from \"../transformers/slate-to-slate0.47\";\n\nconst plugin: Plugin<[]> = function () {\n  this.Compiler = function (node) {\n    return slateToSlate047(mdastToSlate(node as any, {}) as SlateNode[]);\n  };\n};\nexport default plugin;\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.Immutable = factory());\n}(this, function () { 'use strict';var SLICE$0 = Array.prototype.slice;\n\n  function createClass(ctor, superClass) {\n    if (superClass) {\n      ctor.prototype = Object.create(superClass.prototype);\n    }\n    ctor.prototype.constructor = ctor;\n  }\n\n  function Iterable(value) {\n      return isIterable(value) ? value : Seq(value);\n    }\n\n\n  createClass(KeyedIterable, Iterable);\n    function KeyedIterable(value) {\n      return isKeyed(value) ? value : KeyedSeq(value);\n    }\n\n\n  createClass(IndexedIterable, Iterable);\n    function IndexedIterable(value) {\n      return isIndexed(value) ? value : IndexedSeq(value);\n    }\n\n\n  createClass(SetIterable, Iterable);\n    function SetIterable(value) {\n      return isIterable(value) && !isAssociative(value) ? value : SetSeq(value);\n    }\n\n\n\n  function isIterable(maybeIterable) {\n    return !!(maybeIterable && maybeIterable[IS_ITERABLE_SENTINEL]);\n  }\n\n  function isKeyed(maybeKeyed) {\n    return !!(maybeKeyed && maybeKeyed[IS_KEYED_SENTINEL]);\n  }\n\n  function isIndexed(maybeIndexed) {\n    return !!(maybeIndexed && maybeIndexed[IS_INDEXED_SENTINEL]);\n  }\n\n  function isAssociative(maybeAssociative) {\n    return isKeyed(maybeAssociative) || isIndexed(maybeAssociative);\n  }\n\n  function isOrdered(maybeOrdered) {\n    return !!(maybeOrdered && maybeOrdered[IS_ORDERED_SENTINEL]);\n  }\n\n  Iterable.isIterable = isIterable;\n  Iterable.isKeyed = isKeyed;\n  Iterable.isIndexed = isIndexed;\n  Iterable.isAssociative = isAssociative;\n  Iterable.isOrdered = isOrdered;\n\n  Iterable.Keyed = KeyedIterable;\n  Iterable.Indexed = IndexedIterable;\n  Iterable.Set = SetIterable;\n\n\n  var IS_ITERABLE_SENTINEL = '@@__IMMUTABLE_ITERABLE__@@';\n  var IS_KEYED_SENTINEL = '@@__IMMUTABLE_KEYED__@@';\n  var IS_INDEXED_SENTINEL = '@@__IMMUTABLE_INDEXED__@@';\n  var IS_ORDERED_SENTINEL = '@@__IMMUTABLE_ORDERED__@@';\n\n  // Used for setting prototype methods that IE8 chokes on.\n  var DELETE = 'delete';\n\n  // Constants describing the size of trie nodes.\n  var SHIFT = 5; // Resulted in best performance after ______?\n  var SIZE = 1 << SHIFT;\n  var MASK = SIZE - 1;\n\n  // A consistent shared value representing \"not set\" which equals nothing other\n  // than itself, and nothing that could be provided externally.\n  var NOT_SET = {};\n\n  // Boolean references, Rough equivalent of `bool &`.\n  var CHANGE_LENGTH = { value: false };\n  var DID_ALTER = { value: false };\n\n  function MakeRef(ref) {\n    ref.value = false;\n    return ref;\n  }\n\n  function SetRef(ref) {\n    ref && (ref.value = true);\n  }\n\n  // A function which returns a value representing an \"owner\" for transient writes\n  // to tries. The return value will only ever equal itself, and will not equal\n  // the return of any subsequent call of this function.\n  function OwnerID() {}\n\n  // http://jsperf.com/copy-array-inline\n  function arrCopy(arr, offset) {\n    offset = offset || 0;\n    var len = Math.max(0, arr.length - offset);\n    var newArr = new Array(len);\n    for (var ii = 0; ii < len; ii++) {\n      newArr[ii] = arr[ii + offset];\n    }\n    return newArr;\n  }\n\n  function ensureSize(iter) {\n    if (iter.size === undefined) {\n      iter.size = iter.__iterate(returnTrue);\n    }\n    return iter.size;\n  }\n\n  function wrapIndex(iter, index) {\n    // This implements \"is array index\" which the ECMAString spec defines as:\n    //\n    //     A String property name P is an array index if and only if\n    //     ToString(ToUint32(P)) is equal to P and ToUint32(P) is not equal\n    //     to 2^32âˆ’1.\n    //\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-array-exotic-objects\n    if (typeof index !== 'number') {\n      var uint32Index = index >>> 0; // N >>> 0 is shorthand for ToUint32\n      if ('' + uint32Index !== index || uint32Index === 4294967295) {\n        return NaN;\n      }\n      index = uint32Index;\n    }\n    return index < 0 ? ensureSize(iter) + index : index;\n  }\n\n  function returnTrue() {\n    return true;\n  }\n\n  function wholeSlice(begin, end, size) {\n    return (begin === 0 || (size !== undefined && begin <= -size)) &&\n      (end === undefined || (size !== undefined && end >= size));\n  }\n\n  function resolveBegin(begin, size) {\n    return resolveIndex(begin, size, 0);\n  }\n\n  function resolveEnd(end, size) {\n    return resolveIndex(end, size, size);\n  }\n\n  function resolveIndex(index, size, defaultIndex) {\n    return index === undefined ?\n      defaultIndex :\n      index < 0 ?\n        Math.max(0, size + index) :\n        size === undefined ?\n          index :\n          Math.min(size, index);\n  }\n\n  /* global Symbol */\n\n  var ITERATE_KEYS = 0;\n  var ITERATE_VALUES = 1;\n  var ITERATE_ENTRIES = 2;\n\n  var REAL_ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator';\n\n  var ITERATOR_SYMBOL = REAL_ITERATOR_SYMBOL || FAUX_ITERATOR_SYMBOL;\n\n\n  function Iterator(next) {\n      this.next = next;\n    }\n\n    Iterator.prototype.toString = function() {\n      return '[Iterator]';\n    };\n\n\n  Iterator.KEYS = ITERATE_KEYS;\n  Iterator.VALUES = ITERATE_VALUES;\n  Iterator.ENTRIES = ITERATE_ENTRIES;\n\n  Iterator.prototype.inspect =\n  Iterator.prototype.toSource = function () { return this.toString(); }\n  Iterator.prototype[ITERATOR_SYMBOL] = function () {\n    return this;\n  };\n\n\n  function iteratorValue(type, k, v, iteratorResult) {\n    var value = type === 0 ? k : type === 1 ? v : [k, v];\n    iteratorResult ? (iteratorResult.value = value) : (iteratorResult = {\n      value: value, done: false\n    });\n    return iteratorResult;\n  }\n\n  function iteratorDone() {\n    return { value: undefined, done: true };\n  }\n\n  function hasIterator(maybeIterable) {\n    return !!getIteratorFn(maybeIterable);\n  }\n\n  function isIterator(maybeIterator) {\n    return maybeIterator && typeof maybeIterator.next === 'function';\n  }\n\n  function getIterator(iterable) {\n    var iteratorFn = getIteratorFn(iterable);\n    return iteratorFn && iteratorFn.call(iterable);\n  }\n\n  function getIteratorFn(iterable) {\n    var iteratorFn = iterable && (\n      (REAL_ITERATOR_SYMBOL && iterable[REAL_ITERATOR_SYMBOL]) ||\n      iterable[FAUX_ITERATOR_SYMBOL]\n    );\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  function isArrayLike(value) {\n    return value && typeof value.length === 'number';\n  }\n\n  createClass(Seq, Iterable);\n    function Seq(value) {\n      return value === null || value === undefined ? emptySequence() :\n        isIterable(value) ? value.toSeq() : seqFromValue(value);\n    }\n\n    Seq.of = function(/*...values*/) {\n      return Seq(arguments);\n    };\n\n    Seq.prototype.toSeq = function() {\n      return this;\n    };\n\n    Seq.prototype.toString = function() {\n      return this.__toString('Seq {', '}');\n    };\n\n    Seq.prototype.cacheResult = function() {\n      if (!this._cache && this.__iterateUncached) {\n        this._cache = this.entrySeq().toArray();\n        this.size = this._cache.length;\n      }\n      return this;\n    };\n\n    // abstract __iterateUncached(fn, reverse)\n\n    Seq.prototype.__iterate = function(fn, reverse) {\n      return seqIterate(this, fn, reverse, true);\n    };\n\n    // abstract __iteratorUncached(type, reverse)\n\n    Seq.prototype.__iterator = function(type, reverse) {\n      return seqIterator(this, type, reverse, true);\n    };\n\n\n\n  createClass(KeyedSeq, Seq);\n    function KeyedSeq(value) {\n      return value === null || value === undefined ?\n        emptySequence().toKeyedSeq() :\n        isIterable(value) ?\n          (isKeyed(value) ? value.toSeq() : value.fromEntrySeq()) :\n          keyedSeqFromValue(value);\n    }\n\n    KeyedSeq.prototype.toKeyedSeq = function() {\n      return this;\n    };\n\n\n\n  createClass(IndexedSeq, Seq);\n    function IndexedSeq(value) {\n      return value === null || value === undefined ? emptySequence() :\n        !isIterable(value) ? indexedSeqFromValue(value) :\n        isKeyed(value) ? value.entrySeq() : value.toIndexedSeq();\n    }\n\n    IndexedSeq.of = function(/*...values*/) {\n      return IndexedSeq(arguments);\n    };\n\n    IndexedSeq.prototype.toIndexedSeq = function() {\n      return this;\n    };\n\n    IndexedSeq.prototype.toString = function() {\n      return this.__toString('Seq [', ']');\n    };\n\n    IndexedSeq.prototype.__iterate = function(fn, reverse) {\n      return seqIterate(this, fn, reverse, false);\n    };\n\n    IndexedSeq.prototype.__iterator = function(type, reverse) {\n      return seqIterator(this, type, reverse, false);\n    };\n\n\n\n  createClass(SetSeq, Seq);\n    function SetSeq(value) {\n      return (\n        value === null || value === undefined ? emptySequence() :\n        !isIterable(value) ? indexedSeqFromValue(value) :\n        isKeyed(value) ? value.entrySeq() : value\n      ).toSetSeq();\n    }\n\n    SetSeq.of = function(/*...values*/) {\n      return SetSeq(arguments);\n    };\n\n    SetSeq.prototype.toSetSeq = function() {\n      return this;\n    };\n\n\n\n  Seq.isSeq = isSeq;\n  Seq.Keyed = KeyedSeq;\n  Seq.Set = SetSeq;\n  Seq.Indexed = IndexedSeq;\n\n  var IS_SEQ_SENTINEL = '@@__IMMUTABLE_SEQ__@@';\n\n  Seq.prototype[IS_SEQ_SENTINEL] = true;\n\n\n\n  createClass(ArraySeq, IndexedSeq);\n    function ArraySeq(array) {\n      this._array = array;\n      this.size = array.length;\n    }\n\n    ArraySeq.prototype.get = function(index, notSetValue) {\n      return this.has(index) ? this._array[wrapIndex(this, index)] : notSetValue;\n    };\n\n    ArraySeq.prototype.__iterate = function(fn, reverse) {\n      var array = this._array;\n      var maxIndex = array.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        if (fn(array[reverse ? maxIndex - ii : ii], ii, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    ArraySeq.prototype.__iterator = function(type, reverse) {\n      var array = this._array;\n      var maxIndex = array.length - 1;\n      var ii = 0;\n      return new Iterator(function() \n        {return ii > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, ii, array[reverse ? maxIndex - ii++ : ii++])}\n      );\n    };\n\n\n\n  createClass(ObjectSeq, KeyedSeq);\n    function ObjectSeq(object) {\n      var keys = Object.keys(object);\n      this._object = object;\n      this._keys = keys;\n      this.size = keys.length;\n    }\n\n    ObjectSeq.prototype.get = function(key, notSetValue) {\n      if (notSetValue !== undefined && !this.has(key)) {\n        return notSetValue;\n      }\n      return this._object[key];\n    };\n\n    ObjectSeq.prototype.has = function(key) {\n      return this._object.hasOwnProperty(key);\n    };\n\n    ObjectSeq.prototype.__iterate = function(fn, reverse) {\n      var object = this._object;\n      var keys = this._keys;\n      var maxIndex = keys.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        var key = keys[reverse ? maxIndex - ii : ii];\n        if (fn(object[key], key, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    ObjectSeq.prototype.__iterator = function(type, reverse) {\n      var object = this._object;\n      var keys = this._keys;\n      var maxIndex = keys.length - 1;\n      var ii = 0;\n      return new Iterator(function()  {\n        var key = keys[reverse ? maxIndex - ii : ii];\n        return ii++ > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, key, object[key]);\n      });\n    };\n\n  ObjectSeq.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n  createClass(IterableSeq, IndexedSeq);\n    function IterableSeq(iterable) {\n      this._iterable = iterable;\n      this.size = iterable.length || iterable.size;\n    }\n\n    IterableSeq.prototype.__iterateUncached = function(fn, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterable = this._iterable;\n      var iterator = getIterator(iterable);\n      var iterations = 0;\n      if (isIterator(iterator)) {\n        var step;\n        while (!(step = iterator.next()).done) {\n          if (fn(step.value, iterations++, this) === false) {\n            break;\n          }\n        }\n      }\n      return iterations;\n    };\n\n    IterableSeq.prototype.__iteratorUncached = function(type, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterable = this._iterable;\n      var iterator = getIterator(iterable);\n      if (!isIterator(iterator)) {\n        return new Iterator(iteratorDone);\n      }\n      var iterations = 0;\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step : iteratorValue(type, iterations++, step.value);\n      });\n    };\n\n\n\n  createClass(IteratorSeq, IndexedSeq);\n    function IteratorSeq(iterator) {\n      this._iterator = iterator;\n      this._iteratorCache = [];\n    }\n\n    IteratorSeq.prototype.__iterateUncached = function(fn, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterator = this._iterator;\n      var cache = this._iteratorCache;\n      var iterations = 0;\n      while (iterations < cache.length) {\n        if (fn(cache[iterations], iterations++, this) === false) {\n          return iterations;\n        }\n      }\n      var step;\n      while (!(step = iterator.next()).done) {\n        var val = step.value;\n        cache[iterations] = val;\n        if (fn(val, iterations++, this) === false) {\n          break;\n        }\n      }\n      return iterations;\n    };\n\n    IteratorSeq.prototype.__iteratorUncached = function(type, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = this._iterator;\n      var cache = this._iteratorCache;\n      var iterations = 0;\n      return new Iterator(function()  {\n        if (iterations >= cache.length) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          cache[iterations] = step.value;\n        }\n        return iteratorValue(type, iterations, cache[iterations++]);\n      });\n    };\n\n\n\n\n  // # pragma Helper functions\n\n  function isSeq(maybeSeq) {\n    return !!(maybeSeq && maybeSeq[IS_SEQ_SENTINEL]);\n  }\n\n  var EMPTY_SEQ;\n\n  function emptySequence() {\n    return EMPTY_SEQ || (EMPTY_SEQ = new ArraySeq([]));\n  }\n\n  function keyedSeqFromValue(value) {\n    var seq =\n      Array.isArray(value) ? new ArraySeq(value).fromEntrySeq() :\n      isIterator(value) ? new IteratorSeq(value).fromEntrySeq() :\n      hasIterator(value) ? new IterableSeq(value).fromEntrySeq() :\n      typeof value === 'object' ? new ObjectSeq(value) :\n      undefined;\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of [k, v] entries, '+\n        'or keyed object: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function indexedSeqFromValue(value) {\n    var seq = maybeIndexedSeqFromValue(value);\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of values: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function seqFromValue(value) {\n    var seq = maybeIndexedSeqFromValue(value) ||\n      (typeof value === 'object' && new ObjectSeq(value));\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of values, or keyed object: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function maybeIndexedSeqFromValue(value) {\n    return (\n      isArrayLike(value) ? new ArraySeq(value) :\n      isIterator(value) ? new IteratorSeq(value) :\n      hasIterator(value) ? new IterableSeq(value) :\n      undefined\n    );\n  }\n\n  function seqIterate(seq, fn, reverse, useKeys) {\n    var cache = seq._cache;\n    if (cache) {\n      var maxIndex = cache.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        var entry = cache[reverse ? maxIndex - ii : ii];\n        if (fn(entry[1], useKeys ? entry[0] : ii, seq) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    }\n    return seq.__iterateUncached(fn, reverse);\n  }\n\n  function seqIterator(seq, type, reverse, useKeys) {\n    var cache = seq._cache;\n    if (cache) {\n      var maxIndex = cache.length - 1;\n      var ii = 0;\n      return new Iterator(function()  {\n        var entry = cache[reverse ? maxIndex - ii : ii];\n        return ii++ > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, useKeys ? entry[0] : ii - 1, entry[1]);\n      });\n    }\n    return seq.__iteratorUncached(type, reverse);\n  }\n\n  function fromJS(json, converter) {\n    return converter ?\n      fromJSWith(converter, json, '', {'': json}) :\n      fromJSDefault(json);\n  }\n\n  function fromJSWith(converter, json, key, parentJSON) {\n    if (Array.isArray(json)) {\n      return converter.call(parentJSON, key, IndexedSeq(json).map(function(v, k)  {return fromJSWith(converter, v, k, json)}));\n    }\n    if (isPlainObj(json)) {\n      return converter.call(parentJSON, key, KeyedSeq(json).map(function(v, k)  {return fromJSWith(converter, v, k, json)}));\n    }\n    return json;\n  }\n\n  function fromJSDefault(json) {\n    if (Array.isArray(json)) {\n      return IndexedSeq(json).map(fromJSDefault).toList();\n    }\n    if (isPlainObj(json)) {\n      return KeyedSeq(json).map(fromJSDefault).toMap();\n    }\n    return json;\n  }\n\n  function isPlainObj(value) {\n    return value && (value.constructor === Object || value.constructor === undefined);\n  }\n\n  /**\n   * An extension of the \"same-value\" algorithm as [described for use by ES6 Map\n   * and Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#Key_equality)\n   *\n   * NaN is considered the same as NaN, however -0 and 0 are considered the same\n   * value, which is different from the algorithm described by\n   * [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is).\n   *\n   * This is extended further to allow Objects to describe the values they\n   * represent, by way of `valueOf` or `equals` (and `hashCode`).\n   *\n   * Note: because of this extension, the key equality of Immutable.Map and the\n   * value equality of Immutable.Set will differ from ES6 Map and Set.\n   *\n   * ### Defining custom values\n   *\n   * The easiest way to describe the value an object represents is by implementing\n   * `valueOf`. For example, `Date` represents a value by returning a unix\n   * timestamp for `valueOf`:\n   *\n   *     var date1 = new Date(1234567890000); // Fri Feb 13 2009 ...\n   *     var date2 = new Date(1234567890000);\n   *     date1.valueOf(); // 1234567890000\n   *     assert( date1 !== date2 );\n   *     assert( Immutable.is( date1, date2 ) );\n   *\n   * Note: overriding `valueOf` may have other implications if you use this object\n   * where JavaScript expects a primitive, such as implicit string coercion.\n   *\n   * For more complex types, especially collections, implementing `valueOf` may\n   * not be performant. An alternative is to implement `equals` and `hashCode`.\n   *\n   * `equals` takes another object, presumably of similar type, and returns true\n   * if the it is equal. Equality is symmetrical, so the same result should be\n   * returned if this and the argument are flipped.\n   *\n   *     assert( a.equals(b) === b.equals(a) );\n   *\n   * `hashCode` returns a 32bit integer number representing the object which will\n   * be used to determine how to store the value object in a Map or Set. You must\n   * provide both or neither methods, one must not exist without the other.\n   *\n   * Also, an important relationship between these methods must be upheld: if two\n   * values are equal, they *must* return the same hashCode. If the values are not\n   * equal, they might have the same hashCode; this is called a hash collision,\n   * and while undesirable for performance reasons, it is acceptable.\n   *\n   *     if (a.equals(b)) {\n   *       assert( a.hashCode() === b.hashCode() );\n   *     }\n   *\n   * All Immutable collections implement `equals` and `hashCode`.\n   *\n   */\n  function is(valueA, valueB) {\n    if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n      return true;\n    }\n    if (!valueA || !valueB) {\n      return false;\n    }\n    if (typeof valueA.valueOf === 'function' &&\n        typeof valueB.valueOf === 'function') {\n      valueA = valueA.valueOf();\n      valueB = valueB.valueOf();\n      if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n        return true;\n      }\n      if (!valueA || !valueB) {\n        return false;\n      }\n    }\n    if (typeof valueA.equals === 'function' &&\n        typeof valueB.equals === 'function' &&\n        valueA.equals(valueB)) {\n      return true;\n    }\n    return false;\n  }\n\n  function deepEqual(a, b) {\n    if (a === b) {\n      return true;\n    }\n\n    if (\n      !isIterable(b) ||\n      a.size !== undefined && b.size !== undefined && a.size !== b.size ||\n      a.__hash !== undefined && b.__hash !== undefined && a.__hash !== b.__hash ||\n      isKeyed(a) !== isKeyed(b) ||\n      isIndexed(a) !== isIndexed(b) ||\n      isOrdered(a) !== isOrdered(b)\n    ) {\n      return false;\n    }\n\n    if (a.size === 0 && b.size === 0) {\n      return true;\n    }\n\n    var notAssociative = !isAssociative(a);\n\n    if (isOrdered(a)) {\n      var entries = a.entries();\n      return b.every(function(v, k)  {\n        var entry = entries.next().value;\n        return entry && is(entry[1], v) && (notAssociative || is(entry[0], k));\n      }) && entries.next().done;\n    }\n\n    var flipped = false;\n\n    if (a.size === undefined) {\n      if (b.size === undefined) {\n        if (typeof a.cacheResult === 'function') {\n          a.cacheResult();\n        }\n      } else {\n        flipped = true;\n        var _ = a;\n        a = b;\n        b = _;\n      }\n    }\n\n    var allEqual = true;\n    var bSize = b.__iterate(function(v, k)  {\n      if (notAssociative ? !a.has(v) :\n          flipped ? !is(v, a.get(k, NOT_SET)) : !is(a.get(k, NOT_SET), v)) {\n        allEqual = false;\n        return false;\n      }\n    });\n\n    return allEqual && a.size === bSize;\n  }\n\n  createClass(Repeat, IndexedSeq);\n\n    function Repeat(value, times) {\n      if (!(this instanceof Repeat)) {\n        return new Repeat(value, times);\n      }\n      this._value = value;\n      this.size = times === undefined ? Infinity : Math.max(0, times);\n      if (this.size === 0) {\n        if (EMPTY_REPEAT) {\n          return EMPTY_REPEAT;\n        }\n        EMPTY_REPEAT = this;\n      }\n    }\n\n    Repeat.prototype.toString = function() {\n      if (this.size === 0) {\n        return 'Repeat []';\n      }\n      return 'Repeat [ ' + this._value + ' ' + this.size + ' times ]';\n    };\n\n    Repeat.prototype.get = function(index, notSetValue) {\n      return this.has(index) ? this._value : notSetValue;\n    };\n\n    Repeat.prototype.includes = function(searchValue) {\n      return is(this._value, searchValue);\n    };\n\n    Repeat.prototype.slice = function(begin, end) {\n      var size = this.size;\n      return wholeSlice(begin, end, size) ? this :\n        new Repeat(this._value, resolveEnd(end, size) - resolveBegin(begin, size));\n    };\n\n    Repeat.prototype.reverse = function() {\n      return this;\n    };\n\n    Repeat.prototype.indexOf = function(searchValue) {\n      if (is(this._value, searchValue)) {\n        return 0;\n      }\n      return -1;\n    };\n\n    Repeat.prototype.lastIndexOf = function(searchValue) {\n      if (is(this._value, searchValue)) {\n        return this.size;\n      }\n      return -1;\n    };\n\n    Repeat.prototype.__iterate = function(fn, reverse) {\n      for (var ii = 0; ii < this.size; ii++) {\n        if (fn(this._value, ii, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    Repeat.prototype.__iterator = function(type, reverse) {var this$0 = this;\n      var ii = 0;\n      return new Iterator(function() \n        {return ii < this$0.size ? iteratorValue(type, ii++, this$0._value) : iteratorDone()}\n      );\n    };\n\n    Repeat.prototype.equals = function(other) {\n      return other instanceof Repeat ?\n        is(this._value, other._value) :\n        deepEqual(other);\n    };\n\n\n  var EMPTY_REPEAT;\n\n  function invariant(condition, error) {\n    if (!condition) throw new Error(error);\n  }\n\n  createClass(Range, IndexedSeq);\n\n    function Range(start, end, step) {\n      if (!(this instanceof Range)) {\n        return new Range(start, end, step);\n      }\n      invariant(step !== 0, 'Cannot step a Range by 0');\n      start = start || 0;\n      if (end === undefined) {\n        end = Infinity;\n      }\n      step = step === undefined ? 1 : Math.abs(step);\n      if (end < start) {\n        step = -step;\n      }\n      this._start = start;\n      this._end = end;\n      this._step = step;\n      this.size = Math.max(0, Math.ceil((end - start) / step - 1) + 1);\n      if (this.size === 0) {\n        if (EMPTY_RANGE) {\n          return EMPTY_RANGE;\n        }\n        EMPTY_RANGE = this;\n      }\n    }\n\n    Range.prototype.toString = function() {\n      if (this.size === 0) {\n        return 'Range []';\n      }\n      return 'Range [ ' +\n        this._start + '...' + this._end +\n        (this._step !== 1 ? ' by ' + this._step : '') +\n      ' ]';\n    };\n\n    Range.prototype.get = function(index, notSetValue) {\n      return this.has(index) ?\n        this._start + wrapIndex(this, index) * this._step :\n        notSetValue;\n    };\n\n    Range.prototype.includes = function(searchValue) {\n      var possibleIndex = (searchValue - this._start) / this._step;\n      return possibleIndex >= 0 &&\n        possibleIndex < this.size &&\n        possibleIndex === Math.floor(possibleIndex);\n    };\n\n    Range.prototype.slice = function(begin, end) {\n      if (wholeSlice(begin, end, this.size)) {\n        return this;\n      }\n      begin = resolveBegin(begin, this.size);\n      end = resolveEnd(end, this.size);\n      if (end <= begin) {\n        return new Range(0, 0);\n      }\n      return new Range(this.get(begin, this._end), this.get(end, this._end), this._step);\n    };\n\n    Range.prototype.indexOf = function(searchValue) {\n      var offsetValue = searchValue - this._start;\n      if (offsetValue % this._step === 0) {\n        var index = offsetValue / this._step;\n        if (index >= 0 && index < this.size) {\n          return index\n        }\n      }\n      return -1;\n    };\n\n    Range.prototype.lastIndexOf = function(searchValue) {\n      return this.indexOf(searchValue);\n    };\n\n    Range.prototype.__iterate = function(fn, reverse) {\n      var maxIndex = this.size - 1;\n      var step = this._step;\n      var value = reverse ? this._start + maxIndex * step : this._start;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        if (fn(value, ii, this) === false) {\n          return ii + 1;\n        }\n        value += reverse ? -step : step;\n      }\n      return ii;\n    };\n\n    Range.prototype.__iterator = function(type, reverse) {\n      var maxIndex = this.size - 1;\n      var step = this._step;\n      var value = reverse ? this._start + maxIndex * step : this._start;\n      var ii = 0;\n      return new Iterator(function()  {\n        var v = value;\n        value += reverse ? -step : step;\n        return ii > maxIndex ? iteratorDone() : iteratorValue(type, ii++, v);\n      });\n    };\n\n    Range.prototype.equals = function(other) {\n      return other instanceof Range ?\n        this._start === other._start &&\n        this._end === other._end &&\n        this._step === other._step :\n        deepEqual(this, other);\n    };\n\n\n  var EMPTY_RANGE;\n\n  createClass(Collection, Iterable);\n    function Collection() {\n      throw TypeError('Abstract');\n    }\n\n\n  createClass(KeyedCollection, Collection);function KeyedCollection() {}\n\n  createClass(IndexedCollection, Collection);function IndexedCollection() {}\n\n  createClass(SetCollection, Collection);function SetCollection() {}\n\n\n  Collection.Keyed = KeyedCollection;\n  Collection.Indexed = IndexedCollection;\n  Collection.Set = SetCollection;\n\n  var imul =\n    typeof Math.imul === 'function' && Math.imul(0xffffffff, 2) === -2 ?\n    Math.imul :\n    function imul(a, b) {\n      a = a | 0; // int\n      b = b | 0; // int\n      var c = a & 0xffff;\n      var d = b & 0xffff;\n      // Shift by 0 fixes the sign on the high part.\n      return (c * d) + ((((a >>> 16) * d + c * (b >>> 16)) << 16) >>> 0) | 0; // int\n    };\n\n  // v8 has an optimization for storing 31-bit signed numbers.\n  // Values which have either 00 or 11 as the high order bits qualify.\n  // This function drops the highest order bit in a signed number, maintaining\n  // the sign bit.\n  function smi(i32) {\n    return ((i32 >>> 1) & 0x40000000) | (i32 & 0xBFFFFFFF);\n  }\n\n  function hash(o) {\n    if (o === false || o === null || o === undefined) {\n      return 0;\n    }\n    if (typeof o.valueOf === 'function') {\n      o = o.valueOf();\n      if (o === false || o === null || o === undefined) {\n        return 0;\n      }\n    }\n    if (o === true) {\n      return 1;\n    }\n    var type = typeof o;\n    if (type === 'number') {\n      if (o !== o || o === Infinity) {\n        return 0;\n      }\n      var h = o | 0;\n      if (h !== o) {\n        h ^= o * 0xFFFFFFFF;\n      }\n      while (o > 0xFFFFFFFF) {\n        o /= 0xFFFFFFFF;\n        h ^= o;\n      }\n      return smi(h);\n    }\n    if (type === 'string') {\n      return o.length > STRING_HASH_CACHE_MIN_STRLEN ? cachedHashString(o) : hashString(o);\n    }\n    if (typeof o.hashCode === 'function') {\n      return o.hashCode();\n    }\n    if (type === 'object') {\n      return hashJSObj(o);\n    }\n    if (typeof o.toString === 'function') {\n      return hashString(o.toString());\n    }\n    throw new Error('Value type ' + type + ' cannot be hashed.');\n  }\n\n  function cachedHashString(string) {\n    var hash = stringHashCache[string];\n    if (hash === undefined) {\n      hash = hashString(string);\n      if (STRING_HASH_CACHE_SIZE === STRING_HASH_CACHE_MAX_SIZE) {\n        STRING_HASH_CACHE_SIZE = 0;\n        stringHashCache = {};\n      }\n      STRING_HASH_CACHE_SIZE++;\n      stringHashCache[string] = hash;\n    }\n    return hash;\n  }\n\n  // http://jsperf.com/hashing-strings\n  function hashString(string) {\n    // This is the hash from JVM\n    // The hash code for a string is computed as\n    // s[0] * 31 ^ (n - 1) + s[1] * 31 ^ (n - 2) + ... + s[n - 1],\n    // where s[i] is the ith character of the string and n is the length of\n    // the string. We \"mod\" the result to make it between 0 (inclusive) and 2^31\n    // (exclusive) by dropping high bits.\n    var hash = 0;\n    for (var ii = 0; ii < string.length; ii++) {\n      hash = 31 * hash + string.charCodeAt(ii) | 0;\n    }\n    return smi(hash);\n  }\n\n  function hashJSObj(obj) {\n    var hash;\n    if (usingWeakMap) {\n      hash = weakMap.get(obj);\n      if (hash !== undefined) {\n        return hash;\n      }\n    }\n\n    hash = obj[UID_HASH_KEY];\n    if (hash !== undefined) {\n      return hash;\n    }\n\n    if (!canDefineProperty) {\n      hash = obj.propertyIsEnumerable && obj.propertyIsEnumerable[UID_HASH_KEY];\n      if (hash !== undefined) {\n        return hash;\n      }\n\n      hash = getIENodeHash(obj);\n      if (hash !== undefined) {\n        return hash;\n      }\n    }\n\n    hash = ++objHashUID;\n    if (objHashUID & 0x40000000) {\n      objHashUID = 0;\n    }\n\n    if (usingWeakMap) {\n      weakMap.set(obj, hash);\n    } else if (isExtensible !== undefined && isExtensible(obj) === false) {\n      throw new Error('Non-extensible objects are not allowed as keys.');\n    } else if (canDefineProperty) {\n      Object.defineProperty(obj, UID_HASH_KEY, {\n        'enumerable': false,\n        'configurable': false,\n        'writable': false,\n        'value': hash\n      });\n    } else if (obj.propertyIsEnumerable !== undefined &&\n               obj.propertyIsEnumerable === obj.constructor.prototype.propertyIsEnumerable) {\n      // Since we can't define a non-enumerable property on the object\n      // we'll hijack one of the less-used non-enumerable properties to\n      // save our hash on it. Since this is a function it will not show up in\n      // `JSON.stringify` which is what we want.\n      obj.propertyIsEnumerable = function() {\n        return this.constructor.prototype.propertyIsEnumerable.apply(this, arguments);\n      };\n      obj.propertyIsEnumerable[UID_HASH_KEY] = hash;\n    } else if (obj.nodeType !== undefined) {\n      // At this point we couldn't get the IE `uniqueID` to use as a hash\n      // and we couldn't use a non-enumerable property to exploit the\n      // dontEnum bug so we simply add the `UID_HASH_KEY` on the node\n      // itself.\n      obj[UID_HASH_KEY] = hash;\n    } else {\n      throw new Error('Unable to set a non-enumerable property on object.');\n    }\n\n    return hash;\n  }\n\n  // Get references to ES5 object methods.\n  var isExtensible = Object.isExtensible;\n\n  // True if Object.defineProperty works as expected. IE8 fails this test.\n  var canDefineProperty = (function() {\n    try {\n      Object.defineProperty({}, '@', {});\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }());\n\n  // IE has a `uniqueID` property on DOM nodes. We can construct the hash from it\n  // and avoid memory leaks from the IE cloneNode bug.\n  function getIENodeHash(node) {\n    if (node && node.nodeType > 0) {\n      switch (node.nodeType) {\n        case 1: // Element\n          return node.uniqueID;\n        case 9: // Document\n          return node.documentElement && node.documentElement.uniqueID;\n      }\n    }\n  }\n\n  // If possible, use a WeakMap.\n  var usingWeakMap = typeof WeakMap === 'function';\n  var weakMap;\n  if (usingWeakMap) {\n    weakMap = new WeakMap();\n  }\n\n  var objHashUID = 0;\n\n  var UID_HASH_KEY = '__immutablehash__';\n  if (typeof Symbol === 'function') {\n    UID_HASH_KEY = Symbol(UID_HASH_KEY);\n  }\n\n  var STRING_HASH_CACHE_MIN_STRLEN = 16;\n  var STRING_HASH_CACHE_MAX_SIZE = 255;\n  var STRING_HASH_CACHE_SIZE = 0;\n  var stringHashCache = {};\n\n  function assertNotInfinite(size) {\n    invariant(\n      size !== Infinity,\n      'Cannot perform this action with an infinite size.'\n    );\n  }\n\n  createClass(Map, KeyedCollection);\n\n    // @pragma Construction\n\n    function Map(value) {\n      return value === null || value === undefined ? emptyMap() :\n        isMap(value) && !isOrdered(value) ? value :\n        emptyMap().withMutations(function(map ) {\n          var iter = KeyedIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v, k)  {return map.set(k, v)});\n        });\n    }\n\n    Map.of = function() {var keyValues = SLICE$0.call(arguments, 0);\n      return emptyMap().withMutations(function(map ) {\n        for (var i = 0; i < keyValues.length; i += 2) {\n          if (i + 1 >= keyValues.length) {\n            throw new Error('Missing value for key: ' + keyValues[i]);\n          }\n          map.set(keyValues[i], keyValues[i + 1]);\n        }\n      });\n    };\n\n    Map.prototype.toString = function() {\n      return this.__toString('Map {', '}');\n    };\n\n    // @pragma Access\n\n    Map.prototype.get = function(k, notSetValue) {\n      return this._root ?\n        this._root.get(0, undefined, k, notSetValue) :\n        notSetValue;\n    };\n\n    // @pragma Modification\n\n    Map.prototype.set = function(k, v) {\n      return updateMap(this, k, v);\n    };\n\n    Map.prototype.setIn = function(keyPath, v) {\n      return this.updateIn(keyPath, NOT_SET, function()  {return v});\n    };\n\n    Map.prototype.remove = function(k) {\n      return updateMap(this, k, NOT_SET);\n    };\n\n    Map.prototype.deleteIn = function(keyPath) {\n      return this.updateIn(keyPath, function()  {return NOT_SET});\n    };\n\n    Map.prototype.update = function(k, notSetValue, updater) {\n      return arguments.length === 1 ?\n        k(this) :\n        this.updateIn([k], notSetValue, updater);\n    };\n\n    Map.prototype.updateIn = function(keyPath, notSetValue, updater) {\n      if (!updater) {\n        updater = notSetValue;\n        notSetValue = undefined;\n      }\n      var updatedValue = updateInDeepMap(\n        this,\n        forceIterator(keyPath),\n        notSetValue,\n        updater\n      );\n      return updatedValue === NOT_SET ? undefined : updatedValue;\n    };\n\n    Map.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._root = null;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyMap();\n    };\n\n    // @pragma Composition\n\n    Map.prototype.merge = function(/*...iters*/) {\n      return mergeIntoMapWith(this, undefined, arguments);\n    };\n\n    Map.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoMapWith(this, merger, iters);\n    };\n\n    Map.prototype.mergeIn = function(keyPath) {var iters = SLICE$0.call(arguments, 1);\n      return this.updateIn(\n        keyPath,\n        emptyMap(),\n        function(m ) {return typeof m.merge === 'function' ?\n          m.merge.apply(m, iters) :\n          iters[iters.length - 1]}\n      );\n    };\n\n    Map.prototype.mergeDeep = function(/*...iters*/) {\n      return mergeIntoMapWith(this, deepMerger, arguments);\n    };\n\n    Map.prototype.mergeDeepWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoMapWith(this, deepMergerWith(merger), iters);\n    };\n\n    Map.prototype.mergeDeepIn = function(keyPath) {var iters = SLICE$0.call(arguments, 1);\n      return this.updateIn(\n        keyPath,\n        emptyMap(),\n        function(m ) {return typeof m.mergeDeep === 'function' ?\n          m.mergeDeep.apply(m, iters) :\n          iters[iters.length - 1]}\n      );\n    };\n\n    Map.prototype.sort = function(comparator) {\n      // Late binding\n      return OrderedMap(sortFactory(this, comparator));\n    };\n\n    Map.prototype.sortBy = function(mapper, comparator) {\n      // Late binding\n      return OrderedMap(sortFactory(this, comparator, mapper));\n    };\n\n    // @pragma Mutability\n\n    Map.prototype.withMutations = function(fn) {\n      var mutable = this.asMutable();\n      fn(mutable);\n      return mutable.wasAltered() ? mutable.__ensureOwner(this.__ownerID) : this;\n    };\n\n    Map.prototype.asMutable = function() {\n      return this.__ownerID ? this : this.__ensureOwner(new OwnerID());\n    };\n\n    Map.prototype.asImmutable = function() {\n      return this.__ensureOwner();\n    };\n\n    Map.prototype.wasAltered = function() {\n      return this.__altered;\n    };\n\n    Map.prototype.__iterator = function(type, reverse) {\n      return new MapIterator(this, type, reverse);\n    };\n\n    Map.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      this._root && this._root.iterate(function(entry ) {\n        iterations++;\n        return fn(entry[1], entry[0], this$0);\n      }, reverse);\n      return iterations;\n    };\n\n    Map.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this.__altered = false;\n        return this;\n      }\n      return makeMap(this.size, this._root, ownerID, this.__hash);\n    };\n\n\n  function isMap(maybeMap) {\n    return !!(maybeMap && maybeMap[IS_MAP_SENTINEL]);\n  }\n\n  Map.isMap = isMap;\n\n  var IS_MAP_SENTINEL = '@@__IMMUTABLE_MAP__@@';\n\n  var MapPrototype = Map.prototype;\n  MapPrototype[IS_MAP_SENTINEL] = true;\n  MapPrototype[DELETE] = MapPrototype.remove;\n  MapPrototype.removeIn = MapPrototype.deleteIn;\n\n\n  // #pragma Trie Nodes\n\n\n\n    function ArrayMapNode(ownerID, entries) {\n      this.ownerID = ownerID;\n      this.entries = entries;\n    }\n\n    ArrayMapNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      var entries = this.entries;\n      for (var ii = 0, len = entries.length; ii < len; ii++) {\n        if (is(key, entries[ii][0])) {\n          return entries[ii][1];\n        }\n      }\n      return notSetValue;\n    };\n\n    ArrayMapNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      var removed = value === NOT_SET;\n\n      var entries = this.entries;\n      var idx = 0;\n      for (var len = entries.length; idx < len; idx++) {\n        if (is(key, entries[idx][0])) {\n          break;\n        }\n      }\n      var exists = idx < len;\n\n      if (exists ? entries[idx][1] === value : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n      (removed || !exists) && SetRef(didChangeSize);\n\n      if (removed && entries.length === 1) {\n        return; // undefined\n      }\n\n      if (!exists && !removed && entries.length >= MAX_ARRAY_MAP_SIZE) {\n        return createNodes(ownerID, entries, key, value);\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newEntries = isEditable ? entries : arrCopy(entries);\n\n      if (exists) {\n        if (removed) {\n          idx === len - 1 ? newEntries.pop() : (newEntries[idx] = newEntries.pop());\n        } else {\n          newEntries[idx] = [key, value];\n        }\n      } else {\n        newEntries.push([key, value]);\n      }\n\n      if (isEditable) {\n        this.entries = newEntries;\n        return this;\n      }\n\n      return new ArrayMapNode(ownerID, newEntries);\n    };\n\n\n\n\n    function BitmapIndexedNode(ownerID, bitmap, nodes) {\n      this.ownerID = ownerID;\n      this.bitmap = bitmap;\n      this.nodes = nodes;\n    }\n\n    BitmapIndexedNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var bit = (1 << ((shift === 0 ? keyHash : keyHash >>> shift) & MASK));\n      var bitmap = this.bitmap;\n      return (bitmap & bit) === 0 ? notSetValue :\n        this.nodes[popCount(bitmap & (bit - 1))].get(shift + SHIFT, keyHash, key, notSetValue);\n    };\n\n    BitmapIndexedNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var keyHashFrag = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var bit = 1 << keyHashFrag;\n      var bitmap = this.bitmap;\n      var exists = (bitmap & bit) !== 0;\n\n      if (!exists && value === NOT_SET) {\n        return this;\n      }\n\n      var idx = popCount(bitmap & (bit - 1));\n      var nodes = this.nodes;\n      var node = exists ? nodes[idx] : undefined;\n      var newNode = updateNode(node, ownerID, shift + SHIFT, keyHash, key, value, didChangeSize, didAlter);\n\n      if (newNode === node) {\n        return this;\n      }\n\n      if (!exists && newNode && nodes.length >= MAX_BITMAP_INDEXED_SIZE) {\n        return expandNodes(ownerID, nodes, bitmap, keyHashFrag, newNode);\n      }\n\n      if (exists && !newNode && nodes.length === 2 && isLeafNode(nodes[idx ^ 1])) {\n        return nodes[idx ^ 1];\n      }\n\n      if (exists && newNode && nodes.length === 1 && isLeafNode(newNode)) {\n        return newNode;\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newBitmap = exists ? newNode ? bitmap : bitmap ^ bit : bitmap | bit;\n      var newNodes = exists ? newNode ?\n        setIn(nodes, idx, newNode, isEditable) :\n        spliceOut(nodes, idx, isEditable) :\n        spliceIn(nodes, idx, newNode, isEditable);\n\n      if (isEditable) {\n        this.bitmap = newBitmap;\n        this.nodes = newNodes;\n        return this;\n      }\n\n      return new BitmapIndexedNode(ownerID, newBitmap, newNodes);\n    };\n\n\n\n\n    function HashArrayMapNode(ownerID, count, nodes) {\n      this.ownerID = ownerID;\n      this.count = count;\n      this.nodes = nodes;\n    }\n\n    HashArrayMapNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var node = this.nodes[idx];\n      return node ? node.get(shift + SHIFT, keyHash, key, notSetValue) : notSetValue;\n    };\n\n    HashArrayMapNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var removed = value === NOT_SET;\n      var nodes = this.nodes;\n      var node = nodes[idx];\n\n      if (removed && !node) {\n        return this;\n      }\n\n      var newNode = updateNode(node, ownerID, shift + SHIFT, keyHash, key, value, didChangeSize, didAlter);\n      if (newNode === node) {\n        return this;\n      }\n\n      var newCount = this.count;\n      if (!node) {\n        newCount++;\n      } else if (!newNode) {\n        newCount--;\n        if (newCount < MIN_HASH_ARRAY_MAP_SIZE) {\n          return packNodes(ownerID, nodes, newCount, idx);\n        }\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newNodes = setIn(nodes, idx, newNode, isEditable);\n\n      if (isEditable) {\n        this.count = newCount;\n        this.nodes = newNodes;\n        return this;\n      }\n\n      return new HashArrayMapNode(ownerID, newCount, newNodes);\n    };\n\n\n\n\n    function HashCollisionNode(ownerID, keyHash, entries) {\n      this.ownerID = ownerID;\n      this.keyHash = keyHash;\n      this.entries = entries;\n    }\n\n    HashCollisionNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      var entries = this.entries;\n      for (var ii = 0, len = entries.length; ii < len; ii++) {\n        if (is(key, entries[ii][0])) {\n          return entries[ii][1];\n        }\n      }\n      return notSetValue;\n    };\n\n    HashCollisionNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n\n      var removed = value === NOT_SET;\n\n      if (keyHash !== this.keyHash) {\n        if (removed) {\n          return this;\n        }\n        SetRef(didAlter);\n        SetRef(didChangeSize);\n        return mergeIntoNode(this, ownerID, shift, keyHash, [key, value]);\n      }\n\n      var entries = this.entries;\n      var idx = 0;\n      for (var len = entries.length; idx < len; idx++) {\n        if (is(key, entries[idx][0])) {\n          break;\n        }\n      }\n      var exists = idx < len;\n\n      if (exists ? entries[idx][1] === value : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n      (removed || !exists) && SetRef(didChangeSize);\n\n      if (removed && len === 2) {\n        return new ValueNode(ownerID, this.keyHash, entries[idx ^ 1]);\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newEntries = isEditable ? entries : arrCopy(entries);\n\n      if (exists) {\n        if (removed) {\n          idx === len - 1 ? newEntries.pop() : (newEntries[idx] = newEntries.pop());\n        } else {\n          newEntries[idx] = [key, value];\n        }\n      } else {\n        newEntries.push([key, value]);\n      }\n\n      if (isEditable) {\n        this.entries = newEntries;\n        return this;\n      }\n\n      return new HashCollisionNode(ownerID, this.keyHash, newEntries);\n    };\n\n\n\n\n    function ValueNode(ownerID, keyHash, entry) {\n      this.ownerID = ownerID;\n      this.keyHash = keyHash;\n      this.entry = entry;\n    }\n\n    ValueNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      return is(key, this.entry[0]) ? this.entry[1] : notSetValue;\n    };\n\n    ValueNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      var removed = value === NOT_SET;\n      var keyMatch = is(key, this.entry[0]);\n      if (keyMatch ? value === this.entry[1] : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n\n      if (removed) {\n        SetRef(didChangeSize);\n        return; // undefined\n      }\n\n      if (keyMatch) {\n        if (ownerID && ownerID === this.ownerID) {\n          this.entry[1] = value;\n          return this;\n        }\n        return new ValueNode(ownerID, this.keyHash, [key, value]);\n      }\n\n      SetRef(didChangeSize);\n      return mergeIntoNode(this, ownerID, shift, hash(key), [key, value]);\n    };\n\n\n\n  // #pragma Iterators\n\n  ArrayMapNode.prototype.iterate =\n  HashCollisionNode.prototype.iterate = function (fn, reverse) {\n    var entries = this.entries;\n    for (var ii = 0, maxIndex = entries.length - 1; ii <= maxIndex; ii++) {\n      if (fn(entries[reverse ? maxIndex - ii : ii]) === false) {\n        return false;\n      }\n    }\n  }\n\n  BitmapIndexedNode.prototype.iterate =\n  HashArrayMapNode.prototype.iterate = function (fn, reverse) {\n    var nodes = this.nodes;\n    for (var ii = 0, maxIndex = nodes.length - 1; ii <= maxIndex; ii++) {\n      var node = nodes[reverse ? maxIndex - ii : ii];\n      if (node && node.iterate(fn, reverse) === false) {\n        return false;\n      }\n    }\n  }\n\n  ValueNode.prototype.iterate = function (fn, reverse) {\n    return fn(this.entry);\n  }\n\n  createClass(MapIterator, Iterator);\n\n    function MapIterator(map, type, reverse) {\n      this._type = type;\n      this._reverse = reverse;\n      this._stack = map._root && mapIteratorFrame(map._root);\n    }\n\n    MapIterator.prototype.next = function() {\n      var type = this._type;\n      var stack = this._stack;\n      while (stack) {\n        var node = stack.node;\n        var index = stack.index++;\n        var maxIndex;\n        if (node.entry) {\n          if (index === 0) {\n            return mapIteratorValue(type, node.entry);\n          }\n        } else if (node.entries) {\n          maxIndex = node.entries.length - 1;\n          if (index <= maxIndex) {\n            return mapIteratorValue(type, node.entries[this._reverse ? maxIndex - index : index]);\n          }\n        } else {\n          maxIndex = node.nodes.length - 1;\n          if (index <= maxIndex) {\n            var subNode = node.nodes[this._reverse ? maxIndex - index : index];\n            if (subNode) {\n              if (subNode.entry) {\n                return mapIteratorValue(type, subNode.entry);\n              }\n              stack = this._stack = mapIteratorFrame(subNode, stack);\n            }\n            continue;\n          }\n        }\n        stack = this._stack = this._stack.__prev;\n      }\n      return iteratorDone();\n    };\n\n\n  function mapIteratorValue(type, entry) {\n    return iteratorValue(type, entry[0], entry[1]);\n  }\n\n  function mapIteratorFrame(node, prev) {\n    return {\n      node: node,\n      index: 0,\n      __prev: prev\n    };\n  }\n\n  function makeMap(size, root, ownerID, hash) {\n    var map = Object.create(MapPrototype);\n    map.size = size;\n    map._root = root;\n    map.__ownerID = ownerID;\n    map.__hash = hash;\n    map.__altered = false;\n    return map;\n  }\n\n  var EMPTY_MAP;\n  function emptyMap() {\n    return EMPTY_MAP || (EMPTY_MAP = makeMap(0));\n  }\n\n  function updateMap(map, k, v) {\n    var newRoot;\n    var newSize;\n    if (!map._root) {\n      if (v === NOT_SET) {\n        return map;\n      }\n      newSize = 1;\n      newRoot = new ArrayMapNode(map.__ownerID, [[k, v]]);\n    } else {\n      var didChangeSize = MakeRef(CHANGE_LENGTH);\n      var didAlter = MakeRef(DID_ALTER);\n      newRoot = updateNode(map._root, map.__ownerID, 0, undefined, k, v, didChangeSize, didAlter);\n      if (!didAlter.value) {\n        return map;\n      }\n      newSize = map.size + (didChangeSize.value ? v === NOT_SET ? -1 : 1 : 0);\n    }\n    if (map.__ownerID) {\n      map.size = newSize;\n      map._root = newRoot;\n      map.__hash = undefined;\n      map.__altered = true;\n      return map;\n    }\n    return newRoot ? makeMap(newSize, newRoot) : emptyMap();\n  }\n\n  function updateNode(node, ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n    if (!node) {\n      if (value === NOT_SET) {\n        return node;\n      }\n      SetRef(didAlter);\n      SetRef(didChangeSize);\n      return new ValueNode(ownerID, keyHash, [key, value]);\n    }\n    return node.update(ownerID, shift, keyHash, key, value, didChangeSize, didAlter);\n  }\n\n  function isLeafNode(node) {\n    return node.constructor === ValueNode || node.constructor === HashCollisionNode;\n  }\n\n  function mergeIntoNode(node, ownerID, shift, keyHash, entry) {\n    if (node.keyHash === keyHash) {\n      return new HashCollisionNode(ownerID, keyHash, [node.entry, entry]);\n    }\n\n    var idx1 = (shift === 0 ? node.keyHash : node.keyHash >>> shift) & MASK;\n    var idx2 = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n\n    var newNode;\n    var nodes = idx1 === idx2 ?\n      [mergeIntoNode(node, ownerID, shift + SHIFT, keyHash, entry)] :\n      ((newNode = new ValueNode(ownerID, keyHash, entry)), idx1 < idx2 ? [node, newNode] : [newNode, node]);\n\n    return new BitmapIndexedNode(ownerID, (1 << idx1) | (1 << idx2), nodes);\n  }\n\n  function createNodes(ownerID, entries, key, value) {\n    if (!ownerID) {\n      ownerID = new OwnerID();\n    }\n    var node = new ValueNode(ownerID, hash(key), [key, value]);\n    for (var ii = 0; ii < entries.length; ii++) {\n      var entry = entries[ii];\n      node = node.update(ownerID, 0, undefined, entry[0], entry[1]);\n    }\n    return node;\n  }\n\n  function packNodes(ownerID, nodes, count, excluding) {\n    var bitmap = 0;\n    var packedII = 0;\n    var packedNodes = new Array(count);\n    for (var ii = 0, bit = 1, len = nodes.length; ii < len; ii++, bit <<= 1) {\n      var node = nodes[ii];\n      if (node !== undefined && ii !== excluding) {\n        bitmap |= bit;\n        packedNodes[packedII++] = node;\n      }\n    }\n    return new BitmapIndexedNode(ownerID, bitmap, packedNodes);\n  }\n\n  function expandNodes(ownerID, nodes, bitmap, including, node) {\n    var count = 0;\n    var expandedNodes = new Array(SIZE);\n    for (var ii = 0; bitmap !== 0; ii++, bitmap >>>= 1) {\n      expandedNodes[ii] = bitmap & 1 ? nodes[count++] : undefined;\n    }\n    expandedNodes[including] = node;\n    return new HashArrayMapNode(ownerID, count + 1, expandedNodes);\n  }\n\n  function mergeIntoMapWith(map, merger, iterables) {\n    var iters = [];\n    for (var ii = 0; ii < iterables.length; ii++) {\n      var value = iterables[ii];\n      var iter = KeyedIterable(value);\n      if (!isIterable(value)) {\n        iter = iter.map(function(v ) {return fromJS(v)});\n      }\n      iters.push(iter);\n    }\n    return mergeIntoCollectionWith(map, merger, iters);\n  }\n\n  function deepMerger(existing, value, key) {\n    return existing && existing.mergeDeep && isIterable(value) ?\n      existing.mergeDeep(value) :\n      is(existing, value) ? existing : value;\n  }\n\n  function deepMergerWith(merger) {\n    return function(existing, value, key)  {\n      if (existing && existing.mergeDeepWith && isIterable(value)) {\n        return existing.mergeDeepWith(merger, value);\n      }\n      var nextValue = merger(existing, value, key);\n      return is(existing, nextValue) ? existing : nextValue;\n    };\n  }\n\n  function mergeIntoCollectionWith(collection, merger, iters) {\n    iters = iters.filter(function(x ) {return x.size !== 0});\n    if (iters.length === 0) {\n      return collection;\n    }\n    if (collection.size === 0 && !collection.__ownerID && iters.length === 1) {\n      return collection.constructor(iters[0]);\n    }\n    return collection.withMutations(function(collection ) {\n      var mergeIntoMap = merger ?\n        function(value, key)  {\n          collection.update(key, NOT_SET, function(existing )\n            {return existing === NOT_SET ? value : merger(existing, value, key)}\n          );\n        } :\n        function(value, key)  {\n          collection.set(key, value);\n        }\n      for (var ii = 0; ii < iters.length; ii++) {\n        iters[ii].forEach(mergeIntoMap);\n      }\n    });\n  }\n\n  function updateInDeepMap(existing, keyPathIter, notSetValue, updater) {\n    var isNotSet = existing === NOT_SET;\n    var step = keyPathIter.next();\n    if (step.done) {\n      var existingValue = isNotSet ? notSetValue : existing;\n      var newValue = updater(existingValue);\n      return newValue === existingValue ? existing : newValue;\n    }\n    invariant(\n      isNotSet || (existing && existing.set),\n      'invalid keyPath'\n    );\n    var key = step.value;\n    var nextExisting = isNotSet ? NOT_SET : existing.get(key, NOT_SET);\n    var nextUpdated = updateInDeepMap(\n      nextExisting,\n      keyPathIter,\n      notSetValue,\n      updater\n    );\n    return nextUpdated === nextExisting ? existing :\n      nextUpdated === NOT_SET ? existing.remove(key) :\n      (isNotSet ? emptyMap() : existing).set(key, nextUpdated);\n  }\n\n  function popCount(x) {\n    x = x - ((x >> 1) & 0x55555555);\n    x = (x & 0x33333333) + ((x >> 2) & 0x33333333);\n    x = (x + (x >> 4)) & 0x0f0f0f0f;\n    x = x + (x >> 8);\n    x = x + (x >> 16);\n    return x & 0x7f;\n  }\n\n  function setIn(array, idx, val, canEdit) {\n    var newArray = canEdit ? array : arrCopy(array);\n    newArray[idx] = val;\n    return newArray;\n  }\n\n  function spliceIn(array, idx, val, canEdit) {\n    var newLen = array.length + 1;\n    if (canEdit && idx + 1 === newLen) {\n      array[idx] = val;\n      return array;\n    }\n    var newArray = new Array(newLen);\n    var after = 0;\n    for (var ii = 0; ii < newLen; ii++) {\n      if (ii === idx) {\n        newArray[ii] = val;\n        after = -1;\n      } else {\n        newArray[ii] = array[ii + after];\n      }\n    }\n    return newArray;\n  }\n\n  function spliceOut(array, idx, canEdit) {\n    var newLen = array.length - 1;\n    if (canEdit && idx === newLen) {\n      array.pop();\n      return array;\n    }\n    var newArray = new Array(newLen);\n    var after = 0;\n    for (var ii = 0; ii < newLen; ii++) {\n      if (ii === idx) {\n        after = 1;\n      }\n      newArray[ii] = array[ii + after];\n    }\n    return newArray;\n  }\n\n  var MAX_ARRAY_MAP_SIZE = SIZE / 4;\n  var MAX_BITMAP_INDEXED_SIZE = SIZE / 2;\n  var MIN_HASH_ARRAY_MAP_SIZE = SIZE / 4;\n\n  createClass(List, IndexedCollection);\n\n    // @pragma Construction\n\n    function List(value) {\n      var empty = emptyList();\n      if (value === null || value === undefined) {\n        return empty;\n      }\n      if (isList(value)) {\n        return value;\n      }\n      var iter = IndexedIterable(value);\n      var size = iter.size;\n      if (size === 0) {\n        return empty;\n      }\n      assertNotInfinite(size);\n      if (size > 0 && size < SIZE) {\n        return makeList(0, size, SHIFT, null, new VNode(iter.toArray()));\n      }\n      return empty.withMutations(function(list ) {\n        list.setSize(size);\n        iter.forEach(function(v, i)  {return list.set(i, v)});\n      });\n    }\n\n    List.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    List.prototype.toString = function() {\n      return this.__toString('List [', ']');\n    };\n\n    // @pragma Access\n\n    List.prototype.get = function(index, notSetValue) {\n      index = wrapIndex(this, index);\n      if (index >= 0 && index < this.size) {\n        index += this._origin;\n        var node = listNodeFor(this, index);\n        return node && node.array[index & MASK];\n      }\n      return notSetValue;\n    };\n\n    // @pragma Modification\n\n    List.prototype.set = function(index, value) {\n      return updateList(this, index, value);\n    };\n\n    List.prototype.remove = function(index) {\n      return !this.has(index) ? this :\n        index === 0 ? this.shift() :\n        index === this.size - 1 ? this.pop() :\n        this.splice(index, 1);\n    };\n\n    List.prototype.insert = function(index, value) {\n      return this.splice(index, 0, value);\n    };\n\n    List.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = this._origin = this._capacity = 0;\n        this._level = SHIFT;\n        this._root = this._tail = null;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyList();\n    };\n\n    List.prototype.push = function(/*...values*/) {\n      var values = arguments;\n      var oldSize = this.size;\n      return this.withMutations(function(list ) {\n        setListBounds(list, 0, oldSize + values.length);\n        for (var ii = 0; ii < values.length; ii++) {\n          list.set(oldSize + ii, values[ii]);\n        }\n      });\n    };\n\n    List.prototype.pop = function() {\n      return setListBounds(this, 0, -1);\n    };\n\n    List.prototype.unshift = function(/*...values*/) {\n      var values = arguments;\n      return this.withMutations(function(list ) {\n        setListBounds(list, -values.length);\n        for (var ii = 0; ii < values.length; ii++) {\n          list.set(ii, values[ii]);\n        }\n      });\n    };\n\n    List.prototype.shift = function() {\n      return setListBounds(this, 1);\n    };\n\n    // @pragma Composition\n\n    List.prototype.merge = function(/*...iters*/) {\n      return mergeIntoListWith(this, undefined, arguments);\n    };\n\n    List.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoListWith(this, merger, iters);\n    };\n\n    List.prototype.mergeDeep = function(/*...iters*/) {\n      return mergeIntoListWith(this, deepMerger, arguments);\n    };\n\n    List.prototype.mergeDeepWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoListWith(this, deepMergerWith(merger), iters);\n    };\n\n    List.prototype.setSize = function(size) {\n      return setListBounds(this, 0, size);\n    };\n\n    // @pragma Iteration\n\n    List.prototype.slice = function(begin, end) {\n      var size = this.size;\n      if (wholeSlice(begin, end, size)) {\n        return this;\n      }\n      return setListBounds(\n        this,\n        resolveBegin(begin, size),\n        resolveEnd(end, size)\n      );\n    };\n\n    List.prototype.__iterator = function(type, reverse) {\n      var index = 0;\n      var values = iterateList(this, reverse);\n      return new Iterator(function()  {\n        var value = values();\n        return value === DONE ?\n          iteratorDone() :\n          iteratorValue(type, index++, value);\n      });\n    };\n\n    List.prototype.__iterate = function(fn, reverse) {\n      var index = 0;\n      var values = iterateList(this, reverse);\n      var value;\n      while ((value = values()) !== DONE) {\n        if (fn(value, index++, this) === false) {\n          break;\n        }\n      }\n      return index;\n    };\n\n    List.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        return this;\n      }\n      return makeList(this._origin, this._capacity, this._level, this._root, this._tail, ownerID, this.__hash);\n    };\n\n\n  function isList(maybeList) {\n    return !!(maybeList && maybeList[IS_LIST_SENTINEL]);\n  }\n\n  List.isList = isList;\n\n  var IS_LIST_SENTINEL = '@@__IMMUTABLE_LIST__@@';\n\n  var ListPrototype = List.prototype;\n  ListPrototype[IS_LIST_SENTINEL] = true;\n  ListPrototype[DELETE] = ListPrototype.remove;\n  ListPrototype.setIn = MapPrototype.setIn;\n  ListPrototype.deleteIn =\n  ListPrototype.removeIn = MapPrototype.removeIn;\n  ListPrototype.update = MapPrototype.update;\n  ListPrototype.updateIn = MapPrototype.updateIn;\n  ListPrototype.mergeIn = MapPrototype.mergeIn;\n  ListPrototype.mergeDeepIn = MapPrototype.mergeDeepIn;\n  ListPrototype.withMutations = MapPrototype.withMutations;\n  ListPrototype.asMutable = MapPrototype.asMutable;\n  ListPrototype.asImmutable = MapPrototype.asImmutable;\n  ListPrototype.wasAltered = MapPrototype.wasAltered;\n\n\n\n    function VNode(array, ownerID) {\n      this.array = array;\n      this.ownerID = ownerID;\n    }\n\n    // TODO: seems like these methods are very similar\n\n    VNode.prototype.removeBefore = function(ownerID, level, index) {\n      if (index === level ? 1 << level : 0 || this.array.length === 0) {\n        return this;\n      }\n      var originIndex = (index >>> level) & MASK;\n      if (originIndex >= this.array.length) {\n        return new VNode([], ownerID);\n      }\n      var removingFirst = originIndex === 0;\n      var newChild;\n      if (level > 0) {\n        var oldChild = this.array[originIndex];\n        newChild = oldChild && oldChild.removeBefore(ownerID, level - SHIFT, index);\n        if (newChild === oldChild && removingFirst) {\n          return this;\n        }\n      }\n      if (removingFirst && !newChild) {\n        return this;\n      }\n      var editable = editableVNode(this, ownerID);\n      if (!removingFirst) {\n        for (var ii = 0; ii < originIndex; ii++) {\n          editable.array[ii] = undefined;\n        }\n      }\n      if (newChild) {\n        editable.array[originIndex] = newChild;\n      }\n      return editable;\n    };\n\n    VNode.prototype.removeAfter = function(ownerID, level, index) {\n      if (index === (level ? 1 << level : 0) || this.array.length === 0) {\n        return this;\n      }\n      var sizeIndex = ((index - 1) >>> level) & MASK;\n      if (sizeIndex >= this.array.length) {\n        return this;\n      }\n\n      var newChild;\n      if (level > 0) {\n        var oldChild = this.array[sizeIndex];\n        newChild = oldChild && oldChild.removeAfter(ownerID, level - SHIFT, index);\n        if (newChild === oldChild && sizeIndex === this.array.length - 1) {\n          return this;\n        }\n      }\n\n      var editable = editableVNode(this, ownerID);\n      editable.array.splice(sizeIndex + 1);\n      if (newChild) {\n        editable.array[sizeIndex] = newChild;\n      }\n      return editable;\n    };\n\n\n\n  var DONE = {};\n\n  function iterateList(list, reverse) {\n    var left = list._origin;\n    var right = list._capacity;\n    var tailPos = getTailOffset(right);\n    var tail = list._tail;\n\n    return iterateNodeOrLeaf(list._root, list._level, 0);\n\n    function iterateNodeOrLeaf(node, level, offset) {\n      return level === 0 ?\n        iterateLeaf(node, offset) :\n        iterateNode(node, level, offset);\n    }\n\n    function iterateLeaf(node, offset) {\n      var array = offset === tailPos ? tail && tail.array : node && node.array;\n      var from = offset > left ? 0 : left - offset;\n      var to = right - offset;\n      if (to > SIZE) {\n        to = SIZE;\n      }\n      return function()  {\n        if (from === to) {\n          return DONE;\n        }\n        var idx = reverse ? --to : from++;\n        return array && array[idx];\n      };\n    }\n\n    function iterateNode(node, level, offset) {\n      var values;\n      var array = node && node.array;\n      var from = offset > left ? 0 : (left - offset) >> level;\n      var to = ((right - offset) >> level) + 1;\n      if (to > SIZE) {\n        to = SIZE;\n      }\n      return function()  {\n        do {\n          if (values) {\n            var value = values();\n            if (value !== DONE) {\n              return value;\n            }\n            values = null;\n          }\n          if (from === to) {\n            return DONE;\n          }\n          var idx = reverse ? --to : from++;\n          values = iterateNodeOrLeaf(\n            array && array[idx], level - SHIFT, offset + (idx << level)\n          );\n        } while (true);\n      };\n    }\n  }\n\n  function makeList(origin, capacity, level, root, tail, ownerID, hash) {\n    var list = Object.create(ListPrototype);\n    list.size = capacity - origin;\n    list._origin = origin;\n    list._capacity = capacity;\n    list._level = level;\n    list._root = root;\n    list._tail = tail;\n    list.__ownerID = ownerID;\n    list.__hash = hash;\n    list.__altered = false;\n    return list;\n  }\n\n  var EMPTY_LIST;\n  function emptyList() {\n    return EMPTY_LIST || (EMPTY_LIST = makeList(0, 0, SHIFT));\n  }\n\n  function updateList(list, index, value) {\n    index = wrapIndex(list, index);\n\n    if (index !== index) {\n      return list;\n    }\n\n    if (index >= list.size || index < 0) {\n      return list.withMutations(function(list ) {\n        index < 0 ?\n          setListBounds(list, index).set(0, value) :\n          setListBounds(list, 0, index + 1).set(index, value)\n      });\n    }\n\n    index += list._origin;\n\n    var newTail = list._tail;\n    var newRoot = list._root;\n    var didAlter = MakeRef(DID_ALTER);\n    if (index >= getTailOffset(list._capacity)) {\n      newTail = updateVNode(newTail, list.__ownerID, 0, index, value, didAlter);\n    } else {\n      newRoot = updateVNode(newRoot, list.__ownerID, list._level, index, value, didAlter);\n    }\n\n    if (!didAlter.value) {\n      return list;\n    }\n\n    if (list.__ownerID) {\n      list._root = newRoot;\n      list._tail = newTail;\n      list.__hash = undefined;\n      list.__altered = true;\n      return list;\n    }\n    return makeList(list._origin, list._capacity, list._level, newRoot, newTail);\n  }\n\n  function updateVNode(node, ownerID, level, index, value, didAlter) {\n    var idx = (index >>> level) & MASK;\n    var nodeHas = node && idx < node.array.length;\n    if (!nodeHas && value === undefined) {\n      return node;\n    }\n\n    var newNode;\n\n    if (level > 0) {\n      var lowerNode = node && node.array[idx];\n      var newLowerNode = updateVNode(lowerNode, ownerID, level - SHIFT, index, value, didAlter);\n      if (newLowerNode === lowerNode) {\n        return node;\n      }\n      newNode = editableVNode(node, ownerID);\n      newNode.array[idx] = newLowerNode;\n      return newNode;\n    }\n\n    if (nodeHas && node.array[idx] === value) {\n      return node;\n    }\n\n    SetRef(didAlter);\n\n    newNode = editableVNode(node, ownerID);\n    if (value === undefined && idx === newNode.array.length - 1) {\n      newNode.array.pop();\n    } else {\n      newNode.array[idx] = value;\n    }\n    return newNode;\n  }\n\n  function editableVNode(node, ownerID) {\n    if (ownerID && node && ownerID === node.ownerID) {\n      return node;\n    }\n    return new VNode(node ? node.array.slice() : [], ownerID);\n  }\n\n  function listNodeFor(list, rawIndex) {\n    if (rawIndex >= getTailOffset(list._capacity)) {\n      return list._tail;\n    }\n    if (rawIndex < 1 << (list._level + SHIFT)) {\n      var node = list._root;\n      var level = list._level;\n      while (node && level > 0) {\n        node = node.array[(rawIndex >>> level) & MASK];\n        level -= SHIFT;\n      }\n      return node;\n    }\n  }\n\n  function setListBounds(list, begin, end) {\n    // Sanitize begin & end using this shorthand for ToInt32(argument)\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n    if (begin !== undefined) {\n      begin = begin | 0;\n    }\n    if (end !== undefined) {\n      end = end | 0;\n    }\n    var owner = list.__ownerID || new OwnerID();\n    var oldOrigin = list._origin;\n    var oldCapacity = list._capacity;\n    var newOrigin = oldOrigin + begin;\n    var newCapacity = end === undefined ? oldCapacity : end < 0 ? oldCapacity + end : oldOrigin + end;\n    if (newOrigin === oldOrigin && newCapacity === oldCapacity) {\n      return list;\n    }\n\n    // If it's going to end after it starts, it's empty.\n    if (newOrigin >= newCapacity) {\n      return list.clear();\n    }\n\n    var newLevel = list._level;\n    var newRoot = list._root;\n\n    // New origin might need creating a higher root.\n    var offsetShift = 0;\n    while (newOrigin + offsetShift < 0) {\n      newRoot = new VNode(newRoot && newRoot.array.length ? [undefined, newRoot] : [], owner);\n      newLevel += SHIFT;\n      offsetShift += 1 << newLevel;\n    }\n    if (offsetShift) {\n      newOrigin += offsetShift;\n      oldOrigin += offsetShift;\n      newCapacity += offsetShift;\n      oldCapacity += offsetShift;\n    }\n\n    var oldTailOffset = getTailOffset(oldCapacity);\n    var newTailOffset = getTailOffset(newCapacity);\n\n    // New size might need creating a higher root.\n    while (newTailOffset >= 1 << (newLevel + SHIFT)) {\n      newRoot = new VNode(newRoot && newRoot.array.length ? [newRoot] : [], owner);\n      newLevel += SHIFT;\n    }\n\n    // Locate or create the new tail.\n    var oldTail = list._tail;\n    var newTail = newTailOffset < oldTailOffset ?\n      listNodeFor(list, newCapacity - 1) :\n      newTailOffset > oldTailOffset ? new VNode([], owner) : oldTail;\n\n    // Merge Tail into tree.\n    if (oldTail && newTailOffset > oldTailOffset && newOrigin < oldCapacity && oldTail.array.length) {\n      newRoot = editableVNode(newRoot, owner);\n      var node = newRoot;\n      for (var level = newLevel; level > SHIFT; level -= SHIFT) {\n        var idx = (oldTailOffset >>> level) & MASK;\n        node = node.array[idx] = editableVNode(node.array[idx], owner);\n      }\n      node.array[(oldTailOffset >>> SHIFT) & MASK] = oldTail;\n    }\n\n    // If the size has been reduced, there's a chance the tail needs to be trimmed.\n    if (newCapacity < oldCapacity) {\n      newTail = newTail && newTail.removeAfter(owner, 0, newCapacity);\n    }\n\n    // If the new origin is within the tail, then we do not need a root.\n    if (newOrigin >= newTailOffset) {\n      newOrigin -= newTailOffset;\n      newCapacity -= newTailOffset;\n      newLevel = SHIFT;\n      newRoot = null;\n      newTail = newTail && newTail.removeBefore(owner, 0, newOrigin);\n\n    // Otherwise, if the root has been trimmed, garbage collect.\n    } else if (newOrigin > oldOrigin || newTailOffset < oldTailOffset) {\n      offsetShift = 0;\n\n      // Identify the new top root node of the subtree of the old root.\n      while (newRoot) {\n        var beginIndex = (newOrigin >>> newLevel) & MASK;\n        if (beginIndex !== (newTailOffset >>> newLevel) & MASK) {\n          break;\n        }\n        if (beginIndex) {\n          offsetShift += (1 << newLevel) * beginIndex;\n        }\n        newLevel -= SHIFT;\n        newRoot = newRoot.array[beginIndex];\n      }\n\n      // Trim the new sides of the new root.\n      if (newRoot && newOrigin > oldOrigin) {\n        newRoot = newRoot.removeBefore(owner, newLevel, newOrigin - offsetShift);\n      }\n      if (newRoot && newTailOffset < oldTailOffset) {\n        newRoot = newRoot.removeAfter(owner, newLevel, newTailOffset - offsetShift);\n      }\n      if (offsetShift) {\n        newOrigin -= offsetShift;\n        newCapacity -= offsetShift;\n      }\n    }\n\n    if (list.__ownerID) {\n      list.size = newCapacity - newOrigin;\n      list._origin = newOrigin;\n      list._capacity = newCapacity;\n      list._level = newLevel;\n      list._root = newRoot;\n      list._tail = newTail;\n      list.__hash = undefined;\n      list.__altered = true;\n      return list;\n    }\n    return makeList(newOrigin, newCapacity, newLevel, newRoot, newTail);\n  }\n\n  function mergeIntoListWith(list, merger, iterables) {\n    var iters = [];\n    var maxSize = 0;\n    for (var ii = 0; ii < iterables.length; ii++) {\n      var value = iterables[ii];\n      var iter = IndexedIterable(value);\n      if (iter.size > maxSize) {\n        maxSize = iter.size;\n      }\n      if (!isIterable(value)) {\n        iter = iter.map(function(v ) {return fromJS(v)});\n      }\n      iters.push(iter);\n    }\n    if (maxSize > list.size) {\n      list = list.setSize(maxSize);\n    }\n    return mergeIntoCollectionWith(list, merger, iters);\n  }\n\n  function getTailOffset(size) {\n    return size < SIZE ? 0 : (((size - 1) >>> SHIFT) << SHIFT);\n  }\n\n  createClass(OrderedMap, Map);\n\n    // @pragma Construction\n\n    function OrderedMap(value) {\n      return value === null || value === undefined ? emptyOrderedMap() :\n        isOrderedMap(value) ? value :\n        emptyOrderedMap().withMutations(function(map ) {\n          var iter = KeyedIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v, k)  {return map.set(k, v)});\n        });\n    }\n\n    OrderedMap.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    OrderedMap.prototype.toString = function() {\n      return this.__toString('OrderedMap {', '}');\n    };\n\n    // @pragma Access\n\n    OrderedMap.prototype.get = function(k, notSetValue) {\n      var index = this._map.get(k);\n      return index !== undefined ? this._list.get(index)[1] : notSetValue;\n    };\n\n    // @pragma Modification\n\n    OrderedMap.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._map.clear();\n        this._list.clear();\n        return this;\n      }\n      return emptyOrderedMap();\n    };\n\n    OrderedMap.prototype.set = function(k, v) {\n      return updateOrderedMap(this, k, v);\n    };\n\n    OrderedMap.prototype.remove = function(k) {\n      return updateOrderedMap(this, k, NOT_SET);\n    };\n\n    OrderedMap.prototype.wasAltered = function() {\n      return this._map.wasAltered() || this._list.wasAltered();\n    };\n\n    OrderedMap.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._list.__iterate(\n        function(entry ) {return entry && fn(entry[1], entry[0], this$0)},\n        reverse\n      );\n    };\n\n    OrderedMap.prototype.__iterator = function(type, reverse) {\n      return this._list.fromEntrySeq().__iterator(type, reverse);\n    };\n\n    OrderedMap.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map.__ensureOwner(ownerID);\n      var newList = this._list.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        this._list = newList;\n        return this;\n      }\n      return makeOrderedMap(newMap, newList, ownerID, this.__hash);\n    };\n\n\n  function isOrderedMap(maybeOrderedMap) {\n    return isMap(maybeOrderedMap) && isOrdered(maybeOrderedMap);\n  }\n\n  OrderedMap.isOrderedMap = isOrderedMap;\n\n  OrderedMap.prototype[IS_ORDERED_SENTINEL] = true;\n  OrderedMap.prototype[DELETE] = OrderedMap.prototype.remove;\n\n\n\n  function makeOrderedMap(map, list, ownerID, hash) {\n    var omap = Object.create(OrderedMap.prototype);\n    omap.size = map ? map.size : 0;\n    omap._map = map;\n    omap._list = list;\n    omap.__ownerID = ownerID;\n    omap.__hash = hash;\n    return omap;\n  }\n\n  var EMPTY_ORDERED_MAP;\n  function emptyOrderedMap() {\n    return EMPTY_ORDERED_MAP || (EMPTY_ORDERED_MAP = makeOrderedMap(emptyMap(), emptyList()));\n  }\n\n  function updateOrderedMap(omap, k, v) {\n    var map = omap._map;\n    var list = omap._list;\n    var i = map.get(k);\n    var has = i !== undefined;\n    var newMap;\n    var newList;\n    if (v === NOT_SET) { // removed\n      if (!has) {\n        return omap;\n      }\n      if (list.size >= SIZE && list.size >= map.size * 2) {\n        newList = list.filter(function(entry, idx)  {return entry !== undefined && i !== idx});\n        newMap = newList.toKeyedSeq().map(function(entry ) {return entry[0]}).flip().toMap();\n        if (omap.__ownerID) {\n          newMap.__ownerID = newList.__ownerID = omap.__ownerID;\n        }\n      } else {\n        newMap = map.remove(k);\n        newList = i === list.size - 1 ? list.pop() : list.set(i, undefined);\n      }\n    } else {\n      if (has) {\n        if (v === list.get(i)[1]) {\n          return omap;\n        }\n        newMap = map;\n        newList = list.set(i, [k, v]);\n      } else {\n        newMap = map.set(k, list.size);\n        newList = list.set(list.size, [k, v]);\n      }\n    }\n    if (omap.__ownerID) {\n      omap.size = newMap.size;\n      omap._map = newMap;\n      omap._list = newList;\n      omap.__hash = undefined;\n      return omap;\n    }\n    return makeOrderedMap(newMap, newList);\n  }\n\n  createClass(ToKeyedSequence, KeyedSeq);\n    function ToKeyedSequence(indexed, useKeys) {\n      this._iter = indexed;\n      this._useKeys = useKeys;\n      this.size = indexed.size;\n    }\n\n    ToKeyedSequence.prototype.get = function(key, notSetValue) {\n      return this._iter.get(key, notSetValue);\n    };\n\n    ToKeyedSequence.prototype.has = function(key) {\n      return this._iter.has(key);\n    };\n\n    ToKeyedSequence.prototype.valueSeq = function() {\n      return this._iter.valueSeq();\n    };\n\n    ToKeyedSequence.prototype.reverse = function() {var this$0 = this;\n      var reversedSequence = reverseFactory(this, true);\n      if (!this._useKeys) {\n        reversedSequence.valueSeq = function()  {return this$0._iter.toSeq().reverse()};\n      }\n      return reversedSequence;\n    };\n\n    ToKeyedSequence.prototype.map = function(mapper, context) {var this$0 = this;\n      var mappedSequence = mapFactory(this, mapper, context);\n      if (!this._useKeys) {\n        mappedSequence.valueSeq = function()  {return this$0._iter.toSeq().map(mapper, context)};\n      }\n      return mappedSequence;\n    };\n\n    ToKeyedSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var ii;\n      return this._iter.__iterate(\n        this._useKeys ?\n          function(v, k)  {return fn(v, k, this$0)} :\n          ((ii = reverse ? resolveSize(this) : 0),\n            function(v ) {return fn(v, reverse ? --ii : ii++, this$0)}),\n        reverse\n      );\n    };\n\n    ToKeyedSequence.prototype.__iterator = function(type, reverse) {\n      if (this._useKeys) {\n        return this._iter.__iterator(type, reverse);\n      }\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      var ii = reverse ? resolveSize(this) : 0;\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, reverse ? --ii : ii++, step.value, step);\n      });\n    };\n\n  ToKeyedSequence.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n  createClass(ToIndexedSequence, IndexedSeq);\n    function ToIndexedSequence(iter) {\n      this._iter = iter;\n      this.size = iter.size;\n    }\n\n    ToIndexedSequence.prototype.includes = function(value) {\n      return this._iter.includes(value);\n    };\n\n    ToIndexedSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      return this._iter.__iterate(function(v ) {return fn(v, iterations++, this$0)}, reverse);\n    };\n\n    ToIndexedSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      var iterations = 0;\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, iterations++, step.value, step)\n      });\n    };\n\n\n\n  createClass(ToSetSequence, SetSeq);\n    function ToSetSequence(iter) {\n      this._iter = iter;\n      this.size = iter.size;\n    }\n\n    ToSetSequence.prototype.has = function(key) {\n      return this._iter.includes(key);\n    };\n\n    ToSetSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._iter.__iterate(function(v ) {return fn(v, v, this$0)}, reverse);\n    };\n\n    ToSetSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, step.value, step.value, step);\n      });\n    };\n\n\n\n  createClass(FromEntriesSequence, KeyedSeq);\n    function FromEntriesSequence(entries) {\n      this._iter = entries;\n      this.size = entries.size;\n    }\n\n    FromEntriesSequence.prototype.entrySeq = function() {\n      return this._iter.toSeq();\n    };\n\n    FromEntriesSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._iter.__iterate(function(entry ) {\n        // Check if entry exists first so array access doesn't throw for holes\n        // in the parent iteration.\n        if (entry) {\n          validateEntry(entry);\n          var indexedIterable = isIterable(entry);\n          return fn(\n            indexedIterable ? entry.get(1) : entry[1],\n            indexedIterable ? entry.get(0) : entry[0],\n            this$0\n          );\n        }\n      }, reverse);\n    };\n\n    FromEntriesSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      return new Iterator(function()  {\n        while (true) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          var entry = step.value;\n          // Check if entry exists first so array access doesn't throw for holes\n          // in the parent iteration.\n          if (entry) {\n            validateEntry(entry);\n            var indexedIterable = isIterable(entry);\n            return iteratorValue(\n              type,\n              indexedIterable ? entry.get(0) : entry[0],\n              indexedIterable ? entry.get(1) : entry[1],\n              step\n            );\n          }\n        }\n      });\n    };\n\n\n  ToIndexedSequence.prototype.cacheResult =\n  ToKeyedSequence.prototype.cacheResult =\n  ToSetSequence.prototype.cacheResult =\n  FromEntriesSequence.prototype.cacheResult =\n    cacheResultThrough;\n\n\n  function flipFactory(iterable) {\n    var flipSequence = makeSequence(iterable);\n    flipSequence._iter = iterable;\n    flipSequence.size = iterable.size;\n    flipSequence.flip = function()  {return iterable};\n    flipSequence.reverse = function () {\n      var reversedSequence = iterable.reverse.apply(this); // super.reverse()\n      reversedSequence.flip = function()  {return iterable.reverse()};\n      return reversedSequence;\n    };\n    flipSequence.has = function(key ) {return iterable.includes(key)};\n    flipSequence.includes = function(key ) {return iterable.has(key)};\n    flipSequence.cacheResult = cacheResultThrough;\n    flipSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(function(v, k)  {return fn(k, v, this$0) !== false}, reverse);\n    }\n    flipSequence.__iteratorUncached = function(type, reverse) {\n      if (type === ITERATE_ENTRIES) {\n        var iterator = iterable.__iterator(type, reverse);\n        return new Iterator(function()  {\n          var step = iterator.next();\n          if (!step.done) {\n            var k = step.value[0];\n            step.value[0] = step.value[1];\n            step.value[1] = k;\n          }\n          return step;\n        });\n      }\n      return iterable.__iterator(\n        type === ITERATE_VALUES ? ITERATE_KEYS : ITERATE_VALUES,\n        reverse\n      );\n    }\n    return flipSequence;\n  }\n\n\n  function mapFactory(iterable, mapper, context) {\n    var mappedSequence = makeSequence(iterable);\n    mappedSequence.size = iterable.size;\n    mappedSequence.has = function(key ) {return iterable.has(key)};\n    mappedSequence.get = function(key, notSetValue)  {\n      var v = iterable.get(key, NOT_SET);\n      return v === NOT_SET ?\n        notSetValue :\n        mapper.call(context, v, key, iterable);\n    };\n    mappedSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(\n        function(v, k, c)  {return fn(mapper.call(context, v, k, c), k, this$0) !== false},\n        reverse\n      );\n    }\n    mappedSequence.__iteratorUncached = function (type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      return new Iterator(function()  {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var key = entry[0];\n        return iteratorValue(\n          type,\n          key,\n          mapper.call(context, entry[1], key, iterable),\n          step\n        );\n      });\n    }\n    return mappedSequence;\n  }\n\n\n  function reverseFactory(iterable, useKeys) {\n    var reversedSequence = makeSequence(iterable);\n    reversedSequence._iter = iterable;\n    reversedSequence.size = iterable.size;\n    reversedSequence.reverse = function()  {return iterable};\n    if (iterable.flip) {\n      reversedSequence.flip = function () {\n        var flipSequence = flipFactory(iterable);\n        flipSequence.reverse = function()  {return iterable.flip()};\n        return flipSequence;\n      };\n    }\n    reversedSequence.get = function(key, notSetValue) \n      {return iterable.get(useKeys ? key : -1 - key, notSetValue)};\n    reversedSequence.has = function(key )\n      {return iterable.has(useKeys ? key : -1 - key)};\n    reversedSequence.includes = function(value ) {return iterable.includes(value)};\n    reversedSequence.cacheResult = cacheResultThrough;\n    reversedSequence.__iterate = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(function(v, k)  {return fn(v, k, this$0)}, !reverse);\n    };\n    reversedSequence.__iterator =\n      function(type, reverse)  {return iterable.__iterator(type, !reverse)};\n    return reversedSequence;\n  }\n\n\n  function filterFactory(iterable, predicate, context, useKeys) {\n    var filterSequence = makeSequence(iterable);\n    if (useKeys) {\n      filterSequence.has = function(key ) {\n        var v = iterable.get(key, NOT_SET);\n        return v !== NOT_SET && !!predicate.call(context, v, key, iterable);\n      };\n      filterSequence.get = function(key, notSetValue)  {\n        var v = iterable.get(key, NOT_SET);\n        return v !== NOT_SET && predicate.call(context, v, key, iterable) ?\n          v : notSetValue;\n      };\n    }\n    filterSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c)  {\n        if (predicate.call(context, v, k, c)) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0);\n        }\n      }, reverse);\n      return iterations;\n    };\n    filterSequence.__iteratorUncached = function (type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var iterations = 0;\n      return new Iterator(function()  {\n        while (true) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          var entry = step.value;\n          var key = entry[0];\n          var value = entry[1];\n          if (predicate.call(context, value, key, iterable)) {\n            return iteratorValue(type, useKeys ? key : iterations++, value, step);\n          }\n        }\n      });\n    }\n    return filterSequence;\n  }\n\n\n  function countByFactory(iterable, grouper, context) {\n    var groups = Map().asMutable();\n    iterable.__iterate(function(v, k)  {\n      groups.update(\n        grouper.call(context, v, k, iterable),\n        0,\n        function(a ) {return a + 1}\n      );\n    });\n    return groups.asImmutable();\n  }\n\n\n  function groupByFactory(iterable, grouper, context) {\n    var isKeyedIter = isKeyed(iterable);\n    var groups = (isOrdered(iterable) ? OrderedMap() : Map()).asMutable();\n    iterable.__iterate(function(v, k)  {\n      groups.update(\n        grouper.call(context, v, k, iterable),\n        function(a ) {return (a = a || [], a.push(isKeyedIter ? [k, v] : v), a)}\n      );\n    });\n    var coerce = iterableClass(iterable);\n    return groups.map(function(arr ) {return reify(iterable, coerce(arr))});\n  }\n\n\n  function sliceFactory(iterable, begin, end, useKeys) {\n    var originalSize = iterable.size;\n\n    // Sanitize begin & end using this shorthand for ToInt32(argument)\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n    if (begin !== undefined) {\n      begin = begin | 0;\n    }\n    if (end !== undefined) {\n      if (end === Infinity) {\n        end = originalSize;\n      } else {\n        end = end | 0;\n      }\n    }\n\n    if (wholeSlice(begin, end, originalSize)) {\n      return iterable;\n    }\n\n    var resolvedBegin = resolveBegin(begin, originalSize);\n    var resolvedEnd = resolveEnd(end, originalSize);\n\n    // begin or end will be NaN if they were provided as negative numbers and\n    // this iterable's size is unknown. In that case, cache first so there is\n    // a known size and these do not resolve to NaN.\n    if (resolvedBegin !== resolvedBegin || resolvedEnd !== resolvedEnd) {\n      return sliceFactory(iterable.toSeq().cacheResult(), begin, end, useKeys);\n    }\n\n    // Note: resolvedEnd is undefined when the original sequence's length is\n    // unknown and this slice did not supply an end and should contain all\n    // elements after resolvedBegin.\n    // In that case, resolvedSize will be NaN and sliceSize will remain undefined.\n    var resolvedSize = resolvedEnd - resolvedBegin;\n    var sliceSize;\n    if (resolvedSize === resolvedSize) {\n      sliceSize = resolvedSize < 0 ? 0 : resolvedSize;\n    }\n\n    var sliceSeq = makeSequence(iterable);\n\n    // If iterable.size is undefined, the size of the realized sliceSeq is\n    // unknown at this point unless the number of items to slice is 0\n    sliceSeq.size = sliceSize === 0 ? sliceSize : iterable.size && sliceSize || undefined;\n\n    if (!useKeys && isSeq(iterable) && sliceSize >= 0) {\n      sliceSeq.get = function (index, notSetValue) {\n        index = wrapIndex(this, index);\n        return index >= 0 && index < sliceSize ?\n          iterable.get(index + resolvedBegin, notSetValue) :\n          notSetValue;\n      }\n    }\n\n    sliceSeq.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      if (sliceSize === 0) {\n        return 0;\n      }\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var skipped = 0;\n      var isSkipping = true;\n      var iterations = 0;\n      iterable.__iterate(function(v, k)  {\n        if (!(isSkipping && (isSkipping = skipped++ < resolvedBegin))) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0) !== false &&\n                 iterations !== sliceSize;\n        }\n      });\n      return iterations;\n    };\n\n    sliceSeq.__iteratorUncached = function(type, reverse) {\n      if (sliceSize !== 0 && reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      // Don't bother instantiating parent iterator if taking 0.\n      var iterator = sliceSize !== 0 && iterable.__iterator(type, reverse);\n      var skipped = 0;\n      var iterations = 0;\n      return new Iterator(function()  {\n        while (skipped++ < resolvedBegin) {\n          iterator.next();\n        }\n        if (++iterations > sliceSize) {\n          return iteratorDone();\n        }\n        var step = iterator.next();\n        if (useKeys || type === ITERATE_VALUES) {\n          return step;\n        } else if (type === ITERATE_KEYS) {\n          return iteratorValue(type, iterations - 1, undefined, step);\n        } else {\n          return iteratorValue(type, iterations - 1, step.value[1], step);\n        }\n      });\n    }\n\n    return sliceSeq;\n  }\n\n\n  function takeWhileFactory(iterable, predicate, context) {\n    var takeSequence = makeSequence(iterable);\n    takeSequence.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c) \n        {return predicate.call(context, v, k, c) && ++iterations && fn(v, k, this$0)}\n      );\n      return iterations;\n    };\n    takeSequence.__iteratorUncached = function(type, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var iterating = true;\n      return new Iterator(function()  {\n        if (!iterating) {\n          return iteratorDone();\n        }\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var k = entry[0];\n        var v = entry[1];\n        if (!predicate.call(context, v, k, this$0)) {\n          iterating = false;\n          return iteratorDone();\n        }\n        return type === ITERATE_ENTRIES ? step :\n          iteratorValue(type, k, v, step);\n      });\n    };\n    return takeSequence;\n  }\n\n\n  function skipWhileFactory(iterable, predicate, context, useKeys) {\n    var skipSequence = makeSequence(iterable);\n    skipSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var isSkipping = true;\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c)  {\n        if (!(isSkipping && (isSkipping = predicate.call(context, v, k, c)))) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0);\n        }\n      });\n      return iterations;\n    };\n    skipSequence.__iteratorUncached = function(type, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var skipping = true;\n      var iterations = 0;\n      return new Iterator(function()  {\n        var step, k, v;\n        do {\n          step = iterator.next();\n          if (step.done) {\n            if (useKeys || type === ITERATE_VALUES) {\n              return step;\n            } else if (type === ITERATE_KEYS) {\n              return iteratorValue(type, iterations++, undefined, step);\n            } else {\n              return iteratorValue(type, iterations++, step.value[1], step);\n            }\n          }\n          var entry = step.value;\n          k = entry[0];\n          v = entry[1];\n          skipping && (skipping = predicate.call(context, v, k, this$0));\n        } while (skipping);\n        return type === ITERATE_ENTRIES ? step :\n          iteratorValue(type, k, v, step);\n      });\n    };\n    return skipSequence;\n  }\n\n\n  function concatFactory(iterable, values) {\n    var isKeyedIterable = isKeyed(iterable);\n    var iters = [iterable].concat(values).map(function(v ) {\n      if (!isIterable(v)) {\n        v = isKeyedIterable ?\n          keyedSeqFromValue(v) :\n          indexedSeqFromValue(Array.isArray(v) ? v : [v]);\n      } else if (isKeyedIterable) {\n        v = KeyedIterable(v);\n      }\n      return v;\n    }).filter(function(v ) {return v.size !== 0});\n\n    if (iters.length === 0) {\n      return iterable;\n    }\n\n    if (iters.length === 1) {\n      var singleton = iters[0];\n      if (singleton === iterable ||\n          isKeyedIterable && isKeyed(singleton) ||\n          isIndexed(iterable) && isIndexed(singleton)) {\n        return singleton;\n      }\n    }\n\n    var concatSeq = new ArraySeq(iters);\n    if (isKeyedIterable) {\n      concatSeq = concatSeq.toKeyedSeq();\n    } else if (!isIndexed(iterable)) {\n      concatSeq = concatSeq.toSetSeq();\n    }\n    concatSeq = concatSeq.flatten(true);\n    concatSeq.size = iters.reduce(\n      function(sum, seq)  {\n        if (sum !== undefined) {\n          var size = seq.size;\n          if (size !== undefined) {\n            return sum + size;\n          }\n        }\n      },\n      0\n    );\n    return concatSeq;\n  }\n\n\n  function flattenFactory(iterable, depth, useKeys) {\n    var flatSequence = makeSequence(iterable);\n    flatSequence.__iterateUncached = function(fn, reverse) {\n      var iterations = 0;\n      var stopped = false;\n      function flatDeep(iter, currentDepth) {var this$0 = this;\n        iter.__iterate(function(v, k)  {\n          if ((!depth || currentDepth < depth) && isIterable(v)) {\n            flatDeep(v, currentDepth + 1);\n          } else if (fn(v, useKeys ? k : iterations++, this$0) === false) {\n            stopped = true;\n          }\n          return !stopped;\n        }, reverse);\n      }\n      flatDeep(iterable, 0);\n      return iterations;\n    }\n    flatSequence.__iteratorUncached = function(type, reverse) {\n      var iterator = iterable.__iterator(type, reverse);\n      var stack = [];\n      var iterations = 0;\n      return new Iterator(function()  {\n        while (iterator) {\n          var step = iterator.next();\n          if (step.done !== false) {\n            iterator = stack.pop();\n            continue;\n          }\n          var v = step.value;\n          if (type === ITERATE_ENTRIES) {\n            v = v[1];\n          }\n          if ((!depth || stack.length < depth) && isIterable(v)) {\n            stack.push(iterator);\n            iterator = v.__iterator(type, reverse);\n          } else {\n            return useKeys ? step : iteratorValue(type, iterations++, v, step);\n          }\n        }\n        return iteratorDone();\n      });\n    }\n    return flatSequence;\n  }\n\n\n  function flatMapFactory(iterable, mapper, context) {\n    var coerce = iterableClass(iterable);\n    return iterable.toSeq().map(\n      function(v, k)  {return coerce(mapper.call(context, v, k, iterable))}\n    ).flatten(true);\n  }\n\n\n  function interposeFactory(iterable, separator) {\n    var interposedSequence = makeSequence(iterable);\n    interposedSequence.size = iterable.size && iterable.size * 2 -1;\n    interposedSequence.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      iterable.__iterate(function(v, k) \n        {return (!iterations || fn(separator, iterations++, this$0) !== false) &&\n        fn(v, iterations++, this$0) !== false},\n        reverse\n      );\n      return iterations;\n    };\n    interposedSequence.__iteratorUncached = function(type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_VALUES, reverse);\n      var iterations = 0;\n      var step;\n      return new Iterator(function()  {\n        if (!step || iterations % 2) {\n          step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n        }\n        return iterations % 2 ?\n          iteratorValue(type, iterations++, separator) :\n          iteratorValue(type, iterations++, step.value, step);\n      });\n    };\n    return interposedSequence;\n  }\n\n\n  function sortFactory(iterable, comparator, mapper) {\n    if (!comparator) {\n      comparator = defaultComparator;\n    }\n    var isKeyedIterable = isKeyed(iterable);\n    var index = 0;\n    var entries = iterable.toSeq().map(\n      function(v, k)  {return [k, v, index++, mapper ? mapper(v, k, iterable) : v]}\n    ).toArray();\n    entries.sort(function(a, b)  {return comparator(a[3], b[3]) || a[2] - b[2]}).forEach(\n      isKeyedIterable ?\n      function(v, i)  { entries[i].length = 2; } :\n      function(v, i)  { entries[i] = v[1]; }\n    );\n    return isKeyedIterable ? KeyedSeq(entries) :\n      isIndexed(iterable) ? IndexedSeq(entries) :\n      SetSeq(entries);\n  }\n\n\n  function maxFactory(iterable, comparator, mapper) {\n    if (!comparator) {\n      comparator = defaultComparator;\n    }\n    if (mapper) {\n      var entry = iterable.toSeq()\n        .map(function(v, k)  {return [v, mapper(v, k, iterable)]})\n        .reduce(function(a, b)  {return maxCompare(comparator, a[1], b[1]) ? b : a});\n      return entry && entry[0];\n    } else {\n      return iterable.reduce(function(a, b)  {return maxCompare(comparator, a, b) ? b : a});\n    }\n  }\n\n  function maxCompare(comparator, a, b) {\n    var comp = comparator(b, a);\n    // b is considered the new max if the comparator declares them equal, but\n    // they are not equal and b is in fact a nullish value.\n    return (comp === 0 && b !== a && (b === undefined || b === null || b !== b)) || comp > 0;\n  }\n\n\n  function zipWithFactory(keyIter, zipper, iters) {\n    var zipSequence = makeSequence(keyIter);\n    zipSequence.size = new ArraySeq(iters).map(function(i ) {return i.size}).min();\n    // Note: this a generic base implementation of __iterate in terms of\n    // __iterator which may be more generically useful in the future.\n    zipSequence.__iterate = function(fn, reverse) {\n      /* generic:\n      var iterator = this.__iterator(ITERATE_ENTRIES, reverse);\n      var step;\n      var iterations = 0;\n      while (!(step = iterator.next()).done) {\n        iterations++;\n        if (fn(step.value[1], step.value[0], this) === false) {\n          break;\n        }\n      }\n      return iterations;\n      */\n      // indexed:\n      var iterator = this.__iterator(ITERATE_VALUES, reverse);\n      var step;\n      var iterations = 0;\n      while (!(step = iterator.next()).done) {\n        if (fn(step.value, iterations++, this) === false) {\n          break;\n        }\n      }\n      return iterations;\n    };\n    zipSequence.__iteratorUncached = function(type, reverse) {\n      var iterators = iters.map(function(i )\n        {return (i = Iterable(i), getIterator(reverse ? i.reverse() : i))}\n      );\n      var iterations = 0;\n      var isDone = false;\n      return new Iterator(function()  {\n        var steps;\n        if (!isDone) {\n          steps = iterators.map(function(i ) {return i.next()});\n          isDone = steps.some(function(s ) {return s.done});\n        }\n        if (isDone) {\n          return iteratorDone();\n        }\n        return iteratorValue(\n          type,\n          iterations++,\n          zipper.apply(null, steps.map(function(s ) {return s.value}))\n        );\n      });\n    };\n    return zipSequence\n  }\n\n\n  // #pragma Helper Functions\n\n  function reify(iter, seq) {\n    return isSeq(iter) ? seq : iter.constructor(seq);\n  }\n\n  function validateEntry(entry) {\n    if (entry !== Object(entry)) {\n      throw new TypeError('Expected [K, V] tuple: ' + entry);\n    }\n  }\n\n  function resolveSize(iter) {\n    assertNotInfinite(iter.size);\n    return ensureSize(iter);\n  }\n\n  function iterableClass(iterable) {\n    return isKeyed(iterable) ? KeyedIterable :\n      isIndexed(iterable) ? IndexedIterable :\n      SetIterable;\n  }\n\n  function makeSequence(iterable) {\n    return Object.create(\n      (\n        isKeyed(iterable) ? KeyedSeq :\n        isIndexed(iterable) ? IndexedSeq :\n        SetSeq\n      ).prototype\n    );\n  }\n\n  function cacheResultThrough() {\n    if (this._iter.cacheResult) {\n      this._iter.cacheResult();\n      this.size = this._iter.size;\n      return this;\n    } else {\n      return Seq.prototype.cacheResult.call(this);\n    }\n  }\n\n  function defaultComparator(a, b) {\n    return a > b ? 1 : a < b ? -1 : 0;\n  }\n\n  function forceIterator(keyPath) {\n    var iter = getIterator(keyPath);\n    if (!iter) {\n      // Array might not be iterable in this environment, so we need a fallback\n      // to our wrapped type.\n      if (!isArrayLike(keyPath)) {\n        throw new TypeError('Expected iterable or array-like: ' + keyPath);\n      }\n      iter = getIterator(Iterable(keyPath));\n    }\n    return iter;\n  }\n\n  createClass(Record, KeyedCollection);\n\n    function Record(defaultValues, name) {\n      var hasInitialized;\n\n      var RecordType = function Record(values) {\n        if (values instanceof RecordType) {\n          return values;\n        }\n        if (!(this instanceof RecordType)) {\n          return new RecordType(values);\n        }\n        if (!hasInitialized) {\n          hasInitialized = true;\n          var keys = Object.keys(defaultValues);\n          setProps(RecordTypePrototype, keys);\n          RecordTypePrototype.size = keys.length;\n          RecordTypePrototype._name = name;\n          RecordTypePrototype._keys = keys;\n          RecordTypePrototype._defaultValues = defaultValues;\n        }\n        this._map = Map(values);\n      };\n\n      var RecordTypePrototype = RecordType.prototype = Object.create(RecordPrototype);\n      RecordTypePrototype.constructor = RecordType;\n\n      return RecordType;\n    }\n\n    Record.prototype.toString = function() {\n      return this.__toString(recordName(this) + ' {', '}');\n    };\n\n    // @pragma Access\n\n    Record.prototype.has = function(k) {\n      return this._defaultValues.hasOwnProperty(k);\n    };\n\n    Record.prototype.get = function(k, notSetValue) {\n      if (!this.has(k)) {\n        return notSetValue;\n      }\n      var defaultVal = this._defaultValues[k];\n      return this._map ? this._map.get(k, defaultVal) : defaultVal;\n    };\n\n    // @pragma Modification\n\n    Record.prototype.clear = function() {\n      if (this.__ownerID) {\n        this._map && this._map.clear();\n        return this;\n      }\n      var RecordType = this.constructor;\n      return RecordType._empty || (RecordType._empty = makeRecord(this, emptyMap()));\n    };\n\n    Record.prototype.set = function(k, v) {\n      if (!this.has(k)) {\n        throw new Error('Cannot set unknown key \"' + k + '\" on ' + recordName(this));\n      }\n      if (this._map && !this._map.has(k)) {\n        var defaultVal = this._defaultValues[k];\n        if (v === defaultVal) {\n          return this;\n        }\n      }\n      var newMap = this._map && this._map.set(k, v);\n      if (this.__ownerID || newMap === this._map) {\n        return this;\n      }\n      return makeRecord(this, newMap);\n    };\n\n    Record.prototype.remove = function(k) {\n      if (!this.has(k)) {\n        return this;\n      }\n      var newMap = this._map && this._map.remove(k);\n      if (this.__ownerID || newMap === this._map) {\n        return this;\n      }\n      return makeRecord(this, newMap);\n    };\n\n    Record.prototype.wasAltered = function() {\n      return this._map.wasAltered();\n    };\n\n    Record.prototype.__iterator = function(type, reverse) {var this$0 = this;\n      return KeyedIterable(this._defaultValues).map(function(_, k)  {return this$0.get(k)}).__iterator(type, reverse);\n    };\n\n    Record.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return KeyedIterable(this._defaultValues).map(function(_, k)  {return this$0.get(k)}).__iterate(fn, reverse);\n    };\n\n    Record.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map && this._map.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        return this;\n      }\n      return makeRecord(this, newMap, ownerID);\n    };\n\n\n  var RecordPrototype = Record.prototype;\n  RecordPrototype[DELETE] = RecordPrototype.remove;\n  RecordPrototype.deleteIn =\n  RecordPrototype.removeIn = MapPrototype.removeIn;\n  RecordPrototype.merge = MapPrototype.merge;\n  RecordPrototype.mergeWith = MapPrototype.mergeWith;\n  RecordPrototype.mergeIn = MapPrototype.mergeIn;\n  RecordPrototype.mergeDeep = MapPrototype.mergeDeep;\n  RecordPrototype.mergeDeepWith = MapPrototype.mergeDeepWith;\n  RecordPrototype.mergeDeepIn = MapPrototype.mergeDeepIn;\n  RecordPrototype.setIn = MapPrototype.setIn;\n  RecordPrototype.update = MapPrototype.update;\n  RecordPrototype.updateIn = MapPrototype.updateIn;\n  RecordPrototype.withMutations = MapPrototype.withMutations;\n  RecordPrototype.asMutable = MapPrototype.asMutable;\n  RecordPrototype.asImmutable = MapPrototype.asImmutable;\n\n\n  function makeRecord(likeRecord, map, ownerID) {\n    var record = Object.create(Object.getPrototypeOf(likeRecord));\n    record._map = map;\n    record.__ownerID = ownerID;\n    return record;\n  }\n\n  function recordName(record) {\n    return record._name || record.constructor.name || 'Record';\n  }\n\n  function setProps(prototype, names) {\n    try {\n      names.forEach(setProp.bind(undefined, prototype));\n    } catch (error) {\n      // Object.defineProperty failed. Probably IE8.\n    }\n  }\n\n  function setProp(prototype, name) {\n    Object.defineProperty(prototype, name, {\n      get: function() {\n        return this.get(name);\n      },\n      set: function(value) {\n        invariant(this.__ownerID, 'Cannot set on an immutable record.');\n        this.set(name, value);\n      }\n    });\n  }\n\n  createClass(Set, SetCollection);\n\n    // @pragma Construction\n\n    function Set(value) {\n      return value === null || value === undefined ? emptySet() :\n        isSet(value) && !isOrdered(value) ? value :\n        emptySet().withMutations(function(set ) {\n          var iter = SetIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v ) {return set.add(v)});\n        });\n    }\n\n    Set.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    Set.fromKeys = function(value) {\n      return this(KeyedIterable(value).keySeq());\n    };\n\n    Set.prototype.toString = function() {\n      return this.__toString('Set {', '}');\n    };\n\n    // @pragma Access\n\n    Set.prototype.has = function(value) {\n      return this._map.has(value);\n    };\n\n    // @pragma Modification\n\n    Set.prototype.add = function(value) {\n      return updateSet(this, this._map.set(value, true));\n    };\n\n    Set.prototype.remove = function(value) {\n      return updateSet(this, this._map.remove(value));\n    };\n\n    Set.prototype.clear = function() {\n      return updateSet(this, this._map.clear());\n    };\n\n    // @pragma Composition\n\n    Set.prototype.union = function() {var iters = SLICE$0.call(arguments, 0);\n      iters = iters.filter(function(x ) {return x.size !== 0});\n      if (iters.length === 0) {\n        return this;\n      }\n      if (this.size === 0 && !this.__ownerID && iters.length === 1) {\n        return this.constructor(iters[0]);\n      }\n      return this.withMutations(function(set ) {\n        for (var ii = 0; ii < iters.length; ii++) {\n          SetIterable(iters[ii]).forEach(function(value ) {return set.add(value)});\n        }\n      });\n    };\n\n    Set.prototype.intersect = function() {var iters = SLICE$0.call(arguments, 0);\n      if (iters.length === 0) {\n        return this;\n      }\n      iters = iters.map(function(iter ) {return SetIterable(iter)});\n      var originalSet = this;\n      return this.withMutations(function(set ) {\n        originalSet.forEach(function(value ) {\n          if (!iters.every(function(iter ) {return iter.includes(value)})) {\n            set.remove(value);\n          }\n        });\n      });\n    };\n\n    Set.prototype.subtract = function() {var iters = SLICE$0.call(arguments, 0);\n      if (iters.length === 0) {\n        return this;\n      }\n      iters = iters.map(function(iter ) {return SetIterable(iter)});\n      var originalSet = this;\n      return this.withMutations(function(set ) {\n        originalSet.forEach(function(value ) {\n          if (iters.some(function(iter ) {return iter.includes(value)})) {\n            set.remove(value);\n          }\n        });\n      });\n    };\n\n    Set.prototype.merge = function() {\n      return this.union.apply(this, arguments);\n    };\n\n    Set.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return this.union.apply(this, iters);\n    };\n\n    Set.prototype.sort = function(comparator) {\n      // Late binding\n      return OrderedSet(sortFactory(this, comparator));\n    };\n\n    Set.prototype.sortBy = function(mapper, comparator) {\n      // Late binding\n      return OrderedSet(sortFactory(this, comparator, mapper));\n    };\n\n    Set.prototype.wasAltered = function() {\n      return this._map.wasAltered();\n    };\n\n    Set.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._map.__iterate(function(_, k)  {return fn(k, k, this$0)}, reverse);\n    };\n\n    Set.prototype.__iterator = function(type, reverse) {\n      return this._map.map(function(_, k)  {return k}).__iterator(type, reverse);\n    };\n\n    Set.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        return this;\n      }\n      return this.__make(newMap, ownerID);\n    };\n\n\n  function isSet(maybeSet) {\n    return !!(maybeSet && maybeSet[IS_SET_SENTINEL]);\n  }\n\n  Set.isSet = isSet;\n\n  var IS_SET_SENTINEL = '@@__IMMUTABLE_SET__@@';\n\n  var SetPrototype = Set.prototype;\n  SetPrototype[IS_SET_SENTINEL] = true;\n  SetPrototype[DELETE] = SetPrototype.remove;\n  SetPrototype.mergeDeep = SetPrototype.merge;\n  SetPrototype.mergeDeepWith = SetPrototype.mergeWith;\n  SetPrototype.withMutations = MapPrototype.withMutations;\n  SetPrototype.asMutable = MapPrototype.asMutable;\n  SetPrototype.asImmutable = MapPrototype.asImmutable;\n\n  SetPrototype.__empty = emptySet;\n  SetPrototype.__make = makeSet;\n\n  function updateSet(set, newMap) {\n    if (set.__ownerID) {\n      set.size = newMap.size;\n      set._map = newMap;\n      return set;\n    }\n    return newMap === set._map ? set :\n      newMap.size === 0 ? set.__empty() :\n      set.__make(newMap);\n  }\n\n  function makeSet(map, ownerID) {\n    var set = Object.create(SetPrototype);\n    set.size = map ? map.size : 0;\n    set._map = map;\n    set.__ownerID = ownerID;\n    return set;\n  }\n\n  var EMPTY_SET;\n  function emptySet() {\n    return EMPTY_SET || (EMPTY_SET = makeSet(emptyMap()));\n  }\n\n  createClass(OrderedSet, Set);\n\n    // @pragma Construction\n\n    function OrderedSet(value) {\n      return value === null || value === undefined ? emptyOrderedSet() :\n        isOrderedSet(value) ? value :\n        emptyOrderedSet().withMutations(function(set ) {\n          var iter = SetIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v ) {return set.add(v)});\n        });\n    }\n\n    OrderedSet.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    OrderedSet.fromKeys = function(value) {\n      return this(KeyedIterable(value).keySeq());\n    };\n\n    OrderedSet.prototype.toString = function() {\n      return this.__toString('OrderedSet {', '}');\n    };\n\n\n  function isOrderedSet(maybeOrderedSet) {\n    return isSet(maybeOrderedSet) && isOrdered(maybeOrderedSet);\n  }\n\n  OrderedSet.isOrderedSet = isOrderedSet;\n\n  var OrderedSetPrototype = OrderedSet.prototype;\n  OrderedSetPrototype[IS_ORDERED_SENTINEL] = true;\n\n  OrderedSetPrototype.__empty = emptyOrderedSet;\n  OrderedSetPrototype.__make = makeOrderedSet;\n\n  function makeOrderedSet(map, ownerID) {\n    var set = Object.create(OrderedSetPrototype);\n    set.size = map ? map.size : 0;\n    set._map = map;\n    set.__ownerID = ownerID;\n    return set;\n  }\n\n  var EMPTY_ORDERED_SET;\n  function emptyOrderedSet() {\n    return EMPTY_ORDERED_SET || (EMPTY_ORDERED_SET = makeOrderedSet(emptyOrderedMap()));\n  }\n\n  createClass(Stack, IndexedCollection);\n\n    // @pragma Construction\n\n    function Stack(value) {\n      return value === null || value === undefined ? emptyStack() :\n        isStack(value) ? value :\n        emptyStack().unshiftAll(value);\n    }\n\n    Stack.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    Stack.prototype.toString = function() {\n      return this.__toString('Stack [', ']');\n    };\n\n    // @pragma Access\n\n    Stack.prototype.get = function(index, notSetValue) {\n      var head = this._head;\n      index = wrapIndex(this, index);\n      while (head && index--) {\n        head = head.next;\n      }\n      return head ? head.value : notSetValue;\n    };\n\n    Stack.prototype.peek = function() {\n      return this._head && this._head.value;\n    };\n\n    // @pragma Modification\n\n    Stack.prototype.push = function(/*...values*/) {\n      if (arguments.length === 0) {\n        return this;\n      }\n      var newSize = this.size + arguments.length;\n      var head = this._head;\n      for (var ii = arguments.length - 1; ii >= 0; ii--) {\n        head = {\n          value: arguments[ii],\n          next: head\n        };\n      }\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    Stack.prototype.pushAll = function(iter) {\n      iter = IndexedIterable(iter);\n      if (iter.size === 0) {\n        return this;\n      }\n      assertNotInfinite(iter.size);\n      var newSize = this.size;\n      var head = this._head;\n      iter.reverse().forEach(function(value ) {\n        newSize++;\n        head = {\n          value: value,\n          next: head\n        };\n      });\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    Stack.prototype.pop = function() {\n      return this.slice(1);\n    };\n\n    Stack.prototype.unshift = function(/*...values*/) {\n      return this.push.apply(this, arguments);\n    };\n\n    Stack.prototype.unshiftAll = function(iter) {\n      return this.pushAll(iter);\n    };\n\n    Stack.prototype.shift = function() {\n      return this.pop.apply(this, arguments);\n    };\n\n    Stack.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._head = undefined;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyStack();\n    };\n\n    Stack.prototype.slice = function(begin, end) {\n      if (wholeSlice(begin, end, this.size)) {\n        return this;\n      }\n      var resolvedBegin = resolveBegin(begin, this.size);\n      var resolvedEnd = resolveEnd(end, this.size);\n      if (resolvedEnd !== this.size) {\n        // super.slice(begin, end);\n        return IndexedCollection.prototype.slice.call(this, begin, end);\n      }\n      var newSize = this.size - resolvedBegin;\n      var head = this._head;\n      while (resolvedBegin--) {\n        head = head.next;\n      }\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    // @pragma Mutability\n\n    Stack.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this.__altered = false;\n        return this;\n      }\n      return makeStack(this.size, this._head, ownerID, this.__hash);\n    };\n\n    // @pragma Iteration\n\n    Stack.prototype.__iterate = function(fn, reverse) {\n      if (reverse) {\n        return this.reverse().__iterate(fn);\n      }\n      var iterations = 0;\n      var node = this._head;\n      while (node) {\n        if (fn(node.value, iterations++, this) === false) {\n          break;\n        }\n        node = node.next;\n      }\n      return iterations;\n    };\n\n    Stack.prototype.__iterator = function(type, reverse) {\n      if (reverse) {\n        return this.reverse().__iterator(type);\n      }\n      var iterations = 0;\n      var node = this._head;\n      return new Iterator(function()  {\n        if (node) {\n          var value = node.value;\n          node = node.next;\n          return iteratorValue(type, iterations++, value);\n        }\n        return iteratorDone();\n      });\n    };\n\n\n  function isStack(maybeStack) {\n    return !!(maybeStack && maybeStack[IS_STACK_SENTINEL]);\n  }\n\n  Stack.isStack = isStack;\n\n  var IS_STACK_SENTINEL = '@@__IMMUTABLE_STACK__@@';\n\n  var StackPrototype = Stack.prototype;\n  StackPrototype[IS_STACK_SENTINEL] = true;\n  StackPrototype.withMutations = MapPrototype.withMutations;\n  StackPrototype.asMutable = MapPrototype.asMutable;\n  StackPrototype.asImmutable = MapPrototype.asImmutable;\n  StackPrototype.wasAltered = MapPrototype.wasAltered;\n\n\n  function makeStack(size, head, ownerID, hash) {\n    var map = Object.create(StackPrototype);\n    map.size = size;\n    map._head = head;\n    map.__ownerID = ownerID;\n    map.__hash = hash;\n    map.__altered = false;\n    return map;\n  }\n\n  var EMPTY_STACK;\n  function emptyStack() {\n    return EMPTY_STACK || (EMPTY_STACK = makeStack(0));\n  }\n\n  /**\n   * Contributes additional methods to a constructor\n   */\n  function mixin(ctor, methods) {\n    var keyCopier = function(key ) { ctor.prototype[key] = methods[key]; };\n    Object.keys(methods).forEach(keyCopier);\n    Object.getOwnPropertySymbols &&\n      Object.getOwnPropertySymbols(methods).forEach(keyCopier);\n    return ctor;\n  }\n\n  Iterable.Iterator = Iterator;\n\n  mixin(Iterable, {\n\n    // ### Conversion to other types\n\n    toArray: function() {\n      assertNotInfinite(this.size);\n      var array = new Array(this.size || 0);\n      this.valueSeq().__iterate(function(v, i)  { array[i] = v; });\n      return array;\n    },\n\n    toIndexedSeq: function() {\n      return new ToIndexedSequence(this);\n    },\n\n    toJS: function() {\n      return this.toSeq().map(\n        function(value ) {return value && typeof value.toJS === 'function' ? value.toJS() : value}\n      ).__toJS();\n    },\n\n    toJSON: function() {\n      return this.toSeq().map(\n        function(value ) {return value && typeof value.toJSON === 'function' ? value.toJSON() : value}\n      ).__toJS();\n    },\n\n    toKeyedSeq: function() {\n      return new ToKeyedSequence(this, true);\n    },\n\n    toMap: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Map(this.toKeyedSeq());\n    },\n\n    toObject: function() {\n      assertNotInfinite(this.size);\n      var object = {};\n      this.__iterate(function(v, k)  { object[k] = v; });\n      return object;\n    },\n\n    toOrderedMap: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return OrderedMap(this.toKeyedSeq());\n    },\n\n    toOrderedSet: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return OrderedSet(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toSet: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Set(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toSetSeq: function() {\n      return new ToSetSequence(this);\n    },\n\n    toSeq: function() {\n      return isIndexed(this) ? this.toIndexedSeq() :\n        isKeyed(this) ? this.toKeyedSeq() :\n        this.toSetSeq();\n    },\n\n    toStack: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Stack(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toList: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return List(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n\n    // ### Common JavaScript methods and properties\n\n    toString: function() {\n      return '[Iterable]';\n    },\n\n    __toString: function(head, tail) {\n      if (this.size === 0) {\n        return head + tail;\n      }\n      return head + ' ' + this.toSeq().map(this.__toStringMapper).join(', ') + ' ' + tail;\n    },\n\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    concat: function() {var values = SLICE$0.call(arguments, 0);\n      return reify(this, concatFactory(this, values));\n    },\n\n    includes: function(searchValue) {\n      return this.some(function(value ) {return is(value, searchValue)});\n    },\n\n    entries: function() {\n      return this.__iterator(ITERATE_ENTRIES);\n    },\n\n    every: function(predicate, context) {\n      assertNotInfinite(this.size);\n      var returnValue = true;\n      this.__iterate(function(v, k, c)  {\n        if (!predicate.call(context, v, k, c)) {\n          returnValue = false;\n          return false;\n        }\n      });\n      return returnValue;\n    },\n\n    filter: function(predicate, context) {\n      return reify(this, filterFactory(this, predicate, context, true));\n    },\n\n    find: function(predicate, context, notSetValue) {\n      var entry = this.findEntry(predicate, context);\n      return entry ? entry[1] : notSetValue;\n    },\n\n    forEach: function(sideEffect, context) {\n      assertNotInfinite(this.size);\n      return this.__iterate(context ? sideEffect.bind(context) : sideEffect);\n    },\n\n    join: function(separator) {\n      assertNotInfinite(this.size);\n      separator = separator !== undefined ? '' + separator : ',';\n      var joined = '';\n      var isFirst = true;\n      this.__iterate(function(v ) {\n        isFirst ? (isFirst = false) : (joined += separator);\n        joined += v !== null && v !== undefined ? v.toString() : '';\n      });\n      return joined;\n    },\n\n    keys: function() {\n      return this.__iterator(ITERATE_KEYS);\n    },\n\n    map: function(mapper, context) {\n      return reify(this, mapFactory(this, mapper, context));\n    },\n\n    reduce: function(reducer, initialReduction, context) {\n      assertNotInfinite(this.size);\n      var reduction;\n      var useFirst;\n      if (arguments.length < 2) {\n        useFirst = true;\n      } else {\n        reduction = initialReduction;\n      }\n      this.__iterate(function(v, k, c)  {\n        if (useFirst) {\n          useFirst = false;\n          reduction = v;\n        } else {\n          reduction = reducer.call(context, reduction, v, k, c);\n        }\n      });\n      return reduction;\n    },\n\n    reduceRight: function(reducer, initialReduction, context) {\n      var reversed = this.toKeyedSeq().reverse();\n      return reversed.reduce.apply(reversed, arguments);\n    },\n\n    reverse: function() {\n      return reify(this, reverseFactory(this, true));\n    },\n\n    slice: function(begin, end) {\n      return reify(this, sliceFactory(this, begin, end, true));\n    },\n\n    some: function(predicate, context) {\n      return !this.every(not(predicate), context);\n    },\n\n    sort: function(comparator) {\n      return reify(this, sortFactory(this, comparator));\n    },\n\n    values: function() {\n      return this.__iterator(ITERATE_VALUES);\n    },\n\n\n    // ### More sequential methods\n\n    butLast: function() {\n      return this.slice(0, -1);\n    },\n\n    isEmpty: function() {\n      return this.size !== undefined ? this.size === 0 : !this.some(function()  {return true});\n    },\n\n    count: function(predicate, context) {\n      return ensureSize(\n        predicate ? this.toSeq().filter(predicate, context) : this\n      );\n    },\n\n    countBy: function(grouper, context) {\n      return countByFactory(this, grouper, context);\n    },\n\n    equals: function(other) {\n      return deepEqual(this, other);\n    },\n\n    entrySeq: function() {\n      var iterable = this;\n      if (iterable._cache) {\n        // We cache as an entries array, so we can just return the cache!\n        return new ArraySeq(iterable._cache);\n      }\n      var entriesSequence = iterable.toSeq().map(entryMapper).toIndexedSeq();\n      entriesSequence.fromEntrySeq = function()  {return iterable.toSeq()};\n      return entriesSequence;\n    },\n\n    filterNot: function(predicate, context) {\n      return this.filter(not(predicate), context);\n    },\n\n    findEntry: function(predicate, context, notSetValue) {\n      var found = notSetValue;\n      this.__iterate(function(v, k, c)  {\n        if (predicate.call(context, v, k, c)) {\n          found = [k, v];\n          return false;\n        }\n      });\n      return found;\n    },\n\n    findKey: function(predicate, context) {\n      var entry = this.findEntry(predicate, context);\n      return entry && entry[0];\n    },\n\n    findLast: function(predicate, context, notSetValue) {\n      return this.toKeyedSeq().reverse().find(predicate, context, notSetValue);\n    },\n\n    findLastEntry: function(predicate, context, notSetValue) {\n      return this.toKeyedSeq().reverse().findEntry(predicate, context, notSetValue);\n    },\n\n    findLastKey: function(predicate, context) {\n      return this.toKeyedSeq().reverse().findKey(predicate, context);\n    },\n\n    first: function() {\n      return this.find(returnTrue);\n    },\n\n    flatMap: function(mapper, context) {\n      return reify(this, flatMapFactory(this, mapper, context));\n    },\n\n    flatten: function(depth) {\n      return reify(this, flattenFactory(this, depth, true));\n    },\n\n    fromEntrySeq: function() {\n      return new FromEntriesSequence(this);\n    },\n\n    get: function(searchKey, notSetValue) {\n      return this.find(function(_, key)  {return is(key, searchKey)}, undefined, notSetValue);\n    },\n\n    getIn: function(searchKeyPath, notSetValue) {\n      var nested = this;\n      // Note: in an ES6 environment, we would prefer:\n      // for (var key of searchKeyPath) {\n      var iter = forceIterator(searchKeyPath);\n      var step;\n      while (!(step = iter.next()).done) {\n        var key = step.value;\n        nested = nested && nested.get ? nested.get(key, NOT_SET) : NOT_SET;\n        if (nested === NOT_SET) {\n          return notSetValue;\n        }\n      }\n      return nested;\n    },\n\n    groupBy: function(grouper, context) {\n      return groupByFactory(this, grouper, context);\n    },\n\n    has: function(searchKey) {\n      return this.get(searchKey, NOT_SET) !== NOT_SET;\n    },\n\n    hasIn: function(searchKeyPath) {\n      return this.getIn(searchKeyPath, NOT_SET) !== NOT_SET;\n    },\n\n    isSubset: function(iter) {\n      iter = typeof iter.includes === 'function' ? iter : Iterable(iter);\n      return this.every(function(value ) {return iter.includes(value)});\n    },\n\n    isSuperset: function(iter) {\n      iter = typeof iter.isSubset === 'function' ? iter : Iterable(iter);\n      return iter.isSubset(this);\n    },\n\n    keyOf: function(searchValue) {\n      return this.findKey(function(value ) {return is(value, searchValue)});\n    },\n\n    keySeq: function() {\n      return this.toSeq().map(keyMapper).toIndexedSeq();\n    },\n\n    last: function() {\n      return this.toSeq().reverse().first();\n    },\n\n    lastKeyOf: function(searchValue) {\n      return this.toKeyedSeq().reverse().keyOf(searchValue);\n    },\n\n    max: function(comparator) {\n      return maxFactory(this, comparator);\n    },\n\n    maxBy: function(mapper, comparator) {\n      return maxFactory(this, comparator, mapper);\n    },\n\n    min: function(comparator) {\n      return maxFactory(this, comparator ? neg(comparator) : defaultNegComparator);\n    },\n\n    minBy: function(mapper, comparator) {\n      return maxFactory(this, comparator ? neg(comparator) : defaultNegComparator, mapper);\n    },\n\n    rest: function() {\n      return this.slice(1);\n    },\n\n    skip: function(amount) {\n      return this.slice(Math.max(0, amount));\n    },\n\n    skipLast: function(amount) {\n      return reify(this, this.toSeq().reverse().skip(amount).reverse());\n    },\n\n    skipWhile: function(predicate, context) {\n      return reify(this, skipWhileFactory(this, predicate, context, true));\n    },\n\n    skipUntil: function(predicate, context) {\n      return this.skipWhile(not(predicate), context);\n    },\n\n    sortBy: function(mapper, comparator) {\n      return reify(this, sortFactory(this, comparator, mapper));\n    },\n\n    take: function(amount) {\n      return this.slice(0, Math.max(0, amount));\n    },\n\n    takeLast: function(amount) {\n      return reify(this, this.toSeq().reverse().take(amount).reverse());\n    },\n\n    takeWhile: function(predicate, context) {\n      return reify(this, takeWhileFactory(this, predicate, context));\n    },\n\n    takeUntil: function(predicate, context) {\n      return this.takeWhile(not(predicate), context);\n    },\n\n    valueSeq: function() {\n      return this.toIndexedSeq();\n    },\n\n\n    // ### Hashable Object\n\n    hashCode: function() {\n      return this.__hash || (this.__hash = hashIterable(this));\n    }\n\n\n    // ### Internal\n\n    // abstract __iterate(fn, reverse)\n\n    // abstract __iterator(type, reverse)\n  });\n\n  // var IS_ITERABLE_SENTINEL = '@@__IMMUTABLE_ITERABLE__@@';\n  // var IS_KEYED_SENTINEL = '@@__IMMUTABLE_KEYED__@@';\n  // var IS_INDEXED_SENTINEL = '@@__IMMUTABLE_INDEXED__@@';\n  // var IS_ORDERED_SENTINEL = '@@__IMMUTABLE_ORDERED__@@';\n\n  var IterablePrototype = Iterable.prototype;\n  IterablePrototype[IS_ITERABLE_SENTINEL] = true;\n  IterablePrototype[ITERATOR_SYMBOL] = IterablePrototype.values;\n  IterablePrototype.__toJS = IterablePrototype.toArray;\n  IterablePrototype.__toStringMapper = quoteString;\n  IterablePrototype.inspect =\n  IterablePrototype.toSource = function() { return this.toString(); };\n  IterablePrototype.chain = IterablePrototype.flatMap;\n  IterablePrototype.contains = IterablePrototype.includes;\n\n  mixin(KeyedIterable, {\n\n    // ### More sequential methods\n\n    flip: function() {\n      return reify(this, flipFactory(this));\n    },\n\n    mapEntries: function(mapper, context) {var this$0 = this;\n      var iterations = 0;\n      return reify(this,\n        this.toSeq().map(\n          function(v, k)  {return mapper.call(context, [k, v], iterations++, this$0)}\n        ).fromEntrySeq()\n      );\n    },\n\n    mapKeys: function(mapper, context) {var this$0 = this;\n      return reify(this,\n        this.toSeq().flip().map(\n          function(k, v)  {return mapper.call(context, k, v, this$0)}\n        ).flip()\n      );\n    }\n\n  });\n\n  var KeyedIterablePrototype = KeyedIterable.prototype;\n  KeyedIterablePrototype[IS_KEYED_SENTINEL] = true;\n  KeyedIterablePrototype[ITERATOR_SYMBOL] = IterablePrototype.entries;\n  KeyedIterablePrototype.__toJS = IterablePrototype.toObject;\n  KeyedIterablePrototype.__toStringMapper = function(v, k)  {return JSON.stringify(k) + ': ' + quoteString(v)};\n\n\n\n  mixin(IndexedIterable, {\n\n    // ### Conversion to other types\n\n    toKeyedSeq: function() {\n      return new ToKeyedSequence(this, false);\n    },\n\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    filter: function(predicate, context) {\n      return reify(this, filterFactory(this, predicate, context, false));\n    },\n\n    findIndex: function(predicate, context) {\n      var entry = this.findEntry(predicate, context);\n      return entry ? entry[0] : -1;\n    },\n\n    indexOf: function(searchValue) {\n      var key = this.keyOf(searchValue);\n      return key === undefined ? -1 : key;\n    },\n\n    lastIndexOf: function(searchValue) {\n      var key = this.lastKeyOf(searchValue);\n      return key === undefined ? -1 : key;\n    },\n\n    reverse: function() {\n      return reify(this, reverseFactory(this, false));\n    },\n\n    slice: function(begin, end) {\n      return reify(this, sliceFactory(this, begin, end, false));\n    },\n\n    splice: function(index, removeNum /*, ...values*/) {\n      var numArgs = arguments.length;\n      removeNum = Math.max(removeNum | 0, 0);\n      if (numArgs === 0 || (numArgs === 2 && !removeNum)) {\n        return this;\n      }\n      // If index is negative, it should resolve relative to the size of the\n      // collection. However size may be expensive to compute if not cached, so\n      // only call count() if the number is in fact negative.\n      index = resolveBegin(index, index < 0 ? this.count() : this.size);\n      var spliced = this.slice(0, index);\n      return reify(\n        this,\n        numArgs === 1 ?\n          spliced :\n          spliced.concat(arrCopy(arguments, 2), this.slice(index + removeNum))\n      );\n    },\n\n\n    // ### More collection methods\n\n    findLastIndex: function(predicate, context) {\n      var entry = this.findLastEntry(predicate, context);\n      return entry ? entry[0] : -1;\n    },\n\n    first: function() {\n      return this.get(0);\n    },\n\n    flatten: function(depth) {\n      return reify(this, flattenFactory(this, depth, false));\n    },\n\n    get: function(index, notSetValue) {\n      index = wrapIndex(this, index);\n      return (index < 0 || (this.size === Infinity ||\n          (this.size !== undefined && index > this.size))) ?\n        notSetValue :\n        this.find(function(_, key)  {return key === index}, undefined, notSetValue);\n    },\n\n    has: function(index) {\n      index = wrapIndex(this, index);\n      return index >= 0 && (this.size !== undefined ?\n        this.size === Infinity || index < this.size :\n        this.indexOf(index) !== -1\n      );\n    },\n\n    interpose: function(separator) {\n      return reify(this, interposeFactory(this, separator));\n    },\n\n    interleave: function(/*...iterables*/) {\n      var iterables = [this].concat(arrCopy(arguments));\n      var zipped = zipWithFactory(this.toSeq(), IndexedSeq.of, iterables);\n      var interleaved = zipped.flatten(true);\n      if (zipped.size) {\n        interleaved.size = zipped.size * iterables.length;\n      }\n      return reify(this, interleaved);\n    },\n\n    keySeq: function() {\n      return Range(0, this.size);\n    },\n\n    last: function() {\n      return this.get(-1);\n    },\n\n    skipWhile: function(predicate, context) {\n      return reify(this, skipWhileFactory(this, predicate, context, false));\n    },\n\n    zip: function(/*, ...iterables */) {\n      var iterables = [this].concat(arrCopy(arguments));\n      return reify(this, zipWithFactory(this, defaultZipper, iterables));\n    },\n\n    zipWith: function(zipper/*, ...iterables */) {\n      var iterables = arrCopy(arguments);\n      iterables[0] = this;\n      return reify(this, zipWithFactory(this, zipper, iterables));\n    }\n\n  });\n\n  IndexedIterable.prototype[IS_INDEXED_SENTINEL] = true;\n  IndexedIterable.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n\n  mixin(SetIterable, {\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    get: function(value, notSetValue) {\n      return this.has(value) ? value : notSetValue;\n    },\n\n    includes: function(value) {\n      return this.has(value);\n    },\n\n\n    // ### More sequential methods\n\n    keySeq: function() {\n      return this.valueSeq();\n    }\n\n  });\n\n  SetIterable.prototype.has = IterablePrototype.includes;\n  SetIterable.prototype.contains = SetIterable.prototype.includes;\n\n\n  // Mixin subclasses\n\n  mixin(KeyedSeq, KeyedIterable.prototype);\n  mixin(IndexedSeq, IndexedIterable.prototype);\n  mixin(SetSeq, SetIterable.prototype);\n\n  mixin(KeyedCollection, KeyedIterable.prototype);\n  mixin(IndexedCollection, IndexedIterable.prototype);\n  mixin(SetCollection, SetIterable.prototype);\n\n\n  // #pragma Helper functions\n\n  function keyMapper(v, k) {\n    return k;\n  }\n\n  function entryMapper(v, k) {\n    return [k, v];\n  }\n\n  function not(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    }\n  }\n\n  function neg(predicate) {\n    return function() {\n      return -predicate.apply(this, arguments);\n    }\n  }\n\n  function quoteString(value) {\n    return typeof value === 'string' ? JSON.stringify(value) : String(value);\n  }\n\n  function defaultZipper() {\n    return arrCopy(arguments);\n  }\n\n  function defaultNegComparator(a, b) {\n    return a < b ? 1 : a > b ? -1 : 0;\n  }\n\n  function hashIterable(iterable) {\n    if (iterable.size === Infinity) {\n      return 0;\n    }\n    var ordered = isOrdered(iterable);\n    var keyed = isKeyed(iterable);\n    var h = ordered ? 1 : 0;\n    var size = iterable.__iterate(\n      keyed ?\n        ordered ?\n          function(v, k)  { h = 31 * h + hashMerge(hash(v), hash(k)) | 0; } :\n          function(v, k)  { h = h + hashMerge(hash(v), hash(k)) | 0; } :\n        ordered ?\n          function(v ) { h = 31 * h + hash(v) | 0; } :\n          function(v ) { h = h + hash(v) | 0; }\n    );\n    return murmurHashOfSize(size, h);\n  }\n\n  function murmurHashOfSize(size, h) {\n    h = imul(h, 0xCC9E2D51);\n    h = imul(h << 15 | h >>> -15, 0x1B873593);\n    h = imul(h << 13 | h >>> -13, 5);\n    h = (h + 0xE6546B64 | 0) ^ size;\n    h = imul(h ^ h >>> 16, 0x85EBCA6B);\n    h = imul(h ^ h >>> 13, 0xC2B2AE35);\n    h = smi(h ^ h >>> 16);\n    return h;\n  }\n\n  function hashMerge(a, b) {\n    return a ^ b + 0x9E3779B9 + (a << 6) + (a >> 2) | 0; // int\n  }\n\n  var Immutable = {\n\n    Iterable: Iterable,\n\n    Seq: Seq,\n    Collection: Collection,\n    Map: Map,\n    OrderedMap: OrderedMap,\n    List: List,\n    Stack: Stack,\n    Set: Set,\n    OrderedSet: OrderedSet,\n\n    Record: Record,\n    Range: Range,\n    Repeat: Repeat,\n\n    is: is,\n    fromJS: fromJS\n\n  };\n\n  return Immutable;\n\n}));","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n","var isProduction = process.env.NODE_ENV === 'production';\nvar index = (function (condition, message) {\n  if (!isProduction) {\n    if (condition) {\n      return;\n    }\n\n    console.warn(message);\n  }\n});\n\nexport default index;\n","var isProduction = process.env.NODE_ENV === 'production';\nvar prefix = 'Invariant failed';\nfunction invariant(condition, message) {\n    if (condition) {\n        return;\n    }\n    if (isProduction) {\n        throw new Error(prefix);\n    }\n    throw new Error(prefix + \": \" + (message || ''));\n}\n\nexport default invariant;\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","\"use strict\";\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\nfunction setup(env) {\n  createDebug.debug = createDebug;\n  createDebug.default = createDebug;\n  createDebug.coerce = coerce;\n  createDebug.disable = disable;\n  createDebug.enable = enable;\n  createDebug.enabled = enabled;\n  createDebug.humanize = require('ms');\n  Object.keys(env).forEach(function (key) {\n    createDebug[key] = env[key];\n  });\n  /**\n  * Active `debug` instances.\n  */\n\n  createDebug.instances = [];\n  /**\n  * The currently active debug mode names, and names to skip.\n  */\n\n  createDebug.names = [];\n  createDebug.skips = [];\n  /**\n  * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n  *\n  * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n  */\n\n  createDebug.formatters = {};\n  /**\n  * Selects a color for a debug namespace\n  * @param {String} namespace The namespace string for the for the debug instance to be colored\n  * @return {Number|String} An ANSI color code for the given namespace\n  * @api private\n  */\n\n  function selectColor(namespace) {\n    var hash = 0;\n\n    for (var i = 0; i < namespace.length; i++) {\n      hash = (hash << 5) - hash + namespace.charCodeAt(i);\n      hash |= 0; // Convert to 32bit integer\n    }\n\n    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n  }\n\n  createDebug.selectColor = selectColor;\n  /**\n  * Create a debugger with the given `namespace`.\n  *\n  * @param {String} namespace\n  * @return {Function}\n  * @api public\n  */\n\n  function createDebug(namespace) {\n    var prevTime;\n\n    function debug() {\n      // Disabled?\n      if (!debug.enabled) {\n        return;\n      }\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var self = debug; // Set `diff` timestamp\n\n      var curr = Number(new Date());\n      var ms = curr - (prevTime || curr);\n      self.diff = ms;\n      self.prev = prevTime;\n      self.curr = curr;\n      prevTime = curr;\n      args[0] = createDebug.coerce(args[0]);\n\n      if (typeof args[0] !== 'string') {\n        // Anything else let's inspect with %O\n        args.unshift('%O');\n      } // Apply any `formatters` transformations\n\n\n      var index = 0;\n      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n        // If we encounter an escaped % then don't increase the array index\n        if (match === '%%') {\n          return match;\n        }\n\n        index++;\n        var formatter = createDebug.formatters[format];\n\n        if (typeof formatter === 'function') {\n          var val = args[index];\n          match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`\n\n          args.splice(index, 1);\n          index--;\n        }\n\n        return match;\n      }); // Apply env-specific formatting (colors, etc.)\n\n      createDebug.formatArgs.call(self, args);\n      var logFn = self.log || createDebug.log;\n      logFn.apply(self, args);\n    }\n\n    debug.namespace = namespace;\n    debug.enabled = createDebug.enabled(namespace);\n    debug.useColors = createDebug.useColors();\n    debug.color = selectColor(namespace);\n    debug.destroy = destroy;\n    debug.extend = extend; // Debug.formatArgs = formatArgs;\n    // debug.rawLog = rawLog;\n    // env-specific initialization logic for debug instances\n\n    if (typeof createDebug.init === 'function') {\n      createDebug.init(debug);\n    }\n\n    createDebug.instances.push(debug);\n    return debug;\n  }\n\n  function destroy() {\n    var index = createDebug.instances.indexOf(this);\n\n    if (index !== -1) {\n      createDebug.instances.splice(index, 1);\n      return true;\n    }\n\n    return false;\n  }\n\n  function extend(namespace, delimiter) {\n    return createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n  }\n  /**\n  * Enables a debug mode by namespaces. This can include modes\n  * separated by a colon and wildcards.\n  *\n  * @param {String} namespaces\n  * @api public\n  */\n\n\n  function enable(namespaces) {\n    createDebug.save(namespaces);\n    createDebug.names = [];\n    createDebug.skips = [];\n    var i;\n    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n    var len = split.length;\n\n    for (i = 0; i < len; i++) {\n      if (!split[i]) {\n        // ignore empty strings\n        continue;\n      }\n\n      namespaces = split[i].replace(/\\*/g, '.*?');\n\n      if (namespaces[0] === '-') {\n        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n      } else {\n        createDebug.names.push(new RegExp('^' + namespaces + '$'));\n      }\n    }\n\n    for (i = 0; i < createDebug.instances.length; i++) {\n      var instance = createDebug.instances[i];\n      instance.enabled = createDebug.enabled(instance.namespace);\n    }\n  }\n  /**\n  * Disable debug output.\n  *\n  * @api public\n  */\n\n\n  function disable() {\n    createDebug.enable('');\n  }\n  /**\n  * Returns true if the given mode name is enabled, false otherwise.\n  *\n  * @param {String} name\n  * @return {Boolean}\n  * @api public\n  */\n\n\n  function enabled(name) {\n    if (name[name.length - 1] === '*') {\n      return true;\n    }\n\n    var i;\n    var len;\n\n    for (i = 0, len = createDebug.skips.length; i < len; i++) {\n      if (createDebug.skips[i].test(name)) {\n        return false;\n      }\n    }\n\n    for (i = 0, len = createDebug.names.length; i < len; i++) {\n      if (createDebug.names[i].test(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n  * Coerce `val`.\n  *\n  * @param {Mixed} val\n  * @return {Mixed}\n  * @api private\n  */\n\n\n  function coerce(val) {\n    if (val instanceof Error) {\n      return val.stack || val.message;\n    }\n\n    return val;\n  }\n\n  createDebug.enable(createDebug.load());\n  return createDebug;\n}\n\nmodule.exports = setup;\n\n","\"use strict\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n/**\n * Colors.\n */\n\nexports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n// eslint-disable-next-line complexity\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n    return true;\n  } // Internet Explorer and Edge do not support colors.\n\n\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  } // Is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\n  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\n  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n}\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\n\nfunction formatArgs(args) {\n  args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);\n\n  if (!this.useColors) {\n    return;\n  }\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit'); // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if (match === '%%') {\n      return;\n    }\n\n    index++;\n\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n  args.splice(lastC, 0, c);\n}\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\n\nfunction log() {\n  var _console;\n\n  // This hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return (typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) === 'object' && console.log && (_console = console).log.apply(_console, arguments);\n}\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\n\nfunction save(namespaces) {\n  try {\n    if (namespaces) {\n      exports.storage.setItem('debug', namespaces);\n    } else {\n      exports.storage.removeItem('debug');\n    }\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\n\nfunction load() {\n  var r;\n\n  try {\n    r = exports.storage.getItem('debug');\n  } catch (error) {} // Swallow\n  // XXX (@Qix-) should we be logging these?\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\n\nfunction localstorage() {\n  try {\n    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n    // The Browser also has localStorage in the global context.\n    return localStorage;\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n\nmodule.exports = require('./common')(exports);\nvar formatters = module.exports.formatters;\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n  try {\n    return JSON.stringify(v);\n  } catch (error) {\n    return '[UnexpectedJSONParseError]: ' + error.message;\n  }\n};\n\n","/*! https://mths.be/esrever v0.2.0 by @mathias */\n;(function(root) {\n\n\t// Detect free variables `exports`\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code,\n\t// and use it as `root`\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar regexSymbolWithCombiningMarks = /([\\0-\\u02FF\\u0370-\\u1AAF\\u1B00-\\u1DBF\\u1E00-\\u20CF\\u2100-\\uD7FF\\uE000-\\uFE1F\\uFE30-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])([\\u0300-\\u036F\\u1AB0-\\u1AFF\\u1DC0-\\u1DFF\\u20D0-\\u20FF\\uFE20-\\uFE2F]+)/g;\n\tvar regexSurrogatePair = /([\\uD800-\\uDBFF])([\\uDC00-\\uDFFF])/g;\n\n\tvar reverse = function(string) {\n\t\t// Step 1: deal with combining marks and astral symbols (surrogate pairs)\n\t\tstring = string\n\t\t\t// Swap symbols with their combining marks so the combining marks go first\n\t\t\t.replace(regexSymbolWithCombiningMarks, function($0, $1, $2) {\n\t\t\t\t// Reverse the combining marks so they will end up in the same order\n\t\t\t\t// later on (after another round of reversing)\n\t\t\t\treturn reverse($2) + $1;\n\t\t\t})\n\t\t\t// Swap high and low surrogates so the low surrogates go first\n\t\t\t.replace(regexSurrogatePair, '$2$1');\n\t\t// Step 2: reverse the code units in the string\n\t\tvar result = '';\n\t\tvar index = string.length;\n\t\twhile (index--) {\n\t\t\tresult += string.charAt(index);\n\t\t}\n\t\treturn result;\n\t};\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar esrever = {\n\t\t'version': '0.2.0',\n\t\t'reverse': reverse\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn esrever;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = esrever;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in esrever) {\n\t\t\t\tesrever.hasOwnProperty(key) && (freeExports[key] = esrever[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.esrever = esrever;\n\t}\n\n}(this));\n","var basePickBy = require('./_basePickBy'),\n    hasIn = require('./hasIn');\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nmodule.exports = basePick;\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","var flatten = require('./flatten'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nmodule.exports = flatRest;\n","var basePick = require('./_basePick'),\n    flatRest = require('./_flatRest');\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nmodule.exports = pick;\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","var baseGet = require('./_baseGet'),\n    baseSlice = require('./_baseSlice');\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n}\n\nmodule.exports = parent;\n","var castPath = require('./_castPath'),\n    last = require('./last'),\n    parent = require('./_parent'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.unset`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The property path to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n */\nfunction baseUnset(object, path) {\n  path = castPath(path, object);\n  object = parent(object, path);\n  return object == null || delete object[toKey(last(path))];\n}\n\nmodule.exports = baseUnset;\n","var isPlainObject = require('./isPlainObject');\n\n/**\n * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain\n * objects.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {string} key The key of the property to inspect.\n * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.\n */\nfunction customOmitClone(value) {\n  return isPlainObject(value) ? undefined : value;\n}\n\nmodule.exports = customOmitClone;\n","var arrayMap = require('./_arrayMap'),\n    baseClone = require('./_baseClone'),\n    baseUnset = require('./_baseUnset'),\n    castPath = require('./_castPath'),\n    copyObject = require('./_copyObject'),\n    customOmitClone = require('./_customOmitClone'),\n    flatRest = require('./_flatRest'),\n    getAllKeysIn = require('./_getAllKeysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * The opposite of `_.pick`; this method creates an object composed of the\n * own and inherited enumerable property paths of `object` that are not omitted.\n *\n * **Note:** This method is considerably slower than `_.pick`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to omit.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omit(object, ['a', 'c']);\n * // => { 'b': '2' }\n */\nvar omit = flatRest(function(object, paths) {\n  var result = {};\n  if (object == null) {\n    return result;\n  }\n  var isDeep = false;\n  paths = arrayMap(paths, function(path) {\n    path = castPath(path, object);\n    isDeep || (isDeep = path.length > 1);\n    return path;\n  });\n  copyObject(object, getAllKeysIn(object), result);\n  if (isDeep) {\n    result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);\n  }\n  var length = paths.length;\n  while (length--) {\n    baseUnset(result, paths[length]);\n  }\n  return result;\n});\n\nmodule.exports = omit;\n","'use strict';\n\nvar GROUP_LEFT_TO_RIGHT,\n    GROUP_RIGHT_TO_LEFT,\n    EXPRESSION_LEFT_TO_RIGHT,\n    EXPRESSION_RIGHT_TO_LEFT;\n\n/*\n * Character ranges of left-to-right characters.\n */\n\nGROUP_LEFT_TO_RIGHT = 'A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6' +\n    '\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u200E\\u2C00-\\uFB1C' +\n    '\\uFE00-\\uFE6F\\uFEFD-\\uFFFF';\n\n/*\n * Character ranges of right-to-left characters.\n */\n\nGROUP_RIGHT_TO_LEFT = '\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC';\n\n/*\n * Expression to match a left-to-right string.\n *\n * Matches the start of a string, followed by zero or\n * more non-right-to-left characters, followed by a\n * left-to-right character.\n */\n\nEXPRESSION_LEFT_TO_RIGHT = new RegExp(\n    '^[^' + GROUP_RIGHT_TO_LEFT + ']*[' + GROUP_LEFT_TO_RIGHT + ']'\n);\n\n/*\n * Expression to match a right-to-left string.\n *\n * Matches the start of a string, followed by zero or\n * more non-left-to-right characters, followed by a\n * right-to-left character.\n */\n\nEXPRESSION_RIGHT_TO_LEFT = new RegExp(\n    '^[^' + GROUP_LEFT_TO_RIGHT + ']*[' + GROUP_RIGHT_TO_LEFT + ']'\n);\n\n/**\n * Detect the direction of text.\n *\n * @param {string} value - value to stringify and check.\n * @return {string} - One of `\"rtl\"`, `\"ltr\"`, or\n *   `\"neutral\"`.\n */\nfunction direction(value) {\n    value = value.toString();\n\n    if (EXPRESSION_RIGHT_TO_LEFT.test(value)) {\n        return 'rtl';\n    }\n\n    if (EXPRESSION_LEFT_TO_RIGHT.test(value)) {\n        return 'ltr';\n    }\n\n    return 'neutral';\n}\n\n/*\n * Expose `direction`.\n */\n\nmodule.exports = direction;\n","import { List, Record, Map, Set, is, OrderedSet } from 'immutable';\nimport isPlainObject from 'is-plain-object';\nimport warning from 'tiny-warning';\nimport invariant from 'tiny-invariant';\nimport Debug from 'debug';\nimport { reverse } from 'esrever';\nimport pick from 'lodash/pick';\nimport omit from 'lodash/omit';\nimport getDirection from 'direction';\n\n/**\n * An auto-incrementing index for generating keys.\n *\n * @type {Number}\n */\n\nvar n = void 0;\n\n/**\n * The global key generating function.\n *\n * @type {Function}\n */\n\nvar generate = void 0;\n\n/**\n * Create a key, using a provided key if available.\n *\n * @param {String|Void} key\n * @return {String}\n */\n\nfunction create(key) {\n  if (key == null) {\n    return generate();\n  }\n\n  if (typeof key === 'string') {\n    return key;\n  }\n\n  throw new Error('Keys must be strings, but you passed: ' + key);\n}\n\n/**\n * Set a different unique ID generating `function`.\n *\n * @param {Function} func\n */\n\nfunction setGenerator(func) {\n  generate = func;\n}\n\n/**\n * Reset the key generating function to its initial state.\n */\n\nfunction resetGenerator() {\n  n = 0;\n  generate = function generate() {\n    return '' + n++;\n  };\n}\n\n/**\n * Set the initial state.\n */\n\nresetGenerator();\n\n/**\n * Export.\n *\n * @type {Object}\n */\n\nvar KeyUtils = {\n  create: create,\n  setGenerator: setGenerator,\n  resetGenerator: resetGenerator\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\nvar defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n\n\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\n/**\n * Compare paths `path` and `target` to see which is before or after.\n *\n * @param {List} path\n * @param {List} target\n * @return {Number|Null}\n */\n\nfunction compare(path, target) {\n  var m = min(path, target);\n\n  for (var i = 0; i < m; i++) {\n    var pv = path.get(i);\n    var tv = target.get(i);\n\n    // If the path's value is ever less than the target's, it's before.\n    if (pv < tv) return -1;\n\n    // If the target's value is ever less than the path's, it's after.\n    if (pv > tv) return 1;\n  }\n\n  // Paths should now be equal, otherwise something is wrong\n  return path.size === target.size ? 0 : null;\n}\n\n/**\n * Create a path from `attrs`.\n *\n * @param {Array|List} attrs\n * @return {List}\n */\n\nfunction create$1(attrs) {\n  if (attrs == null) {\n    return null;\n  }\n\n  if (List.isList(attrs)) {\n    return attrs;\n  }\n\n  if (Array.isArray(attrs)) {\n    return List(attrs);\n  }\n\n  throw new Error('Paths can only be created from arrays or lists, but you passed: ' + attrs);\n}\n\n/**\n * Crop paths `a` and `b` to an equal size, defaulting to the shortest.\n *\n * @param {List} a\n * @param {List} b\n */\n\nfunction crop(a, b) {\n  var size = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : min(a, b);\n\n  var ca = a.slice(0, size);\n  var cb = b.slice(0, size);\n  return [ca, cb];\n}\n\n/**\n * Decrement a `path` by `n` at `index`, defaulting to the last index.\n *\n * @param {List} path\n * @param {Number} n\n * @param {Number} index\n */\n\nfunction decrement(path) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : path.size - 1;\n\n  return increment(path, 0 - n, index);\n}\n\n/**\n * Get all ancestor paths of th given path.\n *\n * @param {List} path\n * @returns {List}\n */\n\nfunction getAncestors(path) {\n  var ancestors = List().withMutations(function (list) {\n    for (var i = 0; i < path.size; i++) {\n      list.push(path.slice(0, i));\n    }\n  });\n\n  return ancestors;\n}\n\n/**\n * Increment a `path` by `n` at `index`, defaulting to the last index.\n *\n * @param {List} path\n * @param {Number} n\n * @param {Number} index\n */\n\nfunction increment(path) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : path.size - 1;\n\n  var value = path.get(index);\n  var newValue = value + n;\n  var newPath = path.set(index, newValue);\n  return newPath;\n}\n\n/**\n * Is a `path` above another `target` path?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\nfunction isAbove(path, target) {\n  var _crop = crop(path, target),\n      _crop2 = slicedToArray(_crop, 2),\n      p = _crop2[0],\n      t = _crop2[1];\n\n  return path.size < target.size && compare(p, t) === 0;\n}\n\n/**\n * Is a `path` after another `target` path in a document?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\nfunction isAfter(path, target) {\n  var _crop3 = crop(path, target),\n      _crop4 = slicedToArray(_crop3, 2),\n      p = _crop4[0],\n      t = _crop4[1];\n\n  return compare(p, t) === 1;\n}\n\n/**\n * Is a `path` before another `target` path in a document?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\nfunction isBefore(path, target) {\n  var _crop5 = crop(path, target),\n      _crop6 = slicedToArray(_crop5, 2),\n      p = _crop6[0],\n      t = _crop6[1];\n\n  return compare(p, t) === -1;\n}\n\n/**\n * Is a `path` equal to another `target` path in a document?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\nfunction isEqual(path, target) {\n  return path.equals(target);\n}\n\n/**\n * Is a `path` older than a `target` path? Meaning that it ends as an older\n * sibling of one of the indexes in the target.\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\nfunction isOlder(path, target) {\n  var index = path.size - 1;\n\n  var _crop7 = crop(path, target, index),\n      _crop8 = slicedToArray(_crop7, 2),\n      p = _crop8[0],\n      t = _crop8[1];\n\n  var pl = path.get(index);\n  var tl = target.get(index);\n  return isEqual(p, t) && pl > tl;\n}\n\n/**\n * Is an `any` object a path?\n *\n * @param {Mixed} any\n * @return {Boolean}\n */\n\nfunction isPath(any) {\n  return (List.isList(any) || Array.isArray(any)) && any.every(function (n) {\n    return typeof n === 'number';\n  });\n}\n\n/**\n * Is a `path` a sibling of a `target` path?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\nfunction isSibling(path, target) {\n  if (path.size !== target.size) return false;\n  var p = path.butLast();\n  var t = target.butLast();\n  return p.equals(t);\n}\n\n/**\n * Is a `path` younger than a `target` path? Meaning that it ends as a younger\n * sibling of one of the indexes in the target.\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\nfunction isYounger(path, target) {\n  var index = path.size - 1;\n\n  var _crop9 = crop(path, target, index),\n      _crop10 = slicedToArray(_crop9, 2),\n      p = _crop10[0],\n      t = _crop10[1];\n\n  var pl = path.get(index);\n  var tl = target.get(index);\n  return isEqual(p, t) && pl < tl;\n}\n\n/**\n * Lift a `path` to refer to its `n`th ancestor.\n *\n * @param {List} path\n * @return {List}\n */\n\nfunction lift(path) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n  var ancestor = path.slice(0, -1 * n);\n  return ancestor;\n}\n\n/**\n * Drop a `path`, returning a relative path from a depth of `n`.\n *\n * @param {List} path\n * @param {Number} n\n * @return {List}\n */\n\nfunction drop(path) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n  var relative = path.slice(n);\n  return relative;\n}\n\n/**\n * Get the maximum length of paths `a` and `b`.\n *\n * @param {List} path\n * @param {List} path\n * @return {Number}\n */\n\nfunction max(a, b) {\n  var n = Math.max(a.size, b.size);\n  return n;\n}\n\n/**\n * Get the minimum length of paths `a` and `b`.\n *\n * @param {List} path\n * @param {List} path\n * @return {Number}\n */\n\nfunction min(a, b) {\n  var n = Math.min(a.size, b.size);\n  return n;\n}\n\n/**\n * Get the common ancestor path of path `a` and path `b`.\n *\n * @param {List} a\n * @param {List} b\n * @return {List}\n */\n\nfunction relate(a, b) {\n  var array = [];\n\n  for (var i = 0; i < a.size && i < b.size; i++) {\n    var av = a.get(i);\n    var bv = b.get(i);\n\n    // If the values aren't equal, they've diverged and don't share an ancestor.\n    if (av !== bv) break;\n\n    // Otherwise, the current value is still a common ancestor.\n    array.push(av);\n  }\n\n  var path = create$1(array);\n  return path;\n}\n\n/**\n * Transform a `path` by an `operation`, adjusting it to stay current.\n *\n * @param {List} path\n * @param {Operation} operation\n * @return {List<List>}\n */\n\nfunction transform(path, operation) {\n  var type = operation.type,\n      position = operation.position,\n      p = operation.path;\n\n\n  if (type === 'add_mark' || type === 'insert_text' || type === 'remove_mark' || type === 'remove_text' || type === 'set_mark' || type === 'set_node' || type === 'set_selection' || type === 'set_value' || type === 'add_annotation' || type === 'remove_annotation' || type === 'set_annotation' || path.size === 0) {\n    return List([path]);\n  }\n\n  var pIndex = p.size - 1;\n  var pEqual = isEqual(p, path);\n  var pYounger = isYounger(p, path);\n  var pAbove = isAbove(p, path);\n\n  if (type === 'insert_node') {\n    if (pEqual || pYounger || pAbove) {\n      path = increment(path, 1, pIndex);\n    }\n  }\n\n  if (type === 'remove_node') {\n    if (pYounger) {\n      path = decrement(path, 1, pIndex);\n    } else if (pEqual || pAbove) {\n      path = [];\n    }\n  }\n\n  if (type === 'merge_node') {\n    if (pEqual || pYounger) {\n      path = decrement(path, 1, pIndex);\n    } else if (pAbove) {\n      path = decrement(path, 1, pIndex);\n      path = increment(path, position, pIndex + 1);\n    }\n  }\n\n  if (type === 'split_node') {\n    if (pEqual) {\n      path = [path, increment(path)];\n    } else if (pYounger) {\n      path = increment(path, 1, pIndex);\n    } else if (pAbove) {\n      if (path.get(pIndex + 1) >= position) {\n        path = increment(path, 1, pIndex);\n        path = decrement(path, position, pIndex + 1);\n      }\n    }\n  }\n\n  if (type === 'move_node') {\n    var np = operation.newPath;\n\n\n    if (isEqual(p, np)) {\n      return List([path]);\n    }\n\n    if (pAbove || pEqual) {\n      // We are comparing something that was moved\n      // The new path is unaffected unless the old path was the left-sibling of an ancestor\n      if (isYounger(p, np) && p.size < np.size) {\n        path = decrement(np, 1, min(np, p) - 1).concat(path.slice(p.size));\n      } else {\n        path = np.concat(path.slice(p.size));\n      }\n    } else {\n      // This is equivalent logic to remove_node for path\n      if (pYounger) {\n        path = decrement(path, 1, pIndex);\n      }\n\n      // This is the equivalent logic to insert_node for newPath\n      if (isYounger(np, path) || isEqual(np, path) || isAbove(np, path)) {\n        path = increment(path, 1, np.size - 1);\n      }\n    }\n  }\n\n  var paths = Array.isArray(path) ? path : [path];\n  return List(paths);\n}\n\n/**\n * Export.\n *\n * @type {Object}\n */\n\nvar PathUtils = {\n  compare: compare,\n  create: create$1,\n  crop: crop,\n  decrement: decrement,\n  getAncestors: getAncestors,\n  increment: increment,\n  isAbove: isAbove,\n  isAfter: isAfter,\n  isBefore: isBefore,\n  isEqual: isEqual,\n  isOlder: isOlder,\n  isPath: isPath,\n  isSibling: isSibling,\n  isYounger: isYounger,\n  lift: lift,\n  drop: drop,\n  max: max,\n  min: min,\n  relate: relate,\n  transform: transform\n};\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS = {\n  key: undefined,\n  offset: undefined,\n  path: undefined\n\n  /**\n   * Point.\n   *\n   * @type {Point}\n   */\n\n};\nvar Point = function (_Record) {\n  inherits(Point, _Record);\n\n  function Point() {\n    classCallCheck(this, Point);\n    return possibleConstructorReturn(this, (Point.__proto__ || Object.getPrototypeOf(Point)).apply(this, arguments));\n  }\n\n  createClass(Point, [{\n    key: 'isAfterPoint',\n\n\n    /**\n     * Check whether the point is after another `point`.\n     *\n     * @return {Boolean}\n     */\n\n    value: function isAfterPoint(point) {\n      if (this.isUnset) return false;\n      var is$$1 = this.key === point.key && this.offset > point.offset || PathUtils.compare(this.path, point.path) === 1;\n      return is$$1;\n    }\n\n    /**\n     * Check whether the point is after a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAfterRange',\n    value: function isAfterRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.isAfterPoint(range.end);\n      return is$$1;\n    }\n\n    /**\n     * Check whether the point is at the end of a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAtEndOfRange',\n    value: function isAtEndOfRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.equals(range.end);\n      return is$$1;\n    }\n\n    /**\n     * Check whether the point is at the start of a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAtStartOfRange',\n    value: function isAtStartOfRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.equals(range.start);\n      return is$$1;\n    }\n\n    /**\n     * Check whether the point is before another `point`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isBeforePoint',\n    value: function isBeforePoint(point) {\n      if (this.isUnset) return false;\n      var is$$1 = this.key === point.key && this.offset < point.offset || PathUtils.compare(this.path, point.path) === -1;\n      return is$$1;\n    }\n\n    /**\n     * Check whether the point is before a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isBeforeRange',\n    value: function isBeforeRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.isBeforePoint(range.start);\n      return is$$1;\n    }\n\n    /**\n     * Check whether the point is inside a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isInRange',\n    value: function isInRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.equals(range.start) || this.equals(range.end) || this.isAfterPoint(range.start) && this.isBeforePoint(range.end);\n      return is$$1;\n    }\n\n    /**\n     * Check whether the point is at the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAtEndOfNode',\n    value: function isAtEndOfNode(node) {\n      if (this.isUnset) return false;\n      var last = node.getLastText();\n      var is$$1 = this.key === last.key && this.offset === last.text.length;\n      return is$$1;\n    }\n\n    /**\n     * Check whether the point is at the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAtStartOfNode',\n    value: function isAtStartOfNode(node) {\n      if (this.isUnset) return false;\n\n      // PERF: Do a check for a `0` offset first since it's quickest.\n      if (this.offset !== 0) return false;\n\n      var first = node.getFirstText();\n      var is$$1 = this.key === first.key;\n      return is$$1;\n    }\n\n    /**\n     * Check whether the point is in a `node`.\n     *\n     * @param {Node} node\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isInNode',\n    value: function isInNode(node) {\n      if (this.isUnset) return false;\n      if (node.object === 'text' && node.key === this.key) return true;\n      if (node.hasNode(this.key)) return true;\n      return false;\n    }\n\n    /**\n     * Move the point's offset backward `n` characters.\n     *\n     * @param {Number} n (optional)\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveBackward',\n    value: function moveBackward() {\n      var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n      if (n === 0) return this;\n      if (n < 0) return this.moveForward(-n);\n      var point = this.setOffset(this.offset - n);\n      return point;\n    }\n\n    /**\n     * Move the point's offset forward `n` characters.\n     *\n     * @param {Number} n (optional)\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveForward',\n    value: function moveForward() {\n      var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n      if (n === 0) return this;\n      if (n < 0) return this.moveBackward(-n);\n      var point = this.setOffset(this.offset + n);\n      return point;\n    }\n\n    /**\n     * Move the point's anchor point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String|Number} path\n     * @param {Number} offset\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveTo',\n    value: function moveTo(path) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      var key = this.key;\n\n      if (typeof path === 'number') {\n        offset = path;\n        path = this.path;\n      } else if (typeof path === 'string') {\n        key = path;\n        path = key === this.key ? this.path : null;\n      } else {\n        key = path.equals(this.path) ? this.key : null;\n      }\n\n      var point = this.merge({ key: key, path: path, offset: offset });\n      return point;\n    }\n\n    /**\n     * Move the point's anchor point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveToStartOfNode',\n    value: function moveToStartOfNode(node) {\n      var first = node.getFirstText();\n      var point = this.moveTo(first.key, 0);\n      return point;\n    }\n\n    /**\n     * Move the point's anchor point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveToEndOfNode',\n    value: function moveToEndOfNode(node) {\n      var last = node.getLastText();\n      var point = this.moveTo(last.key, last.text.length);\n      return point;\n    }\n\n    /**\n     * Normalize the point relative to a `node`, ensuring that its key and path\n     * reference a text node, or that it gets unset.\n     *\n     * @param {Node} node\n     * @return {Point}\n     */\n\n  }, {\n    key: 'normalize',\n    value: function normalize(node) {\n      // If both the key and path are null, there's no reference to a node, so\n      // make sure it is entirely unset.\n      if (this.key == null && this.path == null) {\n        return this.setOffset(null);\n      }\n\n      var key = this.key,\n          offset = this.offset,\n          path = this.path;\n\n      // PERF: this function gets called a lot.\n      // to avoid creating the key -> path lookup table, we attempt to look up by path first.\n\n      var target = path && node.getNode(path);\n\n      if (!target) {\n        target = node.getNode(key);\n\n        if (target) {\n          // There is a misalignment of path and key\n          var _point = this.merge({\n            path: node.getPath(key)\n          });\n\n          return _point;\n        }\n      }\n\n      if (!target) {\n        warning(false, \"A point's `path` or `key` invalid and was reset!\");\n\n        var text = node.getFirstText();\n        if (!text) return Point.create();\n\n        var _point2 = this.merge({\n          key: text.key,\n          offset: 0,\n          path: node.getPath(text.key)\n        });\n\n        return _point2;\n      }\n\n      if (target.object !== 'text') {\n        warning(false, 'A point should not reference a non-text node!');\n\n        var _text = target.getTextAtOffset(offset);\n        var before = target.getOffset(_text.key);\n        var _point3 = this.merge({\n          offset: offset - before,\n          key: _text.key,\n          path: node.getPath(_text.key)\n        });\n\n        return _point3;\n      }\n\n      if (target && path && key && key !== target.key) {\n        warning(false, \"A point's `key` did not match its `path`!\");\n\n        // TODO: if we look up by path above and it differs by key, do we want to reset it to looking up by key?\n      }\n\n      var point = this.merge({\n        key: target.key,\n        path: path == null ? node.getPath(target.key) : path,\n        offset: offset == null ? 0 : Math.min(offset, target.text.length)\n      });\n\n      // COMPAT: There is an ambiguity, since a point can exist at the end of a\n      // text node, or at the start of the following one. To eliminate it we\n      // enforce that if there is a following text node, we always move it there.\n      if (point.offset === target.text.length) {\n        var block = node.getClosestBlock(point.path);\n        // TODO: this next line is broken because `getNextText` takes a path\n        var next = block.getNextText();\n\n        if (next) {\n          point = point.merge({\n            key: next.key,\n            path: node.getPath(next.key),\n            offset: 0\n          });\n        }\n      }\n\n      return point;\n    }\n\n    /**\n     * Set the point's key to a new `key`.\n     *\n     * @param {String} key\n     * @return {Point}\n     */\n\n  }, {\n    key: 'setKey',\n    value: function setKey(key) {\n      if (key != null) {\n        key = KeyUtils.create(key);\n      }\n\n      var point = this.set('key', key);\n      return point;\n    }\n\n    /**\n     * Set the point's offset to a new `offset`.\n     *\n     * @param {Number} offset\n     * @return {Point}\n     */\n\n  }, {\n    key: 'setOffset',\n    value: function setOffset(offset) {\n      var point = this.set('offset', offset);\n      return point;\n    }\n\n    /**\n     * Set the point's path to a new `path`.\n     *\n     * @param {List|Array} path\n     * @return {Point}\n     */\n\n  }, {\n    key: 'setPath',\n    value: function setPath(path) {\n      if (path != null) {\n        path = PathUtils.create(path);\n      }\n\n      var point = this.set('path', path);\n      return point;\n    }\n\n    /**\n     * Return a JSON representation of the point.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        key: this.key,\n        offset: this.offset,\n        path: this.path && this.path.toArray()\n      };\n\n      if (!options.preserveKeys) {\n        delete object.key;\n      }\n\n      return object;\n    }\n\n    /**\n     * Unset the point.\n     *\n     * @return {Point}\n     */\n\n  }, {\n    key: 'unset',\n    value: function unset() {\n      return this.merge({\n        key: null,\n        offset: null,\n        path: null\n      });\n    }\n  }, {\n    key: 'isSet',\n\n\n    /**\n     * Check whether all properties of the point are set.\n     *\n     * @return {Boolean}\n     */\n\n    get: function get$$1() {\n      return this.key != null && this.offset != null && this.path != null;\n    }\n\n    /**\n     * Check whether any property of the point is not set.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isUnset',\n    get: function get$$1() {\n      return !this.isSet;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Point` with `attrs`.\n     *\n     * @param {Object|Point} attrs\n     * @return {Point}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Point.isPoint(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Point.fromJSON(attrs);\n      }\n\n      throw new Error('`Point.create` only accepts objects or points, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a dictionary of settable point properties from `attrs`.\n     *\n     * @param {Object|Point} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Point.isPoint(a)) {\n        return {\n          key: a.key,\n          offset: a.offset,\n          path: a.path\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('key' in a) p.key = a.key;\n        if ('offset' in a) p.offset = a.offset;\n        if ('path' in a) p.path = PathUtils.create(a.path);\n\n        // If only a path is set, or only a key is set, ensure that the other is\n        // set to null so that it can be normalized back to the right value.\n        // Otherwise we won't realize that the path and key don't match anymore.\n        if ('path' in a && !('key' in a)) p.key = null;\n        if ('key' in a && !('path' in a)) p.path = null;\n\n        return p;\n      }\n\n      throw new Error('`Point.createProperties` only accepts objects or points, but you passed it: ' + a);\n    }\n\n    /**\n     * Create a `Point` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Point}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var _object$key = object.key,\n          key = _object$key === undefined ? null : _object$key,\n          _object$offset = object.offset,\n          offset = _object$offset === undefined ? null : _object$offset,\n          _object$path = object.path,\n          path = _object$path === undefined ? null : _object$path;\n\n\n      var point = new Point({\n        key: key,\n        offset: offset,\n        path: PathUtils.create(path)\n      });\n\n      return point;\n    }\n  }]);\n  return Point;\n}(Record(DEFAULTS));\n\n/**\n * Data.\n *\n * This isn't an immutable record, it's just a thin wrapper around `Map` so that\n * we can allow for more convenient creation.\n *\n * @type {Object}\n */\n\nvar Data = function () {\n  function Data() {\n    classCallCheck(this, Data);\n  }\n\n  createClass(Data, null, [{\n    key: 'create',\n\n    /**\n     * Create a new `Data` with `attrs`.\n     *\n     * @param {Object|Data|Map} attrs\n     * @return {Data} data\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Map.isMap(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Data.fromJSON(attrs);\n      }\n\n      throw new Error('`Data.create` only accepts objects or maps, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a `Data` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Data}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      return new Map(object);\n    }\n\n    /**\n     * Alias `fromJS`.\n     */\n\n  }]);\n  return Data;\n}();\n\n/**\n * Export.\n *\n * @type {Object}\n */\n\nData.fromJS = Data.fromJSON;\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$1 = {\n  data: undefined,\n  type: undefined\n\n  /**\n   * Mark.\n   *\n   * @type {Mark}\n   */\n\n};\nvar Mark = function (_Record) {\n  inherits(Mark, _Record);\n\n  function Mark() {\n    classCallCheck(this, Mark);\n    return possibleConstructorReturn(this, (Mark.__proto__ || Object.getPrototypeOf(Mark)).apply(this, arguments));\n  }\n\n  createClass(Mark, [{\n    key: 'toJSON',\n\n\n    /**\n     * Return a JSON representation of the mark.\n     *\n     * @return {Object}\n     */\n\n    value: function toJSON() {\n      var object = {\n        object: this.object,\n        type: this.type,\n        data: this.data.toJSON()\n      };\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Mark` with `attrs`.\n     *\n     * @param {Object|Mark} attrs\n     * @return {Mark}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Mark.isMark(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = { type: attrs };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Mark.fromJSON(attrs);\n      }\n\n      throw new Error('`Mark.create` only accepts objects, strings or marks, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a set of marks.\n     *\n     * @param {Array<Object|Mark>} elements\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'createSet',\n    value: function createSet(elements) {\n      if (Set.isSet(elements) || Array.isArray(elements)) {\n        var marks = new Set(elements.map(Mark.create));\n        return marks;\n      }\n\n      if (elements == null) {\n        return Set();\n      }\n\n      throw new Error('`Mark.createSet` only accepts sets, arrays or null, but you passed it: ' + elements);\n    }\n\n    /**\n     * Create a dictionary of settable mark properties from `attrs`.\n     *\n     * @param {Object|String|Mark} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Mark.isMark(attrs)) {\n        return {\n          data: attrs.data,\n          type: attrs.type\n        };\n      }\n\n      if (typeof attrs === 'string') {\n        return { type: attrs };\n      }\n\n      if (isPlainObject(attrs)) {\n        var props = {};\n        if ('type' in attrs) props.type = attrs.type;\n        if ('data' in attrs) props.data = Data.create(attrs.data);\n        return props;\n      }\n\n      throw new Error('`Mark.createProperties` only accepts objects, strings or marks, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a `Mark` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Mark}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          type = object.type;\n\n\n      if (typeof type !== 'string') {\n        throw new Error('`Mark.fromJS` requires a `type` string.');\n      }\n\n      var mark = new Mark({\n        type: type,\n        data: new Map(data)\n      });\n\n      return mark;\n    }\n\n    /**\n     * Check if `any` is a set of marks.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isMarkSet',\n    value: function isMarkSet(any) {\n      return Set.isSet(any) && any.every(function (item) {\n        return Mark.isMark(item);\n      });\n    }\n  }]);\n  return Mark;\n}(Record(DEFAULTS$1));\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$2 = {\n  type: undefined,\n  data: undefined,\n  anchor: undefined,\n  focus: undefined\n\n  /**\n   * Decoration.\n   *\n   * @type {Decoration}\n   */\n\n};\nvar Decoration = function (_Record) {\n  inherits(Decoration, _Record);\n\n  function Decoration() {\n    classCallCheck(this, Decoration);\n    return possibleConstructorReturn(this, (Decoration.__proto__ || Object.getPrototypeOf(Decoration)).apply(this, arguments));\n  }\n\n  createClass(Decoration, [{\n    key: 'setProperties',\n\n\n    /**\n     * Set new `properties` on the decoration.\n     *\n     * @param {Object|Range|Selection} properties\n     * @return {Range}\n     */\n\n    value: function setProperties(properties) {\n      properties = Decoration.createProperties(properties);\n      var decoration = this.merge(properties);\n      return decoration;\n    }\n\n    /**\n     * Return a JSON representation of the decoration.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        type: this.type,\n        data: this.data.toJSON(),\n        anchor: this.anchor.toJSON(options),\n        focus: this.focus.toJSON(options)\n      };\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Decoration` with `attrs`.\n     *\n     * @param {Object|Decoration} attrs\n     * @return {Decoration}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Decoration.isDecoration(attrs)) {\n        return attrs;\n      }\n\n      if (Range.isRange(attrs)) {\n        return Decoration.fromJSON(Range.createProperties(attrs));\n      }\n\n      if (isPlainObject(attrs)) {\n        return Decoration.fromJSON(attrs);\n      }\n\n      throw new Error('`Decoration.create` only accepts objects or decorations, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a list of `Ranges` from `elements`.\n     *\n     * @param {Array<Decoration|Object>|List<Decoration|Object>} elements\n     * @return {List<Decoration>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Decoration.create));\n        return list;\n      }\n\n      throw new Error('`Decoration.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n\n    /**\n     * Create a dictionary of settable decoration properties from `attrs`.\n     *\n     * @param {Object|String|Decoration} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Decoration.isDecoration(a)) {\n        return {\n          type: a.type,\n          data: a.data,\n          anchor: Point.createProperties(a.anchor),\n          focus: Point.createProperties(a.focus),\n          mark: Mark.create(a.mark)\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('type' in a) p.type = a.type;\n        if ('data' in a) p.data = Data.create(a.data);\n        if ('anchor' in a) p.anchor = Point.create(a.anchor);\n        if ('focus' in a) p.focus = Point.create(a.focus);\n        return p;\n      }\n\n      throw new Error('`Decoration.createProperties` only accepts objects or decorations, but you passed it: ' + a);\n    }\n\n    /**\n     * Create a `Decoration` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Decoration}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var anchor = object.anchor,\n          focus = object.focus;\n      var type = object.type,\n          data = object.data;\n\n\n      if (object.mark && !type) {\n        warning(false, 'As of slate@0.47 the `decoration.mark` property has been changed to `decoration.type` and `decoration.data` directly.');\n\n        type = object.mark.type;\n        data = object.mark.data;\n      }\n\n      if (!type) {\n        throw new Error('Decorations must be created with a `type`, but you passed: ' + JSON.stringify(object));\n      }\n\n      var decoration = new Decoration({\n        type: type,\n        data: Data.create(data || {}),\n        anchor: Point.fromJSON(anchor || {}),\n        focus: Point.fromJSON(focus || {})\n      });\n\n      return decoration;\n    }\n  }]);\n  return Decoration;\n}(Record(DEFAULTS$2));\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$3 = {\n  anchor: undefined,\n  focus: undefined,\n  isFocused: undefined,\n  marks: undefined\n\n  /**\n   * Selection.\n   *\n   * @type {Selection}\n   */\n\n};\nvar Selection = function (_Record) {\n  inherits(Selection, _Record);\n\n  function Selection() {\n    classCallCheck(this, Selection);\n    return possibleConstructorReturn(this, (Selection.__proto__ || Object.getPrototypeOf(Selection)).apply(this, arguments));\n  }\n\n  createClass(Selection, [{\n    key: 'setIsFocused',\n\n\n    /**\n     * Set the `isFocused` property to a new `value`.\n     *\n     * @param {Boolean} value\n     * @return {Selection}\n     */\n\n    value: function setIsFocused(value) {\n      var selection = this.set('isFocused', value);\n      return selection;\n    }\n\n    /**\n     * Set the `marks` property to a new set of `marks`.\n     *\n     * @param {Set} marks\n     * @return {Selection}\n     */\n\n  }, {\n    key: 'setMarks',\n    value: function setMarks(marks) {\n      var selection = this.set('marks', marks);\n      return selection;\n    }\n\n    /**\n     * Set new `properties` on the selection.\n     *\n     * @param {Object|Range|Selection} properties\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setProperties',\n    value: function setProperties(properties) {\n      properties = Selection.createProperties(properties);\n      var _properties = properties,\n          anchor = _properties.anchor,\n          focus = _properties.focus,\n          props = objectWithoutProperties(_properties, ['anchor', 'focus']);\n\n\n      if (anchor) {\n        props.anchor = Point.create(anchor);\n      }\n\n      if (focus) {\n        props.focus = Point.create(focus);\n      }\n\n      var selection = this.merge(props);\n      return selection;\n    }\n\n    /**\n     * Return a JSON representation of the selection.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        anchor: this.anchor.toJSON(options),\n        focus: this.focus.toJSON(options),\n        isFocused: this.isFocused,\n        marks: this.marks == null ? null : this.marks.toArray().map(function (m) {\n          return m.toJSON();\n        })\n      };\n\n      return object;\n    }\n  }, {\n    key: 'isBlurred',\n\n\n    /**\n     * Check whether the selection is blurred.\n     *\n     * @return {Boolean}\n     */\n\n    get: function get$$1() {\n      return !this.isFocused;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Selection` with `attrs`.\n     *\n     * @param {Object|Selection} attrs\n     * @return {Selection}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Selection.isSelection(attrs)) {\n        return attrs;\n      }\n\n      if (Range.isRange(attrs)) {\n        return Selection.fromJSON(Range.createProperties(attrs));\n      }\n\n      if (isPlainObject(attrs)) {\n        return Selection.fromJSON(attrs);\n      }\n\n      throw new Error('`Selection.create` only accepts objects, ranges or selections, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a dictionary of settable selection properties from `attrs`.\n     *\n     * @param {Object|String|Selection} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Selection.isSelection(a)) {\n        return {\n          anchor: Point.createProperties(a.anchor),\n          focus: Point.createProperties(a.focus),\n          isFocused: a.isFocused,\n          marks: a.marks\n        };\n      }\n\n      if (Range.isRange(a)) {\n        return {\n          anchor: Point.createProperties(a.anchor),\n          focus: Point.createProperties(a.focus)\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('anchor' in a) p.anchor = Point.create(a.anchor);\n        if ('focus' in a) p.focus = Point.create(a.focus);\n        if ('isFocused' in a) p.isFocused = a.isFocused;\n        if ('marks' in a) p.marks = a.marks == null ? null : Mark.createSet(a.marks);\n        return p;\n      }\n\n      throw new Error('`Selection.createProperties` only accepts objects, ranges or selections, but you passed it: ' + a);\n    }\n\n    /**\n     * Create a `Selection` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Selection}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var anchor = object.anchor,\n          focus = object.focus,\n          _object$isFocused = object.isFocused,\n          isFocused = _object$isFocused === undefined ? false : _object$isFocused,\n          _object$marks = object.marks,\n          marks = _object$marks === undefined ? null : _object$marks;\n\n      var selection = new Selection({\n        anchor: Point.fromJSON(anchor || {}),\n        focus: Point.fromJSON(focus || {}),\n        isFocused: isFocused,\n        marks: marks == null ? null : new Set(marks.map(Mark.fromJSON))\n      });\n\n      return selection;\n    }\n  }]);\n  return Selection;\n}(Record(DEFAULTS$3));\n\n/**\n * Slate-specific object types.\n *\n * @type {Object}\n */\n\nvar TYPES = {\n  annotation: '@@__SLATE_ANNOTATION__@@',\n  block: '@@__SLATE_BLOCK__@@',\n  change: '@@__SLATE_CHANGE__@@',\n  decoration: '@@__SLATE_DECORATION__@@',\n  document: '@@__SLATE_DOCUMENT__@@',\n  editor: '@@__SLATE_EDITOR__@@',\n  inline: '@@__SLATE_INLINE__@@',\n  leaf: '@@__SLATE_LEAF__@@',\n  mark: '@@__SLATE_MARK__@@',\n  operation: '@@__SLATE_OPERATION__@@',\n  point: '@@__SLATE_POINT__@@',\n  range: '@@__SLATE_RANGE__@@',\n  selection: '@@__SLATE_SELECTION__@@',\n  text: '@@__SLATE_TEXT__@@',\n  value: '@@__SLATE_VALUE__@@'\n\n  /**\n   * Determine whether a `value` is of `type`.\n   *\n   * @param {string} type\n   * @param {any} value\n   * @return {boolean}\n   */\n\n};function isObject(type, value) {\n  return !!(value && value[TYPES[type]]);\n}\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$4 = {\n  anchor: undefined,\n  focus: undefined\n\n  /**\n   * Range.\n   *\n   * @type {Range}\n   */\n\n};\nvar Range = function (_Record) {\n  inherits(Range, _Record);\n\n  function Range() {\n    classCallCheck(this, Range);\n    return possibleConstructorReturn(this, (Range.__proto__ || Object.getPrototypeOf(Range)).apply(this, arguments));\n  }\n\n  createClass(Range, [{\n    key: 'toJSON',\n\n\n    /**\n     * Return a JSON representation of the range.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        anchor: this.anchor.toJSON(options),\n        focus: this.focus.toJSON(options)\n      };\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Range` with `attrs`.\n     *\n     * @param {Object|Range} attrs\n     * @return {Range}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Range.isRange(attrs)) {\n        if (attrs.object === 'range') {\n          return attrs;\n        } else {\n          return Range.fromJSON(Range.createProperties(attrs));\n        }\n      }\n\n      if (isPlainObject(attrs)) {\n        return Range.fromJSON(attrs);\n      }\n\n      throw new Error('`Range.create` only accepts objects or ranges, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a list of `Ranges` from `elements`.\n     *\n     * @param {Array<Range|Object>|List<Range|Object>} elements\n     * @return {List<Range>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Range.create));\n        return list;\n      }\n\n      throw new Error('`Range.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n\n    /**\n     * Create a dictionary of settable range properties from `attrs`.\n     *\n     * @param {Object|String|Range} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Range.isRange(a)) {\n        return {\n          anchor: Point.createProperties(a.anchor),\n          focus: Point.createProperties(a.focus)\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('anchor' in a) p.anchor = Point.create(a.anchor);\n        if ('focus' in a) p.focus = Point.create(a.focus);\n        return p;\n      }\n\n      throw new Error('`Range.createProperties` only accepts objects, annotations, decorations, ranges or selections, but you passed it: ' + a);\n    }\n\n    /**\n     * Create a `Range` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Range}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var anchor = object.anchor,\n          focus = object.focus;\n\n      var range = new Range({\n        anchor: Point.fromJSON(anchor || {}),\n        focus: Point.fromJSON(focus || {})\n      });\n\n      return range;\n    }\n\n    /**\n     * Check if a `value` is a `Range`, or is range-like.\n     *\n     * @param {Any} value\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isRange',\n    value: function isRange(value) {\n      return isObject('range', value) || Decoration.isDecoration(value) || Selection.isSelection(value);\n    }\n  }]);\n  return Range;\n}(Record(DEFAULTS$4));\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$5 = {\n  key: undefined,\n  type: undefined,\n  data: undefined,\n  anchor: undefined,\n  focus: undefined\n\n  /**\n   * Annotation.\n   *\n   * @type {Annotation}\n   */\n\n};\nvar Annotation = function (_Record) {\n  inherits(Annotation, _Record);\n\n  function Annotation() {\n    classCallCheck(this, Annotation);\n    return possibleConstructorReturn(this, (Annotation.__proto__ || Object.getPrototypeOf(Annotation)).apply(this, arguments));\n  }\n\n  createClass(Annotation, [{\n    key: 'setProperties',\n\n\n    /**\n     * Set new `properties` on the annotation.\n     *\n     * @param {Object|Range|Selection} properties\n     * @return {Range}\n     */\n\n    value: function setProperties(properties) {\n      properties = Annotation.createProperties(properties);\n      var annotation = this.merge(properties);\n      return annotation;\n    }\n\n    /**\n     * Return a JSON representation of the annotation.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        key: this.key,\n        type: this.type,\n        data: this.data.toJSON(),\n        anchor: this.anchor.toJSON(options),\n        focus: this.focus.toJSON(options)\n      };\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Annotation` with `attrs`.\n     *\n     * @param {Object|Annotation} attrs\n     * @return {Annotation}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Annotation.isAnnotation(attrs)) {\n        return attrs;\n      }\n\n      if (Range.isRange(attrs)) {\n        return Annotation.fromJSON(Range.createProperties(attrs));\n      }\n\n      if (isPlainObject(attrs)) {\n        return Annotation.fromJSON(attrs);\n      }\n\n      throw new Error('`Annotation.create` only accepts objects or annotations, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a map of annotations from `elements`.\n     *\n     * @param {Object<String,Annotation>|Map<String,Annotation>} elements\n     * @return {Map<String,Annotation>}\n     */\n\n  }, {\n    key: 'createMap',\n    value: function createMap() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (Map.isMap(elements)) {\n        return elements;\n      }\n\n      if (isPlainObject(elements)) {\n        var obj = {};\n\n        for (var key in elements) {\n          var value = elements[key];\n          var annotation = Annotation.create(value);\n          obj[key] = annotation;\n        }\n\n        return Map(obj);\n      }\n\n      throw new Error('`Annotation.createMap` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n\n    /**\n     * Create a dictionary of settable annotation properties from `attrs`.\n     *\n     * @param {Object|String|Annotation} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Annotation.isAnnotation(a)) {\n        return {\n          key: a.key,\n          type: a.type,\n          data: a.data,\n          anchor: Point.createProperties(a.anchor),\n          focus: Point.createProperties(a.focus)\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('key' in a) p.key = a.key;\n        if ('type' in a) p.type = a.type;\n        if ('data' in a) p.data = Data.create(a.data);\n        if ('anchor' in a) p.anchor = Point.create(a.anchor);\n        if ('focus' in a) p.focus = Point.create(a.focus);\n        return p;\n      }\n\n      throw new Error('`Annotation.createProperties` only accepts objects or annotations, but you passed it: ' + a);\n    }\n\n    /**\n     * Create a `Annotation` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Annotation}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var key = object.key,\n          type = object.type,\n          data = object.data,\n          anchor = object.anchor,\n          focus = object.focus;\n\n\n      if (!key) {\n        throw new Error('Annotations must be created with a `key`, but you passed: ' + JSON.stringify(object));\n      }\n\n      if (!type) {\n        throw new Error('Annotations must be created with a `type`, but you passed: ' + JSON.stringify(object));\n      }\n\n      var annotation = new Annotation({\n        key: key,\n        type: type,\n        data: Data.create(data || {}),\n        anchor: Point.fromJSON(anchor || {}),\n        focus: Point.fromJSON(focus || {})\n      });\n\n      return annotation;\n    }\n  }]);\n  return Annotation;\n}(Record(DEFAULTS$5));\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$6 = {\n  data: undefined,\n  key: undefined,\n  nodes: undefined\n\n  /**\n   * Document.\n   *\n   * @type {Document}\n   */\n\n};\nvar Document = function (_Record) {\n  inherits(Document, _Record);\n\n  function Document() {\n    classCallCheck(this, Document);\n    return possibleConstructorReturn(this, (Document.__proto__ || Object.getPrototypeOf(Document)).apply(this, arguments));\n  }\n\n  createClass(Document, [{\n    key: 'toJSON',\n\n\n    /**\n     * Return a JSON representation of the document.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        data: this.data.toJSON(),\n        nodes: this.nodes.toArray().map(function (n) {\n          return n.toJSON(options);\n        })\n      };\n\n      if (options.preserveKeys) {\n        object.key = this.key;\n      }\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Document` with `attrs`.\n     *\n     * @param {Object|Array|List|Text} attrs\n     * @return {Document}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Document.isDocument(attrs)) {\n        return attrs;\n      }\n\n      if (List.isList(attrs) || Array.isArray(attrs)) {\n        attrs = { nodes: attrs };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Document.fromJSON(attrs);\n      }\n\n      throw new Error('`Document.create` only accepts objects, arrays, lists or documents, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a `Document` from a JSON `object`.\n     *\n     * @param {Object|Document} object\n     * @return {Document}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Document.isDocument(object)) {\n        return object;\n      }\n\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          _object$key = object.key,\n          key = _object$key === undefined ? KeyUtils.create() : _object$key,\n          _object$nodes = object.nodes,\n          nodes = _object$nodes === undefined ? [] : _object$nodes;\n\n\n      var document = new Document({\n        key: key,\n        data: new Map(data),\n        nodes: Node.createList(nodes)\n      });\n\n      return document;\n    }\n  }]);\n  return Document;\n}(Record(DEFAULTS$6));\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$7 = {\n  data: undefined,\n  key: undefined,\n  nodes: undefined,\n  type: undefined\n\n  /**\n   * Inline.\n   *\n   * @type {Inline}\n   */\n\n};\nvar Inline = function (_Record) {\n  inherits(Inline, _Record);\n\n  function Inline() {\n    classCallCheck(this, Inline);\n    return possibleConstructorReturn(this, (Inline.__proto__ || Object.getPrototypeOf(Inline)).apply(this, arguments));\n  }\n\n  createClass(Inline, [{\n    key: 'toJSON',\n\n\n    /**\n     * Return a JSON representation of the inline.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        type: this.type,\n        data: this.data.toJSON(),\n        nodes: this.nodes.toArray().map(function (n) {\n          return n.toJSON(options);\n        })\n      };\n\n      if (options.preserveKeys) {\n        object.key = this.key;\n      }\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Inline` with `attrs`.\n     *\n     * @param {Object|String|Inline} attrs\n     * @return {Inline}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Inline.isInline(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = { type: attrs };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Inline.fromJSON(attrs);\n      }\n\n      throw new Error('`Inline.create` only accepts objects, strings or inlines, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a list of `Inlines` from an array.\n     *\n     * @param {Array<Inline|Object>|List<Inline|Object>} elements\n     * @return {List<Inline>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Inline.create));\n        return list;\n      }\n\n      throw new Error('`Inline.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n\n    /**\n     * Create a `Inline` from a JSON `object`.\n     *\n     * @param {Object|Inline} object\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Inline.isInline(object)) {\n        return object;\n      }\n\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          _object$key = object.key,\n          key = _object$key === undefined ? KeyUtils.create() : _object$key,\n          _object$nodes = object.nodes,\n          nodes = _object$nodes === undefined ? [] : _object$nodes,\n          type = object.type;\n\n\n      if (typeof type !== 'string') {\n        throw new Error('`Inline.fromJS` requires a `type` string.');\n      }\n\n      var inline = new Inline({\n        key: key,\n        type: type,\n        data: new Map(data),\n        nodes: Node.createList(nodes)\n      });\n\n      return inline;\n    }\n\n    /**\n     * Check if `any` is a list of inlines.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isInlineList',\n    value: function isInlineList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Inline.isInline(item);\n      });\n    }\n  }]);\n  return Inline;\n}(Record(DEFAULTS$7));\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$8 = {\n  key: undefined,\n  marks: undefined,\n  text: undefined\n};\n\nvar Leaf = Record({\n  text: undefined,\n  marks: undefined,\n  annotations: undefined,\n  decorations: undefined\n});\n\n/**\n * Text.\n *\n * @type {Text}\n */\n\nvar Text = function (_Record) {\n  inherits(Text, _Record);\n\n  function Text() {\n    classCallCheck(this, Text);\n    return possibleConstructorReturn(this, (Text.__proto__ || Object.getPrototypeOf(Text)).apply(this, arguments));\n  }\n\n  createClass(Text, [{\n    key: 'addMark',\n\n\n    /**\n     * Add a `mark`.\n     *\n     * @param {Mark} mark\n     * @return {Text}\n     */\n\n    value: function addMark(mark) {\n      mark = Mark.create(mark);\n      var marks = this.marks;\n\n      var next = marks.add(mark);\n      var node = this.set('marks', next);\n      return node;\n    }\n\n    /**\n     * Add a set of `marks`.\n     *\n     * @param {Set<Mark>} marks\n     * @return {Text}\n     */\n\n  }, {\n    key: 'addMarks',\n    value: function addMarks(marks) {\n      marks = Mark.createSet(marks);\n      var node = this.set('marks', this.marks.union(marks));\n      return node;\n    }\n\n    /**\n     * Get a list of uniquely-formatted leaves for the text node, given its\n     * existing marks, and its current `annotations` and `decorations`.\n     *\n     * @param {Map<String,Annotation>} annotations\n     * @param {List<Decoration>} decorations\n     * @return {List<Leaf>}\n     */\n\n  }, {\n    key: 'getLeaves',\n    value: function getLeaves(annotations, decorations) {\n      var text = this.text,\n          marks = this.marks;\n\n      var leaves = [{ text: text, marks: marks, annotations: [], decorations: [] }];\n\n      // Helper to split a leaf into two `at` an offset.\n      var split = function split(leaf, at) {\n        return [{\n          text: leaf.text.slice(0, at),\n          marks: leaf.marks,\n          annotations: [].concat(toConsumableArray(leaf.annotations)),\n          decorations: [].concat(toConsumableArray(leaf.decorations))\n        }, {\n          text: leaf.text.slice(at),\n          marks: leaf.marks,\n          annotations: [].concat(toConsumableArray(leaf.annotations)),\n          decorations: [].concat(toConsumableArray(leaf.decorations))\n        }];\n      };\n\n      // Helper to compile the leaves for a `kind` of format.\n      var compile = function compile(kind) {\n        var formats = kind === 'annotations' ? annotations.values() : decorations;\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = formats[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var format = _step.value;\n            var start = format.start,\n                end = format.end;\n\n            var next = [];\n            var o = 0;\n\n            var _iteratorNormalCompletion2 = true;\n            var _didIteratorError2 = false;\n            var _iteratorError2 = undefined;\n\n            try {\n              for (var _iterator2 = leaves[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                var leaf = _step2.value;\n                var length = leaf.text.length;\n\n                var offset = o;\n                o += length;\n\n                // If the range encompases the entire leaf, add the format.\n                if (start.offset <= offset && end.offset >= offset + length) {\n                  leaf[kind].push(format);\n                  next.push(leaf);\n                  continue;\n                }\n\n                // If the range starts after the leaf, or ends before it, continue.\n                if (start.offset > offset + length || end.offset < offset || end.offset === offset && offset !== 0) {\n                  next.push(leaf);\n                  continue;\n                }\n\n                // Otherwise we need to split the leaf, at the start, end, or both,\n                // and add the format to the middle intersecting section. Do the end\n                // split first since we don't need to update the offset that way.\n                var middle = leaf;\n                var before = void 0;\n                var after = void 0;\n\n                if (end.offset < offset + length) {\n                  \n                  var _split = split(middle, end.offset - offset);\n\n                  var _split2 = slicedToArray(_split, 2);\n\n                  middle = _split2[0];\n                  after = _split2[1];\n                }\n\n                if (start.offset > offset) {\n                  \n                  var _split3 = split(middle, start.offset - offset);\n\n                  var _split4 = slicedToArray(_split3, 2);\n\n                  before = _split4[0];\n                  middle = _split4[1];\n                }\n\n                middle[kind].push(format);\n\n                if (before) {\n                  next.push(before);\n                }\n\n                next.push(middle);\n\n                if (after) {\n                  next.push(after);\n                }\n              }\n            } catch (err) {\n              _didIteratorError2 = true;\n              _iteratorError2 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                  _iterator2.return();\n                }\n              } finally {\n                if (_didIteratorError2) {\n                  throw _iteratorError2;\n                }\n              }\n            }\n\n            leaves = next;\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      };\n\n      compile('annotations');\n      compile('decorations');\n\n      leaves = leaves.map(function (leaf) {\n        return new Leaf(_extends({}, leaf, {\n          annotations: List(leaf.annotations),\n          decorations: List(leaf.decorations)\n        }));\n      });\n\n      var list = List(leaves);\n      return list;\n    }\n\n    /**\n     * Insert `text` at `index`.\n     *\n     * @param {Number} index\n     * @param {String} string\n     * @return {Text}\n     */\n\n  }, {\n    key: 'insertText',\n    value: function insertText(index, string) {\n      var text = this.text;\n\n      var next = text.slice(0, index) + string + text.slice(index);\n      var node = this.set('text', next);\n      return node;\n    }\n\n    /**\n     * Remove a `mark`.\n     *\n     * @param {Mark} mark\n     * @return {Text}\n     */\n\n  }, {\n    key: 'removeMark',\n    value: function removeMark(mark) {\n      mark = Mark.create(mark);\n      var marks = this.marks;\n\n      var next = marks.remove(mark);\n      var node = this.set('marks', next);\n      return node;\n    }\n\n    /**\n     * Remove text from the text node at `index` for `length`.\n     *\n     * @param {Number} index\n     * @param {Number} length\n     * @return {Text}\n     */\n\n  }, {\n    key: 'removeText',\n    value: function removeText(index, length) {\n      var text = this.text;\n\n      var next = text.slice(0, index) + text.slice(index + length);\n      var node = this.set('text', next);\n      return node;\n    }\n\n    /**\n     * Return a JSON representation of the text.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        text: this.text,\n        marks: this.marks.toArray().map(function (m) {\n          return m.toJSON();\n        })\n      };\n\n      if (options.preserveKeys) {\n        object.key = this.key;\n      }\n\n      return object;\n    }\n\n    /**\n     * Set a `newProperties` on an existing `mark`.\n     *\n     * @param {Object} mark\n     * @param {Object} newProperties\n     * @return {Text}\n     */\n\n  }, {\n    key: 'setMark',\n    value: function setMark(properties, newProperties) {\n      var marks = this.marks;\n\n      var mark = Mark.create(properties);\n      var newMark = mark.merge(newProperties);\n      var next = marks.remove(mark).add(newMark);\n      var node = this.set('marks', next);\n      return node;\n    }\n\n    /**\n     * Split the node into two at `index`.\n     *\n     * @param {Number} index\n     * @returns {Array<Text>}\n     */\n\n  }, {\n    key: 'splitText',\n    value: function splitText(index) {\n      var text = this.text;\n\n      var one = this.set('text', text.slice(0, index));\n      var two = this.set('text', text.slice(index)).regenerateKey();\n      return [one, two];\n    }\n\n    /**\n     * Merge the node with an `other` text node.\n     *\n     * @param {Text} other\n     * @returns {Text}\n     */\n\n  }, {\n    key: 'mergeText',\n    value: function mergeText(other) {\n      var next = this.text + other.text;\n      var node = this.set('text', next);\n      return node;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Text` with `attrs`.\n     *\n     * @param {Object|Array|List|String|Text} attrs\n     * @return {Text}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n      if (Text.isText(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = { text: attrs };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Text.fromJSON(attrs);\n      }\n\n      throw new Error('`Text.create` only accepts objects, arrays, strings or texts, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a list of `Texts` from `elements`.\n     *\n     * @param {Array<Text|Object>|List<Text|Object>} elements\n     * @return {List<Text>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Text.create));\n        return list;\n      }\n\n      throw new Error('`Text.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n\n    /**\n     * Create a `Text` from a JSON `object`.\n     *\n     * @param {Object|Text} object\n     * @return {Text}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Text.isText(object)) {\n        return object;\n      }\n\n      invariant(object.leaves == null, 'As of slate@0.46, the `leaves` property of text nodes has been removed! Each individual leaf should be created as a text node instead.');\n\n      var _object$text = object.text,\n          text = _object$text === undefined ? '' : _object$text,\n          _object$marks = object.marks,\n          marks = _object$marks === undefined ? [] : _object$marks,\n          _object$key = object.key,\n          key = _object$key === undefined ? KeyUtils.create() : _object$key;\n\n      var node = new Text({\n        key: key,\n        text: text,\n        marks: Mark.createSet(marks)\n      });\n\n      return node;\n    }\n\n    /**\n     * Check if `any` is a listÂ of texts.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isTextList',\n    value: function isTextList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Text.isText(item);\n      });\n    }\n  }]);\n  return Text;\n}(Record(DEFAULTS$8));\n\n/**\n * A pseudo-model that is used for its static methods only.\n *\n * @type {Node}\n */\n\nvar Node = function () {\n  function Node() {\n    classCallCheck(this, Node);\n  }\n\n  createClass(Node, null, [{\n    key: 'create',\n\n    /**\n     * Create a new `Node` with `attrs`.\n     *\n     * @param {Object|Node} attrs\n     * @return {Node}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Node.isNode(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        var object = attrs.object;\n\n\n        if (!object && attrs.kind) {\n          warning(false, 'As of slate@0.32.0, the `kind` property of Slate objects has been renamed to `object`.');\n\n          object = attrs.kind;\n        }\n\n        switch (object) {\n          case 'block':\n            return Block.create(attrs);\n          case 'document':\n            return Document.create(attrs);\n          case 'inline':\n            return Inline.create(attrs);\n          case 'text':\n            return Text.create(attrs);\n\n          default:\n            {\n              throw new Error('`Node.create` requires a `object` string.');\n            }\n        }\n      }\n\n      throw new Error('`Node.create` only accepts objects or nodes but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a list of `Nodes` from an array.\n     *\n     * @param {Array<Object|Node>} elements\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var array = [];\n\n        elements.forEach(function (el) {\n          if (el && el.object === 'text' && el.leaves && Array.isArray(el.leaves)) {\n            warning(false, 'As of slate@0.46, the `leaves` property of Text nodes has been removed. Instead, each text node contains a string of text and a unique set of marks and leaves are unnecessary.');\n\n            var texts = Text.createList(el.leaves).toArray();\n            array = array.concat(texts);\n            return;\n          }\n\n          var node = Node.create(el);\n          array.push(node);\n        });\n\n        var list = List(array);\n        return list;\n      }\n\n      throw new Error('`Node.createList` only accepts lists or arrays, but you passed it: ' + elements);\n    }\n\n    /**\n     * Create a dictionary of settable node properties from `attrs`.\n     *\n     * @param {Object|String|Node} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Block.isBlock(attrs) || Inline.isInline(attrs)) {\n        return {\n          data: attrs.data,\n          type: attrs.type\n        };\n      }\n\n      if (typeof attrs === 'string') {\n        return { type: attrs };\n      }\n\n      if (isPlainObject(attrs)) {\n        var props = {};\n        if ('type' in attrs) props.type = attrs.type;\n        if ('data' in attrs) props.data = Data.create(attrs.data);\n        return props;\n      }\n\n      throw new Error('`Node.createProperties` only accepts objects, strings, blocks or inlines, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a `Node` from a JSON `value`.\n     *\n     * @param {Object} value\n     * @return {Node}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(value) {\n      var object = value.object;\n\n\n      if (!object && value.kind) {\n        warning(false, 'As of slate@0.32.0, the `kind` property of Slate objects has been renamed to `object`.');\n\n        object = value.kind;\n      }\n\n      switch (object) {\n        case 'block':\n          return Block.fromJSON(value);\n        case 'document':\n          return Document.fromJSON(value);\n        case 'inline':\n          return Inline.fromJSON(value);\n        case 'text':\n          return Text.fromJSON(value);\n\n        default:\n          {\n            throw new Error('`Node.fromJSON` requires an `object` of either \\'block\\', \\'document\\', \\'inline\\' or \\'text\\', but you passed: ' + value);\n          }\n      }\n    }\n\n    /**\n     * Check if `any` is a `Node`.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isNode',\n    value: function isNode(any) {\n      return Block.isBlock(any) || Document.isDocument(any) || Inline.isInline(any) || Text.isText(any);\n    }\n\n    /**\n     * Check if `any` is a list of nodes.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isNodeList',\n    value: function isNodeList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Node.isNode(item);\n      });\n    }\n  }]);\n  return Node;\n}();\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$9 = {\n  data: undefined,\n  key: undefined,\n  nodes: undefined,\n  type: undefined\n\n  /**\n   * Block.\n   *\n   * @type {Block}\n   */\n\n};\nvar Block = function (_Record) {\n  inherits(Block, _Record);\n\n  function Block() {\n    classCallCheck(this, Block);\n    return possibleConstructorReturn(this, (Block.__proto__ || Object.getPrototypeOf(Block)).apply(this, arguments));\n  }\n\n  createClass(Block, [{\n    key: 'toJSON',\n\n\n    /**\n     * Return a JSON representation of the block.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        type: this.type,\n        data: this.data.toJSON(),\n        nodes: this.nodes.toArray().map(function (n) {\n          return n.toJSON(options);\n        })\n      };\n\n      if (options.preserveKeys) {\n        object.key = this.key;\n      }\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Block` from `attrs`.\n     *\n     * @param {Object|String|Block} attrs\n     * @return {Block}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Block.isBlock(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = { type: attrs };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Block.fromJSON(attrs);\n      }\n\n      throw new Error('`Block.create` only accepts objects, strings or blocks, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a list of `Blocks` from `attrs`.\n     *\n     * @param {Array<Block|Object>|List<Block|Object>} attrs\n     * @return {List<Block>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(attrs) || Array.isArray(attrs)) {\n        var list = new List(attrs.map(Block.create));\n        return list;\n      }\n\n      throw new Error('`Block.createList` only accepts arrays or lists, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a `Block` from a JSON `object`.\n     *\n     * @param {Object|Block} object\n     * @return {Block}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Block.isBlock(object)) {\n        return object;\n      }\n\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          _object$key = object.key,\n          key = _object$key === undefined ? KeyUtils.create() : _object$key,\n          _object$nodes = object.nodes,\n          nodes = _object$nodes === undefined ? [] : _object$nodes,\n          type = object.type;\n\n\n      if (typeof type !== 'string') {\n        throw new Error('`Block.fromJSON` requires a `type` string.');\n      }\n\n      var block = new Block({\n        key: key,\n        type: type,\n        data: Map(data),\n        nodes: Node.createList(nodes)\n      });\n\n      return block;\n    }\n\n    /**\n     * Check if `any` is a block list.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isBlockList',\n    value: function isBlockList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Block.isBlock(item);\n      });\n    }\n  }]);\n  return Block;\n}(Record(DEFAULTS$9));\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$10 = {\n  annotations: undefined,\n  data: undefined,\n  document: undefined,\n  selection: undefined\n\n  /**\n   * Value.\n   *\n   * @type {Value}\n   */\n\n};\nvar Value = function (_Record) {\n  inherits(Value, _Record);\n\n  function Value() {\n    classCallCheck(this, Value);\n    return possibleConstructorReturn(this, (Value.__proto__ || Object.getPrototypeOf(Value)).apply(this, arguments));\n  }\n\n  createClass(Value, [{\n    key: 'addAnnotation',\n\n\n    /**\n     * Add an `annotation` to the value.\n     *\n     * @param {Annotation} annotation\n     * @param {Mark} mark\n     * @return {Value}\n     */\n\n    value: function addAnnotation(annotation) {\n      annotation = Annotation.create(annotation);\n      var value = this;\n      var _value = value,\n          annotations = _value.annotations,\n          document = _value.document;\n      var _annotation = annotation,\n          key = _annotation.key;\n\n      annotation = annotation.updatePoints(function (point) {\n        return point.normalize(document);\n      });\n      annotations = annotations.set(key, annotation);\n      value = value.set('annotations', annotations);\n      return value;\n    }\n\n    /**\n     * Add `mark` to text at `path`.\n     *\n     * @param {List|String} path\n     * @param {Mark} mark\n     * @return {Value}\n     */\n\n  }, {\n    key: 'addMark',\n    value: function addMark(path, mark) {\n      mark = Mark.create(mark);\n      var value = this;\n      var _value2 = value,\n          document = _value2.document;\n\n      document = document.addMark(path, mark);\n      value = value.set('document', document);\n      return value;\n    }\n\n    /**\n     * Insert a `node`.\n     *\n     * @param {List|String} path\n     * @param {Node} node\n     * @return {Value}\n     */\n\n  }, {\n    key: 'insertNode',\n    value: function insertNode(path, node) {\n      var value = this;\n      var _value3 = value,\n          document = _value3.document;\n\n      document = document.insertNode(path, node);\n      value = value.set('document', document);\n\n      value = value.mapRanges(function (range) {\n        return range.updatePoints(function (point) {\n          return point.setPath(null);\n        });\n      });\n\n      return value;\n    }\n\n    /**\n     * Insert `text` at `offset` in node by `path`.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {String} text\n     * @return {Value}\n     */\n\n  }, {\n    key: 'insertText',\n    value: function insertText(path, offset, text) {\n      var value = this;\n      var _value4 = value,\n          document = _value4.document;\n\n      var node = document.assertNode(path);\n      document = document.insertText(path, offset, text);\n      node = document.assertNode(path);\n      value = value.set('document', document);\n\n      value = value.mapPoints(function (point) {\n        if (point.key === node.key && point.offset >= offset) {\n          return point.setOffset(point.offset + text.length);\n        } else {\n          return point;\n        }\n      });\n\n      return value;\n    }\n\n    /**\n     * Merge a node backwards its previous sibling.\n     *\n     * @param {List|Key} path\n     * @return {Value}\n     */\n\n  }, {\n    key: 'mergeNode',\n    value: function mergeNode(path) {\n      var value = this;\n      var _value5 = value,\n          document = _value5.document;\n\n      var newDocument = document.mergeNode(path);\n      path = document.resolvePath(path);\n      var withPath = PathUtils.decrement(path);\n      var one = document.getNode(withPath);\n      var two = document.getNode(path);\n      value = value.set('document', newDocument);\n\n      value = value.mapRanges(function (range) {\n        if (two.object === 'text') {\n          var max = one.text.length;\n\n          if (range.anchor.key === two.key) {\n            range = range.moveAnchorTo(one.key, max + range.anchor.offset);\n          }\n\n          if (range.focus.key === two.key) {\n            range = range.moveFocusTo(one.key, max + range.focus.offset);\n          }\n        }\n\n        range = range.updatePoints(function (point) {\n          return point.setPath(null);\n        });\n\n        return range;\n      });\n\n      return value;\n    }\n\n    /**\n     * Move a node by `path` to `newPath`.\n     *\n     * A `newIndex` can be provided when move nodes by `key`, to account for not\n     * being able to have a key for a location in the tree that doesn't exist yet.\n     *\n     * @param {List|Key} path\n     * @param {List|Key} newPath\n     * @param {Number} newIndex\n     * @return {Value}\n     */\n\n  }, {\n    key: 'moveNode',\n    value: function moveNode(path, newPath) {\n      var newIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n      var value = this;\n      var _value6 = value,\n          document = _value6.document;\n\n\n      if (PathUtils.isEqual(path, newPath)) {\n        return value;\n      }\n\n      document = document.moveNode(path, newPath, newIndex);\n      value = value.set('document', document);\n      value = value.mapPoints(function (point) {\n        return point.setPath(null);\n      });\n      return value;\n    }\n\n    /**\n     * Remove an `annotation` from the value.\n     *\n     * @param {Annotation} annotation\n     * @param {Mark} mark\n     * @return {Value}\n     */\n\n  }, {\n    key: 'removeAnnotation',\n    value: function removeAnnotation(annotation) {\n      annotation = Annotation.create(annotation);\n      var value = this;\n      var _value7 = value,\n          annotations = _value7.annotations;\n      var _annotation2 = annotation,\n          key = _annotation2.key;\n\n      annotations = annotations.delete(key);\n      value = value.set('annotations', annotations);\n      return value;\n    }\n\n    /**\n     * Remove `mark` at `path`.\n     *\n     * @param {List|String} path\n     * @param {Mark} mark\n     * @return {Value}\n     */\n\n  }, {\n    key: 'removeMark',\n    value: function removeMark(path, mark) {\n      mark = Mark.create(mark);\n      var value = this;\n      var _value8 = value,\n          document = _value8.document;\n\n      document = document.removeMark(path, mark);\n      value = value.set('document', document);\n      return value;\n    }\n\n    /**\n     * Remove a node by `path`.\n     *\n     * @param {List|String} path\n     * @return {Value}\n     */\n\n  }, {\n    key: 'removeNode',\n    value: function removeNode(path) {\n      var value = this;\n      var _value9 = value,\n          document = _value9.document;\n\n      var node = document.assertNode(path);\n      var first = node.object === 'text' ? node : node.getFirstText() || node;\n      var last = node.object === 'text' ? node : node.getLastText() || node;\n      var prev = document.getPreviousText(first.key);\n      var next = document.getNextText(last.key);\n\n      document = document.removeNode(path);\n      value = value.set('document', document);\n\n      value = value.mapRanges(function (range) {\n        var _range = range,\n            anchor = _range.anchor,\n            focus = _range.focus;\n\n\n        if (node.hasNode(anchor.key)) {\n          range = prev ? range.moveAnchorTo(prev.key, prev.text.length) : next ? range.moveAnchorTo(next.key, 0) : range.unset();\n        }\n\n        if (node.hasNode(focus.key)) {\n          range = prev ? range.moveFocusTo(prev.key, prev.text.length) : next ? range.moveFocusTo(next.key, 0) : range.unset();\n        }\n\n        range = range.updatePoints(function (point) {\n          return point.setPath(null);\n        });\n\n        return range;\n      });\n\n      return value;\n    }\n\n    /**\n     * Remove `text` at `offset` in node by `path`.\n     *\n     * @param {List|Key} path\n     * @param {Number} offset\n     * @param {String} text\n     * @return {Value}\n     */\n\n  }, {\n    key: 'removeText',\n    value: function removeText(path, offset, text) {\n      var value = this;\n      var _value10 = value,\n          document = _value10.document;\n\n      var node = document.assertNode(path);\n      document = document.removeText(path, offset, text);\n      value = value.set('document', document);\n\n      var length = text.length;\n\n      var start = offset;\n      var end = offset + length;\n\n      value = value.mapPoints(function (point) {\n        if (point.key !== node.key) {\n          return point;\n        }\n\n        if (point.offset >= end) {\n          return point.setOffset(point.offset - length);\n        }\n\n        if (point.offset > start) {\n          return point.setOffset(start);\n        }\n\n        return point;\n      });\n\n      return value;\n    }\n\n    /**\n     * Add an `annotation` to the value.\n     *\n     * @param {Annotation} annotation\n     * @param {Mark} mark\n     * @return {Value}\n     */\n\n  }, {\n    key: 'setAnnotation',\n    value: function setAnnotation(properties, newProperties) {\n      newProperties = Annotation.createProperties(newProperties);\n      var annotation = Annotation.create(properties);\n      var next = annotation.merge(newProperties);\n      var value = this;\n      var _value11 = value,\n          annotations = _value11.annotations;\n      var key = annotation.key;\n\n      annotations = annotations.set(key, next);\n      value = value.set('annotations', annotations);\n      return value;\n    }\n\n    /**\n     * Set `properties` on a node.\n     *\n     * @param {List|String} path\n     * @param {Object} properties\n     * @return {Value}\n     */\n\n  }, {\n    key: 'setNode',\n    value: function setNode(path, properties) {\n      var value = this;\n      var _value12 = value,\n          document = _value12.document;\n\n      document = document.setNode(path, properties);\n      value = value.set('document', document);\n      return value;\n    }\n\n    /**\n     * Set `properties` on `mark` on text at `offset` and `length` in node.\n     *\n     * @param {List|String} path\n     * @param {Mark} mark\n     * @param {Object} properties\n     * @return {Value}\n     */\n\n  }, {\n    key: 'setMark',\n    value: function setMark(path, mark, properties) {\n      var value = this;\n      var _value13 = value,\n          document = _value13.document;\n\n      document = document.setMark(path, mark, properties);\n      value = value.set('document', document);\n      return value;\n    }\n\n    /**\n     * Set `properties` on the value.\n     *\n     * @param {Object} properties\n     * @return {Value}\n     */\n\n  }, {\n    key: 'setProperties',\n    value: function setProperties(properties) {\n      var value = this;\n      var _value14 = value,\n          document = _value14.document;\n      var data = properties.data,\n          annotations = properties.annotations;\n\n      var props = {};\n\n      if (data) {\n        props.data = data;\n      }\n\n      if (annotations) {\n        props.annotations = annotations.map(function (a) {\n          return a.isSet ? a : document.resolveAnnotation(a);\n        });\n      }\n\n      value = value.merge(props);\n      return value;\n    }\n\n    /**\n     * Set `properties` on the selection.\n     *\n     * @param {Value} value\n     * @param {Operation} operation\n     * @return {Value}\n     */\n\n  }, {\n    key: 'setSelection',\n    value: function setSelection(properties) {\n      var value = this;\n      var _value15 = value,\n          document = _value15.document,\n          selection = _value15.selection;\n\n      var next = selection.setProperties(properties);\n      selection = document.resolveSelection(next);\n      value = value.set('selection', selection);\n      return value;\n    }\n\n    /**\n     * Split a node by `path` at `position` with optional `properties` to apply\n     * to the newly split node.\n     *\n     * @param {List|String} path\n     * @param {Number} position\n     * @param {Object} properties\n     * @return {Value}\n     */\n\n  }, {\n    key: 'splitNode',\n    value: function splitNode(path, position, properties) {\n      var value = this;\n      var _value16 = value,\n          document = _value16.document;\n\n      var newDocument = document.splitNode(path, position, properties);\n      var node = document.assertNode(path);\n      value = value.set('document', newDocument);\n\n      value = value.mapRanges(function (range) {\n        var next = newDocument.getNextText(node.key);\n        var _range2 = range,\n            anchor = _range2.anchor,\n            focus = _range2.focus;\n\n        // If the anchor was after the split, move it to the next node.\n\n        if (node.key === anchor.key && position <= anchor.offset) {\n          range = range.moveAnchorTo(next.key, anchor.offset - position);\n        }\n\n        // If the focus was after the split, move it to the next node.\n        if (node.key === focus.key && position <= focus.offset) {\n          range = range.moveFocusTo(next.key, focus.offset - position);\n        }\n\n        range = range.updatePoints(function (point) {\n          return point.setPath(null);\n        });\n\n        return range;\n      });\n\n      return value;\n    }\n\n    /**\n     * Map all range objects to apply adjustments with an `iterator`.\n     *\n     * @param {Function} iterator\n     * @return {Value}\n     */\n\n  }, {\n    key: 'mapRanges',\n    value: function mapRanges(iterator) {\n      var value = this;\n      var _value17 = value,\n          document = _value17.document,\n          selection = _value17.selection,\n          annotations = _value17.annotations;\n\n\n      var sel = selection.isSet ? iterator(selection) : selection;\n      if (!sel) sel = selection.unset();\n      if (sel !== selection) sel = document.createSelection(sel);\n      value = value.set('selection', sel);\n\n      var anns = annotations.map(function (annotation) {\n        var n = annotation.isSet ? iterator(annotation) : annotation;\n        if (n && n !== annotation) n = document.createAnnotation(n);\n        return n;\n      });\n\n      anns = anns.filter(function (annotation) {\n        return !!annotation;\n      });\n      value = value.set('annotations', anns);\n      return value;\n    }\n  }, {\n    key: 'mapPoints',\n    value: function mapPoints(iterator) {\n      return this.mapRanges(function (range) {\n        return range.updatePoints(iterator);\n      });\n    }\n\n    /**\n     * Return a JSON representation of the value.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        document: this.document.toJSON(options)\n      };\n\n      if (options.preserveData) {\n        object.data = this.data.toJSON(options);\n      }\n\n      if (options.preserveAnnotations) {\n        object.annotations = this.annotations.map(function (a) {\n          return a.toJSON(options);\n        }).toObject();\n      }\n\n      if (options.preserveSelection) {\n        object.selection = this.selection.toJSON(options);\n      }\n\n      return object;\n    }\n\n    /**\n     * Deprecated.\n     */\n\n  }, {\n    key: 'change',\n    value: function change() {\n      invariant(false, 'As of Slate 0.42.0, value object are no longer schema-aware, and the `value.change()` method is no longer available. Use the `editor.change()` method on the new `Editor` controller instead.');\n    }\n  }, {\n    key: 'startBlock',\n\n\n    /**\n     * Get the current start text node's closest block parent.\n     *\n     * @return {Block}\n     */\n\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getClosestBlock(this.selection.start.key);\n    }\n\n    /**\n     * Get the current end text node's closest block parent.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'endBlock',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getClosestBlock(this.selection.end.key);\n    }\n\n    /**\n     * Get the current anchor text node's closest block parent.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'anchorBlock',\n    get: function get$$1() {\n      return this.selection.anchor.key && this.document.getClosestBlock(this.selection.anchor.key);\n    }\n\n    /**\n     * Get the current focus text node's closest block parent.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'focusBlock',\n    get: function get$$1() {\n      return this.selection.focus.key && this.document.getClosestBlock(this.selection.focus.key);\n    }\n\n    /**\n     * Get the current start text node's closest inline parent.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'startInline',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getClosestInline(this.selection.start.key);\n    }\n\n    /**\n     * Get the current end text node's closest inline parent.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'endInline',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getClosestInline(this.selection.end.key);\n    }\n\n    /**\n     * Get the current anchor text node's closest inline parent.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'anchorInline',\n    get: function get$$1() {\n      return this.selection.anchor.key && this.document.getClosestInline(this.selection.anchor.key);\n    }\n\n    /**\n     * Get the current focus text node's closest inline parent.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'focusInline',\n    get: function get$$1() {\n      return this.selection.focus.key && this.document.getClosestInline(this.selection.focus.key);\n    }\n\n    /**\n     * Get the current start text node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'startText',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getDescendant(this.selection.start.key);\n    }\n\n    /**\n     * Get the current end node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'endText',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getDescendant(this.selection.end.key);\n    }\n\n    /**\n     * Get the current anchor node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'anchorText',\n    get: function get$$1() {\n      return this.selection.anchor.key && this.document.getDescendant(this.selection.anchor.key);\n    }\n\n    /**\n     * Get the current focus node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'focusText',\n    get: function get$$1() {\n      return this.selection.focus.key && this.document.getDescendant(this.selection.focus.key);\n    }\n\n    /**\n     * Get the next block node.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'nextBlock',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getNextBlock(this.selection.end.key);\n    }\n\n    /**\n     * Get the previous block node.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'previousBlock',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getPreviousBlock(this.selection.start.key);\n    }\n\n    /**\n     * Get the next inline node.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'nextInline',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getNextInline(this.selection.end.key);\n    }\n\n    /**\n     * Get the previous inline node.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'previousInline',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getPreviousInline(this.selection.start.key);\n    }\n\n    /**\n     * Get the next text node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'nextText',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getNextText(this.selection.end.key);\n    }\n\n    /**\n     * Get the previous text node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'previousText',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getPreviousText(this.selection.start.key);\n    }\n\n    /**\n     * Get the marks of the current selection.\n     *\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'marks',\n    get: function get$$1() {\n      return this.selection.isUnset ? new Set() : this.selection.marks || this.document.getMarksAtRange(this.selection);\n    }\n\n    /**\n     * Get the active marks of the current selection.\n     *\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'activeMarks',\n    get: function get$$1() {\n      return this.selection.isUnset ? new Set() : this.selection.marks || this.document.getActiveMarksAtRange(this.selection);\n    }\n\n    /**\n     * Get the block nodes in the current selection.\n     *\n     * @return {List<Block>}\n     */\n\n  }, {\n    key: 'blocks',\n    get: function get$$1() {\n      return this.selection.isUnset ? new List() : this.document.getLeafBlocksAtRange(this.selection);\n    }\n\n    /**\n     * Get the fragment of the current selection.\n     *\n     * @return {Document}\n     */\n\n  }, {\n    key: 'fragment',\n    get: function get$$1() {\n      return this.selection.isUnset ? Document.create() : this.document.getFragmentAtRange(this.selection);\n    }\n\n    /**\n     * Get the bottom-most inline nodes in the current selection.\n     *\n     * @return {List<Inline>}\n     */\n\n  }, {\n    key: 'inlines',\n    get: function get$$1() {\n      return this.selection.isUnset ? new List() : this.document.getLeafInlinesAtRange(this.selection);\n    }\n\n    /**\n     * Get the text nodes in the current selection.\n     *\n     * @return {List<Text>}\n     */\n\n  }, {\n    key: 'texts',\n    get: function get$$1() {\n      return this.selection.isUnset ? new List() : this.document.getTextsAtRange(this.selection);\n    }\n  }, {\n    key: 'history',\n    get: function get$$1() {\n      invariant(false, 'As of Slate 0.42.0, the `value.history` model no longer exists, and the history is stored in `value.data` instead using plugins.');\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Value` with `attrs`.\n     *\n     * @param {Object|Value} attrs\n     * @param {Object} options\n     * @return {Value}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (Value.isValue(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Value.fromJSON(attrs, options);\n      }\n\n      throw new Error('`Value.create` only accepts objects or values, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a dictionary of settable value properties from `attrs`.\n     *\n     * @param {Object|Value} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Value.isValue(a)) {\n        return {\n          annotations: a.annotations,\n          data: a.data\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('annotations' in a) p.annotations = Annotation.createMap(a.annotations);\n        if ('data' in a) p.data = Data.create(a.data);\n        return p;\n      }\n\n      throw new Error('`Value.createProperties` only accepts objects or values, but you passed it: ' + a);\n    }\n\n    /**\n     * Create a `Value` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @param {Object} options\n     *   @property {Boolean} normalize\n     *   @property {Array} plugins\n     * @return {Value}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          _object$annotations = object.annotations,\n          annotations = _object$annotations === undefined ? {} : _object$annotations,\n          _object$document = object.document,\n          document = _object$document === undefined ? {} : _object$document,\n          _object$selection = object.selection,\n          selection = _object$selection === undefined ? {} : _object$selection;\n\n      data = Data.fromJSON(data);\n      document = Document.fromJSON(document);\n      selection = document.createSelection(selection);\n      annotations = Annotation.createMap(annotations);\n\n      if (selection.isUnset) {\n        var text = document.getFirstText();\n        if (text) selection = selection.moveToStartOfNode(text);\n        selection = document.createSelection(selection);\n      }\n\n      var value = new Value({\n        annotations: annotations,\n        data: data,\n        document: document,\n        selection: selection\n      });\n\n      return value;\n    }\n  }]);\n  return Value;\n}(Record(DEFAULTS$10));\n\n/**\n * Debug.\n *\n * @type {Function}\n */\n\nvar debug = Debug('slate:operation:apply');\n\n/**\n * Apply an `op` to a `value`.\n *\n * @param {Value} value\n * @param {Object|Operation} op\n * @return {Value} value\n */\n\nfunction applyOperation(value, op) {\n  op = Operation.create(op);\n  var _op = op,\n      type = _op.type;\n\n  debug(type, op);\n\n  switch (type) {\n    case 'add_annotation':\n      {\n        var _op2 = op,\n            annotation = _op2.annotation;\n\n        var next = value.addAnnotation(annotation);\n        return next;\n      }\n\n    case 'add_mark':\n      {\n        var _op3 = op,\n            path = _op3.path,\n            mark = _op3.mark;\n\n        var _next = value.addMark(path, mark);\n        return _next;\n      }\n\n    case 'insert_node':\n      {\n        var _op4 = op,\n            _path = _op4.path,\n            node = _op4.node;\n\n        var _next2 = value.insertNode(_path, node);\n        return _next2;\n      }\n\n    case 'insert_text':\n      {\n        var _op5 = op,\n            _path2 = _op5.path,\n            offset = _op5.offset,\n            text = _op5.text,\n            marks = _op5.marks;\n\n        var _next3 = value.insertText(_path2, offset, text, marks);\n        return _next3;\n      }\n\n    case 'merge_node':\n      {\n        var _op6 = op,\n            _path3 = _op6.path;\n\n        var _next4 = value.mergeNode(_path3);\n        return _next4;\n      }\n\n    case 'move_node':\n      {\n        var _op7 = op,\n            _path4 = _op7.path,\n            newPath = _op7.newPath;\n\n        var _next5 = value.moveNode(_path4, newPath);\n        return _next5;\n      }\n\n    case 'remove_annotation':\n      {\n        var _op8 = op,\n            _annotation = _op8.annotation;\n\n        var _next6 = value.removeAnnotation(_annotation);\n        return _next6;\n      }\n\n    case 'remove_mark':\n      {\n        var _op9 = op,\n            _path5 = _op9.path,\n            _mark = _op9.mark;\n\n        var _next7 = value.removeMark(_path5, _mark);\n        return _next7;\n      }\n\n    case 'remove_node':\n      {\n        var _op10 = op,\n            _path6 = _op10.path;\n\n        var _next8 = value.removeNode(_path6);\n        return _next8;\n      }\n\n    case 'remove_text':\n      {\n        var _op11 = op,\n            _path7 = _op11.path,\n            _offset = _op11.offset,\n            _text = _op11.text;\n\n        var _next9 = value.removeText(_path7, _offset, _text);\n        return _next9;\n      }\n\n    case 'set_annotation':\n      {\n        var _op12 = op,\n            properties = _op12.properties,\n            newProperties = _op12.newProperties;\n\n        var _next10 = value.setAnnotation(properties, newProperties);\n        return _next10;\n      }\n\n    case 'set_mark':\n      {\n        var _op13 = op,\n            _path8 = _op13.path,\n            _properties = _op13.properties,\n            _newProperties = _op13.newProperties;\n\n        var _next11 = value.setMark(_path8, _properties, _newProperties);\n        return _next11;\n      }\n\n    case 'set_node':\n      {\n        var _op14 = op,\n            _path9 = _op14.path,\n            _newProperties2 = _op14.newProperties;\n\n        var _next12 = value.setNode(_path9, _newProperties2);\n        return _next12;\n      }\n\n    case 'set_selection':\n      {\n        var _op15 = op,\n            _newProperties3 = _op15.newProperties;\n\n        var _next13 = value.setSelection(_newProperties3);\n        return _next13;\n      }\n\n    case 'set_value':\n      {\n        var _op16 = op,\n            _newProperties4 = _op16.newProperties;\n\n        var _next14 = value.setProperties(_newProperties4);\n        return _next14;\n      }\n\n    case 'split_node':\n      {\n        var _op17 = op,\n            _path10 = _op17.path,\n            position = _op17.position,\n            _properties2 = _op17.properties;\n\n        var _next15 = value.splitNode(_path10, position, _properties2);\n        return _next15;\n      }\n\n    default:\n      {\n        throw new Error('Unknown operation type: \"' + type + '\".');\n      }\n  }\n}\n\n/**\n * Debug.\n *\n * @type {Function}\n */\n\nvar debug$1 = Debug('slate:operation:invert');\n\n/**\n * Invert an `op`.\n *\n * @param {Object} op\n * @return {Object}\n */\n\nfunction invertOperation(op) {\n  op = Operation.create(op);\n  var _op = op,\n      type = _op.type;\n\n  debug$1(type, op);\n\n  switch (type) {\n    case 'move_node':\n      {\n        var _op2 = op,\n            newPath = _op2.newPath,\n            path = _op2.path;\n\n        // PERF: this case can exit early.\n\n        if (PathUtils.isEqual(newPath, path)) {\n          return op;\n        }\n\n        var inversePath = PathUtils.transform(path, op).first();\n\n        // Get the true path we are trying to move back to\n        // We transform the right-sibling of the path\n        // This will end up at the operation.path most of the time\n        // But if the newPath is a left-sibling or left-ancestor-sibling, this will account for it\n        var inverseNewPath = PathUtils.transform(PathUtils.increment(path), op).first();\n\n        var inverse = op.set('path', inversePath).set('newPath', inverseNewPath);\n        return inverse;\n      }\n\n    case 'merge_node':\n      {\n        var _op3 = op,\n            _path = _op3.path;\n\n        var _inversePath = PathUtils.decrement(_path);\n        var _inverse = op.set('type', 'split_node').set('path', _inversePath);\n        return _inverse;\n      }\n\n    case 'split_node':\n      {\n        var _op4 = op,\n            _path2 = _op4.path;\n\n        var _inversePath2 = PathUtils.increment(_path2);\n        var _inverse2 = op.set('type', 'merge_node').set('path', _inversePath2);\n        return _inverse2;\n      }\n\n    case 'set_annotation':\n    case 'set_node':\n    case 'set_value':\n    case 'set_selection':\n    case 'set_mark':\n      {\n        var _op5 = op,\n            properties = _op5.properties,\n            newProperties = _op5.newProperties;\n\n        var _inverse3 = op.set('properties', newProperties).set('newProperties', properties);\n        return _inverse3;\n      }\n\n    case 'insert_node':\n    case 'insert_text':\n      {\n        var _inverse4 = op.set('type', type.replace('insert_', 'remove_'));\n        return _inverse4;\n      }\n\n    case 'remove_node':\n    case 'remove_text':\n      {\n        var _inverse5 = op.set('type', type.replace('remove_', 'insert_'));\n        return _inverse5;\n      }\n\n    case 'add_annotation':\n    case 'add_mark':\n      {\n        var _inverse6 = op.set('type', type.replace('add_', 'remove_'));\n        return _inverse6;\n      }\n\n    case 'remove_annotation':\n    case 'remove_mark':\n      {\n        var _inverse7 = op.set('type', type.replace('remove_', 'add_'));\n        return _inverse7;\n      }\n\n    default:\n      {\n        throw new Error('Unknown operation type: \"' + type + '\".');\n      }\n  }\n}\n\n/**\n * Operation attributes.\n *\n * @type {Array}\n */\n\nvar OPERATION_ATTRIBUTES = {\n  add_mark: ['path', 'mark', 'data'],\n  add_annotation: ['annotation', 'data'],\n  insert_node: ['path', 'node', 'data'],\n  insert_text: ['path', 'offset', 'text', 'data'],\n  merge_node: ['path', 'position', 'properties', 'target', 'data'],\n  move_node: ['path', 'newPath', 'data'],\n  remove_annotation: ['annotation', 'data'],\n  remove_mark: ['path', 'mark', 'data'],\n  remove_node: ['path', 'node', 'data'],\n  remove_text: ['path', 'offset', 'text', 'data'],\n  set_annotation: ['properties', 'newProperties', 'data'],\n  set_mark: ['path', 'properties', 'newProperties', 'data'],\n  set_node: ['path', 'properties', 'newProperties', 'data'],\n  set_selection: ['properties', 'newProperties', 'data'],\n  set_value: ['properties', 'newProperties', 'data'],\n  split_node: ['path', 'position', 'properties', 'target', 'data']\n\n  /**\n   * Default properties.\n   *\n   * @type {Object}\n   */\n\n};var DEFAULTS$11 = {\n  annotation: undefined,\n  data: undefined,\n  length: undefined,\n  mark: undefined,\n  marks: undefined,\n  newPath: undefined,\n  newProperties: undefined,\n  node: undefined,\n  offset: undefined,\n  path: undefined,\n  position: undefined,\n  properties: undefined,\n  target: undefined,\n  text: undefined,\n  type: undefined\n\n  /**\n   * Operation.\n   *\n   * @type {Operation}\n   */\n\n};\nvar Operation = function (_Record) {\n  inherits(Operation, _Record);\n\n  function Operation() {\n    classCallCheck(this, Operation);\n    return possibleConstructorReturn(this, (Operation.__proto__ || Object.getPrototypeOf(Operation)).apply(this, arguments));\n  }\n\n  createClass(Operation, [{\n    key: 'apply',\n\n\n    /**\n     * Apply the operation to a `value`.\n     *\n     * @param {Value} value\n     * @return {Value}\n     */\n\n    value: function apply(value) {\n      var next = applyOperation(value, this);\n      return next;\n    }\n\n    /**\n     * Invert the operation.\n     *\n     * @return {Operation}\n     */\n\n  }, {\n    key: 'invert',\n    value: function invert() {\n      var inverted = invertOperation(this);\n      return inverted;\n    }\n\n    /**\n     * Return a JSON representation of the operation.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var object = this.object,\n          type = this.type;\n\n      var json = { object: object, type: type };\n      var ATTRIBUTES = OPERATION_ATTRIBUTES[type];\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = ATTRIBUTES[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var key = _step.value;\n\n          var value = this[key];\n\n          if (key === 'annotation' || key === 'mark' || key === 'marks' || key === 'node' || key === 'path' || key === 'newPath') {\n            value = value.toJSON();\n          }\n\n          if (key === 'properties' && type === 'merge_node') {\n            var v = {};\n            if ('data' in value) v.data = value.data.toJS();\n            if ('type' in value) v.type = value.type;\n            value = v;\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_annotation') {\n            var _v = {};\n            if ('anchor' in value) _v.anchor = value.anchor.toJS();\n            if ('focus' in value) _v.focus = value.focus.toJS();\n            if ('key' in value) _v.key = value.key;\n            if ('data' in value) _v.data = value.data.toJS();\n            if ('type' in value) _v.type = value.type;\n            value = _v;\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_mark') {\n            var _v2 = {};\n            if ('data' in value) _v2.data = value.data.toJS();\n            if ('type' in value) _v2.type = value.type;\n            value = _v2;\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_node') {\n            var _v3 = {};\n            if ('data' in value) _v3.data = value.data.toJS();\n            if ('type' in value) _v3.type = value.type;\n            value = _v3;\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_selection') {\n            var _v4 = {};\n            if ('anchor' in value) _v4.anchor = value.anchor.toJSON();\n            if ('focus' in value) _v4.focus = value.focus.toJSON();\n            if ('isFocused' in value) _v4.isFocused = value.isFocused;\n            if ('marks' in value) _v4.marks = value.marks && value.marks.toJSON();\n            value = _v4;\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_value') {\n            var _v5 = {};\n            if ('data' in value) _v5.data = value.data.toJS();\n            value = _v5;\n          }\n\n          if (key === 'properties' && type === 'split_node') {\n            var _v6 = {};\n            if ('data' in value) _v6.data = value.data.toJS();\n            if ('type' in value) _v6.type = value.type;\n            value = _v6;\n          }\n\n          if (key === 'data') {\n            value = value.toJSON();\n          }\n\n          json[key] = value;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return json;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Operation` with `attrs`.\n     *\n     * @param {Object|Array|List|String|Operation} attrs\n     * @return {Operation}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Operation.isOperation(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Operation.fromJSON(attrs);\n      }\n\n      throw new Error('`Operation.create` only accepts objects or operations, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a list of `Operations` from `elements`.\n     *\n     * @param {Array<Operation|Object>|List<Operation|Object>} elements\n     * @return {List<Operation>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Operation.create));\n        return list;\n      }\n\n      throw new Error('`Operation.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n\n    /**\n     * Create a `Operation` from a JSON `object`.\n     *\n     * @param {Object|Operation} object\n     * @return {Operation}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Operation.isOperation(object)) {\n        return object;\n      }\n\n      var type = object.type;\n\n      var ATTRIBUTES = OPERATION_ATTRIBUTES[type];\n      var attrs = { type: type };\n\n      if (!ATTRIBUTES) {\n        throw new Error('`Operation.fromJSON` was passed an unrecognized operation type: \"' + type + '\"');\n      }\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = ATTRIBUTES[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var key = _step2.value;\n\n          var v = object[key];\n\n          // Default `data` to an empty object.\n          if (key === 'data' && v === undefined) {\n            v = {};\n          }\n\n          if (v === undefined) {\n            throw new Error('`Operation.fromJSON` was passed a \"' + type + '\" operation without the required \"' + key + '\" attribute.');\n          }\n\n          if (key === 'annotation') {\n            v = Annotation.create(v);\n          }\n\n          if (key === 'path' || key === 'newPath') {\n            v = PathUtils.create(v);\n          }\n\n          if (key === 'mark') {\n            v = Mark.create(v);\n          }\n\n          if (key === 'node') {\n            v = Node.create(v);\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_annotation') {\n            v = Annotation.createProperties(v);\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_mark') {\n            v = Mark.createProperties(v);\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && (type === 'set_node' || type === 'merge_node' || type === 'split_node')) {\n            v = Node.createProperties(v);\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_selection') {\n            v = Selection.createProperties(v);\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_value') {\n            v = Value.createProperties(v);\n          }\n\n          if (key === 'data') {\n            v = Map(v);\n          }\n\n          attrs[key] = v;\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      var op = new Operation(attrs);\n      return op;\n    }\n\n    /**\n     * Check if `any` is a listÂ of operations.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isOperationList',\n    value: function isOperationList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Operation.isOperation(item);\n      });\n    }\n  }]);\n  return Operation;\n}(Record(DEFAULTS$11));\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$12 = {\n  operations: undefined,\n  value: undefined\n\n  /**\n   * Change.\n   *\n   * @type {Change}\n   */\n\n};\nvar Change = function (_Record) {\n  inherits(Change, _Record);\n\n  function Change() {\n    classCallCheck(this, Change);\n    return possibleConstructorReturn(this, (Change.__proto__ || Object.getPrototypeOf(Change)).apply(this, arguments));\n  }\n\n  createClass(Change, [{\n    key: 'toJSON',\n\n\n    /**\n     * Return a JSON representation of the change.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        value: this.value.toJSON(options),\n        operations: this.operations.toArray().map(function (o) {\n          return o.toJSON(options);\n        })\n      };\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Change` with `attrs`.\n     *\n     * @param {Object|Change} attrs\n     * @return {Change}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Change.isChange(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Change.fromJSON(attrs);\n      }\n\n      throw new Error('`Change.create` only accepts objects or changes, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a `Change` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Change}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var value = object.value,\n          _object$operations = object.operations,\n          operations = _object$operations === undefined ? [] : _object$operations;\n\n\n      var change = new Change({\n        value: Value.create(value),\n        operations: Operation.createList(operations)\n      });\n\n      return change;\n    }\n  }]);\n  return Change;\n}(Record(DEFAULTS$12));\n\n/**\n * A plugin that adds a set of commands to the editor.\n *\n * @param {Object} commands\n * @return {Object}\n */\n\nfunction CommandsPlugin() {\n  var commands = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  /**\n   * On command, if it exists in our list of commands, call it.\n   *\n   * @param {Object} command\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n  function onCommand(command, editor, next) {\n    var type = command.type,\n        args = command.args;\n\n    var fn = commands[type];\n    if (!fn) return next();\n    editor.command.apply(editor, [fn].concat(toConsumableArray(args)));\n  }\n\n  /**\n   * On construct, register all the commands.\n   *\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n  function onConstruct(editor, next) {\n    for (var command in commands) {\n      editor.registerCommand(command);\n    }\n\n    return next();\n  }\n\n  /**\n   * Return the plugin.\n   *\n   * @type {Object}\n   */\n\n  return {\n    onCommand: onCommand,\n    onConstruct: onConstruct\n  };\n}\n\n/**\n * Surrogate pair start and end points.\n *\n * @type {Number}\n */\n\nvar SURROGATE_START = 0xd800;\nvar SURROGATE_END = 0xdfff;\n\n/**\n * A regex to match space characters.\n *\n * @type {RegExp}\n */\n\nvar SPACE = /\\s/;\n\n/**\n * A regex to match chameleon characters, that count as word characters as long\n * as they are inside of a word.\n *\n * @type {RegExp}\n */\n\nvar CHAMELEON = /['\\u2018\\u2019]/;\n\n/**\n * A regex that matches punctuation.\n *\n * @type {RegExp}\n */\n\nvar PUNCTUATION = /[\\u0021-\\u0023\\u0025-\\u002A\\u002C-\\u002F\\u003A\\u003B\\u003F\\u0040\\u005B-\\u005D\\u005F\\u007B\\u007D\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E3B\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]/;\n\n/**\n * Is a character `code` in a surrogate character.\n *\n * @param {Number} code\n * @return {Boolean}\n */\n\nfunction isSurrogate(code) {\n  return SURROGATE_START <= code && code <= SURROGATE_END;\n}\n\n/**\n * Does `code` form Modifier with next one.\n *\n * https://emojipedia.org/modifiers/\n *\n * @param {Number} code\n * @param {String} text\n * @param {Number} offset\n * @return {Boolean}\n */\n\nfunction isModifier(code, text, offset) {\n  if (code === 0xd83c) {\n    var next = text.charCodeAt(offset + 1);\n    return next <= 0xdfff && next >= 0xdffb;\n  }\n  return false;\n}\n\n/**\n * Is `code` a Variation Selector.\n *\n * https://codepoints.net/variation_selectors\n *\n * @param {Number} code\n * @return {Boolean}\n */\n\nfunction isVariationSelector(code) {\n  return code <= 0xfe0f && code >= 0xfe00;\n}\n\n/**\n * Is `code` one of the BMP codes used in emoji sequences.\n *\n * https://emojipedia.org/emoji-zwj-sequences/\n *\n * @param {Number} code\n * @return {Boolean}\n */\n\nfunction isBMPEmoji(code) {\n  // This requires tiny bit of maintanance, better ideas?\n  // Fortunately it only happens if new Unicode Standard\n  // is released. Fails gracefully if upkeep lags behind,\n  // same way Slate previously behaved with all emojis.\n  return code === 0x2764 || // heart (â¤)\n  code === 0x2642 || // male (â™‚)\n  code === 0x2640 || // female (â™€)\n  code === 0x2620 || // scull (â˜ )\n  code === 0x2695 || // medical (âš•)\n  code === 0x2708 || // plane (âœˆï¸)\n  code === 0x25ef // large circle (â—¯)\n  ;\n}\n\n/**\n * Is a character a word character? Needs the `remaining` characters too.\n *\n * @param {String} char\n * @param {String|Void} remaining\n * @return {Boolean}\n */\n\nfunction isWord(char, remaining) {\n  if (SPACE.test(char)) return false;\n\n  // If it's a chameleon character, recurse to see if the next one is or not.\n  if (CHAMELEON.test(char)) {\n    var next = remaining.charAt(0);\n    var length = getCharLength(next);\n    next = remaining.slice(0, length);\n    var rest = remaining.slice(length);\n    if (isWord(next, rest)) return true;\n  }\n\n  if (PUNCTUATION.test(char)) return false;\n  return true;\n}\n\n/**\n * Get the length of a `character`.\n *\n * @param {String} char\n * @return {Number}\n */\n\nfunction getCharLength(char) {\n  return isSurrogate(char.charCodeAt(0)) ? 2 : 1;\n}\n\n/**\n * Get the offset to the end of the character(s) in `text`.\n * This function is emoji aware and handles them correctly.\n *\n * @param {String} text\n * @param {Number} chars\n * @param {Boolean} forward\n * @return {Number}\n */\n\nfunction getCharOffset(text, chars, forward) {\n  var offset = 0;\n\n  // Handle end/beginning of node: we have to return 1 in order not to\n  // break cursor's jumping to next/previous node. We need to return early\n  // because otherwise, ''.charCodeAt(0) returned NaN and, the default\n  // handling 'latin characters' at the end of the while loop would\n  // would never be reached an we returned '0' as offset.\n  if (text === '') return 1;\n\n  // Calculate offset sum of each character\n  for (var i = 0; i < chars; i++) {\n    // `prev` types (better ideas?):\n    // - SURR: surrogate pair\n    // - MOD: modifier (technically also surrogate pair)\n    // - ZWJ: zero width joiner\n    // - VAR: variation selector\n    // - BMP: sequenceable character from Basic Multilingual Plane\n    var prev = null;\n    var charCode = text.charCodeAt(offset);\n\n    while (charCode) {\n      if (isSurrogate(charCode)) {\n        var modifier = isModifier(charCode, text, offset);\n\n        // Early returns are the heart of this loop where\n        // we decide if previous and current codepoints\n        // should form a single character (in other words:\n        // how many of them should selection jump over).\n        if (forward) {\n          if (!modifier && prev && prev !== 'ZWJ' || modifier && prev && prev !== 'SURR') {\n            break;\n          }\n        } else if (prev === 'SURR' || prev === 'BMP') {\n          break;\n        }\n\n        offset += 2;\n        prev = modifier ? 'MOD' : 'SURR';\n        charCode = text.charCodeAt(offset);\n        // It's okay to `continue` without checking\n        // because if `charCode` is NaN (which is\n        // the case when out of `text` range), next\n        // `while` loop won't execute and we're done.\n        continue;\n      }\n\n      // If zero width joiner\n      if (charCode === 0x200d) {\n        offset += 1;\n        prev = 'ZWJ';\n        charCode = text.charCodeAt(offset);\n        continue;\n      }\n\n      if (isBMPEmoji(charCode)) {\n        if (forward && prev === 'VAR' || prev && prev !== 'ZWJ' && prev !== 'VAR') {\n          break;\n        }\n\n        offset += 1;\n        prev = 'BMP';\n        charCode = text.charCodeAt(offset);\n        continue;\n      }\n\n      if (isVariationSelector(charCode)) {\n        if (!forward && prev && prev !== 'ZWJ') {\n          break;\n        }\n\n        offset += 1;\n        prev = 'VAR';\n        charCode = text.charCodeAt(offset);\n        continue;\n      }\n\n      // Modifier \"fuses\" with what ever character is before that\n      // (even whitespace), need to look ahead if loop gets here.\n      if (forward) {\n        var nextCharCode = text.charCodeAt(offset + 1);\n\n        if (isModifier(nextCharCode, text, offset + 1)) {\n          offset += 3;\n          prev = 'MOD';\n          charCode = text.charCodeAt(offset);\n          continue;\n        }\n      } else if (prev === 'MOD') {\n        offset += 1;\n        break;\n      }\n\n      // If while loop ever gets here, we're\n      // done (e.g Latin characters, length 1).\n      if (prev === null) offset += 1;\n      break;\n    }\n  }\n\n  return offset;\n}\n\n/**\n * Get the offset to the end of character(s) before an `offset` in `text`.\n *\n * @param {String} text\n * @param {Number} offset\n * @param {Number} chars\n * @return {Number}\n */\n\nfunction getCharOffsetBackward(text, offset) {\n  var chars = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n  text = text.slice(0, offset);\n  text = reverse(text);\n  return getCharOffset(text, chars);\n}\n\n/**\n * Get the offset to the end of character(s) after an `offset` in `text`.\n *\n * @param {String} text\n * @param {Number} offset\n * @param {Number} chars\n * @return {Number}\n */\n\nfunction getCharOffsetForward(text, offset) {\n  var chars = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n  text = text.slice(offset);\n  return getCharOffset(text, chars, true);\n}\n\n/**\n * Get the offset to the end of the first word in `text`.\n *\n * @param {String} text\n * @return {Number}\n */\n\nfunction getWordOffset(text) {\n  var length = 0;\n  var i = 0;\n  var started = false;\n  var char = void 0;\n\n  while (char = text.charAt(i)) {\n    var l = getCharLength(char);\n    char = text.slice(i, i + l);\n    var rest = text.slice(i + l);\n\n    if (isWord(char, rest)) {\n      started = true;\n      length += l;\n    } else if (!started) {\n      length += l;\n    } else {\n      break;\n    }\n\n    i += l;\n  }\n\n  return length;\n}\n\n/**\n * Get the offset to the end of the word before an `offset` in `text`.\n *\n * @param {String} text\n * @param {Number} offset\n * @return {Number}\n */\n\nfunction getWordOffsetBackward(text, offset) {\n  text = text.slice(0, offset);\n  text = reverse(text);\n  var o = getWordOffset(text);\n  return o;\n}\n\n/**\n * Get the offset to the end of the word after an `offset` in `text`.\n *\n * @param {String} text\n * @param {Number} offset\n * @return {Number}\n */\n\nfunction getWordOffsetForward(text, offset) {\n  text = text.slice(offset);\n  var o = getWordOffset(text);\n  return o;\n}\n\n/**\n * Export.\n *\n * @type {Object}\n */\n\nvar TextUtils = {\n  getCharLength: getCharLength,\n  getCharOffset: getCharOffset,\n  getCharOffsetBackward: getCharOffsetBackward,\n  getCharOffsetForward: getCharOffsetForward,\n  getWordOffset: getWordOffset,\n  getWordOffsetBackward: getWordOffsetBackward,\n  getWordOffsetForward: getWordOffsetForward,\n  isSurrogate: isSurrogate,\n  isWord: isWord\n};\n\n/**\n * Ensure that an expanded selection is deleted first, and return the updated\n * range to account for the deleted part.\n *\n * @param {Editor}\n */\n\nfunction deleteExpandedAtRange(editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var _range = range,\n      start = _range.start,\n      end = _range.end;\n\n\n  if (document.hasDescendant(start.path)) {\n    range = range.moveToStart();\n  } else {\n    range = range.moveTo(end.path, 0).normalize(document);\n  }\n\n  return range;\n}\n\n/**\n * Commands.\n *\n * @type {Object}\n */\n\nvar Commands$1 = {};\n\n/**\n * Add a new `mark` to the characters at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Mixed} mark\n */\n\nCommands$1.addMarkAtRange = function (editor, range, mark) {\n  if (range.isCollapsed) return;\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start,\n      end = range.end;\n\n  var texts = document.getTextsAtRange(range);\n\n  editor.withoutNormalizing(function () {\n    texts.forEach(function (node) {\n      var key = node.key;\n\n      var index = 0;\n      var length = node.text.length;\n\n      if (key === start.key) index = start.offset;\n      if (key === end.key) length = end.offset;\n      if (key === start.key && key === end.key) length = end.offset - start.offset;\n\n      editor.addMarkByKey(key, index, length, mark);\n    });\n  });\n};\n\n/**\n * Add a list of `marks` to the characters at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Array<Mixed>} mark\n */\n\nCommands$1.addMarksAtRange = function (editor, range, marks) {\n  marks.forEach(function (mark) {\n    return editor.addMarkAtRange(range, mark);\n  });\n};\n\n/**\n * Delete everything in a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\nCommands$1.deleteAtRange = function (editor, range) {\n  // Snapshot the selection, which creates an extra undo save point, so that\n  // when you undo a delete, the expanded selection will be retained.\n  editor.snapshotSelection();\n\n  var value = editor.value;\n  var start = range.start,\n      end = range.end;\n\n  var startKey = start.key;\n  var startOffset = start.offset;\n  var endKey = end.key;\n  var endOffset = end.offset;\n  var document = value.document;\n\n  var isStartVoid = document.hasVoidParent(startKey, editor);\n  var isEndVoid = document.hasVoidParent(endKey, editor);\n  var startBlock = document.getClosestBlock(startKey);\n  var endBlock = document.getClosestBlock(endKey);\n\n  // Check if we have a \"hanging\" selection case where the even though the\n  // selection extends into the start of the end node, we actually want to\n  // ignore that for UX reasons.\n  var isHanging = startOffset === 0 && endOffset === 0 && isStartVoid === false && startKey === startBlock.getFirstText().key && endKey === endBlock.getFirstText().key && startKey !== endKey;\n\n  // If it's a hanging selection, nudge it back to end in the previous text.\n  if (isHanging && isEndVoid) {\n    var prevText = document.getPreviousText(endKey);\n    endKey = prevText.key;\n    endOffset = prevText.text.length;\n    isEndVoid = document.hasVoidParent(endKey, editor);\n  }\n\n  editor.withoutNormalizing(function () {\n    // If the start node is inside a void node, remove the void node and update\n    // the starting point to be right after it, continuously until the start point\n    // is not a void, or until the entire range is handled.\n    while (isStartVoid) {\n      var startVoid = document.getClosestVoid(startKey, editor);\n      var nextText = document.getNextText(startKey);\n      editor.removeNodeByKey(startVoid.key);\n\n      // If the start and end keys are the same, we're done.\n      if (startKey === endKey) return;\n\n      // If there is no next text node, we're done.\n      if (!nextText) return;\n\n      // Continue...\n      document = editor.value.document;\n      startKey = nextText.key;\n      startOffset = 0;\n      isStartVoid = document.hasVoidParent(startKey, editor);\n    }\n\n    // If the end node is inside a void node, do the same thing but backwards. But\n    // we don't need any aborting checks because if we've gotten this far there\n    // must be a non-void node that will exit the loop.\n    while (isEndVoid) {\n      var endVoid = document.getClosestVoid(endKey, editor);\n      var _prevText = document.getPreviousText(endKey);\n      editor.removeNodeByKey(endVoid.key);\n\n      // Continue...\n      document = editor.value.document;\n      endKey = _prevText.key;\n      endOffset = _prevText.text.length;\n      isEndVoid = document.hasVoidParent(endKey, editor);\n    }\n\n    // If the start and end key are the same, and it was a hanging selection, we\n    // can just remove the entire block.\n    if (startKey === endKey && isHanging) {\n      editor.removeNodeByKey(startBlock.key);\n      return;\n    } else if (startKey === endKey) {\n      // Otherwise, if it wasn't hanging, we're inside a single text node, so we can\n      // simply remove the text in the range.\n      var index = startOffset;\n      var length = endOffset - startOffset;\n      editor.removeTextByKey(startKey, index, length);\n      return;\n    } else {\n      // Otherwise, we need to recursively remove text and nodes inside the start\n      // block after the start offset and inside the end block before the end\n      // offset. Then remove any blocks that are in between the start and end\n      // blocks. Then finally merge the start and end nodes.\n      startBlock = document.getClosestBlock(startKey);\n      endBlock = document.getClosestBlock(endKey);\n      var startText = document.getNode(startKey);\n      var endText = document.getNode(endKey);\n      var startLength = startText.text.length - startOffset;\n      var endLength = endOffset;\n\n      var ancestor = document.getCommonAncestor(startKey, endKey);\n      var startChild = ancestor.getFurthestChild(startKey);\n      var endChild = ancestor.getFurthestChild(endKey);\n\n      var startParent = document.getParent(startBlock.key);\n      var startParentIndex = startParent.nodes.indexOf(startBlock);\n      var endParentIndex = startParent.nodes.indexOf(endBlock);\n\n      var child = void 0;\n\n      // Iterate through all of the nodes in the tree after the start text node\n      // but inside the end child, and remove them.\n      child = startText;\n\n      while (child.key !== startChild.key) {\n        var parent = document.getParent(child.key);\n        var _index = parent.nodes.indexOf(child);\n        var afters = parent.nodes.slice(_index + 1);\n\n        afters.reverse().forEach(function (node) {\n          editor.removeNodeByKey(node.key);\n        });\n\n        child = parent;\n      }\n\n      // Remove all of the middle children.\n      var startChildIndex = ancestor.nodes.indexOf(startChild);\n      var endChildIndex = ancestor.nodes.indexOf(endChild);\n      var middles = ancestor.nodes.slice(startChildIndex + 1, endChildIndex);\n\n      middles.reverse().forEach(function (node) {\n        editor.removeNodeByKey(node.key);\n      });\n\n      // Remove the nodes before the end text node in the tree.\n      child = endText;\n\n      while (child.key !== endChild.key) {\n        var _parent = document.getParent(child.key);\n        var _index2 = _parent.nodes.indexOf(child);\n        var befores = _parent.nodes.slice(0, _index2);\n\n        befores.reverse().forEach(function (node) {\n          editor.removeNodeByKey(node.key);\n        });\n\n        child = _parent;\n      }\n\n      // Remove any overlapping text content from the leaf text nodes.\n      if (startLength !== 0) {\n        editor.removeTextByKey(startKey, startOffset, startLength);\n      }\n\n      if (endLength !== 0) {\n        editor.removeTextByKey(endKey, 0, endOffset);\n      }\n\n      // If the start and end blocks aren't the same, move and merge the end block\n      // into the start block.\n      if (startBlock.key !== endBlock.key) {\n        document = editor.value.document;\n        var onlyChildAncestor = void 0;\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = document.ancestors(endBlock.key)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var _ref = _step.value;\n\n            var _ref2 = slicedToArray(_ref, 1);\n\n            var node = _ref2[0];\n\n            if (node.nodes.size > 1) {\n              break;\n            } else {\n              onlyChildAncestor = node;\n            }\n          }\n\n          // Move the end block to be right after the start block.\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        if (endParentIndex !== startParentIndex + 1) {\n          editor.moveNodeByKey(endBlock.key, startParent.key, startParentIndex + 1);\n        }\n\n        // If the selection is hanging, just remove the start block, otherwise\n        // merge the end block into it.\n        if (isHanging) {\n          editor.removeNodeByKey(startBlock.key);\n        } else {\n          editor.mergeNodeByKey(endBlock.key);\n        }\n\n        // If nested empty blocks are left over above the end block, remove them.\n        if (onlyChildAncestor) {\n          editor.removeNodeByKey(onlyChildAncestor.key);\n        }\n      }\n    }\n  });\n};\n\n/**\n * Delete backward `n` characters at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Number} n (optional)\n */\n\nCommands$1.deleteBackwardAtRange = function (editor, range) {\n  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n  if (n === 0) return;\n  var value = editor.value;\n  var document = value.document;\n  var _range2 = range,\n      start = _range2.start,\n      focus = _range2.focus;\n\n  // If the range is expanded, perform a regular delete instead.\n\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var voidParent = document.getClosestVoid(start.path, editor);\n\n  // If there is a void parent, delete it.\n  if (voidParent) {\n    editor.removeNodeByKey(voidParent.key);\n    return;\n  }\n\n  // If the range is at the start of the document, abort.\n  if (start.isAtStartOfNode(document)) {\n    return;\n  }\n\n  var block = document.getClosestBlock(start.path);\n\n  // PERF: If the closest block is empty, remove it. This is just a shortcut,\n  // since merging it would result in the same outcome.\n  if (document.nodes.size !== 1 && block && block.text === '' && block.nodes.size === 1) {\n    editor.removeNodeByKey(block.key);\n    return;\n  }\n\n  // If the range is at the start of the text node, we need to figure out what\n  // is behind it to know how to delete...\n  var text = document.getDescendant(start.path);\n\n  if (start.isAtStartOfNode(text)) {\n    var prev = document.getPreviousText(text.key);\n    var inline = document.getClosestInline(text.key);\n\n    // If the range is at the start of the inline node, and previous text node\n    // is empty, take the text node before that, or \"prevBlock\" would be the\n    // same node as \"block\"\n    if (inline && prev.text === '') {\n      prev = document.getPreviousText(prev.key);\n    }\n\n    var prevBlock = document.getClosestBlock(prev.key);\n    var prevVoid = document.getClosestVoid(prev.key, editor);\n\n    // If the previous text node has a void parent, remove it.\n    if (prevVoid) {\n      editor.removeNodeByKey(prevVoid.key);\n      return;\n    }\n\n    // If we're deleting by one character and the previous text node is not\n    // inside the current block, we need to merge the two blocks together.\n    if (n === 1 && prevBlock !== block) {\n      range = range.moveAnchorTo(prev.key, prev.text.length);\n      editor.deleteAtRange(range);\n      return;\n    }\n  }\n\n  // If the focus offset is farther than the number of characters to delete,\n  // just remove the characters backwards inside the current node.\n  if (n <= focus.offset) {\n    range = range.moveFocusBackward(n);\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  // Otherwise, we need to see how many nodes backwards to go.\n  var node = text;\n  var offset = 0;\n  var traversed = focus.offset;\n\n  while (n > traversed) {\n    node = document.getPreviousText(node.key);\n    var next = traversed + node.text.length;\n\n    if (n <= next) {\n      offset = next - n;\n      break;\n    } else {\n      traversed = next;\n    }\n  }\n\n  range = range.moveAnchorTo(node.key, offset);\n  editor.deleteAtRange(range);\n};\n\n/**\n * Delete backward until the character boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\nCommands$1.deleteCharBackwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n\n  var startBlock = document.getClosestBlock(start.path);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  var text = startBlock.text;\n\n  var n = TextUtils.getCharOffsetBackward(text, o);\n  editor.deleteBackwardAtRange(range, n);\n};\n\n/**\n * Delete forward until the character boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\nCommands$1.deleteCharForwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n\n  var startBlock = document.getClosestBlock(start.path);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  var text = startBlock.text;\n\n  var n = TextUtils.getCharOffsetForward(text, o);\n  editor.deleteForwardAtRange(range, n);\n};\n\n/**\n * Delete forward `n` characters at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Number} n (optional)\n */\n\nCommands$1.deleteForwardAtRange = function (editor, range) {\n  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n  if (n === 0) return;\n  var value = editor.value;\n  var document = value.document;\n  var _range3 = range,\n      start = _range3.start,\n      focus = _range3.focus;\n\n  // If the range is expanded, perform a regular delete instead.\n\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var voidParent = document.getClosestVoid(start.path, editor);\n\n  // If the node has a void parent, delete it.\n  if (voidParent) {\n    editor.removeNodeByKey(voidParent.key);\n    return;\n  }\n\n  var block = document.getClosestBlock(start.path);\n\n  // If the closest is not void, but empty, remove it\n  if (block && !editor.isVoid(block) && block.text === '' && document.nodes.size !== 1) {\n    var nextBlock = document.getNextBlock(block.key);\n    editor.removeNodeByKey(block.key);\n\n    if (nextBlock && nextBlock.key) {\n      editor.moveToStartOfNode(nextBlock);\n    }\n\n    return;\n  }\n\n  // If the range is at the start of the document, abort.\n  if (start.isAtEndOfNode(document)) {\n    return;\n  }\n\n  // If the range is at the start of the text node, we need to figure out what\n  // is behind it to know how to delete...\n  var text = document.getDescendant(start.path);\n\n  if (start.isAtEndOfNode(text)) {\n    var next = document.getNextText(text.key);\n    var _nextBlock = document.getClosestBlock(next.key);\n    var nextVoid = document.getClosestVoid(next.key, editor);\n\n    // If the next text node has a void parent, remove it.\n    if (nextVoid) {\n      editor.removeNodeByKey(nextVoid.key);\n      return;\n    }\n\n    // If we're deleting by one character and the previous text node is not\n    // inside the current block, we need to merge the two blocks together.\n    if (n === 1 && _nextBlock !== block) {\n      range = range.moveFocusTo(next.key, 0);\n      editor.deleteAtRange(range);\n      return;\n    }\n  }\n\n  // If the remaining characters to the end of the node is greater than or equal\n  // to the number of characters to delete, just remove the characters forwards\n  // inside the current node.\n  if (n <= text.text.length - focus.offset) {\n    range = range.moveFocusForward(n);\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  // Otherwise, we need to see how many nodes forwards to go.\n  var node = text;\n  var offset = focus.offset;\n  var traversed = text.text.length - focus.offset;\n\n  while (n > traversed) {\n    node = document.getNextText(node.key);\n    var _next = traversed + node.text.length;\n\n    if (n <= _next) {\n      offset = n - traversed;\n      break;\n    } else {\n      traversed = _next;\n    }\n  }\n\n  range = range.moveFocusTo(node.key, offset);\n  editor.deleteAtRange(range);\n};\n\n/**\n * Delete backward until the line boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\nCommands$1.deleteLineBackwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n\n  var startBlock = document.getClosestBlock(start.path);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  editor.deleteBackwardAtRange(range, o);\n};\n\n/**\n * Delete forward until the line boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\nCommands$1.deleteLineForwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n\n  var startBlock = document.getClosestBlock(start.path);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  editor.deleteForwardAtRange(range, startBlock.text.length - o);\n};\n\n/**\n * Delete backward until the word boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\nCommands$1.deleteWordBackwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n\n  var startBlock = document.getClosestBlock(start.path);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  var text = startBlock.text;\n\n  var n = o === 0 ? 1 : TextUtils.getWordOffsetBackward(text, o);\n  editor.deleteBackwardAtRange(range, n);\n};\n\n/**\n * Delete forward until the word boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\nCommands$1.deleteWordForwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n\n  var startBlock = document.getClosestBlock(start.path);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  var text = startBlock.text;\n\n  var wordOffset = TextUtils.getWordOffsetForward(text, o);\n  var n = wordOffset === 0 ? 1 : wordOffset;\n  editor.deleteForwardAtRange(range, n);\n};\n\n/**\n * Insert a `block` node at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Block|String|Object} block\n */\n\nCommands$1.insertBlockAtRange = function (editor, range, block) {\n  range = deleteExpandedAtRange(editor, range);\n  block = Block.create(block);\n\n  var value = editor.value;\n  var document = value.document;\n  var _range4 = range,\n      start = _range4.start;\n\n  var startKey = start.key;\n  var startOffset = start.offset;\n  var startBlock = document.getClosestBlock(startKey);\n  var startInline = document.getClosestInline(startKey);\n  var parent = document.getParent(startBlock.key);\n  var index = parent.nodes.indexOf(startBlock);\n  var insertionMode = getInsertionMode(editor, range);\n\n  if (insertionMode === 'before') {\n    editor.insertNodeByKey(parent.key, index, block);\n  } else if (insertionMode === 'behind') {\n    editor.insertNodeByKey(parent.key, index + 1, block);\n  } else {\n    if (startInline && editor.isVoid(startInline)) {\n      var atEnd = start.isAtEndOfNode(startInline);\n      var siblingText = atEnd ? document.getNextText(startKey) : document.getPreviousText(startKey);\n\n      var splitRange = atEnd ? range.moveToStartOfNode(siblingText) : range.moveToEndOfNode(siblingText);\n\n      startKey = splitRange.start.key;\n      startOffset = splitRange.start.offset;\n    }\n\n    editor.withoutNormalizing(function () {\n      editor.splitDescendantsByKey(startBlock.key, startKey, startOffset);\n      editor.insertNodeByKey(parent.key, index + 1, block);\n    });\n  }\n};\n\n/**\n * Check if current block should be split or new block should be added before or behind it.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\nvar getInsertionMode = function getInsertionMode(editor, range) {\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n\n  var startKey = start.key;\n  var startBlock = document.getClosestBlock(startKey);\n  var startInline = document.getClosestInline(startKey);\n\n  if (editor.isVoid(startBlock)) {\n    if (start.isAtEndOfNode(startBlock)) return 'behind';else return 'before';\n  } else if (!startInline && startBlock.text === '') {\n    return 'behind';\n  } else if (start.isAtStartOfNode(startBlock)) {\n    return 'before';\n  } else if (start.isAtEndOfNode(startBlock)) {\n    return 'behind';\n  }\n  return 'split';\n};\n\n/**\n * Insert a `fragment` at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Document} fragment\n */\n\nCommands$1.insertFragmentAtRange = function (editor, range, fragment) {\n  editor.withoutNormalizing(function () {\n    range = deleteExpandedAtRange(editor, range);\n\n    // If the fragment is empty, there's nothing to do after deleting.\n    if (!fragment.nodes.size) return;\n\n    // Regenerate the keys for all of the fragments nodes, so that they're\n    // guaranteed not to collide with the existing keys in the document. Otherwise\n    // they will be regenerated automatically and we won't have an easy way to\n    // reference them.\n    fragment = fragment.mapDescendants(function (child) {\n      return child.regenerateKey();\n    });\n\n    // Calculate a few things...\n    var _range5 = range,\n        start = _range5.start;\n    var value = editor.value;\n    var document = value.document;\n\n    var startText = document.getDescendant(start.path);\n    var startBlock = document.getClosestBlock(startText.key);\n    var startChild = startBlock.getFurthestChild(startText.key);\n    var isAtStart = start.isAtStartOfNode(startBlock);\n    var parent = document.getParent(startBlock.key);\n    var index = parent.nodes.indexOf(startBlock);\n    var blocks = fragment.getBlocks();\n    var firstChild = fragment.nodes.first();\n    var lastChild = fragment.nodes.last();\n    var firstBlock = blocks.first();\n    var lastBlock = blocks.last();\n    var insertionNode = findInsertionNode(fragment, document, startBlock.key);\n\n    // If the fragment only contains a void block, use `insertBlock` instead.\n    if (firstBlock === lastBlock && editor.isVoid(firstBlock)) {\n      editor.insertBlockAtRange(range, firstBlock);\n      return;\n    }\n\n    // If inserting the entire fragment and it starts or ends with a single\n    // nested block, e.g. a table, we do not merge it with existing blocks.\n    if (insertionNode === fragment && (firstChild.hasBlockChildren() || lastChild.hasBlockChildren())) {\n      // check if reversal is necessary or not\n      var insertionMode = getInsertionMode(editor, range);\n      var nodes = insertionMode === 'before' ? fragment.nodes : fragment.nodes.reverse();\n\n      nodes.forEach(function (node) {\n        editor.insertBlockAtRange(range, node);\n      });\n      return;\n    }\n\n    // If the first and last block aren't the same, we need to insert all of the\n    // nodes after the insertion node's first block at the index.\n    if (firstBlock !== lastBlock) {\n      var lonelyParent = insertionNode.getFurthest(firstBlock.key, function (p) {\n        return p.nodes.size === 1;\n      });\n      var lonelyChild = lonelyParent || firstBlock;\n\n      var startIndex = parent.nodes.indexOf(startBlock);\n      var excludingLonelyChild = insertionNode.removeNode(lonelyChild.key);\n\n      excludingLonelyChild.nodes.forEach(function (node, i) {\n        var newIndex = startIndex + i + 1;\n        editor.insertNodeByKey(parent.key, newIndex, node);\n      });\n    }\n\n    // Check if we need to split the node.\n    if (start.offset !== 0) {\n      editor.splitDescendantsByKey(startChild.key, start.key, start.offset);\n    }\n\n    // Update our variables with the new value.\n    document = editor.value.document;\n    startText = document.getDescendant(start.key);\n    startBlock = document.getClosestBlock(start.key);\n    startChild = startBlock.getFurthestChild(startText.key);\n\n    // If the first and last block aren't the same, we need to move any of the\n    // starting block's children after the split into the last block of the\n    // fragment, which has already been inserted.\n    if (firstBlock !== lastBlock) {\n      var nextChild = isAtStart ? startChild : startBlock.getNextSibling(startChild.key);\n      var nextNodes = nextChild ? startBlock.nodes.skipUntil(function (n) {\n        return n.key === nextChild.key;\n      }) : List();\n      var lastIndex = lastBlock.nodes.size;\n\n      nextNodes.forEach(function (node, i) {\n        var newIndex = lastIndex + i;\n        editor.moveNodeByKey(node.key, lastBlock.key, newIndex);\n      });\n    }\n\n    // If the starting block is empty, we replace it entirely with the first block\n    // of the fragment, since this leads to a more expected behavior for the user.\n    if (!editor.isVoid(startBlock) && startBlock.text === '' && !startBlock.findDescendant(function (n) {\n      return editor.isVoid(n);\n    })) {\n      editor.removeNodeByKey(startBlock.key);\n      editor.insertNodeByKey(parent.key, index, firstBlock);\n    } else {\n      // Otherwise, we maintain the starting block, and insert all of the first\n      // block's inline nodes into it at the split point.\n      var inlineChild = startBlock.getFurthestChild(startText.key);\n      var inlineIndex = startBlock.nodes.indexOf(inlineChild);\n\n      firstBlock.nodes.forEach(function (inline, i) {\n        var o = start.offset === 0 ? 0 : 1;\n        var newIndex = inlineIndex + i + o;\n        editor.insertNodeByKey(startBlock.key, newIndex, inline);\n      });\n    }\n  });\n};\n\n/**\n * Get the deepest single child block inside `fragment` whose reversed block\n * ancestors match the reversed block ancestors of the `document` starting at\n * the `documentKey`.\n *\n * @param {Document} document\n * @param {string} documentKey\n * @param {Document} fragment\n * @return {Node}\n */\n\nvar findInsertionNode = function findInsertionNode(fragment, document, documentKey) {\n  // Find the deepest block in a doc with no siblings.\n  var deepestSingleBlock = function deepestSingleBlock(doc) {\n    var result = doc;\n\n    while (result.nodes.size === 1 && result.nodes.first().object === 'block') {\n      result = result.nodes.first();\n    }\n\n    return result === doc ? null : result;\n  };\n\n  // Return whether every block in the `fragmentAncestors` list has the\n  // same type as the block in `documentAncestors` with the same index.\n  var ancestorTypesMatch = function ancestorTypesMatch(fragmentAncestors, documentAncestors) {\n    return documentAncestors.size >= fragmentAncestors.size && fragmentAncestors.every(function (fragmentNode, i) {\n      return documentAncestors.get(i).type === fragmentNode.type;\n    });\n  };\n\n  // Given two reverse lists of ancestors, check if all fragment ancestor types\n  // match the doc ancestors at some position.\n  var matchingFragmentAncestor = function matchingFragmentAncestor(documentAncestors, fragmentAncestors) {\n    var depthDifference = documentAncestors.size - fragmentAncestors.size;\n\n    // There is nothing to align if the fragment is deeper than the document.\n    if (depthDifference < 0) {\n      return fragment;\n    }\n\n    for (var fragIdx = 0; fragIdx < fragmentAncestors.size; fragIdx++) {\n      // The docIdx loop relaxes our check in that we can still match if there\n      // are node type differences leaf-side.\n      // This is important for example if our fragment inserts multiple siblings\n      // or inserts another type while the tree structure remains the same.\n      for (var docIdx = 0; docIdx <= depthDifference; docIdx++) {\n        if (ancestorTypesMatch(fragmentAncestors.slice(fragIdx), documentAncestors.slice(docIdx))) {\n          return fragmentAncestors.get(fragIdx);\n        }\n      }\n    }\n    return fragment;\n  };\n\n  // Get the type definitions for all ancestors up from node with key `key`,\n  // except the document object.\n  var getAncestorBlocks = function getAncestorBlocks(doc, key) {\n    return doc.getAncestors(key).slice(1).push(doc.getNode(key)).reverse();\n  };\n\n  var fragmentStartBlock = deepestSingleBlock(fragment);\n\n  if (!fragmentStartBlock) {\n    return fragment;\n  }\n\n  var documentAncestors = getAncestorBlocks(document, documentKey);\n  var fragmentAncestors = getAncestorBlocks(fragment, fragmentStartBlock.key);\n\n  return matchingFragmentAncestor(documentAncestors, fragmentAncestors);\n};\n\n/**\n * Insert an `inline` node at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Inline|String|Object} inline\n */\n\nCommands$1.insertInlineAtRange = function (editor, range, inline) {\n  inline = Inline.create(inline);\n\n  editor.withoutNormalizing(function () {\n    range = deleteExpandedAtRange(editor, range);\n\n    var value = editor.value;\n    var document = value.document;\n    var _range6 = range,\n        start = _range6.start;\n\n    var parent = document.getParent(start.path);\n    var startText = document.assertDescendant(start.path);\n    var index = parent.nodes.indexOf(startText);\n\n    if (editor.isVoid(parent)) {\n      return;\n    }\n\n    editor.splitNodeByPath(start.path, start.offset);\n    editor.insertNodeByKey(parent.key, index + 1, inline);\n  });\n};\n\n/**\n * Insert `text` at a `range`, with optional `marks`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {String} text\n * @param {Set<Mark>} marks (optional)\n */\n\nCommands$1.insertTextAtRange = function (editor, range, text, marks) {\n  editor.withoutNormalizing(function () {\n    range = deleteExpandedAtRange(editor, range);\n\n    var value = editor.value;\n    var document = value.document;\n    var _range7 = range,\n        start = _range7.start;\n\n    var offset = start.offset;\n    var parent = document.getParent(start.path);\n\n    if (editor.isVoid(parent)) {\n      return;\n    }\n\n    editor.insertTextByPath(start.path, offset, text, marks);\n  });\n};\n\n/**\n * Remove an existing `mark` to the characters at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Mark|String} mark (optional)\n */\n\nCommands$1.removeMarkAtRange = function (editor, range, mark) {\n  if (range.isCollapsed) return;\n\n  var value = editor.value;\n  var document = value.document;\n\n  var texts = document.getTextsAtRange(range);\n  var start = range.start,\n      end = range.end;\n\n\n  editor.withoutNormalizing(function () {\n    texts.forEach(function (node) {\n      var key = node.key;\n\n      var index = 0;\n      var length = node.text.length;\n\n      if (key === start.key) index = start.offset;\n      if (key === end.key) length = end.offset;\n      if (key === start.key && key === end.key) length = end.offset - start.offset;\n\n      editor.removeMarkByKey(key, index, length, mark);\n    });\n  });\n};\n\n/**\n * Set the `properties` of block nodes in a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Object|String} properties\n */\n\nCommands$1.setBlocksAtRange = function (editor, range, properties) {\n  var value = editor.value;\n  var document = value.document;\n\n  var blocks = document.getLeafBlocksAtRange(range);\n\n  var start = range.start,\n      end = range.end,\n      isCollapsed = range.isCollapsed;\n\n  var isStartVoid = document.hasVoidParent(start.path, editor);\n  var startBlock = document.getClosestBlock(start.path);\n  var endBlock = document.getClosestBlock(end.key);\n\n  // Check if we have a \"hanging\" selection case where the even though the\n  // selection extends into the start of the end node, we actually want to\n  // ignore that for UX reasons.\n  var isHanging = isCollapsed === false && start.offset === 0 && end.offset === 0 && isStartVoid === false && start.key === startBlock.getFirstText().key && end.key === endBlock.getFirstText().key;\n\n  // If it's a hanging selection, ignore the last block.\n  var sets = isHanging ? blocks.slice(0, -1) : blocks;\n\n  editor.withoutNormalizing(function () {\n    sets.forEach(function (block) {\n      editor.setNodeByKey(block.key, properties);\n    });\n  });\n};\n\n/**\n * Set the `properties` of inline nodes in a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Object|String} properties\n */\n\nCommands$1.setInlinesAtRange = function (editor, range, properties) {\n  var value = editor.value;\n  var document = value.document;\n\n  var inlines = document.getLeafInlinesAtRange(range);\n\n  editor.withoutNormalizing(function () {\n    inlines.forEach(function (inline) {\n      editor.setNodeByKey(inline.key, properties);\n    });\n  });\n};\n\n/**\n * Split the block nodes at a `range`, to optional `height`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Number} height (optional)\n */\n\nCommands$1.splitBlockAtRange = function (editor, range) {\n  var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n  range = deleteExpandedAtRange(editor, range);\n\n  var _range8 = range,\n      start = _range8.start,\n      end = _range8.end;\n  var value = editor.value;\n  var _value = value,\n      document = _value.document;\n\n  var node = document.assertDescendant(start.path);\n  var parent = document.getClosestBlock(node.key);\n  var h = 0;\n\n  while (parent && parent.object === 'block' && h < height) {\n    node = parent;\n    parent = document.getClosestBlock(parent.key);\n    h++;\n  }\n\n  editor.withoutNormalizing(function () {\n    editor.splitDescendantsByKey(node.key, start.path, start.offset);\n\n    value = editor.value;\n    document = value.document;\n\n    if (range.isExpanded) {\n      if (range.isBackward) range = range.flip();\n      var nextBlock = document.getNextBlock(node.key);\n      range = range.moveAnchorToStartOfNode(nextBlock);\n      range = range.setFocus(range.focus.setPath(null));\n\n      if (start.path.equals(end.path)) {\n        range = range.moveFocusTo(range.anchor.key, end.offset - start.offset);\n      }\n\n      range = document.resolveRange(range);\n      editor.deleteAtRange(range);\n    }\n  });\n};\n\n/**\n * Split the inline nodes at a `range`, to optional `height`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Number} height (optional)\n */\n\nCommands$1.splitInlineAtRange = function (editor, range) {\n  var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Infinity;\n\n  range = deleteExpandedAtRange(editor, range);\n\n  var _range9 = range,\n      start = _range9.start;\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.assertDescendant(start.path);\n  var parent = document.getClosestInline(node.key);\n  var h = 0;\n\n  while (parent && parent.object === 'inline' && h < height) {\n    node = parent;\n    parent = document.getClosestInline(parent.key);\n    h++;\n  }\n\n  editor.splitDescendantsByKey(node.key, start.path, start.offset);\n};\n\n/**\n * Add or remove a `mark` from the characters at `range`, depending on whether\n * it's already there.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Mixed} mark\n */\n\nCommands$1.toggleMarkAtRange = function (editor, range, mark) {\n  if (range.isCollapsed) return;\n\n  mark = Mark.create(mark);\n\n  var value = editor.value;\n  var document = value.document;\n\n  var marks = document.getActiveMarksAtRange(range);\n  var exists = marks.some(function (m) {\n    return m.equals(mark);\n  });\n\n  if (exists) {\n    editor.removeMarkAtRange(range, mark);\n  } else {\n    editor.addMarkAtRange(range, mark);\n  }\n};\n\n/**\n * Unwrap all of the block nodes in a `range` from a block with `properties`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {String|Object} properties\n */\n\nCommands$1.unwrapBlockAtRange = function (editor, range, properties) {\n  properties = Node.createProperties(properties);\n\n  var value = editor.value;\n  var document = value.document;\n\n  var blocks = document.getLeafBlocksAtRange(range);\n  var wrappers = blocks.map(function (block) {\n    return document.getClosest(block.key, function (parent) {\n      if (parent.object !== 'block') return false;\n      if (properties.type != null && parent.type !== properties.type) return false;\n      if (properties.data != null && !parent.data.isSuperset(properties.data)) return false;\n      return true;\n    });\n  }).filter(function (exists) {\n    return exists;\n  }).toOrderedSet().toList();\n\n  editor.withoutNormalizing(function () {\n    wrappers.forEach(function (block) {\n      var first = block.nodes.first();\n      var last = block.nodes.last();\n      var parent = editor.value.document.getParent(block.key);\n      var index = parent.nodes.indexOf(block);\n\n      var children = block.nodes.filter(function (child) {\n        return blocks.some(function (b) {\n          return child === b || child.hasDescendant(b.key);\n        });\n      });\n\n      var firstMatch = children.first();\n      var lastMatch = children.last();\n\n      if (first === firstMatch && last === lastMatch) {\n        block.nodes.forEach(function (child, i) {\n          editor.moveNodeByKey(child.key, parent.key, index + i);\n        });\n\n        editor.removeNodeByKey(block.key);\n      } else if (last === lastMatch) {\n        block.nodes.skipUntil(function (n) {\n          return n === firstMatch;\n        }).forEach(function (child, i) {\n          editor.moveNodeByKey(child.key, parent.key, index + 1 + i);\n        });\n      } else if (first === firstMatch) {\n        block.nodes.takeUntil(function (n) {\n          return n === lastMatch;\n        }).push(lastMatch).forEach(function (child, i) {\n          editor.moveNodeByKey(child.key, parent.key, index + i);\n        });\n      } else {\n        var firstText = firstMatch.getFirstText();\n\n        editor.splitDescendantsByKey(block.key, firstText.key, 0);\n\n        document = editor.value.document;\n\n        children.forEach(function (child, i) {\n          if (i === 0) {\n            var extra = child;\n            child = document.getNextBlock(child.key);\n            editor.removeNodeByKey(extra.key);\n          }\n\n          editor.moveNodeByKey(child.key, parent.key, index + 1 + i);\n        });\n      }\n    });\n  });\n};\n\n/**\n * Unwrap the inline nodes in a `range` from an inline with `properties`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {String|Object} properties\n */\n\nCommands$1.unwrapInlineAtRange = function (editor, range, properties) {\n  properties = Node.createProperties(properties);\n\n  var value = editor.value;\n  var document = value.document;\n\n  var texts = document.getTextsAtRange(range);\n  var inlines = texts.map(function (text) {\n    return document.getClosest(text.key, function (parent) {\n      if (parent.object !== 'inline') return false;\n      if (properties.type != null && parent.type !== properties.type) return false;\n      if (properties.data != null && !parent.data.isSuperset(properties.data)) return false;\n      return true;\n    });\n  }).filter(function (exists) {\n    return exists;\n  }).toOrderedSet().toList();\n\n  editor.withoutNormalizing(function () {\n    inlines.forEach(function (inline) {\n      var parent = editor.value.document.getParent(inline.key);\n      var index = parent.nodes.indexOf(inline);\n\n      inline.nodes.forEach(function (child, i) {\n        editor.moveNodeByKey(child.key, parent.key, index + i);\n      });\n\n      editor.removeNodeByKey(inline.key);\n    });\n  });\n};\n\n/**\n * Wrap all of the blocks in a `range` in a new `block`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Block|Object|String} block\n */\n\nCommands$1.wrapBlockAtRange = function (editor, range, block) {\n  block = Block.create(block);\n  block = block.set('nodes', block.nodes.clear());\n\n  var value = editor.value;\n  var document = value.document;\n\n\n  var blocks = document.getLeafBlocksAtRange(range);\n  var firstblock = blocks.first();\n  var lastblock = blocks.last();\n  var parent = void 0,\n      siblings = void 0,\n      index = void 0;\n\n  // If there is only one block in the selection then we know the parent and\n  // siblings.\n  if (blocks.length === 1) {\n    parent = document.getParent(firstblock.key);\n    siblings = blocks;\n  } else {\n    // Determine closest shared parent to all blocks in selection.\n    parent = document.getClosest(firstblock.key, function (p1) {\n      return !!document.getClosest(lastblock.key, function (p2) {\n        return p1 === p2;\n      });\n    });\n  }\n\n  // If no shared parent could be found then the parent is the document.\n  if (parent == null) parent = document;\n\n  // Create a list of direct children siblings of parent that fall in the\n  // selection.\n  if (siblings == null) {\n    var indexes = parent.nodes.reduce(function (ind, node, i) {\n      if (node === firstblock || node.hasDescendant(firstblock.key)) ind[0] = i;\n      if (node === lastblock || node.hasDescendant(lastblock.key)) ind[1] = i;\n      return ind;\n    }, []);\n\n    index = indexes[0];\n    siblings = parent.nodes.slice(indexes[0], indexes[1] + 1);\n  }\n\n  // Get the index to place the new wrapped node at.\n  if (index == null) {\n    index = parent.nodes.indexOf(siblings.first());\n  }\n\n  editor.withoutNormalizing(function () {\n    // Inject the new block node into the parent.\n    editor.insertNodeByKey(parent.key, index, block);\n\n    // Move the sibling nodes into the new block node.\n    siblings.forEach(function (node, i) {\n      editor.moveNodeByKey(node.key, block.key, i);\n    });\n  });\n};\n\n/**\n * Wrap the text and inlines in a `range` in a new `inline`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Inline|Object|String} inline\n */\n\nCommands$1.wrapInlineAtRange = function (editor, range, inline) {\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start,\n      end = range.end;\n\n\n  if (range.isCollapsed) {\n    // Wrapping an inline void\n    var inlineParent = document.getClosestInline(start.path);\n\n    if (!inlineParent) {\n      return;\n    }\n\n    if (!editor.isVoid(inlineParent)) {\n      return;\n    }\n\n    return editor.wrapInlineByKey(inlineParent.key, inline);\n  }\n\n  inline = Inline.create(inline);\n  inline = inline.set('nodes', inline.nodes.clear());\n\n  var blocks = document.getLeafBlocksAtRange(range);\n  var startBlock = document.getClosestBlock(start.path);\n  var endBlock = document.getClosestBlock(end.path);\n  var startInline = document.getClosestInline(start.path);\n  var endInline = document.getClosestInline(end.path);\n  var startChild = startBlock.getFurthestChild(start.key);\n  var endChild = endBlock.getFurthestChild(end.key);\n\n  editor.withoutNormalizing(function () {\n    if (!startInline || startInline !== endInline) {\n      editor.splitDescendantsByKey(endChild.key, end.key, end.offset);\n      editor.splitDescendantsByKey(startChild.key, start.key, start.offset);\n    }\n\n    document = editor.value.document;\n    startBlock = document.getDescendant(startBlock.key);\n    endBlock = document.getDescendant(endBlock.key);\n    startChild = startBlock.getFurthestChild(start.key);\n    endChild = endBlock.getFurthestChild(end.key);\n    var startIndex = startBlock.nodes.indexOf(startChild);\n    var endIndex = endBlock.nodes.indexOf(endChild);\n\n    if (startInline && startInline === endInline) {\n      var texts = startBlock.getTextsAtRange(range).map(function (text) {\n        if (start.key === text.key && end.key === text.key) {\n          return text.splitText(start.offset)[1].splitText(end.offset - start.offset)[0].regenerateKey();\n        } else if (start.key === text.key) {\n          return text.splitText(start.offset)[1].regenerateKey();\n        } else if (end.key === text.key) {\n          return text.splitText(end.offset)[0].regenerateKey();\n        } else {\n          return text.regenerateKey();\n        }\n      });\n\n      inline = inline.set('nodes', texts);\n      editor.insertInlineAtRange(range, inline);\n    } else if (startBlock === endBlock) {\n      document = editor.value.document;\n      startBlock = document.getClosestBlock(start.key);\n      startChild = startBlock.getFurthestChild(start.key);\n\n      var startInner = document.getNextSibling(startChild.key);\n      var startInnerIndex = startBlock.nodes.indexOf(startInner);\n      var endInner = start.key === end.key ? startInner : startBlock.getFurthestChild(end.key);\n      var inlines = startBlock.nodes.skipUntil(function (n) {\n        return n === startInner;\n      }).takeUntil(function (n) {\n        return n === endInner;\n      }).push(endInner);\n\n      var node = inline.regenerateKey();\n\n      editor.insertNodeByKey(startBlock.key, startInnerIndex, node);\n\n      inlines.forEach(function (child, i) {\n        editor.moveNodeByKey(child.key, node.key, i);\n      });\n    } else {\n      var startInlines = startBlock.nodes.slice(startIndex + 1);\n      var endInlines = endBlock.nodes.slice(0, endIndex + 1);\n      var startNode = inline.regenerateKey();\n      var endNode = inline.regenerateKey();\n\n      editor.insertNodeByKey(startBlock.key, startIndex + 1, startNode);\n      editor.insertNodeByKey(endBlock.key, endIndex, endNode);\n\n      startInlines.forEach(function (child, i) {\n        editor.moveNodeByKey(child.key, startNode.key, i);\n      });\n\n      endInlines.forEach(function (child, i) {\n        editor.moveNodeByKey(child.key, endNode.key, i);\n      });\n\n      blocks.slice(1, -1).forEach(function (block) {\n        var node = inline.regenerateKey();\n        editor.insertNodeByKey(block.key, 0, node);\n\n        block.nodes.forEach(function (child, i) {\n          editor.moveNodeByKey(child.key, node.key, i);\n        });\n      });\n    }\n  });\n};\n\n/**\n * Wrap the text in a `range` in a prefix/suffix.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {String} prefix\n * @param {String} suffix (optional)\n */\n\nCommands$1.wrapTextAtRange = function (editor, range, prefix) {\n  var suffix = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : prefix;\n  var start = range.start,\n      end = range.end;\n\n  var startRange = range.moveToStart();\n  var endRange = range.moveToEnd();\n\n  if (start.path.equals(end.path)) {\n    endRange = endRange.moveForward(prefix.length);\n  }\n\n  editor.withoutNormalizing(function () {\n    editor.insertTextAtRange(startRange, prefix);\n    editor.insertTextAtRange(endRange, suffix);\n  });\n};\n\n/**\n * Commands.\n *\n * @type {Object}\n */\n\nvar Commands$2 = {};\n\n/**\n * Add mark to text at `offset` and `length` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {Number} length\n * @param {Mixed} mark\n */\n\nCommands$2.addMarkByPath = function (editor, path, offset, length, mark) {\n  mark = Mark.create(mark);\n  editor.addMarksByPath(path, offset, length, [mark]);\n};\n\nCommands$2.addMarksByPath = function (editor, path, offset, length, marks) {\n  marks = Mark.createSet(marks);\n\n  if (!marks.size) {\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.assertNode(path);\n\n  editor.withoutNormalizing(function () {\n    // If it ends before the end of the node, we'll need to split to create a new\n    // text with different marks.\n    if (offset + length < node.text.length) {\n      editor.splitNodeByPath(path, offset + length);\n    }\n\n    // Same thing if it starts after the start. But in that case, we need to\n    // update our path and offset to point to the new start.\n    if (offset > 0) {\n      editor.splitNodeByPath(path, offset);\n      path = PathUtils.increment(path);\n      offset = 0;\n    }\n\n    marks.forEach(function (mark) {\n      editor.applyOperation({\n        type: 'add_mark',\n        path: path,\n        mark: Mark.create(mark)\n      });\n    });\n  });\n};\n\n/**\n * Sets specific set of marks on the path\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {Number} length\n * @param {Array<Object|Mark>} marks\n */\n\nCommands$2.replaceMarksByPath = function (editor, path, offset, length, marks) {\n  var marksSet = Mark.createSet(marks);\n\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.assertNode(path);\n\n  if (node.marks.equals(marksSet)) {\n    return;\n  }\n\n  editor.withoutNormalizing(function () {\n    // If it ends before the end of the node, we'll need to split to create a new\n    // text with different marks.\n    if (offset + length < node.text.length) {\n      editor.splitNodeByPath(path, offset + length);\n    }\n\n    // Same thing if it starts after the start. But in that case, we need to\n    // update our path and offset to point to the new start.\n    if (offset > 0) {\n      editor.splitNodeByPath(path, offset);\n      path = PathUtils.increment(path);\n      offset = 0;\n    }\n\n    var marksToApply = marksSet.subtract(node.marks);\n    var marksToRemove = node.marks.subtract(marksSet);\n\n    marksToRemove.forEach(function (mark) {\n      editor.applyOperation({\n        type: 'remove_mark',\n        path: path,\n        mark: Mark.create(mark)\n      });\n    });\n\n    marksToApply.forEach(function (mark) {\n      editor.applyOperation({\n        type: 'add_mark',\n        path: path,\n        mark: Mark.create(mark)\n      });\n    });\n  });\n};\n\n/**\n * Insert a `fragment` at `index` in a node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} index\n * @param {Fragment} fragment\n */\n\nCommands$2.insertFragmentByPath = function (editor, path, index, fragment) {\n  fragment.nodes.forEach(function (node, i) {\n    editor.insertNodeByPath(path, index + i, node);\n  });\n};\n\n/**\n * Insert a `node` at `index` in a node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} index\n * @param {Node} node\n */\n\nCommands$2.insertNodeByPath = function (editor, path, index, node) {\n  editor.applyOperation({\n    type: 'insert_node',\n    path: path.concat(index),\n    node: node\n  });\n};\n\n/**\n * Insert `text` at `offset` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {String} text\n * @param {Set<Mark>} marks (optional)\n */\n\nCommands$2.insertTextByPath = function (editor, path, offset, text, marks) {\n  var value = editor.value;\n  var annotations = value.annotations,\n      document = value.document;\n\n  document.assertNode(path);\n\n  editor.withoutNormalizing(function () {\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = annotations.values()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var annotation = _step.value;\n        var start = annotation.start,\n            end = annotation.end;\n\n        var isAtomic = editor.isAtomic(annotation);\n\n        if (!isAtomic) {\n          continue;\n        }\n\n        if (!start.path.equals(path)) {\n          continue;\n        }\n\n        if (start.offset < offset && (!end.path.equals(path) || end.offset > offset)) {\n          editor.removeAnnotation(annotation);\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    editor.applyOperation({\n      type: 'insert_text',\n      path: path,\n      offset: offset,\n      text: text\n    });\n\n    if (marks) {\n      editor.replaceMarksByPath(path, offset, text.length, marks);\n    }\n  });\n};\n\n/**\n * Merge a node by `path` with the previous node.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\nCommands$2.mergeNodeByPath = function (editor, path) {\n  var value = editor.value;\n  var document = value.document;\n\n  var original = document.getDescendant(path);\n  var previous = document.getPreviousSibling(path);\n\n  if (!previous) {\n    throw new Error('Unable to merge node with path \"' + path + '\", because it has no previous sibling.');\n  }\n\n  var position = previous.object === 'text' ? previous.text.length : previous.nodes.size;\n\n  editor.applyOperation({\n    type: 'merge_node',\n    path: path,\n    position: position,\n    // for undos to succeed we only need the type and data because\n    // these are the only properties that get changed in the merge operation\n    properties: {\n      type: original.type,\n      data: original.data\n    },\n    target: null\n  });\n};\n\n/**\n * Move a node by `path` to a new parent by `newParentPath` and `newIndex`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {String} newParentPath\n * @param {Number} newIndex\n */\n\nCommands$2.moveNodeByPath = function (editor, path, newParentPath, newIndex) {\n  // If the operation path and newParentPath are the same,\n  // this should be considered a NOOP\n  if (PathUtils.isEqual(path, newParentPath)) {\n    return editor;\n  }\n\n  var newPath = newParentPath.concat(newIndex);\n\n  if (PathUtils.isEqual(path, newPath)) {\n    return editor;\n  }\n\n  editor.applyOperation({\n    type: 'move_node',\n    path: path,\n    newPath: newPath\n  });\n};\n\n/**\n * Remove mark from text at `offset` and `length` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {Number} length\n * @param {Mark} mark\n */\n\nCommands$2.removeMarkByPath = function (editor, path, offset, length, mark) {\n  mark = Mark.create(mark);\n  editor.removeMarksByPath(path, offset, length, [mark]);\n};\n\nCommands$2.removeMarksByPath = function (editor, path, offset, length, marks) {\n  marks = Mark.createSet(marks);\n\n  if (!marks.size) {\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.assertNode(path);\n\n  if (marks.intersect(node.marks).isEmpty()) {\n    return;\n  }\n\n  editor.withoutNormalizing(function () {\n    // If it ends before the end of the node, we'll need to split to create a new\n    // text with different marks.\n    if (offset + length < node.text.length) {\n      editor.splitNodeByPath(path, offset + length);\n    }\n\n    // Same thing if it starts after the start. But in that case, we need to\n    // update our path and offset to point to the new start.\n    if (offset > 0) {\n      editor.splitNodeByPath(path, offset);\n      path = PathUtils.increment(path);\n      offset = 0;\n    }\n\n    marks.forEach(function (mark) {\n      editor.applyOperation({\n        type: 'remove_mark',\n        path: path,\n        offset: offset,\n        length: length,\n        mark: mark\n      });\n    });\n  });\n};\n\n/**\n * Remove all `marks` from node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\nCommands$2.removeAllMarksByPath = function (editor, path) {\n  var state = editor.state;\n  var document = state.document;\n\n  var node = document.assertNode(path);\n\n  editor.withoutNormalizing(function () {\n    if (node.object === 'text') {\n      editor.removeMarksByPath(path, 0, node.text.length, node.marks);\n      return;\n    }\n\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = node.texts()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var _ref = _step2.value;\n\n        var _ref2 = slicedToArray(_ref, 2);\n\n        var n = _ref2[0];\n        var p = _ref2[1];\n\n        var pth = path.concat(p);\n        editor.removeMarksByPath(pth, 0, n.text.length, n.marks);\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n  });\n};\n\n/**\n * Remove a node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\nCommands$2.removeNodeByPath = function (editor, path) {\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.assertNode(path);\n\n  editor.applyOperation({\n    type: 'remove_node',\n    path: path,\n    node: node\n  });\n};\n\n/**\n * Remove text at `offset` and `length` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {Number} length\n */\n\nCommands$2.removeTextByPath = function (editor, path, offset, length) {\n  var value = editor.value;\n  var document = value.document,\n      annotations = value.annotations;\n\n  var node = document.assertNode(path);\n  var text = node.text.slice(offset, offset + length);\n\n  editor.withoutNormalizing(function () {\n    var _iteratorNormalCompletion3 = true;\n    var _didIteratorError3 = false;\n    var _iteratorError3 = undefined;\n\n    try {\n      for (var _iterator3 = annotations.values()[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n        var annotation = _step3.value;\n        var start = annotation.start,\n            end = annotation.end;\n\n        var isAtomic = editor.isAtomic(annotation);\n\n        if (!isAtomic) {\n          continue;\n        }\n\n        if (!start.path.equals(path)) {\n          continue;\n        }\n\n        if (start.offset < offset && (!end.path.equals(path) || end.offset > offset)) {\n          editor.removeAnnotation(annotation);\n        }\n      }\n    } catch (err) {\n      _didIteratorError3 = true;\n      _iteratorError3 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion3 && _iterator3.return) {\n          _iterator3.return();\n        }\n      } finally {\n        if (_didIteratorError3) {\n          throw _iteratorError3;\n        }\n      }\n    }\n\n    editor.applyOperation({\n      type: 'remove_text',\n      path: path,\n      offset: offset,\n      text: text\n    });\n  });\n};\n\n/**\n`* Replace a `node` with another `node`\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Object|Node} node\n */\n\nCommands$2.replaceNodeByPath = function (editor, path, newNode) {\n  newNode = Node.create(newNode);\n  var index = path.last();\n  var parentPath = PathUtils.lift(path);\n\n  editor.withoutNormalizing(function () {\n    editor.removeNodeByPath(path);\n    editor.insertNodeByPath(parentPath, index, newNode);\n  });\n};\n\n/**\n * Replace a `length` of text at `offset` with new `text` and optional `marks`.\n *\n * @param {Editor} editor\n * @param {String} key\n * @param {Number} offset\n * @param {Number} length\n * @param {string} text\n * @param {Set<Mark>} marks (optional)\n */\n\nCommands$2.replaceTextByPath = function (editor, path, offset, length, text, marks) {\n  editor.withoutNormalizing(function () {\n    editor.removeTextByPath(path, offset, length);\n    editor.insertTextByPath(path, offset, text, marks);\n  });\n};\n\n/**\n * Set `newProperties` on mark on text at `offset` and `length` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {Number} length\n * @param {Object|Mark} properties\n * @param {Object} newProperties\n */\n\nCommands$2.setMarkByPath = function (editor, path, offset, length, properties, newProperties) {\n  properties = Mark.create(properties);\n  newProperties = Mark.createProperties(newProperties);\n\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.assertNode(path);\n\n  editor.withoutNormalizing(function () {\n    // If it ends before the end of the node, we'll need to split to create a new\n    // text with different marks.\n    if (offset + length < node.text.length) {\n      editor.splitNodeByPath(path, offset + length);\n    }\n\n    // Same thing if it starts after the start. But in that case, we need to\n    // update our path and offset to point to the new start.\n    if (offset > 0) {\n      editor.splitNodeByPath(path, offset);\n      path = PathUtils.increment(path);\n      offset = 0;\n    }\n\n    editor.applyOperation({\n      type: 'set_mark',\n      path: path,\n      properties: properties,\n      newProperties: newProperties\n    });\n  });\n};\n\n/**\n * Set `properties` on a node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Object|String} newProperties\n */\n\nCommands$2.setNodeByPath = function (editor, path, newProperties) {\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.assertNode(path);\n  newProperties = Node.createProperties(newProperties);\n  var prevProperties = pick(node, Object.keys(newProperties));\n\n  editor.applyOperation({\n    type: 'set_node',\n    path: path,\n    properties: prevProperties,\n    newProperties: newProperties\n  });\n};\n\n/**\n * Insert `text` at `offset` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {String} text\n * @param {Set<Mark>} marks (optional)\n */\n\nCommands$2.setTextByPath = function (editor, path, text, marks) {\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.assertNode(path);\n  var end = node.text.length;\n  editor.replaceTextByPath(path, 0, end, text, marks);\n};\n\n/**\n * Split a node by `path` at `position`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} position\n * @param {Object} options\n */\n\nCommands$2.splitNodeByPath = function (editor, path, position) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var _options$target = options.target,\n      target = _options$target === undefined ? null : _options$target;\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.getDescendant(path);\n\n  editor.applyOperation({\n    type: 'split_node',\n    path: path,\n    position: position,\n    target: target,\n    properties: {\n      type: node.type,\n      data: node.data\n    }\n  });\n};\n\n/**\n * Split a node deeply down the tree by `path`, `textPath` and `textOffset`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Array} textPath\n * @param {Number} textOffset\n */\n\nCommands$2.splitDescendantsByPath = function (editor, path, textPath, textOffset) {\n  if (path.equals(textPath)) {\n    editor.splitNodeByPath(textPath, textOffset);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n\n  var index = textOffset;\n  var lastPath = textPath;\n\n  editor.withoutNormalizing(function () {\n    editor.splitNodeByKey(textPath, textOffset);\n\n    var _iteratorNormalCompletion4 = true;\n    var _didIteratorError4 = false;\n    var _iteratorError4 = undefined;\n\n    try {\n      for (var _iterator4 = document.ancestors(textPath)[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n        var _ref3 = _step4.value;\n\n        var _ref4 = slicedToArray(_ref3, 2);\n\n        var ancestorPath = _ref4[1];\n\n        var target = index;\n        index = lastPath.last() + 1;\n        lastPath = ancestorPath;\n        editor.splitNodeByPath(ancestorPath, index, { target: target });\n\n        if (ancestorPath.equals(path)) {\n          break;\n        }\n      }\n    } catch (err) {\n      _didIteratorError4 = true;\n      _iteratorError4 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion4 && _iterator4.return) {\n          _iterator4.return();\n        }\n      } finally {\n        if (_didIteratorError4) {\n          throw _iteratorError4;\n        }\n      }\n    }\n  });\n};\n\n/**\n * Unwrap content from an inline parent with `properties`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Object|String} properties\n */\n\nCommands$2.unwrapInlineByPath = function (editor, path, properties) {\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  var node = document.assertNode(path);\n  var first = node.getFirstText();\n  var last = node.getLastText();\n  var range = selection.moveToRangeOfNode(first, last);\n  editor.unwrapInlineAtRange(range, properties);\n};\n\n/**\n * Unwrap content from a block parent with `properties`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Object|String} properties\n */\n\nCommands$2.unwrapBlockByPath = function (editor, path, properties) {\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  var node = document.assertNode(path);\n  var first = node.getFirstText();\n  var last = node.getLastText();\n  var range = selection.moveToRangeOfNode(first, last);\n  editor.unwrapBlockAtRange(range, properties);\n};\n\n/**\n * Unwrap a single node from its parent.\n *\n * If the node is surrounded with siblings, its parent will be\n * split. If the node is the only child, the parent is removed, and\n * simply replaced by the node itself.  Cannot unwrap a root node.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\nCommands$2.unwrapNodeByPath = function (editor, path) {\n  var value = editor.value;\n  var document = value.document;\n\n  document.assertNode(path);\n\n  var parentPath = PathUtils.lift(path);\n  var parent = document.assertNode(parentPath);\n  var index = path.last();\n  var parentIndex = parentPath.last();\n  var grandPath = PathUtils.lift(parentPath);\n  var isFirst = index === 0;\n  var isLast = index === parent.nodes.size - 1;\n\n  editor.withoutNormalizing(function () {\n    if (parent.nodes.size === 1) {\n      editor.moveNodeByPath(path, grandPath, parentIndex + 1);\n      editor.removeNodeByPath(parentPath);\n    } else if (isFirst) {\n      editor.moveNodeByPath(path, grandPath, parentIndex);\n    } else if (isLast) {\n      editor.moveNodeByPath(path, grandPath, parentIndex + 1);\n    } else {\n      var updatedPath = PathUtils.increment(path, 1, parentPath.size - 1);\n      updatedPath = updatedPath.set(updatedPath.size - 1, 0);\n      editor.splitNodeByPath(parentPath, index);\n      editor.moveNodeByPath(updatedPath, grandPath, parentIndex + 1);\n    }\n  });\n};\n\n/**\n * Unwrap all of the children of a node, by removing the node and replacing it\n * with the children in the tree.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\nCommands$2.unwrapChildrenByPath = function (editor, path) {\n  path = PathUtils.create(path);\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.assertNode(path);\n  var parentPath = PathUtils.lift(path);\n  var index = path.last();\n  var nodes = node.nodes;\n\n\n  editor.withoutNormalizing(function () {\n    nodes.reverse().forEach(function (child, i) {\n      var childIndex = nodes.size - i - 1;\n      var childPath = path.push(childIndex);\n      editor.moveNodeByPath(childPath, parentPath, index + 1);\n    });\n\n    editor.removeNodeByPath(path);\n  });\n};\n\n/**\n * Wrap a node in a block with `properties`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Block|Object|String} block\n */\n\nCommands$2.wrapBlockByPath = function (editor, path, block) {\n  block = Block.create(block);\n  block = block.set('nodes', block.nodes.clear());\n  var parentPath = PathUtils.lift(path);\n  var index = path.last();\n  var newPath = PathUtils.increment(path);\n\n  editor.withoutNormalizing(function () {\n    editor.insertNodeByPath(parentPath, index, block);\n    editor.moveNodeByPath(newPath, path, 0);\n  });\n};\n\n/**\n * Wrap a node in an inline with `properties`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Block|Object|String} inline\n */\n\nCommands$2.wrapInlineByPath = function (editor, path, inline) {\n  inline = Inline.create(inline);\n  inline = inline.set('nodes', inline.nodes.clear());\n  var parentPath = PathUtils.lift(path);\n  var index = path.last();\n  var newPath = PathUtils.increment(path);\n\n  editor.withoutNormalizing(function () {\n    editor.insertNodeByPath(parentPath, index, inline);\n    editor.moveNodeByPath(newPath, path, 0);\n  });\n};\n\n/**\n * Wrap a node by `path` with `node`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Node|Object} node\n */\n\nCommands$2.wrapNodeByPath = function (editor, path, node) {\n  node = Node.create(node);\n\n  if (node.object === 'block') {\n    editor.wrapBlockByPath(path, node);\n  } else if (node.object === 'inline') {\n    editor.wrapInlineByPath(path, node);\n  }\n};\n\n/**\n * Mix in `*ByKey` variants.\n */\n\nvar COMMANDS = ['addMark', 'insertFragment', 'insertNode', 'insertText', 'mergeNode', 'removeAllMarks', 'removeMark', 'removeNode', 'removeText', 'replaceMarks', 'replaceNode', 'replaceText', 'setMark', 'setNode', 'setText', 'splitNode', 'unwrapBlock', 'unwrapChildren', 'unwrapInline', 'unwrapNode', 'wrapBlock', 'wrapInline', 'wrapNode'];\n\nvar _loop = function _loop(method) {\n  Commands$2[method + 'ByKey'] = function (editor, key) {\n    for (var _len3 = arguments.length, args = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n      args[_key3 - 2] = arguments[_key3];\n    }\n\n    var value = editor.value;\n    var document = value.document;\n\n    var path = document.assertPath(key);\n    editor[method + 'ByPath'].apply(editor, [path].concat(args));\n  };\n};\n\nvar _iteratorNormalCompletion5 = true;\nvar _didIteratorError5 = false;\nvar _iteratorError5 = undefined;\n\ntry {\n  for (var _iterator5 = COMMANDS[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n    var method = _step5.value;\n\n    _loop(method);\n  }\n\n  // Moving nodes takes two keys, so it's slightly different.\n} catch (err) {\n  _didIteratorError5 = true;\n  _iteratorError5 = err;\n} finally {\n  try {\n    if (!_iteratorNormalCompletion5 && _iterator5.return) {\n      _iterator5.return();\n    }\n  } finally {\n    if (_didIteratorError5) {\n      throw _iteratorError5;\n    }\n  }\n}\n\nCommands$2.moveNodeByKey = function (editor, key, newKey) {\n  for (var _len = arguments.length, args = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    args[_key - 3] = arguments[_key];\n  }\n\n  var value = editor.value;\n  var document = value.document;\n\n  var path = document.assertPath(key);\n  var newPath = document.assertPath(newKey);\n  editor.moveNodeByPath.apply(editor, [path, newPath].concat(args));\n};\n\n// Splitting descendants takes two keys, so it's slightly different.\nCommands$2.splitDescendantsByKey = function (editor, key, textKey) {\n  for (var _len2 = arguments.length, args = Array(_len2 > 3 ? _len2 - 3 : 0), _key2 = 3; _key2 < _len2; _key2++) {\n    args[_key2 - 3] = arguments[_key2];\n  }\n\n  var value = editor.value;\n  var document = value.document;\n\n  var path = document.assertPath(key);\n  var textPath = document.assertPath(textKey);\n  editor.splitDescendantsByPath.apply(editor, [path, textPath].concat(args));\n};\n\n/**\n * Commands.\n *\n * @type {Object}\n */\n\nvar Commands$3 = {};\n\n/**\n * Save an `operation` into the history.\n *\n * @param {Editor} editor\n * @param {Object} operation\n */\n\nCommands$3.save = function (editor, operation) {\n  var operations = editor.operations,\n      value = editor.value;\n  var data = value.data;\n  var _editor$tmp = editor.tmp,\n      save = _editor$tmp.save,\n      merge = _editor$tmp.merge;\n\n  if (save === false || !isValidOperation(operation)) return;\n\n  var undos = data.get('undos') || List();\n  var lastBatch = undos.last();\n  var lastOperation = lastBatch && lastBatch.last();\n\n  // If `merge` is non-commital, and this is not the first operation in a new\n  // editor, then merge, otherwise merge based on the last operation.\n  if (merge == null) {\n    if (operations.size !== 0) {\n      merge = true;\n    } else {\n      merge = shouldMerge(operation, lastOperation);\n    }\n  }\n\n  // If the `merge` flag is true, add the operation to the last batch.\n  if (merge && lastBatch) {\n    var batch = lastBatch.push(operation);\n    undos = undos.pop();\n    undos = undos.push(batch);\n  } else {\n    // Otherwise, create a new batch with the operation.\n    var _batch = List([operation]);\n    undos = undos.push(_batch);\n  }\n\n  // Constrain the history to 100 entries for memory's sake.\n  if (undos.size > 100) {\n    undos = undos.takeLast(100);\n  }\n\n  // Clear the redos and update the history.\n  editor.withoutSaving(function () {\n    var redos = List();\n    var newData = data.set('undos', undos).set('redos', redos);\n    editor.setData(newData);\n  });\n};\n\n/**\n * Redo to the next value in the history.\n *\n * @param {Editor} editor\n */\n\nCommands$3.redo = function (editor) {\n  var value = editor.value;\n  var data = value.data;\n\n  var redos = data.get('redos') || List();\n  var undos = data.get('undos') || List();\n  var batch = redos.last();\n  if (!batch) return;\n\n  editor.withoutSaving(function () {\n    editor.withoutNormalizing(function () {\n      // Replay the batch of operations.\n      batch.forEach(function (op) {\n        var _op = op,\n            type = _op.type,\n            newProperties = _op.newProperties;\n\n        // When the operation mutates the selection, omit its `isFocused` value to\n        // prevent the editor focus from changing during redoing.\n\n        if (type === 'set_selection') {\n          op = op.set('newProperties', omit(newProperties, 'isFocused'));\n        }\n\n        editor.applyOperation(op);\n      });\n\n      // Shift the next value into the undo stack.\n      redos = redos.pop();\n      undos = undos.push(batch);\n      var newData = data.set('undos', undos).set('redos', redos);\n      editor.setData(newData);\n    });\n  });\n};\n\n/**\n * Undo the previous operations in the history.\n *\n * @param {Editor} editor\n */\n\nCommands$3.undo = function (editor) {\n  var value = editor.value;\n  var data = value.data;\n\n  var redos = data.get('redos') || List();\n  var undos = data.get('undos') || List();\n  var batch = undos.last();\n  if (!batch) return;\n\n  editor.withoutSaving(function () {\n    editor.withoutNormalizing(function () {\n      // Replay the inverse of the previous operations.\n      batch.slice().reverse().map(function (op) {\n        return op.invert();\n      }).forEach(function (inverse) {\n        var _inverse = inverse,\n            type = _inverse.type,\n            newProperties = _inverse.newProperties;\n\n        // When the operation mutates the selection, omit its `isFocused` value to\n        // prevent the editor focus from changing during undoing.\n\n        if (type === 'set_selection') {\n          inverse = inverse.set('newProperties', omit(newProperties, 'isFocused'));\n        }\n\n        editor.applyOperation(inverse);\n      });\n\n      // Shift the previous operations into the redo stack.\n      redos = redos.push(batch);\n      undos = undos.pop();\n      var newData = data.set('undos', undos).set('redos', redos);\n      editor.setData(newData);\n    });\n  });\n};\n\n/**\n * Apply a series of changes inside a synchronous `fn`, without merging any of\n * the new operations into previous save point in the history.\n *\n * @param {Editor} editor\n * @param {Function} fn\n */\n\nCommands$3.withoutMerging = function (editor, fn) {\n  var value = editor.tmp.merge;\n  editor.tmp.merge = false;\n  fn(editor);\n  editor.tmp.merge = value;\n};\n\n/**\n * Apply a series of changes inside a synchronous `fn`, without saving any of\n * their operations into the history.\n *\n * @param {Editor} editor\n * @param {Function} fn\n */\n\nCommands$3.withoutSaving = function (editor, fn) {\n  var value = editor.tmp.save;\n  editor.tmp.save = false;\n  fn(editor);\n  editor.tmp.save = value;\n};\n\n/**\n * Check whether to merge a new operation `o` into the previous operation `p`.\n *\n * @param {Object} o\n * @param {Object} p\n * @return {Boolean}\n */\n\nfunction shouldMerge(o, p) {\n  if (!p) return false;\n\n  var merge = o.type === 'set_selection' && p.type === 'set_selection' || o.type === 'insert_text' && p.type === 'insert_text' && o.offset === p.offset + p.text.length && o.path.equals(p.path) || o.type === 'remove_text' && p.type === 'remove_text' && o.offset + o.text.length === p.offset && o.path.equals(p.path);\n\n  return merge;\n}\n\n/**\n * Check weather an operation needs to be saved to the history\n * @param {Object} o - operation\n * @returns {Boolean}\n */\n\nfunction isValidOperation(o) {\n  if (o.type === 'set_selection') {\n    var _o$newProperties = o.newProperties,\n        isFocused = _o$newProperties.isFocused,\n        anchor = _o$newProperties.anchor,\n        focus = _o$newProperties.focus;\n\n    // this is blur/focus operation, dont need to store it into the history\n\n    if (isFocused !== undefined && !anchor && !focus) {\n      return false;\n    }\n  }\n  return true;\n}\n\nvar Commands$4 = {};\n\nCommands$4.blur = function (editor) {\n  editor.select({ isFocused: false });\n};\n\nCommands$4.deselect = function (editor) {\n  var range = Selection.create();\n  editor.select(range);\n};\n\nCommands$4.focus = function (editor) {\n  editor.select({ isFocused: true });\n};\n\nCommands$4.flip = function (editor) {\n  editor.command(proxy, 'flip');\n};\n\nCommands$4.moveAnchorBackward = function (editor) {\n  for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  editor.command.apply(editor, [pointBackward, 'anchor'].concat(args));\n};\n\nCommands$4.moveAnchorWordBackward = function (editor) {\n  for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  editor.command.apply(editor, [pointWordBackward, 'anchor'].concat(args));\n};\n\nCommands$4.moveAnchorForward = function (editor) {\n  for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    args[_key3 - 1] = arguments[_key3];\n  }\n\n  editor.command.apply(editor, [pointForward, 'anchor'].concat(args));\n};\n\nCommands$4.moveAnchorWordForward = function (editor) {\n  for (var _len4 = arguments.length, args = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    args[_key4 - 1] = arguments[_key4];\n  }\n\n  editor.command.apply(editor, [pointWordForward, 'anchor'].concat(args));\n};\n\nCommands$4.moveAnchorTo = function (editor) {\n  for (var _len5 = arguments.length, args = Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n    args[_key5 - 1] = arguments[_key5];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveAnchorTo'].concat(args));\n};\n\nCommands$4.moveAnchorToEndOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'end', 'block');\n};\n\nCommands$4.moveAnchorToEndOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'end', 'inline');\n};\n\nCommands$4.moveAnchorToEndOfDocument = function (editor) {\n  editor.moveAnchorToEndOfNode(editor.value.document).moveToAnchor();\n};\n\nCommands$4.moveAnchorToEndOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'next', 'block');\n};\n\nCommands$4.moveAnchorToEndOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'next', 'inline');\n};\n\nCommands$4.moveAnchorToEndOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'next', 'text');\n};\n\nCommands$4.moveAnchorToEndOfNode = function (editor) {\n  for (var _len6 = arguments.length, args = Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {\n    args[_key6 - 1] = arguments[_key6];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveAnchorToEndOfNode'].concat(args));\n};\n\nCommands$4.moveAnchorToEndOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'previous', 'block');\n};\n\nCommands$4.moveAnchorToEndOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'previous', 'inline');\n};\n\nCommands$4.moveAnchorToEndOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'previous', 'text');\n};\n\nCommands$4.moveAnchorToEndOfText = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'end', 'text');\n};\n\nCommands$4.moveAnchorToStartOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'start', 'block');\n};\n\nCommands$4.moveAnchorToStartOfDocument = function (editor) {\n  editor.moveAnchorToStartOfNode(editor.value.document).moveToAnchor();\n};\n\nCommands$4.moveAnchorToStartOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'start', 'inline');\n};\n\nCommands$4.moveAnchorToStartOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'next', 'block');\n};\n\nCommands$4.moveAnchorToStartOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'next', 'inline');\n};\n\nCommands$4.moveAnchorToStartOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'next', 'text');\n};\n\nCommands$4.moveAnchorToStartOfNode = function (editor) {\n  for (var _len7 = arguments.length, args = Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {\n    args[_key7 - 1] = arguments[_key7];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveAnchorToStartOfNode'].concat(args));\n};\n\nCommands$4.moveAnchorToStartOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'previous', 'block');\n};\n\nCommands$4.moveAnchorToStartOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'previous', 'inline');\n};\n\nCommands$4.moveAnchorToStartOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'previous', 'text');\n};\n\nCommands$4.moveAnchorToStartOfText = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'start', 'text');\n};\n\nCommands$4.moveBackward = function (editor) {\n  var chars = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n  if (chars === 0) return;\n\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var start = selection.start;\n\n  var startBlock = document.getClosestBlock(start.key);\n  var o = startBlock.getOffset(start.key);\n  var offset = o + start.offset;\n  var text = startBlock.text;\n\n  var charsOffset = TextUtils.getCharOffsetBackward(text, offset, chars);\n  editor.moveAnchorBackward(charsOffset).moveFocusBackward(charsOffset);\n};\n\nCommands$4.moveWordBackward = function (editor) {\n  for (var _len8 = arguments.length, args = Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {\n    args[_key8 - 1] = arguments[_key8];\n  }\n\n  editor.moveFocusWordBackward.apply(editor, args).moveToFocus();\n};\n\nCommands$4.moveEndBackward = function (editor) {\n  for (var _len9 = arguments.length, args = Array(_len9 > 1 ? _len9 - 1 : 0), _key9 = 1; _key9 < _len9; _key9++) {\n    args[_key9 - 1] = arguments[_key9];\n  }\n\n  editor.command.apply(editor, [pointBackward, 'end'].concat(args));\n};\n\nCommands$4.moveEndWordBackward = function (editor) {\n  for (var _len10 = arguments.length, args = Array(_len10 > 1 ? _len10 - 1 : 0), _key10 = 1; _key10 < _len10; _key10++) {\n    args[_key10 - 1] = arguments[_key10];\n  }\n\n  editor.command.apply(editor, [pointWordBackward, 'end'].concat(args));\n};\n\nCommands$4.moveEndForward = function (editor) {\n  for (var _len11 = arguments.length, args = Array(_len11 > 1 ? _len11 - 1 : 0), _key11 = 1; _key11 < _len11; _key11++) {\n    args[_key11 - 1] = arguments[_key11];\n  }\n\n  editor.command.apply(editor, [pointForward, 'end'].concat(args));\n};\n\nCommands$4.moveEndWordForward = function (editor) {\n  for (var _len12 = arguments.length, args = Array(_len12 > 1 ? _len12 - 1 : 0), _key12 = 1; _key12 < _len12; _key12++) {\n    args[_key12 - 1] = arguments[_key12];\n  }\n\n  editor.command.apply(editor, [pointWordForward, 'end'].concat(args));\n};\n\nCommands$4.moveEndTo = function (editor) {\n  for (var _len13 = arguments.length, args = Array(_len13 > 1 ? _len13 - 1 : 0), _key13 = 1; _key13 < _len13; _key13++) {\n    args[_key13 - 1] = arguments[_key13];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveEndTo'].concat(args));\n};\n\nCommands$4.moveEndToEndOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'end', 'block');\n};\n\nCommands$4.moveEndToEndOfDocument = function (editor) {\n  editor.moveEndToEndOfNode(editor.value.document).moveToEnd();\n};\n\nCommands$4.moveEndToEndOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'end', 'inline');\n};\n\nCommands$4.moveEndToEndOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'next', 'block');\n};\n\nCommands$4.moveEndToEndOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'next', 'inline');\n};\n\nCommands$4.moveEndToEndOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'next', 'text');\n};\n\nCommands$4.moveEndToEndOfNode = function (editor) {\n  for (var _len14 = arguments.length, args = Array(_len14 > 1 ? _len14 - 1 : 0), _key14 = 1; _key14 < _len14; _key14++) {\n    args[_key14 - 1] = arguments[_key14];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveEndToEndOfNode'].concat(args));\n};\n\nCommands$4.moveEndToEndOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'previous', 'block');\n};\n\nCommands$4.moveEndToEndOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'previous', 'inline');\n};\n\nCommands$4.moveEndToEndOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'previous', 'text');\n};\n\nCommands$4.moveEndToEndOfText = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'end', 'text');\n};\n\nCommands$4.moveEndToStartOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'start', 'block');\n};\n\nCommands$4.moveEndToStartOfDocument = function (editor) {\n  editor.moveEndToStartOfNode(editor.value.document).moveToEnd();\n};\n\nCommands$4.moveEndToStartOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'start', 'inline');\n};\n\nCommands$4.moveEndToStartOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'next', 'block');\n};\n\nCommands$4.moveEndToStartOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'next', 'inline');\n};\n\nCommands$4.moveEndToStartOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'next', 'text');\n};\n\nCommands$4.moveEndToStartOfNode = function (editor) {\n  for (var _len15 = arguments.length, args = Array(_len15 > 1 ? _len15 - 1 : 0), _key15 = 1; _key15 < _len15; _key15++) {\n    args[_key15 - 1] = arguments[_key15];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveEndToStartOfNode'].concat(args));\n};\n\nCommands$4.moveEndToStartOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'previous', 'block');\n};\n\nCommands$4.moveEndToStartOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'previous', 'inline');\n};\n\nCommands$4.moveEndToStartOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'previous', 'text');\n};\n\nCommands$4.moveEndToStartOfText = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'start', 'text');\n};\n\nCommands$4.moveFocusBackward = function (editor) {\n  for (var _len16 = arguments.length, args = Array(_len16 > 1 ? _len16 - 1 : 0), _key16 = 1; _key16 < _len16; _key16++) {\n    args[_key16 - 1] = arguments[_key16];\n  }\n\n  editor.command.apply(editor, [pointBackward, 'focus'].concat(args));\n};\n\nCommands$4.moveFocusWordBackward = function (editor) {\n  for (var _len17 = arguments.length, args = Array(_len17 > 1 ? _len17 - 1 : 0), _key17 = 1; _key17 < _len17; _key17++) {\n    args[_key17 - 1] = arguments[_key17];\n  }\n\n  editor.command.apply(editor, [pointWordBackward, 'focus'].concat(args));\n};\n\nCommands$4.moveFocusForward = function (editor) {\n  for (var _len18 = arguments.length, args = Array(_len18 > 1 ? _len18 - 1 : 0), _key18 = 1; _key18 < _len18; _key18++) {\n    args[_key18 - 1] = arguments[_key18];\n  }\n\n  editor.command.apply(editor, [pointForward, 'focus'].concat(args));\n};\n\nCommands$4.moveFocusWordForward = function (editor) {\n  for (var _len19 = arguments.length, args = Array(_len19 > 1 ? _len19 - 1 : 0), _key19 = 1; _key19 < _len19; _key19++) {\n    args[_key19 - 1] = arguments[_key19];\n  }\n\n  editor.command.apply(editor, [pointWordForward, 'focus'].concat(args));\n};\n\nCommands$4.moveFocusTo = function (editor) {\n  for (var _len20 = arguments.length, args = Array(_len20 > 1 ? _len20 - 1 : 0), _key20 = 1; _key20 < _len20; _key20++) {\n    args[_key20 - 1] = arguments[_key20];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveFocusTo'].concat(args));\n};\n\nCommands$4.moveFocusToEndOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'end', 'block');\n};\n\nCommands$4.moveFocusToEndOfDocument = function (editor) {\n  editor.moveFocusToEndOfNode(editor.value.document).moveToFocus();\n};\n\nCommands$4.moveFocusToEndOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'end', 'inline');\n};\n\nCommands$4.moveFocusToEndOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'next', 'block');\n};\n\nCommands$4.moveFocusToEndOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'next', 'inline');\n};\n\nCommands$4.moveFocusToEndOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'next', 'text');\n};\n\nCommands$4.moveFocusToEndOfNode = function (editor) {\n  for (var _len21 = arguments.length, args = Array(_len21 > 1 ? _len21 - 1 : 0), _key21 = 1; _key21 < _len21; _key21++) {\n    args[_key21 - 1] = arguments[_key21];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveFocusToEndOfNode'].concat(args));\n};\n\nCommands$4.moveFocusToEndOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'previous', 'block');\n};\n\nCommands$4.moveFocusToEndOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'previous', 'inline');\n};\n\nCommands$4.moveFocusToEndOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'previous', 'text');\n};\n\nCommands$4.moveFocusToEndOfText = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'end', 'text');\n};\n\nCommands$4.moveFocusToStartOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'start', 'block');\n};\n\nCommands$4.moveFocusToStartOfDocument = function (editor) {\n  editor.moveFocusToStartOfNode(editor.value.document).moveToFocus();\n};\n\nCommands$4.moveFocusToStartOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'start', 'inline');\n};\n\nCommands$4.moveFocusToStartOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'next', 'block');\n};\n\nCommands$4.moveFocusToStartOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'next', 'inline');\n};\n\nCommands$4.moveFocusToStartOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'next', 'text');\n};\n\nCommands$4.moveFocusToStartOfNode = function (editor) {\n  for (var _len22 = arguments.length, args = Array(_len22 > 1 ? _len22 - 1 : 0), _key22 = 1; _key22 < _len22; _key22++) {\n    args[_key22 - 1] = arguments[_key22];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveFocusToStartOfNode'].concat(args));\n};\n\nCommands$4.moveFocusToStartOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'previous', 'block');\n};\n\nCommands$4.moveFocusToStartOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'previous', 'inline');\n};\n\nCommands$4.moveFocusToStartOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'previous', 'text');\n};\n\nCommands$4.moveFocusToStartOfText = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'start', 'text');\n};\n\nCommands$4.moveForward = function (editor) {\n  var chars = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n  if (chars === 0) return;\n\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var start = selection.start;\n\n  var startBlock = document.getClosestBlock(start.path);\n  var o = startBlock.getOffset(start.key);\n  var offset = o + start.offset;\n  var text = startBlock.text;\n\n  var charsOffset = TextUtils.getCharOffsetForward(text, offset, chars);\n  editor.moveAnchorForward(charsOffset).moveFocusForward(charsOffset);\n};\n\nCommands$4.moveWordForward = function (editor) {\n  var _editor$moveFocusWord;\n\n  for (var _len23 = arguments.length, args = Array(_len23 > 1 ? _len23 - 1 : 0), _key23 = 1; _key23 < _len23; _key23++) {\n    args[_key23 - 1] = arguments[_key23];\n  }\n\n  (_editor$moveFocusWord = editor.moveFocusWordForward.apply(editor, args)).moveToFocus.apply(_editor$moveFocusWord, args);\n};\n\nCommands$4.moveStartBackward = function (editor) {\n  for (var _len24 = arguments.length, args = Array(_len24 > 1 ? _len24 - 1 : 0), _key24 = 1; _key24 < _len24; _key24++) {\n    args[_key24 - 1] = arguments[_key24];\n  }\n\n  editor.command.apply(editor, [pointBackward, 'start'].concat(args));\n};\n\nCommands$4.moveStartWordBackward = function (editor) {\n  for (var _len25 = arguments.length, args = Array(_len25 > 1 ? _len25 - 1 : 0), _key25 = 1; _key25 < _len25; _key25++) {\n    args[_key25 - 1] = arguments[_key25];\n  }\n\n  editor.command.apply(editor, [pointWordBackward, 'start'].concat(args));\n};\n\nCommands$4.moveStartForward = function (editor) {\n  for (var _len26 = arguments.length, args = Array(_len26 > 1 ? _len26 - 1 : 0), _key26 = 1; _key26 < _len26; _key26++) {\n    args[_key26 - 1] = arguments[_key26];\n  }\n\n  editor.command.apply(editor, [pointForward, 'start'].concat(args));\n};\n\nCommands$4.moveStartWordForward = function (editor) {\n  for (var _len27 = arguments.length, args = Array(_len27 > 1 ? _len27 - 1 : 0), _key27 = 1; _key27 < _len27; _key27++) {\n    args[_key27 - 1] = arguments[_key27];\n  }\n\n  editor.command.apply(editor, [pointWordForward, 'start'].concat(args));\n};\n\nCommands$4.moveStartTo = function (editor) {\n  for (var _len28 = arguments.length, args = Array(_len28 > 1 ? _len28 - 1 : 0), _key28 = 1; _key28 < _len28; _key28++) {\n    args[_key28 - 1] = arguments[_key28];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveStartTo'].concat(args));\n};\n\nCommands$4.moveStartToEndOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'end', 'block');\n};\n\nCommands$4.moveStartToEndOfDocument = function (editor) {\n  editor.moveStartToEndOfNode(editor.value.document).moveToStart();\n};\n\nCommands$4.moveStartToEndOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'end', 'inline');\n};\n\nCommands$4.moveStartToEndOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'next', 'block');\n};\n\nCommands$4.moveStartToEndOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'next', 'inline');\n};\n\nCommands$4.moveStartToEndOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'next', 'text');\n};\n\nCommands$4.moveStartToEndOfNode = function (editor) {\n  for (var _len29 = arguments.length, args = Array(_len29 > 1 ? _len29 - 1 : 0), _key29 = 1; _key29 < _len29; _key29++) {\n    args[_key29 - 1] = arguments[_key29];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveStartToEndOfNode'].concat(args));\n};\n\nCommands$4.moveStartToEndOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'previous', 'block');\n};\n\nCommands$4.moveStartToEndOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'previous', 'inline');\n};\n\nCommands$4.moveStartToEndOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'previous', 'text');\n};\n\nCommands$4.moveStartToEndOfText = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'end', 'text');\n};\n\nCommands$4.moveStartToStartOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'start', 'block');\n};\n\nCommands$4.moveStartToStartOfDocument = function (editor) {\n  editor.moveStartToStartOfNode(editor.value.document).moveToStart();\n};\n\nCommands$4.moveStartToStartOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'start', 'inline');\n};\n\nCommands$4.moveStartToStartOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'next', 'block');\n};\n\nCommands$4.moveStartToStartOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'next', 'inline');\n};\n\nCommands$4.moveStartToStartOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'next', 'text');\n};\n\nCommands$4.moveStartToStartOfNode = function (editor) {\n  for (var _len30 = arguments.length, args = Array(_len30 > 1 ? _len30 - 1 : 0), _key30 = 1; _key30 < _len30; _key30++) {\n    args[_key30 - 1] = arguments[_key30];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveStartToStartOfNode'].concat(args));\n};\n\nCommands$4.moveStartToStartOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'previous', 'block');\n};\n\nCommands$4.moveStartToStartOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'previous', 'inline');\n};\n\nCommands$4.moveStartToStartOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'previous', 'text');\n};\n\nCommands$4.moveStartToStartOfText = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'start', 'text');\n};\n\nCommands$4.moveTo = function (editor) {\n  for (var _len31 = arguments.length, args = Array(_len31 > 1 ? _len31 - 1 : 0), _key31 = 1; _key31 < _len31; _key31++) {\n    args[_key31 - 1] = arguments[_key31];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveTo'].concat(args));\n};\n\nCommands$4.moveToAnchor = function (editor) {\n  editor.command(proxy, 'moveToAnchor');\n};\n\nCommands$4.moveToEnd = function (editor) {\n  editor.command(proxy, 'moveToEnd');\n};\n\nCommands$4.moveToEndOfBlock = function (editor) {\n  editor.moveEndToEndOfBlock().moveToEnd();\n};\n\nCommands$4.moveToEndOfDocument = function (editor) {\n  editor.moveEndToEndOfNode(editor.value.document).moveToEnd();\n};\n\nCommands$4.moveToEndOfInline = function (editor) {\n  editor.moveEndToEndOfInline().moveToEnd();\n};\n\nCommands$4.moveToEndOfNextBlock = function (editor) {\n  editor.moveEndToEndOfNextBlock().moveToEnd();\n};\n\nCommands$4.moveToEndOfNextInline = function (editor) {\n  editor.moveEndToEndOfNextInline().moveToEnd();\n};\n\nCommands$4.moveToEndOfNextText = function (editor) {\n  editor.moveEndToEndOfNextText().moveToEnd();\n};\n\nCommands$4.moveToEndOfNode = function (editor) {\n  for (var _len32 = arguments.length, args = Array(_len32 > 1 ? _len32 - 1 : 0), _key32 = 1; _key32 < _len32; _key32++) {\n    args[_key32 - 1] = arguments[_key32];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveToEndOfNode'].concat(args));\n};\n\nCommands$4.moveToEndOfPreviousBlock = function (editor) {\n  editor.moveStartToEndOfPreviousBlock().moveToStart();\n};\n\nCommands$4.moveToEndOfPreviousInline = function (editor) {\n  editor.moveStartToEndOfPreviousInline().moveToStart();\n};\n\nCommands$4.moveToEndOfPreviousText = function (editor) {\n  editor.moveStartToEndOfPreviousText().moveToStart();\n};\n\nCommands$4.moveToEndOfText = function (editor) {\n  editor.moveEndToEndOfText().moveToEnd();\n};\n\nCommands$4.moveToFocus = function (editor) {\n  editor.command(proxy, 'moveToFocus');\n};\n\nCommands$4.moveToRangeOfDocument = function (editor) {\n  editor.moveToRangeOfNode(editor.value.document);\n};\n\nCommands$4.moveToRangeOfNode = function (editor) {\n  for (var _len33 = arguments.length, args = Array(_len33 > 1 ? _len33 - 1 : 0), _key33 = 1; _key33 < _len33; _key33++) {\n    args[_key33 - 1] = arguments[_key33];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveToRangeOfNode'].concat(args));\n};\n\nCommands$4.moveToStart = function (editor) {\n  editor.command(proxy, 'moveToStart');\n};\n\nCommands$4.moveToStartOfBlock = function (editor) {\n  editor.moveStartToStartOfBlock().moveToStart();\n};\n\nCommands$4.moveToStartOfDocument = function (editor) {\n  editor.moveStartToStartOfNode(editor.value.document).moveToStart();\n};\n\nCommands$4.moveToStartOfInline = function (editor) {\n  editor.moveStartToStartOfInline().moveToStart();\n};\n\nCommands$4.moveToStartOfNextBlock = function (editor) {\n  editor.moveEndToStartOfNextBlock().moveToEnd();\n};\n\nCommands$4.moveToStartOfNextInline = function (editor) {\n  editor.moveEndToStartOfNextInline().moveToEnd();\n};\n\nCommands$4.moveToStartOfNextText = function (editor) {\n  editor.moveEndToStartOfNextText().moveToEnd();\n};\n\nCommands$4.moveToStartOfNode = function (editor) {\n  for (var _len34 = arguments.length, args = Array(_len34 > 1 ? _len34 - 1 : 0), _key34 = 1; _key34 < _len34; _key34++) {\n    args[_key34 - 1] = arguments[_key34];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveToStartOfNode'].concat(args));\n};\n\nCommands$4.moveToStartOfPreviousBlock = function (editor) {\n  editor.moveStartToStartOfPreviousBlock().moveToStart();\n};\n\nCommands$4.moveToStartOfPreviousInline = function (editor) {\n  editor.moveStartToStartOfPreviousInline().moveToStart();\n};\n\nCommands$4.moveToStartOfPreviousText = function (editor) {\n  editor.moveStartToStartOfPreviousText().moveToStart();\n};\n\nCommands$4.moveToStartOfText = function (editor) {\n  editor.moveStartToStartOfText().moveToStart();\n};\n\nCommands$4.select = function (editor, properties) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  properties = Selection.createProperties(properties);\n  var _options$snapshot = options.snapshot,\n      snapshot = _options$snapshot === undefined ? false : _options$snapshot;\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  var newProperties = {};\n  var next = selection.setProperties(properties);\n  next = document.resolveSelection(next);\n\n  // Re-compute the properties, to ensure that we get their normalized values.\n  properties = pick(next, Object.keys(properties));\n\n  // Remove any properties that are already equal to the current selection. And\n  // create a dictionary of the previous values for all of the properties that\n  // are being changed, for the inverse operation.\n  for (var k in properties) {\n    if (snapshot === true || !is(properties[k], selection[k])) {\n      newProperties[k] = properties[k];\n    }\n  }\n\n  // If the selection moves, clear any marks, unless the new selection\n  // properties change the marks in some way.\n  if (selection.marks && !newProperties.marks && (newProperties.anchor || newProperties.focus)) {\n    newProperties.marks = null;\n  }\n\n  // If there are no new properties to set, abort to avoid extra operations.\n  if (Object.keys(newProperties).length === 0) {\n    return;\n  }\n\n  // TODO: for some reason toJSON() is required here (it breaks selections between blocks)? - 2018-10-10\n  var prevProperties = pick(selection.toJSON(), Object.keys(newProperties));\n\n  editor.applyOperation({\n    type: 'set_selection',\n    value: value,\n    properties: prevProperties,\n    newProperties: newProperties\n  }, snapshot ? { skip: false, merge: false } : {});\n};\n\nCommands$4.setAnchor = function (editor) {\n  for (var _len35 = arguments.length, args = Array(_len35 > 1 ? _len35 - 1 : 0), _key35 = 1; _key35 < _len35; _key35++) {\n    args[_key35 - 1] = arguments[_key35];\n  }\n\n  editor.command.apply(editor, [proxy, 'setAnchor'].concat(args));\n};\n\nCommands$4.setEnd = function (editor) {\n  for (var _len36 = arguments.length, args = Array(_len36 > 1 ? _len36 - 1 : 0), _key36 = 1; _key36 < _len36; _key36++) {\n    args[_key36 - 1] = arguments[_key36];\n  }\n\n  editor.command.apply(editor, [proxy, 'setEnd'].concat(args));\n};\n\nCommands$4.setFocus = function (editor) {\n  for (var _len37 = arguments.length, args = Array(_len37 > 1 ? _len37 - 1 : 0), _key37 = 1; _key37 < _len37; _key37++) {\n    args[_key37 - 1] = arguments[_key37];\n  }\n\n  editor.command.apply(editor, [proxy, 'setFocus'].concat(args));\n};\n\nCommands$4.setStart = function (editor) {\n  for (var _len38 = arguments.length, args = Array(_len38 > 1 ? _len38 - 1 : 0), _key38 = 1; _key38 < _len38; _key38++) {\n    args[_key38 - 1] = arguments[_key38];\n  }\n\n  editor.command.apply(editor, [proxy, 'setStart'].concat(args));\n};\n\nCommands$4.snapshotSelection = function (editor) {\n  editor.withoutMerging(function () {\n    editor.select(editor.value.selection, { snapshot: true });\n  });\n};\n\n/**\n * Helpers.\n */\n\nfunction proxy(editor, method) {\n  var _editor$value$selecti;\n\n  for (var _len39 = arguments.length, args = Array(_len39 > 2 ? _len39 - 2 : 0), _key39 = 2; _key39 < _len39; _key39++) {\n    args[_key39 - 2] = arguments[_key39];\n  }\n\n  var range = (_editor$value$selecti = editor.value.selection)[method].apply(_editor$value$selecti, args);\n  editor.select(range);\n}\n\nfunction pointEdgeObject(editor, point, edge, object) {\n  var Point = point.slice(0, 1).toUpperCase() + point.slice(1);\n  var Edge = edge.slice(0, 1).toUpperCase() + edge.slice(1);\n  var Object = object.slice(0, 1).toUpperCase() + object.slice(1);\n  var method = 'move' + Point + 'To' + Edge + 'OfNode';\n  var getNode = object === 'text' ? 'getNode' : 'getClosest' + Object;\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  var p = selection[point];\n  var node = document[getNode](p.key);\n  if (!node) return;\n  editor[method](node);\n}\n\nfunction pointEdgeSideObject(editor, point, edge, side, object) {\n  var Point = point.slice(0, 1).toUpperCase() + point.slice(1);\n  var Edge = edge.slice(0, 1).toUpperCase() + edge.slice(1);\n  var Side = side.slice(0, 1).toUpperCase() + side.slice(1);\n  var Object = object.slice(0, 1).toUpperCase() + object.slice(1);\n  var method = 'move' + Point + 'To' + Edge + 'OfNode';\n  var getNode = object === 'text' ? 'getNode' : 'getClosest' + Object;\n  var getDirectionNode = 'get' + Side + Object;\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  var p = selection[point];\n  var node = document[getNode](p.key);\n  if (!node) return;\n  var target = document[getDirectionNode](node.key);\n  if (!target) return;\n  editor[method](target);\n}\n\nfunction pointBackward(editor, point) {\n  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n  if (n === 0) return;\n  if (n < 0) return pointForward(editor, point, -n);\n\n  var Point = point.slice(0, 1).toUpperCase() + point.slice(1);\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  var p = selection[point];\n  var hasVoidParent = document.hasVoidParent(p.path, editor);\n\n  // what is this?\n  if (!hasVoidParent && p.offset - n >= 0) {\n    var range = selection['move' + Point + 'Backward'](n);\n    editor.select(range);\n    return;\n  }\n\n  var previous = document.getPreviousText(p.path);\n  if (!previous) return;\n\n  var block = document.getClosestBlock(p.path);\n  var isInBlock = block.hasNode(previous.key);\n  var isPreviousInVoid = previous && document.hasVoidParent(previous.key, editor);\n  editor['move' + Point + 'ToEndOfNode'](previous);\n\n  // when is this called?\n  if (!hasVoidParent && !isPreviousInVoid && isInBlock) {\n    var _range = editor.value.selection['move' + Point + 'Backward'](n);\n    editor.select(_range);\n  }\n}\n\nfunction pointForward(editor, point) {\n  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n  if (n === 0) return;\n  if (n < 0) return pointBackward(editor, point, -n);\n\n  var Point = point.slice(0, 1).toUpperCase() + point.slice(1);\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  var p = selection[point];\n  var text = document.getNode(p.path);\n  var hasVoidParent = document.hasVoidParent(p.path, editor);\n\n  // what is this?\n  if (!hasVoidParent && p.offset + n <= text.text.length) {\n    var range = selection['move' + Point + 'Forward'](n);\n    editor.select(range);\n    return;\n  }\n\n  var next = document.getNextText(p.path);\n  if (!next) return;\n\n  var block = document.getClosestBlock(p.path);\n  var isInBlock = block.hasNode(next.key);\n  var isNextInVoid = document.hasVoidParent(next.key, editor);\n  editor['move' + Point + 'ToStartOfNode'](next);\n\n  // when is this called?\n  if (!hasVoidParent && !isNextInVoid && isInBlock) {\n    var _range2 = editor.value.selection['move' + Point + 'Forward'](n);\n    editor.select(_range2);\n  }\n}\n\nfunction pointWordBackward(editor, pointName) {\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  var point = selection[pointName];\n  var block = document.getClosestBlock(point.key);\n  var offset = block.getOffset(point.key);\n  var o = offset + point.offset;\n  var text = block.text;\n\n  var n = TextUtils.getWordOffsetBackward(text, o);\n  editor.command(pointBackward, pointName, n > 0 ? n : 1);\n}\n\nfunction pointWordForward(editor, pointName) {\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  var point = selection[pointName];\n  var block = document.getClosestBlock(point.key);\n  var offset = block.getOffset(point.key);\n  var o = offset + point.offset;\n  var text = block.text;\n\n  var n = TextUtils.getWordOffsetForward(text, o);\n  editor.command(pointForward, pointName, n > 0 ? n : 1);\n}\n\n/**\n * Commands.\n *\n * @type {Object}\n */\n\nvar Commands$5 = {};\n\n/**\n * Set `properties` on the value.\n *\n * @param {Editor} editor\n * @param {Object|Value} properties\n */\n\nCommands$5.setData = function (editor) {\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var value = editor.value;\n\n  var newProperties = Value.createProperties({ data: data });\n  var prevProperties = pick(value, Object.keys(newProperties));\n\n  editor.applyOperation({\n    type: 'set_value',\n    properties: prevProperties,\n    newProperties: newProperties\n  });\n};\n\nCommands$5.addAnnotation = function (editor, annotation) {\n  annotation = Annotation.create(annotation);\n\n  editor.applyOperation({\n    type: 'add_annotation',\n    annotation: annotation\n  });\n};\n\nCommands$5.removeAnnotation = function (editor, annotation) {\n  annotation = Annotation.create(annotation);\n\n  editor.applyOperation({\n    type: 'remove_annotation',\n    annotation: annotation\n  });\n};\n\nCommands$5.setAnnotation = function (editor, annotation, newProperties) {\n  annotation = Annotation.create(annotation);\n  newProperties = Annotation.createProperties(newProperties);\n\n  editor.applyOperation({\n    type: 'set_annotation',\n    properties: annotation,\n    newProperties: newProperties\n  });\n};\n\nCommands$5.setAnnotations = function (editor) {\n  var annotations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var value = editor.value;\n\n  var newProperties = Value.createProperties({ annotations: annotations });\n  var prevProperties = pick(value, Object.keys(newProperties));\n\n  editor.applyOperation({\n    type: 'set_value',\n    properties: prevProperties,\n    newProperties: newProperties\n  });\n};\n\n/**\n * A plugin that adds a set of queries to the editor.\n *\n * @param {Object} queries\n * @return {Object}\n */\n\nfunction QueriesPlugin() {\n  var queries = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  /**\n   * On construct, register all the queries.\n   *\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n  function onConstruct(editor, next) {\n    for (var query in queries) {\n      editor.registerQuery(query);\n    }\n\n    return next();\n  }\n\n  /**\n   * On query, if it exists in our list of queries, call it.\n   *\n   * @param {Object} query\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n  function onQuery(query, editor, next) {\n    var type = query.type,\n        args = query.args;\n\n    var fn = queries[type];\n    if (!fn) return next();\n    var ret = fn.apply(undefined, [editor].concat(toConsumableArray(args)));\n    return ret === undefined ? next() : ret;\n  }\n\n  /**\n   * Return the plugin.\n   *\n   * @type {Object}\n   */\n\n  return {\n    onConstruct: onConstruct,\n    onQuery: onQuery\n  };\n}\n\n/**\n * Define a Slate error.\n *\n * @type {SlateError}\n */\n\nvar SlateError = function (_Error) {\n  inherits(SlateError, _Error);\n\n  function SlateError(code) {\n    var attrs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    classCallCheck(this, SlateError);\n\n    var _this = possibleConstructorReturn(this, (SlateError.__proto__ || Object.getPrototypeOf(SlateError)).call(this, code));\n\n    _this.code = code;\n\n    for (var key in attrs) {\n      _this[key] = attrs[key];\n    }\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(_this, _this.constructor);\n    } else {\n      _this.stack = new Error().stack;\n    }\n    return _this;\n  }\n\n  return SlateError;\n}(Error);\n\n/**\n * Create a plugin from a `schema` definition.\n *\n * @param {Object} schema\n * @return {Object}\n */\n\nfunction SchemaPlugin(schema) {\n  var rules = schema.rules,\n      document = schema.document,\n      blocks = schema.blocks,\n      inlines = schema.inlines,\n      marks = schema.marks,\n      annotations = schema.annotations,\n      decorations = schema.decorations;\n\n  var schemaRules = [];\n\n  if (rules) {\n    schemaRules = schemaRules.concat(rules);\n  }\n\n  if (document) {\n    schemaRules.push(_extends({\n      match: [{ object: 'document' }]\n    }, document));\n  }\n\n  if (blocks) {\n    for (var key in blocks) {\n      schemaRules.push(_extends({\n        match: [{ object: 'block', type: key }]\n      }, blocks[key]));\n    }\n  }\n\n  if (inlines) {\n    for (var _key in inlines) {\n      schemaRules.push(_extends({\n        match: [{ object: 'inline', type: _key }]\n      }, inlines[_key]));\n    }\n  }\n\n  if (marks) {\n    for (var _key2 in marks) {\n      schemaRules.push(_extends({\n        match: [{ object: 'mark', type: _key2 }]\n      }, marks[_key2]));\n    }\n  }\n\n  if (annotations) {\n    for (var _key3 in annotations) {\n      schemaRules.push(_extends({\n        match: [{ object: 'annotation', type: _key3 }]\n      }, annotations[_key3]));\n    }\n  }\n\n  if (decorations) {\n    for (var _key4 in decorations) {\n      schemaRules.push(_extends({\n        match: [{ object: 'decoration', type: _key4 }]\n      }, decorations[_key4]));\n    }\n  }\n\n  /**\n   * Check if a `format` is atomic based on the schema rules.\n   *\n   * @param {Editor} editor\n   * @param {Format} format\n   * @return {Boolean}\n   */\n\n  function isAtomic(editor, format) {\n    var rule = schemaRules.find(function (r) {\n      return 'isAtomic' in r && testRules(format, r.match);\n    });\n\n    return rule && rule.isAtomic;\n  }\n\n  /**\n   * Check if a `node` is void based on the schema rules.\n   *\n   * @param {Editor} editor\n   * @param {Node} node\n   * @return {Boolean}\n   */\n\n  function isVoid(editor, node) {\n    var rule = schemaRules.find(function (r) {\n      return 'isVoid' in r && testRules(node, r.match);\n    });\n\n    return rule && rule.isVoid;\n  }\n\n  /**\n   * Normalize a `node` with the schema rules, returning a function that will\n   * fix the invalid node, or void if the node is valid.\n   *\n   * @param {Node} node\n   * @param {Editor} editor\n   * @param {Function} next\n   * @return {Function|Void}\n   */\n\n  function normalizeNode(node, editor, next) {\n    var error = validateNode(node, editor, function () {});\n    if (!error) return next();\n\n    return function () {\n      var rule = error.rule;\n      var size = editor.operations.size;\n\n      // First run the user-provided `normalize` function if one exists...\n\n      if (rule.normalize) {\n        rule.normalize(editor, error);\n      }\n\n      // If the `normalize` function did not add any operations to the editor\n      // object, it can't have normalized, so run the default one.\n      if (editor.operations.size === size) {\n        defaultNormalize(editor, error);\n      }\n    };\n  }\n\n  /**\n   * Validate a `node` with the schema rules, returning a `SlateError` if it's\n   * invalid.\n   *\n   * @param {Node} node\n   * @param {Editor} editor\n   * @param {Function} next\n   * @return {Error|Void}\n   */\n\n  function validateNode(node, editor, next) {\n    var matches = schemaRules.filter(function (r) {\n      return testRules(node, r.match);\n    });\n    var failure = validateRules(node, matches, schemaRules, { every: true });\n    if (!failure) return next();\n    var error = new SlateError(failure.code, failure);\n    return error;\n  }\n\n  /**\n   * On schema-related queries, respond if we can.\n   *\n   * @param {Object} query\n   * @param {Function} next\n   */\n\n  var queries = QueriesPlugin({ isAtomic: isAtomic, isVoid: isVoid });\n\n  /**\n   * Return the plugins.\n   *\n   * @type {Object}\n   */\n\n  return [{ normalizeNode: normalizeNode, validateNode: validateNode }, queries];\n}\n\n/**\n * Normalize an invalid value with `error` with default remedies.\n *\n * @param {Editor} editor\n * @param {SlateError} error\n */\n\nfunction defaultNormalize(editor, error) {\n  var code = error.code,\n      node = error.node,\n      child = error.child,\n      next = error.next,\n      previous = error.previous,\n      key = error.key,\n      mark = error.mark;\n\n\n  switch (code) {\n    case 'child_max_invalid':\n    case 'child_object_invalid':\n    case 'child_type_invalid':\n    case 'child_unknown':\n    case 'first_child_object_invalid':\n    case 'first_child_type_invalid':\n    case 'last_child_object_invalid':\n    case 'last_child_type_invalid':\n      {\n        return child.object === 'text' && node.object === 'block' && node.nodes.size === 1 ? editor.removeNodeByKey(node.key) : editor.removeNodeByKey(child.key);\n      }\n\n    case 'previous_sibling_object_invalid':\n    case 'previous_sibling_type_invalid':\n      {\n        return previous.object === 'text' && node.object === 'block' && node.nodes.size === 1 ? editor.removeNodeByKey(node.key) : editor.removeNodeByKey(previous.key);\n      }\n\n    case 'next_sibling_object_invalid':\n    case 'next_sibling_type_invalid':\n      {\n        return next.object === 'text' && node.object === 'block' && node.nodes.size === 1 ? editor.removeNodeByKey(node.key) : editor.removeNodeByKey(next.key);\n      }\n\n    case 'child_min_invalid':\n    case 'node_text_invalid':\n    case 'parent_object_invalid':\n    case 'parent_type_invalid':\n      {\n        return node.object === 'document' ? node.nodes.forEach(function (n) {\n          return editor.removeNodeByKey(n.key);\n        }) : editor.removeNodeByKey(node.key);\n      }\n\n    case 'node_data_invalid':\n      {\n        return node.data.get(key) === undefined && node.object !== 'document' ? editor.removeNodeByKey(node.key) : editor.setNodeByKey(node.key, { data: node.data.delete(key) });\n      }\n\n    case 'node_mark_invalid':\n      {\n        return node.getTexts().forEach(function (t) {\n          return editor.removeMarkByKey(t.key, 0, t.text.length, mark);\n        });\n      }\n\n    default:\n      {\n        return editor.removeNodeByKey(node.key);\n      }\n  }\n}\n\n/**\n * Check that an `object` matches one of a set of `rules`.\n *\n * @param {Mixed} object\n * @param {Object|Array} rules\n * @return {Boolean}\n */\n\nfunction testRules(object, rules) {\n  var error = validateRules(object, rules);\n  return !error;\n}\n\n/**\n * Validate that a `object` matches a `rule` object or array.\n *\n * @param {Mixed} object\n * @param {Object|Array} rule\n * @param {Array|Void} rules\n * @return {Error|Void}\n */\n\nfunction validateRules(object, rule, rules) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var _options$every = options.every,\n      every = _options$every === undefined ? false : _options$every,\n      _options$match = options.match,\n      match = _options$match === undefined ? null : _options$match;\n\n\n  if (typeof rule === 'function') {\n    var valid = rule(object, match);\n    return valid ? null : fail('node_invalid', { rule: rule, node: object });\n  }\n\n  if (Array.isArray(rule)) {\n    var array = rule.length ? rule : [{}];\n    var first = void 0;\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = array[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var r = _step.value;\n\n        var _error = validateRules(object, r, rules);\n        first = first || _error;\n        if (every && _error) return _error;\n        if (!every && !_error) return;\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return first;\n  }\n\n  var error = validateObject(object, rule) || validateType(object, rule) || validateData(object, rule) || validateMarks(object, rule) || validateText(object, rule) || validateFirst(object, rule) || validateLast(object, rule) || validateNodes(object, rule, rules);\n\n  return error;\n}\n\nfunction validateObject(node, rule) {\n  if (rule.object == null) return;\n  if (rule.object === node.object) return;\n  if (typeof rule.object === 'function' && rule.object(node.object)) return;\n  return fail('node_object_invalid', { rule: rule, node: node });\n}\n\nfunction validateType(node, rule) {\n  if (rule.type == null) return;\n  if (rule.type === node.type) return;\n  if (typeof rule.type === 'function' && rule.type(node.type)) return;\n  return fail('node_type_invalid', { rule: rule, node: node });\n}\n\nfunction validateData(node, rule) {\n  if (rule.data == null) return;\n  if (node.data == null) return;\n\n  if (typeof rule.data === 'function') {\n    if (rule.data(node.data)) return;\n    return fail('node_data_invalid', { rule: rule, node: node });\n  }\n\n  for (var key in rule.data) {\n    var fn = rule.data[key];\n    var value = node.data && node.data.get(key);\n    var valid = typeof fn === 'function' ? fn(value) : fn === value;\n    if (valid) continue;\n    return fail('node_data_invalid', { rule: rule, node: node, key: key, value: value });\n  }\n}\n\nfunction validateMarks(node, rule) {\n  if (rule.marks == null) return;\n\n  var marks = node.object === 'text' ? node.marks.toArray() : node.getMarks().toArray();\n\n  var _loop = function _loop(mark) {\n    var valid = rule.marks.some(function (def) {\n      return typeof def.type === 'function' ? def.type(mark.type) : def.type === mark.type;\n    });\n    if (valid) return 'continue';\n    return {\n      v: fail('node_mark_invalid', { rule: rule, node: node, mark: mark })\n    };\n  };\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = marks[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var mark = _step2.value;\n\n      var _ret = _loop(mark);\n\n      switch (_ret) {\n        case 'continue':\n          continue;\n\n        default:\n          if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n}\n\nfunction validateText(node, rule) {\n  if (rule.text == null) return;\n  var text = node.text;\n\n  var valid = typeof rule.text === 'function' ? rule.text(text) : rule.text.test(text);\n  if (valid) return;\n  return fail('node_text_invalid', { rule: rule, node: node, text: text });\n}\n\nfunction validateFirst(node, rule) {\n  if (rule.first == null) return;\n  var first = node.nodes.first();\n  if (!first) return;\n  var error = validateRules(first, rule.first);\n  if (!error) return;\n  error.rule = rule;\n  error.node = node;\n  error.child = first;\n  error.code = error.code.replace('node_', 'first_child_');\n  return error;\n}\n\nfunction validateLast(node, rule) {\n  if (rule.last == null) return;\n  var last = node.nodes.last();\n  if (!last) return;\n  var error = validateRules(last, rule.last);\n  if (!error) return;\n  error.rule = rule;\n  error.node = node;\n  error.child = last;\n  error.code = error.code.replace('node_', 'last_child_');\n  return error;\n}\n\nfunction validateNodes(node, rule) {\n  var rules = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n  if (node.nodes == null) return;\n\n  var children = node.nodes;\n  var defs = rule.nodes != null ? rule.nodes.slice() : [];\n  var count = 0;\n  var lastCount = 0;\n  var min = null;\n  var index = -1;\n  var def = null;\n  var max = null;\n  var child = null;\n  var previous = null;\n  var next = null;\n\n  function nextDef() {\n    if (defs.length === 0) return false;\n    def = defs.shift();\n    lastCount = count;\n    count = 0;\n    min = def.min || null;\n    max = def.max || null;\n    return true;\n  }\n\n  function nextChild() {\n    index += 1;\n    previous = index ? children.get(index - 1) : null;\n    child = children.get(index);\n    next = children.get(index + 1);\n    if (!child) return false;\n    lastCount = count;\n    count += 1;\n    return true;\n  }\n\n  function rewind() {\n    if (index > 0) {\n      index -= 1;\n      count = lastCount;\n    }\n  }\n\n  if (rule.nodes != null) {\n    nextDef();\n  }\n\n  while (nextChild()) {\n    var err = validateParent(node, child, rules) || validatePrevious(node, child, previous, index, rules) || validateNext(node, child, next, index, rules);\n\n    if (err) return err;\n\n    if (rule.nodes != null) {\n      if (!def) {\n        return fail('child_unknown', { rule: rule, node: node, child: child, index: index });\n      }\n\n      if (def.match) {\n        var error = validateRules(child, def.match);\n\n        if (error) {\n          // Since we want to report overflow on last matching child we don't\n          // immediately check for count > max, but instead do so once we find\n          // a child that doesn't match.\n          if (max != null && count - 1 > max) {\n            rewind();\n            return fail('child_max_invalid', {\n              rule: rule,\n              node: node,\n              index: index,\n              child: children.get(index),\n              count: count,\n              limit: max\n            });\n          }\n\n          var lastMin = min;\n\n          // If there are more groups after this one then child might actually\n          // be valid.\n          if (nextDef()) {\n            // If we've already satisfied the minimum for the current group,\n            // then we can rewind and proceed to the next group.\n            if (lastCount - 1 >= lastMin) {\n              index -= 1;\n              continue;\n            }\n\n            // Otherwise we know that current value is underflowing. There are\n            // three possible causes for this...\n\n            // 1. There might just not be enough elements for current group, and\n            // current child is in fact the first of the next group. If so, the\n            // next def will not report errors, in which case we can rewind and\n            // report an minimum error.\n            if (validateRules(child, def.match) == null) {\n              rewind();\n              return fail('child_min_invalid', {\n                rule: rule,\n                node: node,\n                index: index,\n                count: lastCount - 1,\n                limit: lastMin\n              });\n            }\n\n            // 2. The current group is underflowing, but there is also an\n            // invalid child before the next group.\n            // 3. Or the current group is not underflowing but it appears so\n            // because there's an invalid child between its members.\n            // It's either the second or third case. If it's the second then\n            // we could report an underflow, but presence of an invalid child\n            // is arguably more important, so we report it first. It also lets\n            // us avoid checking for which case exactly is it.\n            error.rule = rule;\n            error.node = node;\n            error.child = child;\n            error.index = index;\n            error.code = error.code.replace('node_', 'child_');\n            return error;\n          }\n\n          // Otherwise either we exhausted the last group, in which case it's\n          // an unknown child, ...\n          if (max != null && count > max) {\n            return fail('child_unknown', { rule: rule, node: node, child: child, index: index });\n          }\n\n          // ... or it's an invalid child for the last group.\n          error.rule = rule;\n          error.node = node;\n          error.child = child;\n          error.index = index;\n          error.code = error.code.replace('node_', 'child_');\n          return error;\n        }\n      }\n    }\n  }\n\n  // Since we want to report overflow on last matching child we don't\n  // immediately check for count > max, but do so after processing all nodes.\n  if (max != null && count > max) {\n    return fail('child_max_invalid', {\n      rule: rule,\n      node: node,\n      index: index - 1,\n      count: count,\n      child: children.get(index - 1),\n      limit: max\n    });\n  }\n\n  if (rule.nodes != null) {\n    do {\n      if (count < min) {\n        return fail('child_min_invalid', {\n          rule: rule,\n          node: node,\n          index: index,\n          count: count,\n          limit: min\n        });\n      }\n    } while (nextDef());\n  }\n}\n\nfunction validateParent(node, child, rules) {\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = rules[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var rule = _step3.value;\n\n      if (rule.parent == null) continue;\n      if (!testRules(child, rule.match)) continue;\n\n      var error = validateRules(node, rule.parent);\n      if (!error) continue;\n\n      error.rule = rule;\n      error.parent = node;\n      error.node = child;\n      error.code = error.code.replace('node_', 'parent_');\n      return error;\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n}\n\nfunction validatePrevious(node, child, previous, index, rules) {\n  if (!previous) return;\n\n  var _iteratorNormalCompletion4 = true;\n  var _didIteratorError4 = false;\n  var _iteratorError4 = undefined;\n\n  try {\n    for (var _iterator4 = rules[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n      var rule = _step4.value;\n\n      if (rule.previous == null) continue;\n      if (!testRules(child, rule.match)) continue;\n\n      var error = validateRules(previous, rule.previous);\n      if (!error) continue;\n\n      error.rule = rule;\n      error.node = node;\n      error.child = child;\n      error.index = index;\n      error.previous = previous;\n      error.code = error.code.replace('node_', 'previous_sibling_');\n      return error;\n    }\n  } catch (err) {\n    _didIteratorError4 = true;\n    _iteratorError4 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion4 && _iterator4.return) {\n        _iterator4.return();\n      }\n    } finally {\n      if (_didIteratorError4) {\n        throw _iteratorError4;\n      }\n    }\n  }\n}\n\nfunction validateNext(node, child, next, index, rules) {\n  if (!next) return;\n\n  var _iteratorNormalCompletion5 = true;\n  var _didIteratorError5 = false;\n  var _iteratorError5 = undefined;\n\n  try {\n    for (var _iterator5 = rules[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n      var rule = _step5.value;\n\n      if (rule.next == null) continue;\n      if (!testRules(child, rule.match)) continue;\n\n      var error = validateRules(next, rule.next, [], { match: child });\n      if (!error) continue;\n\n      error.rule = rule;\n      error.node = node;\n      error.child = child;\n      error.index = index;\n      error.next = next;\n      error.code = error.code.replace('node_', 'next_sibling_');\n      return error;\n    }\n  } catch (err) {\n    _didIteratorError5 = true;\n    _iteratorError5 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion5 && _iterator5.return) {\n        _iterator5.return();\n      }\n    } finally {\n      if (_didIteratorError5) {\n        throw _iteratorError5;\n      }\n    }\n  }\n}\n\n/**\n * Create an interim failure object with `code` and `attrs`.\n *\n * @param {String} code\n * @param {Object} attrs\n * @return {Object}\n */\n\nfunction fail(code, attrs) {\n  return _extends({ code: code }, attrs);\n}\n\n/**\n * Ensure that an expanded selection is deleted first using the `editor.delete`\n * command. This guarantees that it uses the proper semantic \"intent\" instead of\n * using `deleteAtRange` under the covers and skipping `delete`.\n *\n * @param {Editor}\n */\n\nfunction deleteExpanded(editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.delete();\n  }\n}\n\n/**\n * Commands.\n *\n * @type {Object}\n */\n\nvar Commands$6 = {};\n\n/**\n * Add a `mark` to the characters in the current selection.\n *\n * @param {Editor} editor\n * @param {Mark} mark\n */\n\nCommands$6.addMark = function (editor, mark) {\n  mark = Mark.create(mark);\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.addMarkAtRange(selection, mark);\n  } else if (selection.marks) {\n    var marks = selection.marks.add(mark);\n    var sel = selection.set('marks', marks);\n    editor.select(sel);\n  } else {\n    var _marks = document.getActiveMarksAtRange(selection).add(mark);\n    var _sel = selection.set('marks', _marks);\n    editor.select(_sel);\n  }\n};\n\n/**\n * Add a list of `marks` to the characters in the current selection.\n *\n * @param {Editor} editor\n * @param {Set<Mark>|Array<Object>} marks\n */\n\nCommands$6.addMarks = function (editor, marks) {\n  marks.forEach(function (mark) {\n    return editor.addMark(mark);\n  });\n};\n\n/**\n * Delete at the current selection.\n *\n * @param {Editor} editor\n */\n\nCommands$6.delete = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.deleteAtRange(selection);\n\n  // COMPAT: Ensure that the selection is collapsed, because in certain cases\n  // when deleting across inline nodes, when splitting the inline node the end\n  // point of the selection will end up after the split point.\n  editor.moveToFocus();\n};\n\n/**\n * Delete backward `n` characters.\n *\n * @param {Editor} editor\n * @param {Number} n (optional)\n */\n\nCommands$6.deleteBackward = function (editor) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var value = editor.value;\n  var selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteBackwardAtRange(selection, n);\n  }\n};\n\n/**\n * Delete backward one character.\n *\n * @param {Editor} editor\n */\n\nCommands$6.deleteCharBackward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteCharBackwardAtRange(selection);\n  }\n};\n\n/**\n * Delete backward one line.\n *\n * @param {Editor} editor\n */\n\nCommands$6.deleteLineBackward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteLineBackwardAtRange(selection);\n  }\n};\n\n/**\n * Delete backward one word.\n *\n * @param {Editor} editor\n */\n\nCommands$6.deleteWordBackward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteWordBackwardAtRange(selection);\n  }\n};\n\n/**\n * Delete backward `n` characters.\n *\n * @param {Editor} editor\n * @param {Number} n (optional)\n */\n\nCommands$6.deleteForward = function (editor) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var value = editor.value;\n  var selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteForwardAtRange(selection, n);\n  }\n};\n\n/**\n * Delete backward one character.\n *\n * @param {Editor} editor\n */\n\nCommands$6.deleteCharForward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteCharForwardAtRange(selection);\n  }\n};\n\n/**\n * Delete backward one line.\n *\n * @param {Editor} editor\n */\n\nCommands$6.deleteLineForward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteLineForwardAtRange(selection);\n  }\n};\n\n/**\n * Delete backward one word.\n *\n * @param {Editor} editor\n */\n\nCommands$6.deleteWordForward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteWordForwardAtRange(selection);\n  }\n};\n\n/**\n * Insert a `block` at the current selection.\n *\n * @param {Editor} editor\n * @param {String|Object|Block} block\n */\n\nCommands$6.insertBlock = function (editor, block) {\n  deleteExpanded(editor);\n\n  block = Block.create(block);\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.insertBlockAtRange(selection, block);\n\n  // If the node was successfully inserted, update the selection.\n  var node = editor.value.document.getNode(block.key);\n  if (node) editor.moveToEndOfNode(node);\n};\n\n/**\n * Insert a `fragment` at the current selection.\n *\n * @param {Editor} editor\n * @param {Document} fragment\n */\n\nCommands$6.insertFragment = function (editor, fragment) {\n  if (!fragment.nodes.size) return;\n\n  deleteExpanded(editor);\n\n  var value = editor.value;\n  var _value = value,\n      document = _value.document,\n      selection = _value.selection;\n  var start = selection.start;\n\n  var keys = Array.from(document.texts(), function (_ref) {\n    var _ref2 = slicedToArray(_ref, 1),\n        text = _ref2[0];\n\n    return text.key;\n  });\n\n  editor.insertFragmentAtRange(selection, fragment);\n  value = editor.value;\n  document = value.document;\n\n  var newTexts = document.getTexts().filter(function (n) {\n    return !keys.includes(n.key);\n  });\n  if (newTexts.size === 0) return;\n  var fragmentLength = fragment.text.length;\n\n  // Either startText is still here, or we want the first un-previously known text\n  var startText = document.getNode(start.key) || newTexts.first();\n  // We want the last un-previously known text\n  var endText = newTexts.last() || startText;\n\n  if (startText === endText) {\n    editor.moveTo(endText.key, fragmentLength);\n    return;\n  }\n\n  // Everything will be calculated relative to the first common ancestor to optimize speed\n  var parent = document.getCommonAncestor(startText.key, endText.key);\n\n  var startOffset = parent.getOffset(startText.key) + (start.key === startText.key ? start.offset : 0);\n\n  // endText might not be the last un-previously known text node, so we precisely pick it by offset\n  endText = parent.getTextAtOffset(startOffset + fragmentLength - 1) || endText;\n\n  editor.moveTo(endText.key, startOffset + fragmentLength - parent.getOffset(endText.key));\n};\n\n/**\n * Insert an `inline` at the current selection.\n *\n * @param {Editor} editor\n * @param {String|Object|Inline} inline\n */\n\nCommands$6.insertInline = function (editor, inline) {\n  deleteExpanded(editor);\n\n  inline = Inline.create(inline);\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.insertInlineAtRange(selection, inline);\n\n  // If the node was successfully inserted, update the selection.\n  var node = editor.value.document.getNode(inline.key);\n  if (node) editor.moveToEndOfNode(node);\n};\n\n/**\n * Insert a string of `text` with optional `marks` at the current selection.\n *\n * @param {Editor} editor\n * @param {String} text\n * @param {Set<Mark>} marks (optional)\n */\n\nCommands$6.insertText = function (editor, text, marks) {\n  deleteExpanded(editor);\n\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  marks = marks || selection.marks || document.getInsertMarksAtRange(selection);\n\n  editor.withoutNormalizing(function () {\n    editor.insertTextAtRange(selection, text, marks);\n\n    // If the text was successfully inserted, and the selection had marks on it,\n    // unset the selection's marks.\n    if (selection.marks && document !== editor.value.document) {\n      editor.select({ marks: null });\n    }\n  });\n};\n\n/**\n * Remove a `mark` from the characters in the current selection.\n *\n * @param {Editor} editor\n * @param {Mark} mark\n */\n\nCommands$6.removeMark = function (editor, mark) {\n  mark = Mark.create(mark);\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.removeMarkAtRange(selection, mark);\n  } else if (selection.marks) {\n    var marks = selection.marks.remove(mark);\n    var sel = selection.set('marks', marks);\n    editor.select(sel);\n  } else {\n    var _marks2 = document.getActiveMarksAtRange(selection).remove(mark);\n    var _sel2 = selection.set('marks', _marks2);\n    editor.select(_sel2);\n  }\n};\n\n/**\n * Replace an `oldMark` with a `newMark` in the characters in the current selection.\n *\n * @param {Editor} editor\n * @param {Mark} oldMark\n * @param {Mark} newMark\n */\n\nCommands$6.replaceMark = function (editor, oldMark, newMark) {\n  editor.removeMark(oldMark);\n  editor.addMark(newMark);\n};\n\n/**\n * Set the `properties` of block nodes.\n *\n * @param {Editor} editor\n * @param {Object|String} properties\n */\n\nCommands$6.setBlocks = function (editor, properties) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.setBlocksAtRange(selection, properties);\n};\n\n/**\n * Set the `properties` of inline nodes.\n *\n * @param {Editor} editor\n * @param {Object|String} properties\n */\n\nCommands$6.setInlines = function (editor, properties) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.setInlinesAtRange(selection, properties);\n};\n\n/**\n * Split the block node at the current selection, to optional `depth`.\n *\n * @param {Editor} editor\n * @param {Number} depth (optional)\n */\n\nCommands$6.splitBlock = function (editor) {\n  var depth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n  deleteExpanded(editor);\n\n  var value = editor.value;\n  var selection = value.selection,\n      document = value.document;\n\n  var marks = selection.marks || document.getInsertMarksAtRange(selection);\n  editor.splitBlockAtRange(selection, depth).moveToEnd();\n\n  if (marks && marks.size !== 0) {\n    editor.select({ marks: marks });\n  }\n};\n\n/**\n * Split the inline nodes to optional `height`.\n *\n * @param {Editor} editor\n * @param {Number} height (optional)\n */\n\nCommands$6.splitInline = function (editor, height) {\n  deleteExpanded(editor);\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.splitInlineAtRange(selection, height);\n};\n\n/**\n * Add or remove a `mark` from the characters in the current selection,\n * depending on whether it's already there.\n *\n * @param {Editor} editor\n * @param {Mark} mark\n */\n\nCommands$6.toggleMark = function (editor, mark) {\n  mark = Mark.create(mark);\n  var value = editor.value;\n\n  var exists = value.activeMarks.has(mark);\n\n  if (exists) {\n    editor.removeMark(mark);\n  } else {\n    editor.addMark(mark);\n  }\n};\n\n/**\n * Unwrap nodes from a block with `properties`.\n *\n * @param {Editor} editor\n * @param {String|Object} properties\n */\n\nCommands$6.unwrapBlock = function (editor, properties) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.unwrapBlockAtRange(selection, properties);\n};\n\n/**\n * Unwrap nodes from an inline with `properties`.\n *\n * @param {Editor} editor\n * @param {String|Object} properties\n */\n\nCommands$6.unwrapInline = function (editor, properties) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.unwrapInlineAtRange(selection, properties);\n};\n\n/**\n * Wrap nodes in a new `block`.\n *\n * @param {Editor} editor\n * @param {Block|Object|String} block\n */\n\nCommands$6.wrapBlock = function (editor, block) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.wrapBlockAtRange(selection, block);\n};\n\n/**\n * Wrap nodes in a new `inline`.\n *\n * @param {Editor} editor\n * @param {Inline|Object|String} inline\n */\n\nCommands$6.wrapInline = function (editor, inline) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.wrapInlineAtRange(selection, inline);\n};\n\n/**\n * Wrap the current selection with prefix/suffix.\n *\n * @param {Editor} editor\n * @param {String} prefix\n * @param {String} suffix\n */\n\nCommands$6.wrapText = function (editor, prefix) {\n  var suffix = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : prefix;\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.wrapTextAtRange(selection, prefix, suffix);\n\n  // If the selection was collapsed, it will have moved the start offset too.\n  if (selection.isCollapsed) {\n    editor.moveStartBackward(prefix.length);\n  }\n\n  // Adding the suffix will have pushed the end of the selection further on, so\n  // we need to move it back to account for this.\n  editor.moveEndBackward(suffix.length);\n\n  // There's a chance that the selection points moved \"through\" each other,\n  // resulting in a now-incorrect selection direction.\n  if (selection.isForward !== editor.value.selection.isForward) {\n    editor.flip();\n  }\n};\n\n/**\n * A plugin that defines the core Slate logic.\n *\n * @param {Object} options\n * @return {Object}\n */\n\nfunction CorePlugin() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _options$plugins = options.plugins,\n      plugins = _options$plugins === undefined ? [] : _options$plugins;\n\n  /**\n   * The core Slate commands.\n   *\n   * @type {Object}\n   */\n\n  var commands = CommandsPlugin(_extends({}, Commands$1, Commands$2, Commands$3, Commands$4, Commands$5, Commands$6));\n\n  /**\n   * The core Slate queries.\n   *\n   * @type {Object}\n   */\n\n  var queries = QueriesPlugin({\n    isAtomic: function isAtomic() {\n      return false;\n    },\n    isVoid: function isVoid() {\n      return false;\n    }\n  });\n\n  /**\n   * The core Slate schema.\n   *\n   * @type {Object}\n   */\n\n  var schema = SchemaPlugin({\n    rules: [\n    // Only allow block nodes in documents.\n    {\n      match: { object: 'document' },\n      nodes: [{\n        match: { object: 'block' }\n      }]\n    },\n\n    // Only allow block nodes or inline and text nodes in blocks.\n    {\n      match: {\n        object: 'block',\n        first: { object: 'block' }\n      },\n      nodes: [{\n        match: { object: 'block' }\n      }]\n    }, {\n      match: {\n        object: 'block',\n        first: [{ object: 'inline' }, { object: 'text' }]\n      },\n      nodes: [{\n        match: [{ object: 'inline' }, { object: 'text' }]\n      }]\n    },\n\n    // Only allow inline and text nodes in inlines.\n    {\n      match: { object: 'inline' },\n      nodes: [{ match: [{ object: 'inline' }, { object: 'text' }] }]\n    },\n\n    // Ensure that block and inline nodes have at least one text child.\n    {\n      match: [{ object: 'block' }, { object: 'inline' }],\n      nodes: [{ min: 1 }],\n      normalize: function normalize(editor, error) {\n        var code = error.code,\n            node = error.node;\n\n\n        if (code === 'child_min_invalid' && node.nodes.isEmpty()) {\n          editor.insertNodeByKey(node.key, 0, Text.create());\n        }\n      }\n    },\n\n    // Ensure that inline nodes are surrounded by text nodes.\n    {\n      match: { object: 'block' },\n      first: [{ object: 'block' }, { object: 'text' }],\n      last: [{ object: 'block' }, { object: 'text' }],\n      normalize: function normalize(editor, error) {\n        var code = error.code,\n            node = error.node;\n\n        var text = Text.create();\n        var i = void 0;\n\n        if (code === 'first_child_object_invalid') {\n          i = 0;\n        } else if (code === 'last_child_object_invalid') {\n          i = node.nodes.size;\n        } else {\n          return;\n        }\n\n        editor.insertNodeByKey(node.key, i, text);\n      }\n    }, {\n      match: { object: 'inline' },\n      first: [{ object: 'block' }, { object: 'text' }],\n      last: [{ object: 'block' }, { object: 'text' }],\n      previous: [{ object: 'block' }, { object: 'text' }],\n      next: [{ object: 'block' }, { object: 'text' }],\n      normalize: function normalize(editor, error) {\n        var code = error.code,\n            node = error.node,\n            index = error.index;\n\n        var text = Text.create();\n        var i = void 0;\n\n        if (code === 'first_child_object_invalid') {\n          i = 0;\n        } else if (code === 'last_child_object_invalid') {\n          i = node.nodes.size;\n        } else if (code === 'previous_sibling_object_invalid') {\n          i = index;\n        } else if (code === 'next_sibling_object_invalid') {\n          i = index + 1;\n        } else {\n          return;\n        }\n\n        editor.insertNodeByKey(node.key, i, text);\n      }\n    },\n\n    // Merge adjacent text nodes with the same marks.\n    {\n      match: { object: 'text' },\n      next: function next(_next, match) {\n        return _next.object !== 'text' || !match.marks.equals(_next.marks);\n      },\n      normalize: function normalize(editor, error) {\n        var code = error.code,\n            next = error.next;\n\n\n        if (code === 'next_sibling_invalid') {\n          editor.mergeNodeByKey(next.key);\n        }\n      }\n    },\n\n    // Remove extra adjacent empty text nodes.\n    {\n      match: { object: 'text' },\n      previous: function previous(prev) {\n        return prev.object !== 'text' || prev.text !== '';\n      },\n      next: function next(_next2) {\n        return _next2.object !== 'text' || _next2.text !== '';\n      },\n      normalize: function normalize(editor, error) {\n        var code = error.code,\n            next = error.next,\n            previous = error.previous;\n\n\n        if (code === 'next_sibling_invalid') {\n          editor.removeNodeByKey(next.key);\n        } else if (code === 'previous_sibling_invalid') {\n          editor.removeNodeByKey(previous.key);\n        }\n      }\n    }]\n  });\n\n  /**\n   * Return the plugins.\n   *\n   * @type {Array}\n   */\n\n  return [schema].concat(toConsumableArray(plugins), [commands, queries]);\n}\n\n/**\n * Debug.\n *\n * @type {Function}\n */\n\nvar debug$2 = Debug('slate:editor');\n\n/**\n * Editor.\n *\n * @type {Editor}\n */\n\nvar Editor = function () {\n  /**\n   * Create a new `Editor` with `attrs`.\n   *\n   * @param {Object} attrs\n   * @param {Object} options\n   */\n\n  function Editor() {\n    var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    classCallCheck(this, Editor);\n    var _options$controller = options.controller,\n        controller = _options$controller === undefined ? this : _options$controller,\n        _options$construct = options.construct,\n        construct = _options$construct === undefined ? true : _options$construct;\n    var _attrs$onChange = attrs.onChange,\n        onChange = _attrs$onChange === undefined ? function () {} : _attrs$onChange,\n        _attrs$plugins = attrs.plugins,\n        plugins = _attrs$plugins === undefined ? [] : _attrs$plugins,\n        _attrs$readOnly = attrs.readOnly,\n        readOnly = _attrs$readOnly === undefined ? false : _attrs$readOnly,\n        _attrs$value = attrs.value,\n        value = _attrs$value === undefined ? Value.create() : _attrs$value;\n\n\n    this.controller = controller;\n    this.middleware = {};\n    this.onChange = onChange;\n    this.operations = List();\n    this.readOnly = null;\n    this.value = null;\n\n    this.tmp = {\n      dirty: [],\n      flushing: false,\n      merge: null,\n      normalize: true,\n      save: true\n    };\n\n    var core = CorePlugin({ plugins: plugins });\n    registerPlugin(this, core);\n\n    if (construct) {\n      this.run('onConstruct');\n      this.setReadOnly(readOnly);\n      this.setValue(value, options);\n    }\n  }\n\n  /**\n   * Apply an `operation` to the editor, updating its value.\n   *\n   * @param {Operation|Object} operation\n   * @return {Editor}\n   */\n\n  createClass(Editor, [{\n    key: 'applyOperation',\n    value: function applyOperation(operation) {\n      var _this = this;\n\n      var operations = this.operations,\n          controller = this.controller;\n\n      var value = this.value;\n\n      // Add in the current `value` in case the operation was serialized.\n      if (isPlainObject(operation)) {\n        operation = _extends({}, operation, { value: value });\n      }\n\n      operation = Operation.create(operation);\n\n      // Save the operation into the history. Since `save` is a command, we need\n      // to do it without normalizing, since it would have side effects.\n      this.withoutNormalizing(function () {\n        controller.save(operation);\n        value = _this.value;\n      });\n\n      // Apply the operation to the value.\n      debug$2('apply', { operation: operation });\n      this.value = operation.apply(value);\n      this.operations = operations.push(operation);\n\n      // Get the paths of the affected nodes, and mark them as dirty.\n      var newDirtyPaths = getDirtyPaths(operation);\n\n      var dirty = this.tmp.dirty.map(function (path) {\n        path = PathUtils.create(path);\n        var transformed = PathUtils.transform(path, operation);\n        return transformed.toArray();\n      });\n\n      var pathIndex = {};\n      var dirtyPaths = Array.prototype.concat.apply(newDirtyPaths, dirty);\n      this.tmp.dirty = [];\n\n      // PERF: De-dupe the paths so we don't do extra normalization.\n      dirtyPaths.forEach(function (dirtyPath) {\n        var key = dirtyPath.join(',');\n\n        if (!pathIndex[key]) {\n          _this.tmp.dirty.push(dirtyPath);\n        }\n\n        pathIndex[key] = true;\n      });\n\n      // If we're not already, queue the flushing process on the next tick.\n      if (!this.tmp.flushing) {\n        this.tmp.flushing = true;\n        Promise.resolve().then(function () {\n          return _this.flush();\n        });\n      }\n\n      return controller;\n    }\n\n    /**\n     * Flush the editor's current change.\n     *\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'flush',\n    value: function flush() {\n      this.run('onChange');\n      var value = this.value,\n          operations = this.operations,\n          controller = this.controller;\n\n      var change = { value: value, operations: operations };\n      this.operations = List();\n      this.tmp.flushing = false;\n      this.onChange(change);\n      return controller;\n    }\n\n    /**\n     * Trigger a command by `type` with `...args`.\n     *\n     * @param {String|Function} type\n     * @param {Any} ...args\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'command',\n    value: function command(type) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var controller = this.controller;\n\n\n      if (typeof type === 'function') {\n        type.apply(undefined, [controller].concat(args));\n        normalizeDirtyPaths(this);\n        return controller;\n      }\n\n      debug$2('command', { type: type, args: args });\n      var obj = { type: type, args: args };\n      this.run('onCommand', obj);\n      normalizeDirtyPaths(this);\n      return controller;\n    }\n\n    /**\n     * Checks if a command by `type` has been registered.\n     *\n     * @param {String} type\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasCommand',\n    value: function hasCommand(type) {\n      var controller = this.controller;\n\n      var has = type in controller && controller[type].__command;\n\n      return has;\n    }\n\n    /**\n     * Checks if a query by `type` has been registered.\n     *\n     * @param {String} type\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasQuery',\n    value: function hasQuery(type) {\n      var controller = this.controller;\n\n      var has = type in controller && controller[type].__query;\n\n      return has;\n    }\n\n    /**\n     * Normalize all of the nodes in the document from scratch.\n     *\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'normalize',\n    value: function normalize() {\n      var value = this.value,\n          controller = this.controller;\n      var document = value.document;\n\n      var table = document.getKeysToPathsTable();\n      var paths = Object.values(table).map(PathUtils.create);\n      this.tmp.dirty = this.tmp.dirty.concat(paths);\n      normalizeDirtyPaths(this);\n\n      var selection = value.selection;\n\n      document = value.document;\n\n      if (selection.isUnset && document.nodes.size) {\n        controller.moveToStartOfDocument();\n      }\n\n      return controller;\n    }\n\n    /**\n     * Ask a query by `type` with `...args`.\n     *\n     * @param {String|Function} type\n     * @param {Any} ...args\n     * @return {Any}\n     */\n\n  }, {\n    key: 'query',\n    value: function query(type) {\n      for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      var controller = this.controller;\n\n\n      if (typeof type === 'function') {\n        return type.apply(undefined, [controller].concat(args));\n      }\n\n      debug$2('query', { type: type, args: args });\n      var obj = { type: type, args: args };\n      return this.run('onQuery', obj);\n    }\n\n    /**\n     * Register a command `type` with the editor.\n     *\n     * @param {String} type\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'registerCommand',\n    value: function registerCommand(type) {\n      var _this2 = this;\n\n      var controller = this.controller;\n\n\n      if (type in controller && controller[type].__command) {\n        return controller;\n      }\n\n      invariant(!(type in controller), 'You cannot register a `' + type + '` command because it would overwrite an existing property of the `Editor`.');\n\n      var method = function method() {\n        for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          args[_key3] = arguments[_key3];\n        }\n\n        return _this2.command.apply(_this2, [type].concat(args));\n      };\n      controller[type] = method;\n      method.__command = true;\n      return controller;\n    }\n\n    /**\n     * Register a query `type` with the editor.\n     *\n     * @param {String} type\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'registerQuery',\n    value: function registerQuery(type) {\n      var _this3 = this;\n\n      var controller = this.controller;\n\n\n      if (type in controller && controller[type].__query) {\n        return controller;\n      }\n\n      invariant(!(type in controller), 'You cannot register a `' + type + '` query because it would overwrite an existing property of the `Editor`.');\n\n      var method = function method() {\n        for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n          args[_key4] = arguments[_key4];\n        }\n\n        return _this3.query.apply(_this3, [type].concat(args));\n      };\n      controller[type] = method;\n      method.__query = true;\n      return controller;\n    }\n\n    /**\n     * Run through the middleware stack by `key` with `args`.\n     *\n     * @param {String} key\n     * @param {Any} ...args\n     * @return {Any}\n     */\n\n  }, {\n    key: 'run',\n    value: function run(key) {\n      for (var _len5 = arguments.length, args = Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n        args[_key5 - 1] = arguments[_key5];\n      }\n\n      var controller = this.controller,\n          middleware = this.middleware;\n\n      var fns = middleware[key] || [];\n      var i = 0;\n\n      function next() {\n        var fn = fns[i++];\n        if (!fn) return;\n\n        for (var _len6 = arguments.length, overrides = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n          overrides[_key6] = arguments[_key6];\n        }\n\n        if (overrides.length) {\n          args = overrides;\n        }\n\n        var ret = fn.apply(undefined, toConsumableArray(args).concat([controller, next]));\n        return ret;\n      }\n\n      Object.defineProperty(next, 'change', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n\n      Object.defineProperty(next, 'onChange', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n\n      Object.defineProperty(next, 'props', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n\n      Object.defineProperty(next, 'schema', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n\n      Object.defineProperty(next, 'stack', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n\n      return next();\n    }\n\n    /**\n     * Set the `readOnly` flag.\n     *\n     * @param {Boolean} readOnly\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'setReadOnly',\n    value: function setReadOnly(readOnly) {\n      this.readOnly = readOnly;\n      return this;\n    }\n\n    /**\n     * Set the editor's `value`.\n     *\n     * @param {Value} value\n     * @param {Options} options\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'setValue',\n    value: function setValue(value) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var _options$normalize = options.normalize,\n          normalize = _options$normalize === undefined ? value !== this.value : _options$normalize;\n\n      this.value = value;\n\n      if (normalize) {\n        this.normalize();\n      }\n\n      return this;\n    }\n\n    /**\n     * Apply a series of changes inside a synchronous `fn`, deferring\n     * normalization until after the function has finished executing.\n     *\n     * @param {Function} fn\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'withoutNormalizing',\n    value: function withoutNormalizing(fn) {\n      var controller = this.controller;\n\n      var value = this.tmp.normalize;\n      this.tmp.normalize = false;\n      fn(controller);\n      this.tmp.normalize = value;\n      normalizeDirtyPaths(this);\n      return controller;\n    }\n\n    /**\n     * Deprecated.\n     */\n\n  }, {\n    key: 'change',\n    value: function change(fn) {\n      warning(false, 'As of Slate 0.43 the `change` object has been replaced with `editor`, so the `editor.change()` method is deprecated.`');\n\n      for (var _len7 = arguments.length, args = Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {\n        args[_key7 - 1] = arguments[_key7];\n      }\n\n      fn.apply(undefined, [this.controller].concat(args));\n    }\n  }, {\n    key: 'call',\n    value: function call(fn) {\n      warning(false, 'As of Slate 0.43 the `editor.call(fn)` method has been deprecated, please use `editor.command(fn)` instead.');\n\n      for (var _len8 = arguments.length, args = Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {\n        args[_key8 - 1] = arguments[_key8];\n      }\n\n      fn.apply(undefined, [this.controller].concat(args));\n      return this.controller;\n    }\n  }, {\n    key: 'applyOperations',\n    value: function applyOperations(operations) {\n      var _this4 = this;\n\n      warning(false, 'As of Slate 0.43 the `applyOperations` method is deprecated, please apply each operation in a loop instead.');\n\n      operations.forEach(function (op) {\n        return _this4.applyOperation(op);\n      });\n      return this.controller;\n    }\n  }, {\n    key: 'setOperationFlag',\n    value: function setOperationFlag(key, value) {\n      warning(false, 'As of slate@0.41 the `change.setOperationFlag` method has been deprecated.');\n\n      this.tmp[key] = value;\n      return this;\n    }\n  }, {\n    key: 'getFlag',\n    value: function getFlag(key) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      warning(false, 'As of slate@0.41 the `change.getFlag` method has been deprecated.');\n\n      return options[key] !== undefined ? options[key] : this.tmp[key];\n    }\n  }, {\n    key: 'unsetOperationFlag',\n    value: function unsetOperationFlag(key) {\n      warning(false, 'As of slate@0.41 the `change.unsetOperationFlag` method has been deprecated.');\n\n      delete this.tmp[key];\n      return this;\n    }\n  }, {\n    key: 'withoutNormalization',\n    value: function withoutNormalization(fn) {\n      warning(false, 'As of slate@0.41 the `change.withoutNormalization` helper has been renamed to `change.withoutNormalizing`.');\n\n      return this.withoutNormalizing(fn);\n    }\n  }, {\n    key: 'editor',\n    get: function get$$1() {\n      warning(false, \"As of Slate 0.43 the `change` object has been replaced with `editor`, so you don't need to access `change.editor`.\");\n\n      return this.controller;\n    }\n  }]);\n  return Editor;\n}();\n\n/**\n * Get the \"dirty\" paths for a given `operation`.\n *\n * @param {Operation} operation\n * @return {Array}\n */\n\nfunction getDirtyPaths(operation) {\n  var type = operation.type,\n      node = operation.node,\n      path = operation.path,\n      newPath = operation.newPath;\n\n\n  switch (type) {\n    case 'add_mark':\n    case 'insert_text':\n    case 'remove_mark':\n    case 'remove_text':\n    case 'set_mark':\n    case 'set_node':\n      {\n        var ancestors = PathUtils.getAncestors(path).toArray();\n        return [].concat(toConsumableArray(ancestors), [path]);\n      }\n\n    case 'insert_node':\n      {\n        var table = node.getKeysToPathsTable();\n        var paths = Object.values(table).map(function (p) {\n          return path.concat(p);\n        });\n        var _ancestors = PathUtils.getAncestors(path).toArray();\n        return [].concat(toConsumableArray(_ancestors), [path], toConsumableArray(paths));\n      }\n\n    case 'split_node':\n      {\n        var _ancestors2 = PathUtils.getAncestors(path).toArray();\n        var nextPath = PathUtils.increment(path);\n        return [].concat(toConsumableArray(_ancestors2), [path, nextPath]);\n      }\n\n    case 'merge_node':\n      {\n        var _ancestors3 = PathUtils.getAncestors(path).toArray();\n        var previousPath = PathUtils.decrement(path);\n        return [].concat(toConsumableArray(_ancestors3), [previousPath]);\n      }\n\n    case 'move_node':\n      {\n        if (PathUtils.isEqual(path, newPath)) {\n          return [];\n        }\n\n        var oldAncestors = PathUtils.getAncestors(path).reduce(function (arr, p) {\n          arr.push.apply(arr, toConsumableArray(PathUtils.transform(p, operation).toArray()));\n          return arr;\n        }, []);\n\n        var newAncestors = PathUtils.getAncestors(newPath).reduce(function (arr, p) {\n          arr.push.apply(arr, toConsumableArray(PathUtils.transform(p, operation).toArray()));\n          return arr;\n        }, []);\n\n        return [].concat(toConsumableArray(oldAncestors), toConsumableArray(newAncestors));\n      }\n\n    case 'remove_node':\n      {\n        var _ancestors4 = PathUtils.getAncestors(path).toArray();\n        return [].concat(toConsumableArray(_ancestors4));\n      }\n\n    default:\n      {\n        return [];\n      }\n  }\n}\n\n/**\n * Normalize any new \"dirty\" paths that have been added to the change.\n *\n * @param {Editor}\n */\n\nfunction normalizeDirtyPaths(editor) {\n  if (!editor.tmp.normalize) {\n    return;\n  }\n\n  if (!editor.tmp.dirty.length) {\n    return;\n  }\n\n  editor.withoutNormalizing(function () {\n    while (editor.tmp.dirty.length) {\n      var path = editor.tmp.dirty.pop();\n      normalizeNodeByPath(editor, path);\n    }\n  });\n}\n\n/**\n * Normalize the node at a specific `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\nfunction normalizeNodeByPath(editor, path) {\n  var controller = editor.controller;\n  var value = editor.value;\n  var _value = value,\n      document = _value.document;\n\n  var node = document.assertNode(path);\n  var iterations = 0;\n  var max = 100 + (node.object === 'text' ? 1 : node.nodes.size);\n\n  while (node) {\n    var fn = node.normalize(controller);\n\n    if (!fn) {\n      break;\n    }\n\n    // Run the normalize `fn` to fix the node.\n    fn(controller);\n\n    // Attempt to re-find the node by path, or by key if it has changed\n    // locations in the tree continue iterating.\n    value = editor.value;\n    document = value.document;\n    var _node = node,\n        key = _node.key;\n\n    var found = document.getDescendant(path);\n\n    if (found && found.key === key) {\n      node = found;\n    } else {\n      found = document.getDescendant(key);\n\n      if (found) {\n        node = found;\n        path = document.getPath(key);\n      } else {\n        // If it no longer exists by key, it was removed, so we're done.\n        break;\n      }\n    }\n\n    // Increment the iterations counter, and check to make sure that we haven't\n    // exceeded the max. Without this check, it's easy for the `normalize`\n    // function of a schema rule to be written incorrectly and for an infinite\n    // invalid loop to occur.\n    iterations++;\n\n    if (iterations > max) {\n      throw new Error('A schema rule could not be normalized after sufficient iterations. This is usually due to a `rule.normalize` or `plugin.normalizeNode` function of a schema being incorrectly written, causing an infinite loop.');\n    }\n  }\n}\n\n/**\n * Register a `plugin` with the editor.\n *\n * @param {Editor} editor\n * @param {Object|Array|Null} plugin\n */\n\nfunction registerPlugin(editor, plugin) {\n  if (Array.isArray(plugin)) {\n    plugin.forEach(function (p) {\n      return registerPlugin(editor, p);\n    });\n    return;\n  }\n\n  if (plugin == null) {\n    return;\n  }\n\n  var commands = plugin.commands,\n      queries = plugin.queries,\n      schema = plugin.schema,\n      rest = objectWithoutProperties(plugin, ['commands', 'queries', 'schema']);\n\n\n  if (commands) {\n    var commandsPlugin = CommandsPlugin(commands);\n    registerPlugin(editor, commandsPlugin);\n  }\n\n  if (queries) {\n    var queriesPlugin = QueriesPlugin(queries);\n    registerPlugin(editor, queriesPlugin);\n  }\n\n  if (schema) {\n    var schemaPlugin = SchemaPlugin(schema);\n    registerPlugin(editor, schemaPlugin);\n  }\n\n  for (var key in rest) {\n    var fn = rest[key];\n    var middleware = editor.middleware[key] = editor.middleware[key] || [];\n    middleware.push(fn);\n  }\n}\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$13 = {\n  marks: undefined,\n  text: undefined\n\n  /**\n   * Leaf.\n   *\n   * @type {Leaf}\n   */\n\n};\nvar Leaf$1 = function (_Record) {\n  inherits(Leaf, _Record);\n\n  function Leaf() {\n    classCallCheck(this, Leaf);\n    return possibleConstructorReturn(this, (Leaf.__proto__ || Object.getPrototypeOf(Leaf)).apply(this, arguments));\n  }\n\n  createClass(Leaf, [{\n    key: 'updateMark',\n\n\n    /**\n     * Update a `mark` at leaf, replace with newMark\n     *\n     * @param {Mark} mark\n     * @param {Mark} newMark\n     * @returns {Leaf}\n     */\n\n    value: function updateMark(mark, newMark) {\n      var marks = this.marks;\n\n      if (newMark.equals(mark)) return this;\n      if (!marks.has(mark)) return this;\n      var newMarks = marks.withMutations(function (collection) {\n        collection.remove(mark).add(newMark);\n      });\n      return this.set('marks', newMarks);\n    }\n\n    /**\n     * Add a `mark` to the leaf.\n     *\n     * @param {Mark} mark\n     * @returns {Text}\n     */\n\n  }, {\n    key: 'addMark',\n    value: function addMark(mark) {\n      var marks = this.marks;\n\n      return this.set('marks', marks.add(mark));\n    }\n\n    /**\n     * Add a `set` of marks to the leaf.\n     *\n     * @param {Set<Mark>} set\n     * @returns {Text}\n     */\n\n  }, {\n    key: 'addMarks',\n    value: function addMarks(set$$1) {\n      var marks = this.marks;\n\n      return this.set('marks', marks.union(set$$1));\n    }\n\n    /**\n     * Insert a text `string` into the leaf at `offset`.\n     *\n     * @param {Number} offset\n     * @param {String} string\n     * @return {Leaf}\n     */\n\n  }, {\n    key: 'insertText',\n    value: function insertText(offset, string) {\n      var text = this.text;\n\n      var next = text.slice(0, offset) + string + text.slice(offset);\n      return this.set('text', next);\n    }\n\n    /**\n     * Remove a `mark` from the leaf.\n     *\n     * @param {Mark} mark\n     * @returns {Text}\n     */\n\n  }, {\n    key: 'removeMark',\n    value: function removeMark(mark) {\n      var marks = this.marks;\n\n      return this.set('marks', marks.remove(mark));\n    }\n\n    /**\n     * Return a JSON representation of the leaf.\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var object = {\n        object: this.object,\n        text: this.text,\n        marks: this.marks.toArray().map(function (m) {\n          return m.toJSON();\n        })\n      };\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Leaf` with `attrs`.\n     *\n     * @param {Object|Leaf} attrs\n     * @return {Leaf}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      warning(false, 'As of slate@0.47 the `Leaf` model is deprecated.');\n\n      if (Leaf.isLeaf(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = { text: attrs };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Leaf.fromJSON(attrs);\n      }\n\n      throw new Error('`Leaf.create` only accepts objects, strings or leaves, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a valid List of `Leaf` from `leaves`\n     *\n     * @param {List<Leaf>} leaves\n     * @return {List<Leaf>}\n     */\n\n  }, {\n    key: 'createLeaves',\n    value: function createLeaves(leaves) {\n      if (leaves.size <= 1) return leaves;\n\n      var invalid = false;\n\n      // TODO: we can make this faster with [List] and then flatten\n      var result = List().withMutations(function (cache) {\n        // Search from the leaves left end to find invalid node;\n        leaves.findLast(function (leaf, index) {\n          var firstLeaf = cache.first();\n\n          // If the first leaf of cache exist, check whether the first leaf is connectable with the current leaf\n          if (firstLeaf) {\n            // If marks equals, then the two leaves can be connected\n            if (firstLeaf.marks.equals(leaf.marks)) {\n              invalid = true;\n              cache.set(0, firstLeaf.set('text', '' + leaf.text + firstLeaf.text));\n              return;\n            }\n\n            // If the cached leaf is empty, drop the empty leaf with the upcoming leaf\n            if (firstLeaf.text === '') {\n              invalid = true;\n              cache.set(0, leaf);\n              return;\n            }\n\n            // If the current leaf is empty, drop the leaf\n            if (leaf.text === '') {\n              invalid = true;\n              return;\n            }\n          }\n\n          cache.unshift(leaf);\n        });\n      });\n\n      if (!invalid) return leaves;\n      return result;\n    }\n\n    /**\n     * Split a list of leaves to two lists; if the leaves are valid leaves, the returned leaves are also valid\n     * Corner Cases:\n     *   1. if offset is smaller than 0, then return [List(), leaves]\n     *   2. if offset is bigger than the text length, then return [leaves, List()]\n     *\n     * @param {List<Leaf> leaves\n     * @return {Array<List<Leaf>>}\n     */\n\n  }, {\n    key: 'splitLeaves',\n    value: function splitLeaves(leaves, offset) {\n      if (offset < 0) return [List(), leaves];\n\n      if (leaves.size === 0) {\n        return [List(), List()];\n      }\n\n      var endOffset = 0;\n      var index = -1;\n      var left = void 0,\n          right = void 0;\n\n      leaves.find(function (leaf) {\n        index++;\n        var startOffset = endOffset;\n        var text = leaf.text;\n\n        endOffset += text.length;\n\n        if (endOffset < offset) return false;\n        if (startOffset > offset) return false;\n\n        var length = offset - startOffset;\n        left = leaf.set('text', text.slice(0, length));\n        right = leaf.set('text', text.slice(length));\n        return true;\n      });\n\n      if (!left) return [leaves, List()];\n\n      if (left.text === '') {\n        if (index === 0) {\n          return [List.of(left), leaves];\n        }\n\n        return [leaves.take(index), leaves.skip(index)];\n      }\n\n      if (right.text === '') {\n        if (index === leaves.size - 1) {\n          return [leaves, List.of(right)];\n        }\n\n        return [leaves.take(index + 1), leaves.skip(index + 1)];\n      }\n\n      return [leaves.take(index).push(left), leaves.skip(index + 1).unshift(right)];\n    }\n\n    /**\n     * Create a `Leaf` list from `attrs`.\n     *\n     * @param {Array<Leaf|Object>|List<Leaf|Object>} attrs\n     * @return {List<Leaf>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(attrs) || Array.isArray(attrs)) {\n        var list = new List(attrs.map(Leaf.create));\n        return list;\n      }\n\n      throw new Error('`Leaf.createList` only accepts arrays or lists, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a `Leaf` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Leaf}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var _object$text = object.text,\n          text = _object$text === undefined ? '' : _object$text,\n          _object$marks = object.marks,\n          marks = _object$marks === undefined ? [] : _object$marks;\n\n\n      var leaf = new Leaf({\n        text: text,\n        marks: Set(marks.map(Mark.fromJSON))\n      });\n\n      return leaf;\n    }\n\n    /**\n     * Check if `any` is a list of leaves.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isLeafList',\n    value: function isLeafList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Leaf.isLeaf(item);\n      });\n    }\n  }]);\n  return Leaf;\n}(Record(DEFAULTS$13));\n\n/**\n * Mix in an `Interface` to a `Class`.\n *\n * @param {Class} Interface\n * @param {Class} Class\n */\n\nfunction mixin(Interface, Classes) {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = Classes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var Class = _step.value;\n\n      // Copy static properties from the interface.\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = Object.getOwnPropertyNames(Interface)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var name = _step2.value;\n\n          if (Class.hasOwnProperty(name)) continue;\n          var desc = Object.getOwnPropertyDescriptor(Interface, name);\n          Object.defineProperty(Class, name, desc);\n        }\n\n        // Copy instance properties from the interface.\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = Object.getOwnPropertyNames(Interface.prototype)[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var _name = _step3.value;\n\n          if (Class.prototype.hasOwnProperty(_name)) continue;\n          var desc = Object.getOwnPropertyDescriptor(Interface.prototype, _name);\n          Object.defineProperty(Class.prototype, _name, desc);\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\n/**\n * A factory for the interface that all Slate objects implement.\n *\n * @type {Function}\n */\n\nfunction create$2(type) {\n  var TYPE = TYPES[type];\n  var camel = '' + type.charAt(0).toUpperCase() + type.slice(1);\n  var is$$1 = 'is' + camel;\n\n  var ObjectInterface = function () {\n    function ObjectInterface() {\n      classCallCheck(this, ObjectInterface);\n    }\n\n    createClass(ObjectInterface, [{\n      key: 'object',\n\n      /**\n       * Return the type of the object.\n       *\n       * @return {String}\n       */\n\n      get: function get$$1() {\n        return type;\n      }\n    }]);\n    return ObjectInterface;\n  }();\n\n  ObjectInterface[is$$1] = isObject.bind(null, type);\n  ObjectInterface.prototype[TYPE] = true;\n  return ObjectInterface;\n}\n\n/**\n * Mix in the object interfaces.\n */\n\nObject.entries({\n  Annotation: Annotation,\n  Block: Block,\n  Change: Change,\n  Decoration: Decoration,\n  Document: Document,\n  Editor: Editor,\n  Inline: Inline,\n  Leaf: Leaf$1,\n  Mark: Mark,\n  Node: Node,\n  Operation: Operation,\n  Point: Point,\n  Range: Range,\n  Selection: Selection,\n  Text: Text,\n  Value: Value\n}).forEach(function (_ref) {\n  var _ref2 = slicedToArray(_ref, 2),\n      camel = _ref2[0],\n      obj = _ref2[1];\n\n  return mixin(create$2(camel.toLowerCase()), [obj]);\n});\n\n/**\n * The interface that all Slate models implement.\n *\n * @type {Class}\n */\n\nvar ModelInterface = function () {\n  function ModelInterface() {\n    classCallCheck(this, ModelInterface);\n  }\n\n  createClass(ModelInterface, [{\n    key: 'toJS',\n\n\n    /**\n     * Alias `toJS`.\n     */\n\n    value: function toJS() {\n      return this.toJSON.apply(this, arguments);\n    }\n  }], [{\n    key: 'fromJS',\n\n    /**\n     * Alias `fromJS`.\n     */\n\n    value: function fromJS() {\n      return this.fromJSON.apply(this, arguments);\n    }\n  }]);\n  return ModelInterface;\n}();\n\n/**\n * Mix in the common interface.\n *\n * @param {Record}\n */\n\nmixin(ModelInterface, [Annotation, Block, Decoration, Document, Inline, Leaf$1, Mark, Node, Operation, Point, Range, Selection, Text, Value]);\n\n/* global WeakMap, Map, Symbol */\n\n/**\n * GLOBAL: True if memoization should is enabled.\n *\n * @type {Boolean}\n */\n\nvar ENABLED = true;\n\n/**\n * The leaf node of a cache tree. Used to support variable argument length. A\n * unique object, so that native Maps will key it by reference.\n *\n * @type {Symbol}\n */\n\nvar LEAF = Symbol('LEAF');\n\n/**\n * The node of a cache tree for a WeakMap to store cache visited by objects\n *\n * @type {Symbol}\n */\n\nvar STORE_KEY = Symbol('STORE_KEY');\n\n/**\n * Values to represent a memoized undefined and null value. Allows efficient value\n * retrieval using Map.get only.\n *\n * @type {Symbol}\n */\n\nvar UNDEFINED = Symbol('undefined');\nvar NULL = Symbol('null');\n\n/**\n * Default value for unset keys in native Maps\n *\n * @type {Undefined}\n */\n\nvar UNSET = undefined;\n\n/**\n * Global Store for all cached values\n *\n * @type {WeakMap}\n */\n\nvar memoizeStore = new WeakMap();\n\n/**\n * Memoize all of the `properties` on a `object`.\n *\n * @param {Object} object\n * @param {Array} properties\n * @return {Record}\n */\n\nfunction memoize(object, properties) {\n  var _loop = function _loop(property) {\n    var original = object[property];\n\n    if (!original) {\n      throw new Error('Object does not have a property named \"' + property + '\".');\n    }\n\n    object[property] = function () {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      // If memoization is disabled, call into the original method.\n      if (!ENABLED) return original.apply(this, args);\n\n      if (!memoizeStore.has(this)) {\n        memoizeStore.set(this, {\n          noArgs: {},\n          hasArgs: {}\n        });\n      }\n\n      var _memoizeStore$get = memoizeStore.get(this),\n          noArgs = _memoizeStore$get.noArgs,\n          hasArgs = _memoizeStore$get.hasArgs;\n\n      var takesArguments = args.length !== 0;\n\n      var cachedValue = void 0;\n      var keys = void 0;\n\n      if (takesArguments) {\n        keys = [property].concat(args);\n        cachedValue = getIn(hasArgs, keys);\n      } else {\n        cachedValue = noArgs[property];\n      }\n\n      // If we've got a result already, return it.\n      if (cachedValue !== UNSET) {\n        return cachedValue === UNDEFINED ? undefined : cachedValue;\n      }\n\n      // Otherwise calculate what it should be once and cache it.\n      var value = original.apply(this, args);\n      var v = value === undefined ? UNDEFINED : value;\n\n      if (takesArguments) {\n        setIn(hasArgs, keys, v);\n      } else {\n        noArgs[property] = v;\n      }\n\n      return value;\n    };\n  };\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = properties[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var property = _step.value;\n\n      _loop(property);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\n/**\n * Get a value at a key path in a tree of Map.\n *\n * If not set, returns UNSET.\n * If the set value is undefined, returns UNDEFINED.\n *\n * @param {Map} map\n * @param {Array} keys\n * @return {Any|UNSET|UNDEFINED}\n */\n\nfunction getIn(map, keys) {\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = keys[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var key = _step2.value;\n\n      if (key === undefined) {\n        key = UNDEFINED;\n      } else if (key == null) {\n        key = NULL;\n      }\n\n      if ((typeof key === 'undefined' ? 'undefined' : _typeof(key)) === 'object') {\n        map = map[STORE_KEY] && map[STORE_KEY].get(key);\n      } else {\n        map = map[key];\n      }\n\n      if (map === UNSET) return UNSET;\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return map[LEAF];\n}\n\n/**\n * Set a value at a key path in a tree of Map, creating Maps on the go.\n *\n * @param {Map} map\n * @param {Array} keys\n * @param {Any} value\n * @return {Map}\n */\n\nfunction setIn(map, keys, value) {\n  var child = map;\n\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = keys[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var key = _step3.value;\n\n      if (key === undefined) {\n        key = UNDEFINED;\n      } else if (key == null) {\n        key = NULL;\n      }\n\n      if ((typeof key === 'undefined' ? 'undefined' : _typeof(key)) !== 'object') {\n        if (!child[key]) {\n          child[key] = {};\n        }\n\n        child = child[key];\n        continue;\n      }\n\n      if (!child[STORE_KEY]) {\n        child[STORE_KEY] = new WeakMap();\n      }\n\n      if (!child[STORE_KEY].has(key)) {\n        var newChild = {};\n        child[STORE_KEY].set(key, newChild);\n        child = newChild;\n        continue;\n      }\n\n      child = child[STORE_KEY].get(key);\n    }\n\n    // The whole path has been created, so set the value to the bottom most map.\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  child[LEAF] = value;\n  return map;\n}\n\n/**\n * In DEV mode, clears the previously memoized values, globally.\n *\n * @return {Void}\n */\n\nfunction resetMemoization() {\n  memoizeStore = new WeakMap();\n}\n\n/**\n * In DEV mode, enable or disable the use of memoize values, globally.\n *\n * @param {Boolean} enabled\n * @return {Void}\n */\n\nfunction useMemoization(enabled) {\n  ENABLED = enabled;\n}\n\n/**\n * The interface that `Document`, `Block` and `Inline` all implement, to make\n * working with the recursive node tree easier.\n *\n * @type {Class}\n */\n\nvar NodeInterface = function () {\n  function NodeInterface() {\n    classCallCheck(this, NodeInterface);\n  }\n\n  createClass(NodeInterface, [{\n    key: 'getFirstText',\n\n    /**\n     * Get the first text node of a node, or the node itself.\n     *\n     * @return {Node|Null}\n     */\n\n    value: function getFirstText() {\n      if (this.object === 'text') {\n        return this;\n      }\n\n      var descendant = null;\n\n      var found = this.nodes.find(function (node) {\n        if (node.object === 'text') return true;\n        descendant = node.getFirstText();\n        return !!descendant;\n      });\n\n      return descendant || found;\n    }\n\n    /**\n     * Get an object mapping all the keys in the node to their paths.\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: 'getKeysToPathsTable',\n    value: function getKeysToPathsTable() {\n      var ret = defineProperty({}, this.key, []);\n\n      if (this.nodes) {\n        this.nodes.forEach(function (node, i) {\n          var nested = node.getKeysToPathsTable();\n\n          for (var key in nested) {\n            var path = nested[key];\n\n            warning(!(key in ret), 'A node with a duplicate key of \"' + key + '\" was found! Duplicate keys are not allowed, you should use `node.regenerateKey` before inserting if you are reusing an existing node.');\n\n            ret[key] = [i].concat(toConsumableArray(path));\n          }\n        });\n      }\n\n      return ret;\n    }\n\n    /**\n     * Get the last text node of a node, or the node itself.\n     *\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getLastText',\n    value: function getLastText() {\n      if (this.object === 'text') {\n        return this;\n      }\n\n      var descendant = null;\n\n      var found = this.nodes.findLast(function (node) {\n        if (node.object === 'text') return true;\n        descendant = node.getLastText();\n        return descendant;\n      });\n\n      return descendant || found;\n    }\n\n    /**\n     * Get a node in the tree, or the node itself.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNode',\n    value: function getNode(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (this.object === 'text' && path.size) return null;\n      var node = path.size ? this.getDescendant(path) : this;\n      return node;\n    }\n\n    /**\n     * Find the path to a node.\n     *\n     * @param {String|List} key\n     * @return {List}\n     */\n\n  }, {\n    key: 'getPath',\n    value: function getPath(key) {\n      // COMPAT: Handle passing in a path, to match other methods.\n      if (List.isList(key)) {\n        return key;\n      }\n\n      // COMPAT: Handle a node object by iterating the descendants tree, so that\n      // we avoid using keys for the future.\n      if (Node.isNode(key) && this.descendants) {\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = this.descendants()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var _ref = _step.value;\n\n            var _ref2 = slicedToArray(_ref, 2);\n\n            var node = _ref2[0];\n            var _path = _ref2[1];\n\n            if (key === node) return _path;\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      }\n\n      var dict = this.getKeysToPathsTable();\n      var path = dict[key];\n      return path ? List(path) : null;\n    }\n\n    /**\n     * Get the concatenated text string of a node.\n     *\n     * @return {String}\n     */\n\n  }, {\n    key: 'getText',\n    value: function getText() {\n      if (this.object === 'text') {\n        return this.text;\n      }\n\n      var text = this.nodes.reduce(function (memo, c) {\n        return memo + c.text;\n      }, '');\n      return text;\n    }\n\n    /**\n     * Check if a node exists.\n     *\n     * @param {List|String} path\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasNode',\n    value: function hasNode(path) {\n      var node = this.getNode(path);\n      return !!node;\n    }\n\n    /**\n     * Normalize the text node with an `editor`.\n     *\n     * @param {Editor} editor\n     * @return {Function|Void}\n     */\n\n  }, {\n    key: 'normalize',\n    value: function normalize(editor) {\n      var normalizer = editor.run('normalizeNode', this);\n      return normalizer;\n    }\n\n    /**\n     * Regenerate the node's key.\n     *\n     * @return {Node}\n     */\n\n  }, {\n    key: 'regenerateKey',\n    value: function regenerateKey() {\n      var key = KeyUtils.create();\n      var node = this.set('key', key);\n      return node;\n    }\n\n    /**\n     * Resolve a path from a path list or key string.\n     *\n     * An `index` can be provided, in which case paths created from a key string\n     * will have the index pushed onto them. This is helpful in cases where you\n     * want to accept either a `path` or a `key, index` combination for targeting\n     * a location in the tree that doesn't exist yet, like when inserting.\n     *\n     * @param {List|String} value\n     * @param {Number} index\n     * @return {List}\n     */\n\n  }, {\n    key: 'resolvePath',\n    value: function resolvePath(path, index) {\n      if (typeof path === 'string') {\n        path = this.getPath(path);\n\n        if (index != null) {\n          path = path.concat(index);\n        }\n      } else {\n        path = PathUtils.create(path);\n      }\n\n      return path;\n    }\n\n    /**\n     * Validate the node with an `editor`.\n     *\n     * @param {Editor} editor\n     * @return {Error|Void}\n     */\n\n  }, {\n    key: 'validate',\n    value: function validate(editor) {\n      var error = editor.run('validateNode', this);\n      return error;\n    }\n  }]);\n  return NodeInterface;\n}();\n\n/**\n * Memoize read methods.\n */\n\nmemoize(NodeInterface.prototype, ['getFirstText', 'getKeysToPathsTable', 'getLastText', 'getText', 'normalize', 'validate']);\n\n/**\n * Mix in the node interface.\n */\n\nmixin(NodeInterface, [Block, Document, Inline, Text]);\n\nvar global$1 = typeof global !== \"undefined\" ? global :\n            typeof self !== \"undefined\" ? self :\n            typeof window !== \"undefined\" ? window : {}\n\nfunction identity() {\n  return true;\n}\n\n/**\n * The interface that `Document`, `Block` and `Inline` all implement, to make\n * working with the recursive node tree easier.\n *\n * @type {Class}\n */\n\nvar ElementInterface = function () {\n  function ElementInterface() {\n    classCallCheck(this, ElementInterface);\n  }\n\n  createClass(ElementInterface, [{\n    key: 'addMark',\n\n\n    /**\n     * Add `mark` to text at `path`.\n     *\n     * @param {List|String} path\n     * @param {Mark} mark\n     * @return {Node}\n     */\n\n    value: function addMark(path, mark) {\n      path = this.resolvePath(path);\n      var node = this.assertDescendant(path);\n      node = node.addMark(mark);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n\n    /**\n     * Create an iteratable for all of the ancestors of the node.\n     *\n     * @return {Iterable}\n     */\n\n  }, {\n    key: 'ancestors',\n    value: function ancestors(path) {\n      var iterable = this.createIterable({\n        path: path,\n        direction: null,\n        downward: false,\n        includeTargetAncestors: true,\n        includeRoot: true\n      });\n\n      return iterable;\n    }\n\n    /**\n     * Create an iteratable for all of the blocks of a node with `options`.\n     *\n     * @param {Options}\n     * @return {Iterable}\n     */\n\n  }, {\n    key: 'blocks',\n    value: function blocks() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var onlyLeaves = options.onlyLeaves,\n          onlyRoots = options.onlyRoots,\n          onlyTypes = options.onlyTypes,\n          _match = options.match,\n          rest = objectWithoutProperties(options, ['onlyLeaves', 'onlyRoots', 'onlyTypes', 'match']);\n\n      var iterable = this.descendants(_extends({\n        includeDocument: false,\n        includeInlines: false,\n        includeTexts: false\n      }, rest, {\n        match: function match(node, path) {\n          if (onlyTypes && !onlyTypes.includes(node.type)) {\n            return false;\n          } else if (onlyRoots && path.size !== 1) {\n            return false;\n          } else if (onlyLeaves && !node.isLeafBlock()) {\n            return false;\n          } else if (_match && !_match(node, path)) {\n            return false;\n          } else {\n            return true;\n          }\n        }\n      }));\n\n      return iterable;\n    }\n\n    /**\n     * Create an annotation with `properties` relative to the node.\n     *\n     * @param {Object|Annotation} properties\n     * @return {Annotation}\n     */\n\n  }, {\n    key: 'createAnnotation',\n    value: function createAnnotation(properties) {\n      properties = Annotation.createProperties(properties);\n      var annotation = this.resolveAnnotation(properties);\n      return annotation;\n    }\n\n    /**\n     * Create a decoration with `properties` relative to the node.\n     *\n     * @param {Object|Decoration} properties\n     * @return {Decoration}\n     */\n\n  }, {\n    key: 'createDecoration',\n    value: function createDecoration(properties) {\n      properties = Decoration.createProperties(properties);\n      var decoration = this.resolveDecoration(properties);\n      return decoration;\n    }\n\n    /**\n     * Create an iteratable function starting at `target` path with `options`.\n     *\n     * @param {Object} options (optional)\n     * @return {Function}\n     */\n\n  }, {\n    key: 'createIterable',\n    value: function createIterable() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _options$direction = options.direction,\n          direction = _options$direction === undefined ? 'forward' : _options$direction,\n          _options$downward = options.downward,\n          downward = _options$downward === undefined ? true : _options$downward,\n          _options$upward = options.upward,\n          upward = _options$upward === undefined ? true : _options$upward,\n          _options$includeBlock = options.includeBlocks,\n          includeBlocks = _options$includeBlock === undefined ? true : _options$includeBlock,\n          _options$includeDocum = options.includeDocument,\n          includeDocument = _options$includeDocum === undefined ? true : _options$includeDocum,\n          _options$includeInlin = options.includeInlines,\n          includeInlines = _options$includeInlin === undefined ? true : _options$includeInlin,\n          _options$includeRoot = options.includeRoot,\n          includeRoot = _options$includeRoot === undefined ? false : _options$includeRoot,\n          _options$includeTarge = options.includeTarget,\n          includeTarget = _options$includeTarge === undefined ? !!options.range : _options$includeTarge,\n          _options$includeTarge2 = options.includeTargetAncestors,\n          includeTargetAncestors = _options$includeTarge2 === undefined ? false : _options$includeTarge2,\n          _options$includeTexts = options.includeTexts,\n          includeTexts = _options$includeTexts === undefined ? true : _options$includeTexts,\n          _options$match = options.match,\n          match = _options$match === undefined ? null : _options$match;\n\n\n      var root = this;\n      var targetPath = null;\n      var targetRange = null;\n\n      // You can iterate over either a range or a path, but not both.\n      if (options.range) {\n        targetRange = root.resolveRange(options.range);\n        targetPath = root.resolvePath(targetRange.start.path);\n      } else if (options.path) {\n        targetPath = root.resolvePath(options.path);\n      }\n\n      var targetNode = targetPath && root.assertNode(targetPath);\n      var NativeSet = typeof window === 'undefined' ? global$1.Set : window.Set;\n\n      // Return an object that implements the iterable interface.\n      return defineProperty({}, Symbol.iterator, function () {\n        var visited = new NativeSet();\n        var startPath = targetRange && targetRange.start.path;\n        var endPath = targetRange && targetRange.end.path;\n        var path = targetPath;\n        var node = targetNode;\n        var includedTarget = false;\n        var includedStart = false;\n        var includingStart = false;\n\n        var result = function result() {\n          // When these are nulled out we've finished iterating.\n          if (!path || !node) {\n            return { done: true };\n          }\n\n          // We often don't want to include the root node itself.\n          if (!includeRoot && node === root) {\n            return next();\n          }\n\n          if (!includeBlocks && node.object === 'block') {\n            return next();\n          }\n\n          if (!includeDocument && node.object === 'document') {\n            return next();\n          }\n\n          if (!includeInlines && node.object === 'inline') {\n            return next();\n          }\n\n          if (!includeTexts && node.object === 'text') {\n            return next();\n          }\n\n          if (match && !match(node, path)) {\n            return next();\n          }\n\n          return { value: [node, path], done: false };\n        };\n\n        var next = function next() {\n          if (!path || !node) {\n            return result();\n          }\n\n          // When iterating over a range, we need to include the specific\n          // ancestors in the start path of the range manually.\n          if (startPath && !includedStart) {\n            if (!includingStart) {\n              includingStart = true;\n              path = PathUtils.create([]);\n              node = root;\n              return result();\n            }\n\n            if (path.size === startPath.size - 1) {\n              includedStart = true;\n              path = targetPath;\n              node = targetNode;\n              return next();\n            }\n\n            path = startPath.slice(0, path.size + 1);\n            node = root.assertNode(path);\n            return result();\n          }\n\n          // Sometimes we want to include the target itself.\n          if (includeTarget && !includedTarget) {\n            includedTarget = true;\n            return result();\n          }\n\n          // When iterating over a range, if we get to the end path then exit.\n          if (endPath && path.equals(endPath)) {\n            node = null;\n            path = null;\n            return next();\n          }\n\n          // If we're allowed to go downward, and we haven't decsended yet, do so.\n          if (downward && node.nodes && node.nodes.size && !visited.has(node)) {\n            visited.add(node);\n            var nextIndex = direction === 'forward' ? 0 : node.nodes.size - 1;\n            path = path.push(nextIndex);\n            node = root.assertNode(path);\n            return result();\n          }\n\n          // If we're going forward...\n          if (direction === 'forward') {\n            var newPath = PathUtils.increment(path);\n            var newNode = root.getNode(newPath);\n\n            if (newNode) {\n              path = newPath;\n              node = newNode;\n              return result();\n            }\n          }\n\n          // If we're going backward...\n          if (direction === 'backward' && path.last() !== 0) {\n            var _newPath = PathUtils.decrement(path);\n            var _newNode = root.getNode(_newPath);\n\n            if (_newNode) {\n              path = _newPath;\n              node = _newNode;\n              return result();\n            }\n          }\n\n          // If we're going upward...\n          if (upward && path.size) {\n            path = PathUtils.lift(path);\n            node = root.assertNode(path);\n\n            // Sometimes we'll have already visited the node on the way down\n            // so we don't want to double count it.\n            if (visited.has(node)) {\n              return next();\n            }\n\n            visited.add(node);\n\n            // If ancestors of the target node shouldn't be included, skip them.\n            if (!includeTargetAncestors) {\n              return next();\n            } else {\n              return result();\n            }\n          }\n\n          path = null;\n          node = null;\n          return next();\n        };\n\n        return { next: next };\n      });\n    }\n\n    /**\n     * Create a point with `properties` relative to the node.\n     *\n     * @param {Object|Point} properties\n     * @return {Range}\n     */\n\n  }, {\n    key: 'createPoint',\n    value: function createPoint(properties) {\n      properties = Point.createProperties(properties);\n      var point = this.resolvePoint(properties);\n      return point;\n    }\n\n    /**\n     * Create a range with `properties` relative to the node.\n     *\n     * @param {Object|Range} properties\n     * @return {Range}\n     */\n\n  }, {\n    key: 'createRange',\n    value: function createRange(properties) {\n      properties = Range.createProperties(properties);\n      var range = this.resolveRange(properties);\n      return range;\n    }\n\n    /**\n     * Create a selection with `properties` relative to the node.\n     *\n     * @param {Object|Selection} properties\n     * @return {Selection}\n     */\n\n  }, {\n    key: 'createSelection',\n    value: function createSelection(properties) {\n      properties = Selection.createProperties(properties);\n      var selection = this.resolveSelection(properties);\n      return selection;\n    }\n\n    /**\n     * Create an iteratable for all of the descendants of the node.\n     *\n     * @param {Object} options\n     * @return {Iterable}\n     */\n\n  }, {\n    key: 'descendants',\n    value: function descendants(options) {\n      var iterable = this.createIterable(_extends({ path: [] }, options));\n      return iterable;\n    }\n\n    /**\n     * Find all of the descendants that match a `predicate`.\n     *\n     * @param {Function} predicate\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'filterDescendants',\n    value: function filterDescendants() {\n      var predicate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : identity;\n\n      var matches = [];\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.descendants()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _ref2 = _step.value;\n\n          var _ref3 = slicedToArray(_ref2, 2);\n\n          var node = _ref3[0];\n          var path = _ref3[1];\n\n          if (predicate(node, path)) {\n            matches.push(node);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return List(matches);\n    }\n\n    /**\n     * Find the first descendant that matches a `predicate`.\n     *\n     * @param {Function} predicate\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'findDescendant',\n    value: function findDescendant() {\n      var predicate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : identity;\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.descendants()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var _ref4 = _step2.value;\n\n          var _ref5 = slicedToArray(_ref4, 2);\n\n          var node = _ref5[0];\n          var path = _ref5[1];\n\n          if (predicate(node, path)) {\n            return node;\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return null;\n    }\n\n    /**\n     * Iterate over all descendants, breaking if `predicate` returns false.\n     *\n     * @param {Function} predicate\n     */\n\n  }, {\n    key: 'forEachDescendant',\n    value: function forEachDescendant() {\n      var predicate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : identity;\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this.descendants()[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var _next = _step3.value;\n\n          var ret = predicate.apply(undefined, toConsumableArray(_next));\n\n          if (ret === false) {\n            return;\n          }\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n\n    /**\n     * Get a set of the active marks in a `range`. Active marks are marks that are\n     * on every text node in a given range. This is a common distinction for\n     * highlighting toolbar buttons for example.\n     *\n     * TODO: this method needs to be cleaned up, it's very hard to follow and\n     * probably doing unnecessary work.\n     *\n     * @param {Range} range\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getActiveMarksAtRange',\n    value: function getActiveMarksAtRange(range) {\n      range = this.resolveRange(range);\n\n      if (range.isUnset) {\n        return Set();\n      }\n\n      if (range.isCollapsed) {\n        var _range = range,\n            _start = _range.start;\n\n        return this.getInsertMarksAtPoint(_start);\n      }\n\n      var _range2 = range,\n          start = _range2.start,\n          end = _range2.end;\n\n      var startPath = start.path;\n      var startOffset = start.offset;\n      var endPath = end.path;\n      var endOffset = end.offset;\n      var startText = this.getDescendant(startPath);\n      var endText = this.getDescendant(endPath);\n\n      if (!startPath.equals(endPath)) {\n        while (!startPath.equals(endPath) && endOffset === 0) {\n          \n          var _texts = this.texts({\n            path: endPath,\n            direction: 'backward'\n          });\n\n          var _texts2 = slicedToArray(_texts, 1);\n\n          var _texts2$ = slicedToArray(_texts2[0], 2);\n\n          endText = _texts2$[0];\n          endPath = _texts2$[1];\n\n\n          endOffset = endText.text.length;\n        }\n\n        while (!startPath.equals(endPath) && startOffset === startText.text.length) {\n          \n          var _texts3 = this.texts({ path: startPath });\n\n          var _texts4 = slicedToArray(_texts3, 1);\n\n          var _texts4$ = slicedToArray(_texts4[0], 2);\n\n          startText = _texts4$[0];\n          startPath = _texts4$[1];\n\n          startOffset = 0;\n        }\n      }\n\n      if (startPath.equals(endPath)) {\n        return startText.marks;\n      }\n\n      var startMarks = startText.marks;\n\n      // PERF: if start marks is empty we can return early.\n      if (startMarks.size === 0) {\n        return Set();\n      }\n\n      var endMarks = endText.marks;\n      var marks = startMarks.intersect(endMarks);\n\n      // If marks is already empty, the active marks is empty\n      if (marks.size === 0) {\n        return marks;\n      }\n\n      \n      var _texts5 = this.texts({ path: startPath });\n\n      var _texts6 = slicedToArray(_texts5, 1);\n\n      var _texts6$ = slicedToArray(_texts6[0], 2);\n\n      startText = _texts6$[0];\n      startPath = _texts6$[1];\n\n\n      while (!startPath.equals(endPath)) {\n        if (startText.text.length !== 0) {\n          marks = marks.intersect(startText.marks);\n\n          if (marks.size === 0) {\n            return Set();\n          }\n        }\n\n        \n        var _texts7 = this.texts({ path: startPath });\n\n        var _texts8 = slicedToArray(_texts7, 1);\n\n        var _texts8$ = slicedToArray(_texts8[0], 2);\n\n        startText = _texts8$[0];\n        startPath = _texts8$[1];\n      }\n\n      return marks;\n    }\n\n    /**\n     * Get a list of the ancestors of a descendant.\n     *\n     * @param {List|String} path\n     * @return {List<Node>|Null}\n     */\n\n  }, {\n    key: 'getAncestors',\n    value: function getAncestors(path) {\n      var iterable = this.ancestors(path);\n      var array = Array.from(iterable, function (_ref6) {\n        var _ref7 = slicedToArray(_ref6, 1),\n            node = _ref7[0];\n\n        return node;\n      }).reverse();\n      var list = List(array);\n      return list;\n    }\n\n    /**\n     * Get the leaf block descendants of the node.\n     *\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getBlocks',\n    value: function getBlocks() {\n      var iterable = this.blocks({ onlyLeaves: true });\n      var array = Array.from(iterable, function (_ref8) {\n        var _ref9 = slicedToArray(_ref8, 1),\n            node = _ref9[0];\n\n        return node;\n      });\n      var list = List(array);\n      return list;\n    }\n\n    /**\n     * Get all of the leaf blocks that match a `type`.\n     *\n     * @param {String} type\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getBlocksByType',\n    value: function getBlocksByType(type) {\n      var iterable = this.blocks({ onlyLeaves: true, onlyTypes: [type] });\n      var array = Array.from(iterable, function (_ref10) {\n        var _ref11 = slicedToArray(_ref10, 1),\n            node = _ref11[0];\n\n        return node;\n      });\n      var list = List(array);\n      return list;\n    }\n\n    /**\n     * Get a child node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getChild',\n    value: function getChild(path) {\n      path = this.resolvePath(path);\n\n      if (!path || path.size > 1) {\n        return null;\n      }\n\n      var child = this.nodes.get(path.first());\n      return child;\n    }\n\n    /**\n     * Get closest parent of node that matches a `predicate`.\n     *\n     * @param {List|String} path\n     * @param {Function} predicate\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getClosest',\n    value: function getClosest(path, predicate) {\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = this.ancestors(path)[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var _ref12 = _step4.value;\n\n          var _ref13 = slicedToArray(_ref12, 2);\n\n          var n = _ref13[0];\n          var p = _ref13[1];\n\n          if (predicate(n, p)) {\n            return n;\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      return null;\n    }\n\n    /**\n     * Get the closest block parent of a node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getClosestBlock',\n    value: function getClosestBlock(path) {\n      var closest = this.getClosest(path, function (n) {\n        return n.object === 'block';\n      });\n      return closest;\n    }\n\n    /**\n     * Get the closest inline parent of a node by `path`.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getClosestInline',\n    value: function getClosestInline(path) {\n      var closest = this.getClosest(path, function (n) {\n        return n.object === 'inline';\n      });\n      return closest;\n    }\n\n    /**\n     * Get the closest void parent of a node by `path`.\n     *\n     * @param {List|String} path\n     * @param {Editor} editor\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getClosestVoid',\n    value: function getClosestVoid(path, editor) {\n      invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `node.getClosestVoid` method takes an `editor` instead of a `value`.');\n\n      var closest = this.getClosest(path, function (n) {\n        return editor.isVoid(n);\n      });\n      return closest;\n    }\n\n    /**\n     * Get the common ancestor of nodes `a` and `b`.\n     *\n     * @param {List} a\n     * @param {List} b\n     * @return {Node}\n     */\n\n  }, {\n    key: 'getCommonAncestor',\n    value: function getCommonAncestor(a, b) {\n      a = this.resolvePath(a);\n      b = this.resolvePath(b);\n\n      if (!a || !b) {\n        return null;\n      }\n\n      var path = PathUtils.relate(a, b);\n      var node = this.getNode(path);\n      return node;\n    }\n\n    /**\n     * Get the decorations for the node from an `editor`.\n     *\n     * @param {Editor} editor\n     * @return {List}\n     */\n\n  }, {\n    key: 'getDecorations',\n    value: function getDecorations(editor) {\n      var decorations = editor.run('decorateNode', this);\n      decorations = Decoration.createList(decorations);\n      return decorations;\n    }\n\n    /**\n     * Get the depth of a descendant, with optional `startAt`.\n     *\n     * @param {List|String} path\n     * @param {Number} startAt\n     * @return {Number|Null}\n     */\n\n  }, {\n    key: 'getDepth',\n    value: function getDepth(path) {\n      var startAt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n      path = this.resolvePath(path);\n\n      if (!path) {\n        return null;\n      }\n\n      var node = this.getNode(path);\n      var depth = node ? path.size - 1 + startAt : null;\n      return depth;\n    }\n\n    /**\n     * Get a descendant node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getDescendant',\n    value: function getDescendant(path) {\n      path = this.resolvePath(path);\n\n      if (!path || !path.size) {\n        return null;\n      }\n\n      var node = this;\n\n      path.forEach(function (index) {\n        node = node.getIn(['nodes', index]);\n        return !!node;\n      });\n\n      return node;\n    }\n\n    /**\n     * Get all of the descendant nodes in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getDescendantsAtRange',\n    value: function getDescendantsAtRange(range) {\n      var iterable = this.descendants({ range: range });\n      var array = Array.from(iterable, function (_ref14) {\n        var _ref15 = slicedToArray(_ref14, 1),\n            node = _ref15[0];\n\n        return node;\n      });\n      var list = List(array);\n      return list;\n    }\n\n    /**\n     * Get a fragment of the node at a `range`.\n     *\n     * @param {Range} range\n     * @return {Document}\n     */\n\n  }, {\n    key: 'getFragmentAtRange',\n    value: function getFragmentAtRange(range) {\n      range = this.resolveRange(range);\n\n      if (range.isUnset) {\n        return Document.create();\n      }\n\n      var _range3 = range,\n          start = _range3.start,\n          end = _range3.end;\n\n      var node = this;\n      var targetPath = end.path;\n      var targetPosition = end.offset;\n      var side = 'end';\n\n      while (targetPath.size) {\n        var index = targetPath.last();\n        node = node.splitNode(targetPath, targetPosition);\n        targetPosition = index + 1;\n        targetPath = PathUtils.lift(targetPath);\n\n        if (!targetPath.size && side === 'end') {\n          targetPath = start.path;\n          targetPosition = start.offset;\n          side = 'start';\n        }\n      }\n\n      var startIndex = start.path.first() + 1;\n      var endIndex = end.path.first() + 2;\n      var nodes = node.nodes.slice(startIndex, endIndex);\n      var fragment = Document.create({ nodes: nodes });\n      return fragment;\n    }\n\n    /**\n     * Get the furthest ancestors of a node that matches a `predicate`.\n     *\n     * @param {Path} path\n     * @param {Function} predicate\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthest',\n    value: function getFurthest(path) {\n      var predicate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : identity;\n\n      var iterable = this.ancestors(path);\n      var results = Array.from(iterable).reverse();\n\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = results[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var _ref16 = _step5.value;\n\n          var _ref17 = slicedToArray(_ref16, 2);\n\n          var n = _ref17[0];\n          var p = _ref17[1];\n\n          if (predicate(n, p)) {\n            return n;\n          }\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5.return) {\n            _iterator5.return();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n\n      return null;\n    }\n\n    /**\n     * Get the furthest block parent of a node.\n     *\n     * @param {Path} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthestBlock',\n    value: function getFurthestBlock(path) {\n      var furthest = this.getFurthest(path, function (n) {\n        return n.object === 'block';\n      });\n      return furthest;\n    }\n\n    /**\n     * Get the furthest child ancestor of a node at `path`.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthestChild',\n    value: function getFurthestChild(path) {\n      path = this.resolvePath(path);\n\n      if (!path || !path.size) {\n        return null;\n      }\n\n      var furthest = this.nodes.get(path.first());\n      return furthest;\n    }\n\n    /**\n     * Get the furthest inline parent of a node.\n     *\n     * @param {Path} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthestInline',\n    value: function getFurthestInline(path) {\n      var furthest = this.getFurthest(path, function (n) {\n        return n.object === 'inline';\n      });\n      return furthest;\n    }\n\n    /**\n     * Get the closest inline nodes for each text node in the node.\n     *\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getInlines',\n    value: function getInlines() {\n      var iterable = this.inlines({ onlyLeaves: true });\n      var array = Array.from(iterable, function (_ref18) {\n        var _ref19 = slicedToArray(_ref18, 1),\n            node = _ref19[0];\n\n        return node;\n      });\n      var list = List(array);\n      return list;\n    }\n\n    /**\n     * Get all of the leaf inline nodes that match a `type`.\n     *\n     * @param {String} type\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getInlinesByType',\n    value: function getInlinesByType(type) {\n      var iterable = this.inlines({ onlyLeaves: true, onlyTypes: [type] });\n      var array = Array.from(iterable, function (_ref20) {\n        var _ref21 = slicedToArray(_ref20, 1),\n            node = _ref21[0];\n\n        return node;\n      });\n      var list = List(array);\n      return list;\n    }\n\n    /**\n     * Get a set of marks that would occur on the next insert at a `point` in the\n     * node. This mimics expected rich text editing behaviors of mark contiuation.\n     *\n     * @param {Point} point\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getInsertMarksAtPoint',\n    value: function getInsertMarksAtPoint(point) {\n      point = this.resolvePoint(point);\n      var _point = point,\n          path = _point.path,\n          offset = _point.offset;\n\n      var text = this.getDescendant(path);\n\n      // PERF: we can exit early if the offset isn't at the start of the node.\n      if (offset !== 0) {\n        return text.marks;\n      }\n\n      var blockNode = void 0;\n      var blockPath = void 0;\n\n      var _iteratorNormalCompletion6 = true;\n      var _didIteratorError6 = false;\n      var _iteratorError6 = undefined;\n\n      try {\n        for (var _iterator6 = this.ancestors(path)[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n          var entry = _step6.value;\n\n          var _entry = slicedToArray(entry, 2),\n              n = _entry[0],\n              p = _entry[1];\n\n          if (n.object === 'block') {\n            blockNode = n;\n            blockPath = p;\n          }\n        }\n      } catch (err) {\n        _didIteratorError6 = true;\n        _iteratorError6 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion6 && _iterator6.return) {\n            _iterator6.return();\n          }\n        } finally {\n          if (_didIteratorError6) {\n            throw _iteratorError6;\n          }\n        }\n      }\n\n      var relativePath = PathUtils.drop(path, blockPath.size);\n\n      var _blockNode$texts = blockNode.texts({\n        path: relativePath,\n        direction: 'backward'\n      }),\n          _blockNode$texts2 = slicedToArray(_blockNode$texts, 1),\n          previous = _blockNode$texts2[0];\n\n      // If there's no previous text, we're at the start of the block, so use\n      // the current text nodes marks.\n\n\n      if (!previous) {\n        return text.marks;\n      }\n\n      // Otherwise, continue with the previous text node's marks instead.\n\n      var _previous = slicedToArray(previous, 1),\n          previousText = _previous[0];\n\n      return previousText.marks;\n    }\n\n    /**\n     * Get a set of marks that would occur on the next insert at a `range`.\n     * This mimics expected rich text editing behaviors of mark contiuation.\n     *\n     * @param {Range} range\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getInsertMarksAtRange',\n    value: function getInsertMarksAtRange(range) {\n      range = this.resolveRange(range);\n      var _range4 = range,\n          start = _range4.start;\n\n\n      if (range.isUnset) {\n        return Set();\n      }\n\n      if (range.isCollapsed) {\n        return this.getInsertMarksAtPoint(start);\n      }\n\n      var text = this.getDescendant(start.path);\n      return text.marks;\n    }\n\n    /**\n     * Get the bottom-most block descendants in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getLeafBlocksAtRange',\n    value: function getLeafBlocksAtRange(range) {\n      var iterable = this.blocks({ range: range, onlyLeaves: true });\n      var array = Array.from(iterable, function (_ref22) {\n        var _ref23 = slicedToArray(_ref22, 1),\n            node = _ref23[0];\n\n        return node;\n      });\n      var list = List(array);\n      return list;\n    }\n\n    /**\n     * Get the bottom-most inline nodes for each text node in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getLeafInlinesAtRange',\n    value: function getLeafInlinesAtRange(range) {\n      var iterable = this.inlines({ range: range, onlyLeaves: true });\n      var array = Array.from(iterable, function (_ref24) {\n        var _ref25 = slicedToArray(_ref24, 1),\n            node = _ref25[0];\n\n        return node;\n      });\n      var list = List(array);\n      return list;\n    }\n\n    /**\n     * Get an object mapping all the keys in the node to their paths.\n     *\n     * @return {Map}\n     */\n\n  }, {\n    key: 'getNodesToPathsMap',\n    value: function getNodesToPathsMap() {\n      var root = this;\n      var map = typeof window === 'undefined' ? new global$1.Map() : new window.Map();\n\n      map.set(root, PathUtils.create([]));\n\n      root.forEachDescendant(function (node, path) {\n        map.set(node, path);\n      });\n\n      return map;\n    }\n\n    /**\n     * Get all of the marks for all of the characters of every text node.\n     *\n     * @return {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getMarks',\n    value: function getMarks() {\n      var iterable = this.marks();\n      var array = Array.from(iterable, function (_ref26) {\n        var _ref27 = slicedToArray(_ref26, 1),\n            mark = _ref27[0];\n\n        return mark;\n      });\n      return OrderedSet(array);\n    }\n\n    /**\n     * Get a set of the marks in a `range`.\n     *\n     * @param {Range} range\n     * @return {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getMarksAtRange',\n    value: function getMarksAtRange(range) {\n      var iterable = this.marks({ range: range });\n      var array = Array.from(iterable, function (_ref28) {\n        var _ref29 = slicedToArray(_ref28, 1),\n            mark = _ref29[0];\n\n        return mark;\n      });\n      return OrderedSet(array);\n    }\n\n    /**\n     * Get all of the marks that match a `type`.\n     *\n     * @param {String} type\n     * @return {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getMarksByType',\n    value: function getMarksByType(type) {\n      var iterable = this.marks({ onlyTypes: [type] });\n      var array = Array.from(iterable, function (_ref30) {\n        var _ref31 = slicedToArray(_ref30, 1),\n            mark = _ref31[0];\n\n        return mark;\n      });\n      return OrderedSet(array);\n    }\n\n    /**\n     * Get the block node after a descendant text node by `path`.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextBlock',\n    value: function getNextBlock(path) {\n      var _blocks = this.blocks({ path: path, onlyLeaves: true }),\n          _blocks2 = slicedToArray(_blocks, 1),\n          entry = _blocks2[0];\n\n      var block = entry ? entry[0] : null;\n      return block;\n    }\n\n    /**\n     * Get the next node in the tree, returning siblings or ancestor siblings.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextNode',\n    value: function getNextNode(path) {\n      var iterable = this.createIterable({ path: path, downward: false });\n\n      var _iterable = slicedToArray(iterable, 1),\n          entry = _iterable[0];\n\n      var node = entry ? entry[0] : null;\n      return node;\n    }\n\n    /**\n     * Get the next sibling of a node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextSibling',\n    value: function getNextSibling(path) {\n      var _siblings = this.siblings(path),\n          _siblings2 = slicedToArray(_siblings, 1),\n          entry = _siblings2[0];\n\n      var node = entry ? entry[0] : null;\n      return node;\n    }\n\n    /**\n     * Get the text node after a descendant text node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextText',\n    value: function getNextText(path) {\n      var _texts9 = this.texts({ path: path }),\n          _texts10 = slicedToArray(_texts9, 1),\n          entry = _texts10[0];\n\n      var node = entry ? entry[0] : null;\n      return node;\n    }\n\n    /**\n     * Get the offset for a descendant text node by `path` or `key`.\n     *\n     * @param {List|string} path\n     * @return {Number}\n     */\n\n  }, {\n    key: 'getOffset',\n    value: function getOffset(path) {\n      path = this.resolvePath(path);\n      this.assertDescendant(path);\n\n      // Calculate the offset of the nodes before the highest child.\n      var index = path.first();\n\n      var offset = this.nodes.slice(0, index).reduce(function (memo, n) {\n        return memo + n.text.length;\n      }, 0);\n\n      // Recurse if need be.\n      var ret = path.size === 1 ? offset : offset + this.nodes.get(index).getOffset(PathUtils.drop(path));\n\n      return ret;\n    }\n\n    /**\n     * Get the offset from a `range`.\n     *\n     * @param {Range} range\n     * @return {Number}\n     */\n\n  }, {\n    key: 'getOffsetAtRange',\n    value: function getOffsetAtRange(range) {\n      range = this.resolveRange(range);\n\n      if (range.isUnset) {\n        throw new Error('The range cannot be unset to calculcate its offset.');\n      }\n\n      if (range.isExpanded) {\n        throw new Error('The range must be collapsed to calculcate its offset.');\n      }\n\n      var _range5 = range,\n          start = _range5.start;\n\n      var offset = this.getOffset(start.path) + start.offset;\n      return offset;\n    }\n\n    /**\n     * Get the parent of a descendant node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getParent',\n    value: function getParent(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n      var parentPath = PathUtils.lift(path);\n      var parent = this.getNode(parentPath);\n      return parent;\n    }\n\n    /**\n     * Get the block node before a descendant text node by `path`.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousBlock',\n    value: function getPreviousBlock(path) {\n      var _blocks3 = this.blocks({\n        path: path,\n        onlyLeaves: true,\n        direction: 'backward'\n      }),\n          _blocks4 = slicedToArray(_blocks3, 1),\n          entry = _blocks4[0];\n\n      var block = entry ? entry[0] : null;\n      return block;\n    }\n\n    /**\n     * Get the previous node from a node in the tree.\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the previous ancestor if no sibling is found.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousNode',\n    value: function getPreviousNode(path) {\n      var iterable = this.createIterable({\n        path: path,\n        downward: false,\n        direction: 'backward'\n      });\n\n      var _iterable2 = slicedToArray(iterable, 1),\n          entry = _iterable2[0];\n\n      var node = entry ? entry[0] : null;\n      return node;\n    }\n\n    /**\n     * Get the previous sibling of a node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousSibling',\n    value: function getPreviousSibling(path) {\n      var _siblings3 = this.siblings(path, { direction: 'backward' }),\n          _siblings4 = slicedToArray(_siblings3, 1),\n          entry = _siblings4[0];\n\n      var node = entry ? entry[0] : null;\n      return node;\n    }\n\n    /**\n     * Get the text node before a descendant text node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousText',\n    value: function getPreviousText(path) {\n      var _texts11 = this.texts({ path: path, direction: 'backward' }),\n          _texts12 = slicedToArray(_texts11, 1),\n          entry = _texts12[0];\n\n      var node = entry ? entry[0] : null;\n      return node;\n    }\n\n    /**\n     * Get only the root block nodes in a `range`.\n     *\n     * @param {Range} range\n     * @return {List}\n     */\n\n  }, {\n    key: 'getRootBlocksAtRange',\n    value: function getRootBlocksAtRange(range) {\n      var iterable = this.blocks({ range: range, onlyRoots: true });\n      var array = Array.from(iterable, function (_ref32) {\n        var _ref33 = slicedToArray(_ref32, 1),\n            node = _ref33[0];\n\n        return node;\n      });\n      var list = List(array);\n      return list;\n    }\n\n    /**\n     * Get only the root inline nodes in a `range`.\n     *\n     * @param {Range} range\n     * @return {List}\n     */\n\n  }, {\n    key: 'getRootInlinesAtRange',\n    value: function getRootInlinesAtRange(range) {\n      var iterable = this.inlines({ range: range, onlyRoots: true });\n      var array = Array.from(iterable, function (_ref34) {\n        var _ref35 = slicedToArray(_ref34, 1),\n            node = _ref35[0];\n\n        return node;\n      });\n      var list = List(array);\n      return list;\n    }\n\n    /**\n     * Get the descendent text node at an `offset`.\n     *\n     * @param {String} offset\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getTextAtOffset',\n    value: function getTextAtOffset(offset) {\n      // PERF: Add a few shortcuts for the obvious cases.\n      if (offset === 0) return this.getFirstText();\n      if (offset === this.text.length) return this.getLastText();\n      if (offset < 0 || offset > this.text.length) return null;\n\n      var length = 0;\n\n      var _iteratorNormalCompletion7 = true;\n      var _didIteratorError7 = false;\n      var _iteratorError7 = undefined;\n\n      try {\n        for (var _iterator7 = this.texts()[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n          var _ref36 = _step7.value;\n\n          var _ref37 = slicedToArray(_ref36, 1);\n\n          var node = _ref37[0];\n\n          length += node.text.length;\n\n          if (length > offset) {\n            return node;\n          }\n        }\n      } catch (err) {\n        _didIteratorError7 = true;\n        _iteratorError7 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion7 && _iterator7.return) {\n            _iterator7.return();\n          }\n        } finally {\n          if (_didIteratorError7) {\n            throw _iteratorError7;\n          }\n        }\n      }\n\n      return null;\n    }\n\n    /**\n     * Get the direction of the node's text.\n     *\n     * @return {String}\n     */\n\n  }, {\n    key: 'getTextDirection',\n    value: function getTextDirection() {\n      var dir = getDirection(this.text);\n      return dir === 'neutral' ? null : dir;\n    }\n\n    /**\n     * Recursively get all of the child text nodes in order of appearance.\n     *\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getTexts',\n    value: function getTexts() {\n      var iterable = this.texts();\n      var array = Array.from(iterable, function (_ref38) {\n        var _ref39 = slicedToArray(_ref38, 1),\n            node = _ref39[0];\n\n        return node;\n      });\n      var list = List(array);\n      return list;\n    }\n\n    /**\n     * Get all of the text nodes in a `range` as a List.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getTextsAtRange',\n    value: function getTextsAtRange(range) {\n      var iterable = this.texts({ range: range });\n      var array = Array.from(iterable, function (_ref40) {\n        var _ref41 = slicedToArray(_ref40, 1),\n            node = _ref41[0];\n\n        return node;\n      });\n      var list = List(array);\n      return list;\n    }\n\n    /**\n     * Check if the node has block children.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasBlockChildren',\n    value: function hasBlockChildren() {\n      return !!(this.nodes && this.nodes.find(function (n) {\n        return n.object === 'block';\n      }));\n    }\n\n    /**\n     * Check if a child node exists.\n     *\n     * @param {List|String} path\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasChild',\n    value: function hasChild(path) {\n      var child = this.getChild(path);\n      return !!child;\n    }\n\n    /**\n     * Check if a node has inline children.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasInlineChildren',\n    value: function hasInlineChildren() {\n      return !!(this.nodes && this.nodes.find(function (n) {\n        return n.object === 'inline' || n.object === 'text';\n      }));\n    }\n\n    /**\n     * Recursively check if a child node exists.\n     *\n     * @param {List|String} path\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasDescendant',\n    value: function hasDescendant(path) {\n      var descendant = this.getDescendant(path);\n      return !!descendant;\n    }\n\n    /**\n     * Check if a node has a void parent.\n     *\n     * @param {List|String} path\n     * @param {Editor} editor\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasVoidParent',\n    value: function hasVoidParent(path, editor) {\n      invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `node.hasVoidParent` method takes an `editor` instead of a `value`.');\n\n      var closest = this.getClosestVoid(path, editor);\n      return !!closest;\n    }\n\n    /**\n     * Create an iteratable for all of the inlines of a node with `options`.\n     *\n     * @param {Options}\n     * @return {Iterable}\n     */\n\n  }, {\n    key: 'inlines',\n    value: function inlines() {\n      var _this = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var onlyLeaves = options.onlyLeaves,\n          onlyRoots = options.onlyRoots,\n          onlyTypes = options.onlyTypes,\n          _match2 = options.match,\n          rest = objectWithoutProperties(options, ['onlyLeaves', 'onlyRoots', 'onlyTypes', 'match']);\n\n      var iterable = this.descendants(_extends({\n        includeBlocks: false,\n        includeTexts: false,\n        includeDocument: false\n      }, rest, {\n        match: function match(node, path) {\n          if (onlyTypes && !onlyTypes.includes(node.type)) {\n            return false;\n          } else if (onlyLeaves && !node.isLeafInline()) {\n            return false;\n          } else if (onlyRoots && _this.getParent(path).object !== 'block') {\n            return false;\n          } else if (_match2 && !_match2(node, path)) {\n            return false;\n          } else {\n            return true;\n          }\n        }\n      }));\n\n      return iterable;\n    }\n\n    /**\n     * Insert a `node`.\n     *\n     * @param {List|String} path\n     * @param {Node} node\n     * @return {Node}\n     */\n\n  }, {\n    key: 'insertNode',\n    value: function insertNode(path, node) {\n      path = this.resolvePath(path);\n      var index = path.last();\n      var parentPath = PathUtils.lift(path);\n      var parent = this.assertNode(parentPath);\n      var nodes = parent.nodes.splice(index, 0, node);\n      parent = parent.set('nodes', nodes);\n      var ret = this.replaceNode(parentPath, parent);\n      return ret;\n    }\n\n    /**\n     * Insert `text` at `offset` in node by `path`.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {String} text\n     * @return {Node}\n     */\n\n  }, {\n    key: 'insertText',\n    value: function insertText(path, offset, text) {\n      path = this.resolvePath(path);\n      var node = this.assertDescendant(path);\n      node = node.insertText(offset, text);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n\n    /**\n     * Check whether the node is a leaf block.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isLeafBlock',\n    value: function isLeafBlock() {\n      if (this.object !== 'block') {\n        return false;\n      }\n\n      if (this.nodes.some(function (n) {\n        return n.object === 'block';\n      })) {\n        return false;\n      }\n\n      return true;\n    }\n\n    /**\n     * Check whether the node is a leaf inline.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isLeafInline',\n    value: function isLeafInline() {\n      if (this.object !== 'inline') {\n        return false;\n      }\n\n      if (this.nodes.some(function (n) {\n        return n.object === 'inline';\n      })) {\n        return false;\n      }\n\n      return true;\n    }\n\n    /**\n     * Check whether a descendant node is inside a `range` by `path`.\n     *\n     * @param {List|String} path\n     * @param {Range} range\n     * @return {Node}\n     */\n\n  }, {\n    key: 'isInRange',\n    value: function isInRange(path, range) {\n      path = this.resolvePath(path);\n      range = this.resolveRange(range);\n\n      if (range.isUnset) {\n        return false;\n      }\n\n      var toStart = PathUtils.compare(path, range.start.path);\n      var toEnd = PathUtils.compare(path, range.end.path);\n      var isInRange = toStart !== -1 && toEnd !== 1;\n      return isInRange;\n    }\n\n    /**\n     * Map all child nodes, updating them in their parents. This method is\n     * optimized to not return a new node if no changes are made.\n     *\n     * @param {Function} predicate\n     * @return {Node}\n     */\n\n  }, {\n    key: 'mapChildren',\n    value: function mapChildren() {\n      var _this2 = this;\n\n      var predicate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : identity;\n      var nodes = this.nodes;\n\n\n      nodes.forEach(function (node, i) {\n        var ret = predicate(node, i, _this2.nodes);\n        if (ret !== node) nodes = nodes.set(ret.key, ret);\n      });\n\n      var ret = this.set('nodes', nodes);\n      return ret;\n    }\n\n    /**\n     * Map all descendant nodes, updating them in their parents. This method is\n     * optimized to not return a new node if no changes are made.\n     *\n     * @param {Function} predicate\n     * @return {Node}\n     */\n\n  }, {\n    key: 'mapDescendants',\n    value: function mapDescendants() {\n      var _this3 = this;\n\n      var predicate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : identity;\n      var nodes = this.nodes;\n\n\n      nodes.forEach(function (node, index) {\n        var ret = node;\n        if (ret.object !== 'text') ret = ret.mapDescendants(predicate);\n        ret = predicate(ret, index, _this3.nodes);\n        if (ret === node) return;\n\n        nodes = nodes.set(index, ret);\n      });\n\n      var ret = this.set('nodes', nodes);\n      return ret;\n    }\n\n    /**\n     * Create an iteratable for all the marks in text nodes with `options`.\n     *\n     * @param {Options}\n     * @return {Iterable}\n     */\n\n  }, {\n    key: 'marks',\n    value: function marks() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _options$onlyTypes = options.onlyTypes,\n          onlyTypes = _options$onlyTypes === undefined ? null : _options$onlyTypes,\n          match = options.match,\n          rest = objectWithoutProperties(options, ['onlyTypes', 'match']);\n\n      var texts = this.texts(rest);\n\n      return defineProperty({}, Symbol.iterator, function () {\n        var iterator = texts[Symbol.iterator]();\n        var node = null;\n        var path = null;\n        var remaining = [];\n\n        var next = function next() {\n          if (remaining.length) {\n            var mark = remaining.shift();\n\n            if (onlyTypes && !onlyTypes.includes(mark.type)) {\n              return next();\n            } else if (match && !match(mark, node, path)) {\n              return next();\n            }\n\n            return { value: [mark, node, path], done: false };\n          }\n\n          var _iterator$next = iterator.next(),\n              value = _iterator$next.value,\n              done = _iterator$next.done;\n\n          if (done) {\n            return { done: true };\n          }\n\n          \n          var _value = slicedToArray(value, 2);\n\n          node = _value[0];\n          path = _value[1];\n\n          remaining = node.marks.toArray();\n          return next();\n        };\n\n        return { next: next };\n      });\n    }\n\n    /**\n     * Merge a node backwards its previous sibling.\n     *\n     * @param {List|Key} path\n     * @return {Node}\n     */\n\n  }, {\n    key: 'mergeNode',\n    value: function mergeNode(path) {\n      var b = this.assertNode(path);\n      path = this.resolvePath(path);\n\n      if (path.last() === 0) {\n        throw new Error('Unable to merge node because it has no previous sibling: ' + b);\n      }\n\n      var withPath = PathUtils.decrement(path);\n      var a = this.assertNode(withPath);\n\n      if (a.object !== b.object) {\n        throw new Error('Unable to merge two different kinds of nodes: ' + a + ' and ' + b);\n      }\n\n      var newNode = a.object === 'text' ? a.mergeText(b) : a.set('nodes', a.nodes.concat(b.nodes));\n\n      var ret = this;\n      ret = ret.removeNode(path);\n      ret = ret.removeNode(withPath);\n      ret = ret.insertNode(withPath, newNode);\n      return ret;\n    }\n\n    /**\n     * Move a node by `path` to `newPath`.\n     *\n     * A `newIndex` can be provided when move nodes by `key`, to account for not\n     * being able to have a key for a location in the tree that doesn't exist yet.\n     *\n     * @param {List|Key} path\n     * @param {List|Key} newPath\n     * @param {Number} newIndex\n     * @return {Node}\n     */\n\n  }, {\n    key: 'moveNode',\n    value: function moveNode(path, newPath) {\n      var newIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n      var node = this.assertNode(path);\n      path = this.resolvePath(path);\n      newPath = this.resolvePath(newPath, newIndex);\n\n      var newParentPath = PathUtils.lift(newPath);\n      this.assertNode(newParentPath);\n\n      // TODO: this is a bit hacky, re-creating the operation that led to this method being called\n      // Alternative 1: pass the operation through from apply -> value.moveNode\n      // Alternative 2: add a third property to the operation called \"transformedNewPath\", pass that through\n      var op = Operation.create({\n        type: 'move_node',\n        path: path,\n        newPath: newPath\n      });\n      newPath = PathUtils.transform(path, op).first();\n\n      var ret = this;\n      ret = ret.removeNode(path);\n      ret = ret.insertNode(newPath, node);\n      return ret;\n    }\n\n    /**\n     * Remove `mark` from text at `path`.\n     *\n     * @param {List} path\n     * @param {Mark} mark\n     * @return {Node}\n     */\n\n  }, {\n    key: 'removeMark',\n    value: function removeMark(path, mark) {\n      path = this.resolvePath(path);\n      var node = this.assertDescendant(path);\n      node = node.removeMark(mark);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n\n    /**\n     * Remove a node.\n     *\n     * @param {List|String} path\n     * @return {Node}\n     */\n\n  }, {\n    key: 'removeNode',\n    value: function removeNode(path) {\n      this.assertDescendant(path);\n      path = this.resolvePath(path);\n      var deep = path.flatMap(function (x) {\n        return ['nodes', x];\n      });\n      var ret = this.deleteIn(deep);\n      return ret;\n    }\n\n    /**\n     * Remove `text` at `offset` in node.\n     *\n     * @param {List|Key} path\n     * @param {Number} offset\n     * @param {String} text\n     * @return {Node}\n     */\n\n  }, {\n    key: 'removeText',\n    value: function removeText(path, offset, text) {\n      var node = this.assertDescendant(path);\n      node = node.removeText(offset, text.length);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n\n    /**\n     * Replace a `node` in the tree.\n     *\n     * @param {List|Key} path\n     * @param {Node} node\n     * @return {Node}\n     */\n\n  }, {\n    key: 'replaceNode',\n    value: function replaceNode(path, node) {\n      path = this.resolvePath(path);\n\n      if (!path) {\n        throw new Error('Unable to replace a node because it could not be found in the first place: ' + path);\n      }\n\n      if (!path.size) return node;\n      this.assertNode(path);\n      var deep = path.flatMap(function (x) {\n        return ['nodes', x];\n      });\n      var ret = this.setIn(deep, node);\n      return ret;\n    }\n\n    /**\n     * Resolve a `annotation`, relative to the node, ensuring that the keys and\n     * offsets in the annotation exist and that they are synced with the paths.\n     *\n     * @param {Annotation|Object} annotation\n     * @return {Annotation}\n     */\n\n  }, {\n    key: 'resolveAnnotation',\n    value: function resolveAnnotation(annotation) {\n      annotation = Annotation.create(annotation);\n      annotation = annotation.normalize(this);\n      return annotation;\n    }\n\n    /**\n     * Resolve a `decoration`, relative to the node, ensuring that the keys and\n     * offsets in the decoration exist and that they are synced with the paths.\n     *\n     * @param {Decoration|Object} decoration\n     * @return {Decoration}\n     */\n\n  }, {\n    key: 'resolveDecoration',\n    value: function resolveDecoration(decoration) {\n      decoration = Decoration.create(decoration);\n      decoration = decoration.normalize(this);\n      return decoration;\n    }\n\n    /**\n     * Resolve a `point`, relative to the node, ensuring that the keys and\n     * offsets in the point exist and that they are synced with the paths.\n     *\n     * @param {Point|Object} point\n     * @return {Point}\n     */\n\n  }, {\n    key: 'resolvePoint',\n    value: function resolvePoint(point) {\n      point = Point.create(point);\n      point = point.normalize(this);\n      return point;\n    }\n\n    /**\n     * Resolve a `range`, relative to the node, ensuring that the keys and\n     * offsets in the range exist and that they are synced with the paths.\n     *\n     * @param {Range|Object} range\n     * @return {Range}\n     */\n\n  }, {\n    key: 'resolveRange',\n    value: function resolveRange(range) {\n      range = Range.create(range);\n      range = range.normalize(this);\n      return range;\n    }\n\n    /**\n     * Resolve a `selection`, relative to the node, ensuring that the keys and\n     * offsets in the selection exist and that they are synced with the paths.\n     *\n     * @param {Selection|Object} selection\n     * @return {Selection}\n     */\n\n  }, {\n    key: 'resolveSelection',\n    value: function resolveSelection(selection) {\n      selection = Selection.create(selection);\n      selection = selection.normalize(this);\n      return selection;\n    }\n\n    /**\n     * Set `properties` on a node.\n     *\n     * @param {List|String} path\n     * @param {Object} properties\n     * @return {Node}\n     */\n\n  }, {\n    key: 'setNode',\n    value: function setNode(path, properties) {\n      var node = this.assertNode(path);\n      node = node.merge(properties);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n\n    /**\n     * Set `properties` on `mark` on text at `offset` and `length` in node.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {Number} length\n     * @param {Mark} mark\n     * @param {Object} properties\n     * @return {Node}\n     */\n\n  }, {\n    key: 'setMark',\n    value: function setMark(path, properties, newProperties) {\n      path = this.resolvePath(path);\n      var node = this.assertDescendant(path);\n      node = node.setMark(properties, newProperties);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n\n    /**\n     * Create an iteratable for the siblings in the tree at `path`.\n     *\n     * @param {List|Array} path\n     * @return {Iterable}\n     */\n\n  }, {\n    key: 'siblings',\n    value: function siblings(path, options) {\n      var iterable = this.createIterable(_extends({\n        path: path,\n        upward: false,\n        downward: false\n      }, options));\n\n      return iterable;\n    }\n\n    /**\n     * Split a node by `path` at `position` with optional `properties` to apply\n     * to the newly split node.\n     *\n     * @param {List|String} path\n     * @param {Number} position\n     * @param {Object} properties\n     * @return {Node}\n     */\n\n  }, {\n    key: 'splitNode',\n    value: function splitNode(path, position, properties) {\n      var child = this.assertNode(path);\n      path = this.resolvePath(path);\n      var a = void 0;\n      var b = void 0;\n\n      if (child.object === 'text') {\n        \n        var _child$splitText = child.splitText(position);\n\n        var _child$splitText2 = slicedToArray(_child$splitText, 2);\n\n        a = _child$splitText2[0];\n        b = _child$splitText2[1];\n      } else {\n        var befores = child.nodes.take(position);\n        var afters = child.nodes.skip(position);\n        a = child.set('nodes', befores);\n        b = child.set('nodes', afters).regenerateKey();\n      }\n\n      if (properties && child.object !== 'text') {\n        b = b.merge(properties);\n      }\n\n      var ret = this;\n      ret = ret.removeNode(path);\n      ret = ret.insertNode(path, b);\n      ret = ret.insertNode(path, a);\n      return ret;\n    }\n\n    /**\n     * Create an iteratable for all the text node descendants.\n     *\n     * @param {Object} options\n     * @return {Iterable}\n     */\n\n  }, {\n    key: 'texts',\n    value: function texts(options) {\n      var iterable = this.descendants(_extends({\n        includeBlocks: false,\n        includeInlines: false,\n        includeDocument: false\n      }, options));\n\n      return iterable;\n    }\n\n    /**\n     * Deprecated.\n     */\n\n  }, {\n    key: 'getBlocksAtRange',\n    value: function getBlocksAtRange(range) {\n      warning(false, 'As of slate@0.44 the `node.getBlocksAtRange` method has been renamed to `getLeafBlocksAtRange`.');\n\n      return this.getLeafBlocksAtRange(range);\n    }\n  }, {\n    key: 'getBlocksAtRangeAsArray',\n    value: function getBlocksAtRangeAsArray(range) {\n      warning(false, 'As of slate@0.44 the `node.getBlocksAtRangeAsArray` method has been renamed to `getLeafBlocksAtRangeAsArray`.');\n\n      return this.getLeafBlocksAtRangeAsArray(range);\n    }\n  }, {\n    key: 'getInlinesAtRange',\n    value: function getInlinesAtRange(range) {\n      warning(false, 'As of slate@0.44 the `node.getInlinesAtRange` method has been renamed to `getLeafInlinesAtRange`.');\n\n      return this.getLeafInlinesAtRange(range);\n    }\n  }, {\n    key: 'getInlinesAtRangeAsArray',\n    value: function getInlinesAtRangeAsArray(range) {\n      warning(false, 'As of slate@0.44 the `node.getInlinesAtRangeAsArray` method has been renamed to `getLeafInlinesAtRangeAsArray`.');\n\n      return this.getLeafInlinesAtRangeAsArray(range);\n    }\n  }, {\n    key: 'getNextTextAndPath',\n    value: function getNextTextAndPath(path) {\n      warning(false, 'As of slate@0.47, the `getNextTextAndPath` method has been renamed to `getNextTextEntry`.');\n\n      return this.getNextTextEntry(path);\n    }\n  }, {\n    key: 'getNextDeepMatchingNodeAndPath',\n    value: function getNextDeepMatchingNodeAndPath(path) {\n      var iterator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n\n      warning(false, 'As of slate@0.47, the `getNextDeepMatchingNodeAndPath` method is deprecated.');\n\n      var match = this.getNextMatchingNodeAndPath(path);\n\n      if (!match) return null;\n\n      var _match3 = slicedToArray(match, 2),\n          nextNode = _match3[0],\n          nextPath = _match3[1];\n\n      var childMatch = void 0;\n\n      var assign = function assign() {\n        childMatch = nextNode.object !== 'text' && nextNode.findFirstDescendantAndPath(iterator, nextPath);\n        return childMatch;\n      };\n\n      while (assign(childMatch)) {\n        var _childMatch = childMatch;\n\n        var _childMatch2 = slicedToArray(_childMatch, 2);\n\n        nextNode = _childMatch2[0];\n        nextPath = _childMatch2[1];\n      }\n\n      if (!nextNode) return null;\n\n      return iterator(nextNode) ? [nextNode, nextPath] : this.getNextDeepMatchingNodeAndPath(match[1], iterator);\n    }\n  }, {\n    key: 'getPreviousTextAndPath',\n    value: function getPreviousTextAndPath(path) {\n      warning(false, 'As of slate@0.47, the `getPreviousTextAndPath` method has been renamed to `getPreviousTextEntry`.');\n\n      return this.getPreviousTextEntry(path);\n    }\n  }, {\n    key: 'findFirstDescendantAndPath',\n    value: function findFirstDescendantAndPath(iterator, pathToThisNode) {\n      warning(false, 'As of slate@0.47, the `findFirstDescendantAndPath` method is deprecated.');\n\n      return this.findDescendantAndPath(iterator, pathToThisNode, false);\n    }\n  }, {\n    key: 'getPreviousMatchingNodeAndPath',\n    value: function getPreviousMatchingNodeAndPath(path) {\n      var iterator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n\n      warning(false, 'As of slate@0.47, the `getPreviousMatchingNodeAndPath` method is deprecated.');\n\n      if (!path) return null;\n\n      for (var i = path.size; i > 0; i--) {\n        var p = path.slice(0, i);\n        if (p.last() === 0) continue;\n\n        var previousPath = PathUtils.decrement(p);\n        var previousNode = this.getNode(previousPath);\n\n        while (previousNode && !iterator(previousNode)) {\n          previousPath = PathUtils.decrement(previousPath);\n          previousNode = this.getNode(previousPath);\n        }\n\n        if (previousNode) return [previousNode, previousPath];\n      }\n\n      return null;\n    }\n  }, {\n    key: 'getPreviousDeepMatchingNodeAndPath',\n    value: function getPreviousDeepMatchingNodeAndPath(path) {\n      var iterator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n\n      warning(false, 'As of slate@0.47, the `getPreviousDeepMatchingNodeAndPath` method is deprecated.');\n\n      var match = this.getPreviousMatchingNodeAndPath(path);\n\n      if (!match) return null;\n\n      var _match4 = slicedToArray(match, 2),\n          previousNode = _match4[0],\n          previousPath = _match4[1];\n\n      var childMatch = void 0;\n\n      var assign = function assign() {\n        childMatch = previousNode.object !== 'text' && previousNode.findLastDescendantAndPath(iterator, previousPath);\n        return childMatch;\n      };\n\n      while (assign(childMatch)) {\n        var _childMatch3 = childMatch;\n\n        var _childMatch4 = slicedToArray(_childMatch3, 2);\n\n        previousNode = _childMatch4[0];\n        previousPath = _childMatch4[1];\n      }\n\n      if (!previousNode) return null;\n\n      return iterator(previousNode) ? [previousNode, previousPath] : this.getPreviousDeepMatchingNodeAndPath(match[1], iterator);\n    }\n  }, {\n    key: 'findLastDescendantAndPath',\n    value: function findLastDescendantAndPath(iterator, pathToThisNode) {\n      warning(false, 'As of slate@0.47, the `findLastDescendantAndPath` method is deprecated.');\n\n      return this.findDescendantAndPath(iterator, pathToThisNode, true);\n    }\n  }, {\n    key: 'findDescendantAndPath',\n    value: function findDescendantAndPath(iterator) {\n      var pathToThisNode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : PathUtils.create([]);\n      var findLast = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      warning(false, 'As of slate@0.47, the `findDescendantAndPath` method is deprecated.');\n\n      var found = void 0;\n      var foundPath = void 0;\n\n      this.forEachDescendantWithPath(function (node, path, nodes) {\n        if (iterator(node, path, nodes)) {\n          found = node;\n          foundPath = path;\n          return false;\n        }\n      }, pathToThisNode, findLast);\n\n      return found ? [found, foundPath] : null;\n    }\n  }, {\n    key: 'forEachDescendantWithPath',\n    value: function forEachDescendantWithPath(iterator) {\n      var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : PathUtils.create([]);\n      var findLast = arguments[2];\n\n      warning(false, 'As of slate@0.47, the `forEachDescendantWithPath` method is deprecated.');\n\n      var nodes = this.nodes;\n      var ret = void 0;\n\n      if (findLast) nodes = nodes.reverse();\n\n      nodes.forEach(function (child, i) {\n        var childPath = path.concat(i);\n\n        if (iterator(child, childPath, nodes) === false) {\n          ret = false;\n          return false;\n        }\n\n        if (child.object !== 'text') {\n          ret = child.forEachDescendantWithPath(iterator, childPath, findLast);\n          return ret;\n        }\n      });\n\n      return ret;\n    }\n  }, {\n    key: 'getNextMatchingNodeAndPath',\n    value: function getNextMatchingNodeAndPath(path) {\n      var iterator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n\n      warning(false, 'As of slate@0.47, the `getNextMatchingNodeAndPath` method is deprecated.');\n\n      if (!path) return null;\n\n      for (var i = path.size; i > 0; i--) {\n        var p = path.slice(0, i);\n\n        var nextPath = PathUtils.increment(p);\n        var nextNode = this.getNode(nextPath);\n\n        while (nextNode && !iterator(nextNode)) {\n          nextPath = PathUtils.increment(nextPath);\n          nextNode = this.getNode(nextPath);\n        }\n\n        if (nextNode) return [nextNode, nextPath];\n      }\n\n      return null;\n    }\n  }, {\n    key: 'getSelectionIndexes',\n    value: function getSelectionIndexes(range) {\n      var isSelected = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      warning(false, 'As of slate@0.47, the `getSelectionIndexes` method is deprecated.');\n\n      var start = range.start,\n          end = range.end;\n\n      // PERF: if we're not selected, we can exit early.\n\n      if (!isSelected) {\n        return null;\n      }\n\n      // PERF: if we've been given an invalid selection we can exit early.\n      if (range.isUnset) {\n        return null;\n      }\n\n      // PERF: if the start and end keys are the same, just check for the child\n      // that contains that single key.\n      if (start.path.equals(end.path)) {\n        var child = this.getFurthestAncestor(start.path);\n        var index = child ? this.nodes.indexOf(child) : null;\n        return { start: index, end: index + 1 };\n      }\n\n      // Otherwise, check all of the children...\n      var startIndex = null;\n      var endIndex = null;\n\n      this.nodes.forEach(function (child, i) {\n        if (child.object === 'text') {\n          if (startIndex == null && child.key === start.key) startIndex = i;\n          if (endIndex == null && child.key === end.key) endIndex = i + 1;\n        } else {\n          if (startIndex == null && child.hasDescendant(start.key)) startIndex = i;\n          if (endIndex == null && child.hasDescendant(end.key)) endIndex = i + 1;\n        }\n\n        // PERF: exit early if both start and end have been found.\n        return startIndex == null || endIndex == null;\n      });\n\n      if (isSelected && startIndex == null) {\n        startIndex = 0;\n      }\n\n      if (isSelected && endIndex == null) {\n        endIndex = this.nodes.size;\n      }\n\n      if (startIndex == null) {\n        return null;\n      }\n\n      return { start: startIndex, end: endIndex };\n    }\n  }, {\n    key: 'getTextsBetweenPositionsAsArray',\n    value: function getTextsBetweenPositionsAsArray(startPath, endPath) {\n      warning(false, 'As of slate@0.47, the `getTextsBetweenPositionsAsArray` method is deprecated.');\n\n      startPath = this.resolvePath(startPath);\n      endPath = this.resolvePath(endPath);\n\n      return this.getTextsBetweenPathPositionsAsArray(startPath, endPath);\n    }\n  }, {\n    key: 'getOrderedMarksBetweenPositions',\n    value: function getOrderedMarksBetweenPositions(startPath, startOffset, endPath, endOffset) {\n      warning(false, 'As of slate@0.47, the `getOrderedMarksBetweenPositions` method is deprecated.');\n\n      startPath = this.resolvePath(startPath);\n      endPath = this.resolvePath(endPath);\n      var startText = this.getDescendant(startPath);\n\n      // PERF: if the paths are equal, we can just use the start.\n      if (PathUtils.isEqual(startPath, endPath)) {\n        return startText.marks;\n      }\n\n      var texts = this.getTextsBetweenPathPositionsAsArray(startPath, endPath);\n\n      return OrderedSet().withMutations(function (result) {\n        texts.forEach(function (text) {\n          result.union(text.marks);\n        });\n      });\n    }\n  }, {\n    key: 'getTextsBetweenPathPositionsAsArray',\n    value: function getTextsBetweenPathPositionsAsArray(startPath, endPath) {\n      warning(false, 'As of slate@0.47, the `getTextsBetweenPathPositionsAsArray` method is deprecated.');\n\n      // PERF: the most common case is when the range is in a single text node,\n      // where we can avoid a lot of iterating of the tree.\n      if (startPath && endPath && PathUtils.isEqual(startPath, endPath)) {\n        return [this.getDescendant(startPath)];\n      } else if (!startPath && !endPath) {\n        return this.getTextsAsArray();\n      }\n\n      var startIndex = startPath ? startPath.get(0, 0) : 0;\n      var endIndex = endPath ? endPath.get(0, this.nodes.size - 1) : this.nodes.size - 1;\n\n      var array = [];\n\n      this.nodes.slice(startIndex, endIndex + 1).forEach(function (node, i) {\n        if (node.object === 'text') {\n          array.push(node);\n        } else {\n          // For the node at start and end of this list, we want to provide a start and end path\n          // For other nodes, we can just get all their text nodes, they are between the paths\n          var childStartPath = startPath && i === 0 ? PathUtils.drop(startPath) : null;\n          var childEndPath = endPath && i === endIndex - startIndex ? PathUtils.drop(endPath) : null;\n\n          array = array.concat(node.getTextsBetweenPathPositionsAsArray(childStartPath, childEndPath));\n        }\n      });\n\n      return array;\n    }\n  }, {\n    key: 'getFurthestAncestor',\n    value: function getFurthestAncestor(path) {\n      warning(false, 'As of slate@0.47, the `getFurthestAncestor` method has been renamed to `getFurthestChild`.');\n\n      return this.getFurthestChild(path);\n    }\n  }, {\n    key: 'getLeafBlocksAtRangeAsArray',\n    value: function getLeafBlocksAtRangeAsArray(range) {\n      warning(false, 'As of slate@0.47, the `getLeafBlocksAtRangeAsArray` method is deprecated.');\n\n      range = this.resolveRange(range);\n      if (range.isUnset) return [];\n\n      var _range6 = range,\n          start = _range6.start,\n          end = _range6.end;\n\n\n      return this.getLeafBlocksBetweenPathPositionsAsArray(start.path, end.path);\n    }\n  }, {\n    key: 'getLeafBlocksBetweenPathPositionsAsArray',\n    value: function getLeafBlocksBetweenPathPositionsAsArray(startPath, endPath) {\n      warning(false, 'As of slate@0.47, the `getLeafBlocksBetweenPathPositionsAsArray` method is deprecated.');\n\n      // PERF: the most common case is when the range is in a single block node,\n      // where we can avoid a lot of iterating of the tree.\n      if (startPath && endPath && PathUtils.isEqual(startPath, endPath)) {\n        return [this.getClosestBlock(startPath)];\n      } else if (!startPath && !endPath) {\n        return this.getBlocksAsArray();\n      }\n\n      var startIndex = startPath ? startPath.get(0, 0) : 0;\n      var endIndex = endPath ? endPath.get(0, this.nodes.size - 1) : this.nodes.size - 1;\n\n      var array = [];\n\n      this.nodes.slice(startIndex, endIndex + 1).forEach(function (node, i) {\n        if (node.object !== 'block') {\n          return;\n        } else if (node.isLeafBlock()) {\n          array.push(node);\n        } else {\n          var childStartPath = startPath && i === 0 ? PathUtils.drop(startPath) : null;\n          var childEndPath = endPath && i === endIndex - startIndex ? PathUtils.drop(endPath) : null;\n\n          array = array.concat(node.getLeafBlocksBetweenPathPositionsAsArray(childStartPath, childEndPath));\n        }\n      });\n\n      return array;\n    }\n  }, {\n    key: 'getBlocksAsArray',\n    value: function getBlocksAsArray() {\n      warning(false, 'As of slate@0.47, the `getBlocksAsArray` method is deprecated.');\n\n      var iterable = this.blocks({ onlyLeaves: true });\n      var array = Array.from(iterable, function (_ref43) {\n        var _ref44 = slicedToArray(_ref43, 1),\n            node = _ref44[0];\n\n        return node;\n      });\n      return array;\n    }\n  }, {\n    key: 'getBlocksByTypeAsArray',\n    value: function getBlocksByTypeAsArray(type) {\n      warning(false, 'As of slate@0.47, the `getBlocksByTypeAsArray` method is deprecated.');\n\n      var iterable = this.blocks({ onlyLeaves: true, onlyTypes: [type] });\n      var array = Array.from(iterable, function (_ref45) {\n        var _ref46 = slicedToArray(_ref45, 1),\n            node = _ref46[0];\n\n        return node;\n      });\n      return array;\n    }\n  }, {\n    key: 'getFurthestOnlyChildAncestor',\n    value: function getFurthestOnlyChildAncestor(path) {\n      warning(false, 'As of slate@0.47, the `getFurthestOnlyChildAncestor` method is deprecated.');\n\n      var ancestors = this.getAncestors(path);\n      if (!ancestors) return null;\n\n      var furthest = ancestors.rest().reverse().takeUntil(function (p) {\n        return p.nodes.size > 1;\n      }).last();\n\n      return furthest || null;\n    }\n  }, {\n    key: 'getInlinesAsArray',\n    value: function getInlinesAsArray() {\n      warning(false, 'As of slate@0.47, the `getInlinesAsArray` method is deprecated.');\n\n      var array = Array.from(this.inlines({ onlyLeaves: true }), function (_ref47) {\n        var _ref48 = slicedToArray(_ref47, 1),\n            node = _ref48[0];\n\n        return node;\n      });\n      return array;\n    }\n  }, {\n    key: 'getInlinesByTypeAsArray',\n    value: function getInlinesByTypeAsArray(type) {\n      warning(false, 'As of slate@0.47, the `getInlinesByTypeAsArray` method is deprecated.');\n\n      var array = Array.from(this.inlines({ onlyLeaves: true, onlyTypes: [type] }), function (_ref49) {\n        var _ref50 = slicedToArray(_ref49, 1),\n            node = _ref50[0];\n\n        return node;\n      });\n      return array;\n    }\n  }, {\n    key: 'getLeafInlinesAtRangeAsArray',\n    value: function getLeafInlinesAtRangeAsArray(range) {\n      var _this4 = this;\n\n      warning(false, 'As of slate@0.47, the `getLeafInlinesAtRangeAsArray` method is deprecated.');\n\n      range = this.resolveRange(range);\n      if (range.isUnset) return [];\n\n      var array = this.getTextsAtRangeAsArray(range).map(function (text) {\n        return _this4.getClosestInline(text.key);\n      }).filter(function (exists) {\n        return exists;\n      });\n\n      return array;\n    }\n  }, {\n    key: 'getOrderedMarks',\n    value: function getOrderedMarks() {\n      warning(false, 'As of slate@0.47, the `getOrderedMarks` method has been folded into `getMarks`, which will now return an ordered set.');\n      return this.getMarks();\n    }\n  }, {\n    key: 'getOrderedMarksAtRange',\n    value: function getOrderedMarksAtRange(range) {\n      warning(false, 'As of slate@0.47, the `getOrderedMarksAtRange` method has been folded into `getMarksAtRange`, which will now return an ordered set.');\n      return this.getMarksAtRange(range);\n    }\n  }, {\n    key: 'getOrderedMarksByType',\n    value: function getOrderedMarksByType(type) {\n      warning(false, 'As of slate@0.47, the `getOrderedMarksByType` method has been folded into `getMarksByType`, which will now return an ordered set.');\n      return this.getMarksByType(type);\n    }\n  }, {\n    key: 'getMarksByTypeAsArray',\n    value: function getMarksByTypeAsArray(type) {\n      warning(false, 'As of slate@0.47, the `getMarksByTypeAsArray` method is deprecated.');\n\n      var array = this.nodes.reduce(function (memo, node) {\n        return node.object === 'text' ? memo.concat(node.marks.filter(function (m) {\n          return m.type === type;\n        })) : memo.concat(node.getMarksByTypeAsArray(type));\n      }, []);\n\n      return array;\n    }\n  }, {\n    key: 'getMarksAsArray',\n    value: function getMarksAsArray() {\n      var _ref53;\n\n      warning(false, 'As of slate@0.47, the `getMarksAsArray` method is deprecated.');\n\n      var result = [];\n\n      var _iteratorNormalCompletion8 = true;\n      var _didIteratorError8 = false;\n      var _iteratorError8 = undefined;\n\n      try {\n        for (var _iterator8 = this.texts()[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n          var _ref51 = _step8.value;\n\n          var _ref52 = slicedToArray(_ref51, 1);\n\n          var node = _ref52[0];\n\n          result.push(node.marks.toArray());\n        }\n\n        // PERF: use only one concat rather than multiple for speed.\n      } catch (err) {\n        _didIteratorError8 = true;\n        _iteratorError8 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion8 && _iterator8.return) {\n            _iterator8.return();\n          }\n        } finally {\n          if (_didIteratorError8) {\n            throw _iteratorError8;\n          }\n        }\n      }\n\n      var array = (_ref53 = []).concat.apply(_ref53, result);\n      return array;\n    }\n  }, {\n    key: 'getRootInlinesAtRangeAsArray',\n    value: function getRootInlinesAtRangeAsArray(range) {\n      var _this5 = this;\n\n      warning(false, 'As of slate@0.47, the `getRootInlinesAtRangeAsArray` method is deprecated.');\n\n      range = this.resolveRange(range);\n      if (range.isUnset) return List();\n\n      var array = this.getTextsAtRangeAsArray(range).map(function (text) {\n        return _this5.getFurthestInline(text.key);\n      }).filter(function (exists) {\n        return exists;\n      });\n\n      return array;\n    }\n  }, {\n    key: 'getTextsAsArray',\n    value: function getTextsAsArray() {\n      warning(false, 'As of slate@0.47, the `getTextsAsArray` method is deprecated.');\n\n      var iterable = this.texts();\n      var array = Array.from(iterable, function (_ref54) {\n        var _ref55 = slicedToArray(_ref54, 1),\n            node = _ref55[0];\n\n        return node;\n      });\n      return array;\n    }\n  }, {\n    key: 'getTextsAtRangeAsArray',\n    value: function getTextsAtRangeAsArray(range) {\n      warning(false, 'As of slate@0.47, the `getTextsAtRangeAsArray` method is deprecated.');\n\n      var iterable = this.texts({ range: range });\n      var array = Array.from(iterable, function (_ref56) {\n        var _ref57 = slicedToArray(_ref56, 1),\n            node = _ref57[0];\n\n        return node;\n      });\n      return array;\n    }\n  }, {\n    key: 'getMarksAtPosition',\n    value: function getMarksAtPosition(path, offset) {\n      warning(false, 'As of slate@0.47, the `getMarksAtPosition` method is deprecated.');\n\n      path = this.resolvePath(path);\n      var text = this.getDescendant(path);\n      var currentMarks = text.marks;\n\n      if (offset !== 0) {\n        return OrderedSet(currentMarks);\n      }\n\n      var closestBlock = this.getClosestBlock(path);\n\n      // insert mark for empty block; the empty block are often created by split node or add marks in a range including empty blocks\n      if (closestBlock.text === '') {\n        return OrderedSet(currentMarks);\n      }\n\n      var _texts13 = this.texts({ path: path, direction: 'backward' }),\n          _texts14 = slicedToArray(_texts13, 1),\n          previous = _texts14[0];\n\n      if (!previous) {\n        return OrderedSet();\n      }\n\n      var _previous2 = slicedToArray(previous, 2),\n          previousText = _previous2[0],\n          previousPath = _previous2[1];\n\n      if (closestBlock.hasDescendant(previousPath)) {\n        return OrderedSet(previousText.marks);\n      }\n\n      return OrderedSet(currentMarks);\n    }\n  }, {\n    key: 'getNodesAtRange',\n    value: function getNodesAtRange(range) {\n      warning(false, 'As of slate@0.47, the `getNodesAtRange` method has been renamed to `getDescendantsAtRange`.');\n\n      var iterable = this.descendants({ range: range });\n      var array = Array.from(iterable, function (_ref58) {\n        var _ref59 = slicedToArray(_ref58, 1),\n            node = _ref59[0];\n\n        return node;\n      });\n      var list = List(array);\n      return list;\n    }\n  }, {\n    key: 'isNodeInRange',\n    value: function isNodeInRange(path, range) {\n      warning(false, 'As of slate@0.47, the `isNodeInRange` method has been renamed to `isInRange`.');\n\n      return this.isInRange(path, range);\n    }\n  }, {\n    key: 'text',\n\n    /**\n     * Get the concatenated text of the node.\n     *\n     * @return {String}\n     */\n\n    get: function get$$1() {\n      return this.getText();\n    }\n  }]);\n  return ElementInterface;\n}();\n\n/**\n * Mix in assertion variants.\n */\n\nvar ASSERTS = ['Child', 'Depth', 'Descendant', 'Node', 'Parent', 'Path'];\n\nvar _loop$1 = function _loop(method) {\n  ElementInterface.prototype['assert' + method] = function (path) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var ret = this['get' + method].apply(this, [path].concat(args));\n\n    if (ret == null) {\n      throw new Error('`Node.assert' + method + '` could not find node with path or key: ' + path);\n    }\n\n    return ret;\n  };\n};\n\nvar _iteratorNormalCompletion9 = true;\nvar _didIteratorError9 = false;\nvar _iteratorError9 = undefined;\n\ntry {\n  for (var _iterator9 = ASSERTS[Symbol.iterator](), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {\n    var method$1 = _step9.value;\n\n    _loop$1(method$1);\n  }\n\n  /**\n   * Memoize read methods.\n   */\n} catch (err) {\n  _didIteratorError9 = true;\n  _iteratorError9 = err;\n} finally {\n  try {\n    if (!_iteratorNormalCompletion9 && _iterator9.return) {\n      _iterator9.return();\n    }\n  } finally {\n    if (_didIteratorError9) {\n      throw _iteratorError9;\n    }\n  }\n}\n\nmemoize(ElementInterface.prototype, ['getBlocksAsArray', 'getBlocksByTypeAsArray', 'getDecorations', 'getFragmentAtRange', 'getInlinesAsArray', 'getInlinesByTypeAsArray', 'getInsertMarksAtRange', 'getLeafBlocksAtRangeAsArray', 'getLeafBlocksAtRangeAsArray', 'getLeafInlinesAtRangeAsArray', 'getMarksAsArray', 'getMarksAtPosition', 'getMarksByTypeAsArray', 'getNextBlock', 'getNodesAtRange', 'getNodesToPathsMap', 'getOffset', 'getOffsetAtRange', 'getOrderedMarksBetweenPositions', 'getPreviousBlock', 'getRootBlocksAtRange', 'getRootInlinesAtRangeAsArray', 'getTextAtOffset', 'getTextDirection', 'getTextsAsArray', 'getTextsBetweenPathPositionsAsArray']);\n\n/**\n * Mix in the element interface.\n */\n\nmixin(ElementInterface, [Block, Document, Inline]);\n\n/**\n * The interface that `Decoration`, `Range` and `Selection` all implement, to make\n * working anchor and focus points easier.\n *\n * @type {Class}\n */\n\nvar RangeInterface = function () {\n  function RangeInterface() {\n    classCallCheck(this, RangeInterface);\n  }\n\n  createClass(RangeInterface, [{\n    key: 'flip',\n\n\n    /**\n     * Flip the range.\n     *\n     * @return {Range}\n     */\n\n    value: function flip() {\n      var range = this.setPoints([this.focus, this.anchor]);\n      return range;\n    }\n\n    /**\n     * Move the anchor and focus offsets forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveForward',\n    value: function moveForward(n) {\n      return this.updatePoints(function (point) {\n        return point.moveForward(n);\n      });\n    }\n\n    /**\n     * Move the anchor and focus offsets backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveBackward',\n    value: function moveBackward(n) {\n      return this.updatePoints(function (point) {\n        return point.moveBackward(n);\n      });\n    }\n\n    /**\n     * Move the anchor offset backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorBackward',\n    value: function moveAnchorBackward(n) {\n      var range = this.setAnchor(this.anchor.moveBackward(n));\n      return range;\n    }\n\n    /**\n     * Move the anchor offset forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorForward',\n    value: function moveAnchorForward(n) {\n      var range = this.setAnchor(this.anchor.moveForward(n));\n      return range;\n    }\n\n    /**\n     * Move the range's anchor point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorTo',\n    value: function moveAnchorTo(path, offset) {\n      var range = this.setAnchor(this.anchor.moveTo(path, offset));\n      return range;\n    }\n\n    /**\n     * Move the range's anchor point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorToStartOfNode',\n    value: function moveAnchorToStartOfNode(node) {\n      var range = this.setAnchor(this.anchor.moveToStartOfNode(node));\n      return range;\n    }\n\n    /**\n     * Move the range's anchor point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorToEndOfNode',\n    value: function moveAnchorToEndOfNode(node) {\n      var range = this.setAnchor(this.anchor.moveToEndOfNode(node));\n      return range;\n    }\n\n    /**\n     * Move the end offset backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndBackward',\n    value: function moveEndBackward(n) {\n      var range = this.setEnd(this.end.moveBackward(n));\n      return range;\n    }\n\n    /**\n     * Move the end offset forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndForward',\n    value: function moveEndForward(n) {\n      var range = this.setEnd(this.end.moveForward(n));\n      return range;\n    }\n\n    /**\n     * Move the range's end point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndTo',\n    value: function moveEndTo(path, offset) {\n      var range = this.setEnd(this.end.moveTo(path, offset));\n      return range;\n    }\n\n    /**\n     * Move the range's end point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndToStartOfNode',\n    value: function moveEndToStartOfNode(node) {\n      var range = this.setEnd(this.end.moveToStartOfNode(node));\n      return range;\n    }\n\n    /**\n     * Move the range's end point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndToEndOfNode',\n    value: function moveEndToEndOfNode(node) {\n      var range = this.setEnd(this.end.moveToEndOfNode(node));\n      return range;\n    }\n\n    /**\n     * Move the focus offset backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusBackward',\n    value: function moveFocusBackward(n) {\n      var range = this.setFocus(this.focus.moveBackward(n));\n      return range;\n    }\n\n    /**\n     * Move the focus offset forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusForward',\n    value: function moveFocusForward(n) {\n      var range = this.setFocus(this.focus.moveForward(n));\n      return range;\n    }\n\n    /**\n     * Move the range's focus point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusTo',\n    value: function moveFocusTo(path, offset) {\n      var range = this.setFocus(this.focus.moveTo(path, offset));\n      return range;\n    }\n\n    /**\n     * Move the range's focus point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusToStartOfNode',\n    value: function moveFocusToStartOfNode(node) {\n      var range = this.setFocus(this.focus.moveToStartOfNode(node));\n      return range;\n    }\n\n    /**\n     * Move the range's focus point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusToEndOfNode',\n    value: function moveFocusToEndOfNode(node) {\n      var range = this.setFocus(this.focus.moveToEndOfNode(node));\n      return range;\n    }\n\n    /**\n     * Move the start offset backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartBackward',\n    value: function moveStartBackward(n) {\n      var range = this.setStart(this.start.moveBackward(n));\n      return range;\n    }\n\n    /**\n     * Move the start offset forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartForward',\n    value: function moveStartForward(n) {\n      var range = this.setStart(this.start.moveForward(n));\n      return range;\n    }\n\n    /**\n     * Move the range's start point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartTo',\n    value: function moveStartTo(path, offset) {\n      var range = this.setStart(this.start.moveTo(path, offset));\n      return range;\n    }\n\n    /**\n     * Move the range's start point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartToStartOfNode',\n    value: function moveStartToStartOfNode(node) {\n      var range = this.setStart(this.start.moveToStartOfNode(node));\n      return range;\n    }\n\n    /**\n     * Move the range's start point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartToEndOfNode',\n    value: function moveStartToEndOfNode(node) {\n      var range = this.setStart(this.start.moveToEndOfNode(node));\n      return range;\n    }\n\n    /**\n     * Move range's points to a new `path` and `offset`.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveTo',\n    value: function moveTo(path, offset) {\n      return this.updatePoints(function (point) {\n        return point.moveTo(path, offset);\n      });\n    }\n\n    /**\n     * Move the focus point to the anchor point.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToAnchor',\n    value: function moveToAnchor() {\n      var range = this.setFocus(this.anchor);\n      return range;\n    }\n\n    /**\n     * Move the start point to the end point.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToEnd',\n    value: function moveToEnd() {\n      var range = this.setStart(this.end);\n      return range;\n    }\n\n    /**\n     * Move the range's points to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToEndOfNode',\n    value: function moveToEndOfNode(node) {\n      return this.updatePoints(function (point) {\n        return point.moveToEndOfNode(node);\n      });\n    }\n\n    /**\n     * Move the anchor point to the focus point.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToFocus',\n    value: function moveToFocus() {\n      var range = this.setAnchor(this.focus);\n      return range;\n    }\n\n    /**\n     * Move to the entire range of `start` and `end` nodes.\n     *\n     * @param {Node} start\n     * @param {Node} end (optional)\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToRangeOfNode',\n    value: function moveToRangeOfNode(start) {\n      var end = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : start;\n\n      var range = this.setPoints([this.anchor.moveToStartOfNode(start), this.focus.moveToEndOfNode(end)]);\n\n      return range;\n    }\n\n    /**\n     * Move the end point to the start point.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToStart',\n    value: function moveToStart() {\n      var range = this.setEnd(this.start);\n      return range;\n    }\n\n    /**\n     * Move the range's points to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToStartOfNode',\n    value: function moveToStartOfNode(node) {\n      return this.updatePoints(function (point) {\n        return point.moveToStartOfNode(node);\n      });\n    }\n\n    /**\n     * Normalize the range, relative to a `node`, ensuring that the anchor\n     * and focus nodes of the range always refer to leaf text nodes.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'normalize',\n    value: function normalize(node) {\n      return this.updatePoints(function (point) {\n        return point.normalize(node);\n      });\n    }\n\n    /**\n     * Set the anchor point to a new `anchor`.\n     *\n     * @param {Point} anchor\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setAnchor',\n    value: function setAnchor(anchor) {\n      var range = this.set('anchor', anchor);\n      return range;\n    }\n\n    /**\n     * Set the end point to a new `point`.\n     *\n     * @param {Point} point\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setEnd',\n    value: function setEnd(point) {\n      var range = this.isBackward ? this.setAnchor(point) : this.setFocus(point);\n      return range;\n    }\n\n    /**\n     * Set the focus point to a new `focus`.\n     *\n     * @param {Point} focus\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setFocus',\n    value: function setFocus(focus) {\n      var range = this.set('focus', focus);\n      return range;\n    }\n\n    /**\n     * Set the anchor and focus points to new `values`.\n     *\n     * @param {Array<Point>} values\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setPoints',\n    value: function setPoints(values) {\n      var _values = slicedToArray(values, 2),\n          anchor = _values[0],\n          focus = _values[1];\n\n      var range = this.set('anchor', anchor).set('focus', focus);\n      return range;\n    }\n\n    /**\n     * Set the anchor and focus points with `updater` callback\n     *\n     * @param {Function} updater\n     * @return {Range}\n     */\n\n  }, {\n    key: 'updatePoints',\n    value: function updatePoints(updater) {\n      var anchor = this.anchor,\n          focus = this.focus;\n\n      anchor = updater(anchor);\n      focus = updater(focus);\n      return this.merge({ anchor: anchor, focus: focus });\n    }\n\n    /**\n     * Set the start point to a new `point`.\n     *\n     * @param {Point} point\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setStart',\n    value: function setStart(point) {\n      var range = this.isBackward ? this.setFocus(point) : this.setAnchor(point);\n      return range;\n    }\n\n    /**\n     * Set new `properties` on the range.\n     *\n     * @param {Object|Range} properties\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setProperties',\n    value: function setProperties(properties) {\n      properties = Range.createProperties(properties);\n      var _properties = properties,\n          anchor = _properties.anchor,\n          focus = _properties.focus,\n          props = objectWithoutProperties(_properties, ['anchor', 'focus']);\n\n\n      if (anchor) {\n        props.anchor = Point.create(anchor);\n      }\n\n      if (focus) {\n        props.focus = Point.create(focus);\n      }\n\n      var range = this.merge(props);\n      return range;\n    }\n\n    /**\n     * Return a JSON representation of the range.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        anchor: this.anchor.toJSON(options),\n        focus: this.focus.toJSON(options)\n      };\n\n      return object;\n    }\n\n    /**\n     * Return a `Range` instance from any range-like instance.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'toRange',\n    value: function toRange() {\n      var properties = Range.createProperties(this);\n      var range = Range.create(properties);\n      return range;\n    }\n\n    /**\n     * Unset the range.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'unset',\n    value: function unset() {\n      var range = this.updatePoints(function (p) {\n        return p.unset();\n      });\n      return range;\n    }\n  }, {\n    key: 'isCollapsed',\n\n    /**\n     * Check whether the range is collapsed.\n     *\n     * @return {Boolean}\n     */\n\n    get: function get$$1() {\n      return this.anchor === this.focus || this.anchor.key === this.focus.key && this.anchor.offset === this.focus.offset;\n    }\n\n    /**\n     * Check whether the range is expanded.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isExpanded',\n    get: function get$$1() {\n      return !this.isCollapsed;\n    }\n\n    /**\n     * Check whether the range is backward.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isBackward',\n    get: function get$$1() {\n      var isUnset = this.isUnset,\n          anchor = this.anchor,\n          focus = this.focus;\n\n\n      if (isUnset) {\n        return null;\n      }\n\n      if (anchor.key === focus.key) {\n        return anchor.offset > focus.offset;\n      }\n\n      var isBackward = PathUtils.isBefore(focus.path, anchor.path);\n      return isBackward;\n    }\n\n    /**\n     * Check whether the range is forward.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isForward',\n    get: function get$$1() {\n      var isBackward = this.isBackward;\n\n      var isForward = isBackward == null ? null : !isBackward;\n      return isForward;\n    }\n\n    /**\n     * Check whether the range isn't set.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isUnset',\n    get: function get$$1() {\n      var anchor = this.anchor,\n          focus = this.focus;\n\n      var isUnset = anchor.isUnset || focus.isUnset;\n      return isUnset;\n    }\n\n    /**\n     * Check whether the range is set.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isSet',\n    get: function get$$1() {\n      return !this.isUnset;\n    }\n\n    /**\n     * Get the start point.\n     *\n     * @return {String}\n     */\n\n  }, {\n    key: 'start',\n    get: function get$$1() {\n      return this.isBackward ? this.focus : this.anchor;\n    }\n\n    /**\n     * Get the end point.\n     *\n     * @return {String}\n     */\n\n  }, {\n    key: 'end',\n    get: function get$$1() {\n      return this.isBackward ? this.anchor : this.focus;\n    }\n  }]);\n  return RangeInterface;\n}();\n\n/**\n * Mix in the range interface.\n *\n * @param {Record}\n */\n\nmixin(RangeInterface, [Annotation, Decoration, Range, Selection]);\n\nvar index = {\n  Annotation: Annotation,\n  Block: Block,\n  Change: Change,\n  Data: Data,\n  Decoration: Decoration,\n  Document: Document,\n  Editor: Editor,\n  Inline: Inline,\n  KeyUtils: KeyUtils,\n  Leaf: Leaf$1,\n  Mark: Mark,\n  Node: Node,\n  Operation: Operation,\n  PathUtils: PathUtils,\n  Point: Point,\n  Range: Range,\n  resetMemoization: resetMemoization,\n  Selection: Selection,\n  Text: Text,\n  TextUtils: TextUtils,\n  useMemoization: useMemoization,\n  Value: Value\n};\n\nexport default index;\nexport { Annotation, Block, Change, Data, Decoration, Document, Editor, Inline, KeyUtils, Leaf$1 as Leaf, Mark, Node, Operation, PathUtils, Point, Range, resetMemoization, Selection, Text, TextUtils, useMemoization, Value };\n//# sourceMappingURL=slate.es.js.map\n"],"names":["slate047ToSlate","nodes","convertNodes","acc","n","node","convert","type","data","text","marks","m","plugin","slateToMdast","slateToRemarkLegacy","slateToSlate047","rest","children","mdastToSlate","remarkToSlateLegacy","global","factory","module","this","SLICE$0","createClass","ctor","superClass","Iterable","value","isIterable","Seq","KeyedIterable","isKeyed","KeyedSeq","IndexedIterable","isIndexed","IndexedSeq","SetIterable","isAssociative","SetSeq","maybeIterable","IS_ITERABLE_SENTINEL","maybeKeyed","IS_KEYED_SENTINEL","maybeIndexed","IS_INDEXED_SENTINEL","maybeAssociative","isOrdered","maybeOrdered","IS_ORDERED_SENTINEL","DELETE","SHIFT","SIZE","MASK","NOT_SET","CHANGE_LENGTH","DID_ALTER","MakeRef","ref","SetRef","OwnerID","arrCopy","arr","offset","len","newArr","ii","ensureSize","iter","returnTrue","wrapIndex","index","uint32Index","wholeSlice","begin","end","size","resolveBegin","resolveIndex","resolveEnd","defaultIndex","ITERATE_KEYS","ITERATE_VALUES","ITERATE_ENTRIES","REAL_ITERATOR_SYMBOL","FAUX_ITERATOR_SYMBOL","ITERATOR_SYMBOL","Iterator","next","iteratorValue","k","v","iteratorResult","iteratorDone","hasIterator","getIteratorFn","isIterator","maybeIterator","getIterator","iterable","iteratorFn","isArrayLike","emptySequence","seqFromValue","fn","reverse","seqIterate","seqIterator","keyedSeqFromValue","indexedSeqFromValue","isSeq","IS_SEQ_SENTINEL","ArraySeq","array","notSetValue","maxIndex","ObjectSeq","object","keys","key","IterableSeq","iterator","iterations","step","IteratorSeq","cache","val","maybeSeq","EMPTY_SEQ","seq","maybeIndexedSeqFromValue","useKeys","entry","fromJS","json","converter","fromJSWith","fromJSDefault","parentJSON","isPlainObj","is","valueA","valueB","deepEqual","b","notAssociative","entries","flipped","_","allEqual","bSize","Repeat","times","EMPTY_REPEAT","searchValue","this$0","other","invariant","condition","error","Range","start","EMPTY_RANGE","possibleIndex","offsetValue","Collection","KeyedCollection","IndexedCollection","SetCollection","imul","a","c","d","smi","i32","hash","o","h","STRING_HASH_CACHE_MIN_STRLEN","cachedHashString","hashString","hashJSObj","string","stringHashCache","STRING_HASH_CACHE_SIZE","STRING_HASH_CACHE_MAX_SIZE","obj","usingWeakMap","weakMap","UID_HASH_KEY","canDefineProperty","getIENodeHash","objHashUID","isExtensible","assertNotInfinite","Map","emptyMap","isMap","map","keyValues","i","updateMap","keyPath","updater","updatedValue","updateInDeepMap","forceIterator","mergeIntoMapWith","merger","iters","deepMerger","deepMergerWith","comparator","OrderedMap","sortFactory","mapper","mutable","MapIterator","ownerID","makeMap","maybeMap","IS_MAP_SENTINEL","MapPrototype","ArrayMapNode","shift","keyHash","didChangeSize","didAlter","removed","idx","exists","MAX_ARRAY_MAP_SIZE","createNodes","isEditable","newEntries","BitmapIndexedNode","bitmap","bit","popCount","keyHashFrag","newNode","updateNode","MAX_BITMAP_INDEXED_SIZE","expandNodes","isLeafNode","newBitmap","newNodes","setIn","spliceOut","spliceIn","HashArrayMapNode","count","newCount","MIN_HASH_ARRAY_MAP_SIZE","packNodes","HashCollisionNode","mergeIntoNode","ValueNode","keyMatch","mapIteratorFrame","stack","mapIteratorValue","subNode","prev","root","EMPTY_MAP","newRoot","newSize","idx1","idx2","excluding","packedII","packedNodes","including","expandedNodes","iterables","mergeIntoCollectionWith","existing","nextValue","collection","x","mergeIntoMap","keyPathIter","isNotSet","existingValue","newValue","nextExisting","nextUpdated","canEdit","newArray","newLen","after","List","empty","emptyList","isList","makeList","VNode","list","listNodeFor","updateList","values","oldSize","setListBounds","mergeIntoListWith","iterateList","DONE","maybeList","IS_LIST_SENTINEL","ListPrototype","level","originIndex","removingFirst","newChild","oldChild","editable","editableVNode","sizeIndex","left","right","tailPos","getTailOffset","tail","iterateNodeOrLeaf","iterateLeaf","iterateNode","from","to","origin","capacity","EMPTY_LIST","newTail","updateVNode","nodeHas","lowerNode","newLowerNode","rawIndex","owner","oldOrigin","oldCapacity","newOrigin","newCapacity","newLevel","offsetShift","oldTailOffset","newTailOffset","oldTail","beginIndex","maxSize","emptyOrderedMap","isOrderedMap","updateOrderedMap","newMap","newList","makeOrderedMap","maybeOrderedMap","omap","EMPTY_ORDERED_MAP","has","ToKeyedSequence","indexed","reversedSequence","reverseFactory","context","mappedSequence","mapFactory","resolveSize","ToIndexedSequence","ToSetSequence","FromEntriesSequence","validateEntry","indexedIterable","cacheResultThrough","flipFactory","flipSequence","makeSequence","filterFactory","predicate","filterSequence","countByFactory","grouper","groups","groupByFactory","isKeyedIter","coerce","iterableClass","reify","sliceFactory","originalSize","resolvedBegin","resolvedEnd","resolvedSize","sliceSize","sliceSeq","skipped","isSkipping","takeWhileFactory","takeSequence","iterating","skipWhileFactory","skipSequence","skipping","concatFactory","isKeyedIterable","singleton","concatSeq","sum","flattenFactory","depth","flatSequence","stopped","flatDeep","currentDepth","flatMapFactory","interposeFactory","separator","interposedSequence","defaultComparator","maxFactory","maxCompare","comp","zipWithFactory","keyIter","zipper","zipSequence","iterators","isDone","steps","s","Record","defaultValues","name","hasInitialized","RecordType","setProps","RecordTypePrototype","RecordPrototype","recordName","defaultVal","makeRecord","likeRecord","record","prototype","names","setProp","Set","emptySet","isSet","set","updateSet","originalSet","OrderedSet","maybeSet","IS_SET_SENTINEL","SetPrototype","makeSet","EMPTY_SET","emptyOrderedSet","isOrderedSet","maybeOrderedSet","OrderedSetPrototype","makeOrderedSet","EMPTY_ORDERED_SET","Stack","emptyStack","isStack","head","makeStack","maybeStack","IS_STACK_SENTINEL","StackPrototype","EMPTY_STACK","mixin","methods","keyCopier","returnValue","sideEffect","joined","isFirst","reducer","initialReduction","reduction","useFirst","reversed","not","entriesSequence","entryMapper","found","searchKey","searchKeyPath","nested","keyMapper","neg","defaultNegComparator","amount","hashIterable","IterablePrototype","quoteString","KeyedIterablePrototype","removeNum","numArgs","spliced","zipped","interleaved","defaultZipper","ordered","keyed","hashMerge","murmurHashOfSize","Immutable","isobject","isObject","require$$0","isObjectObject","isPlainObject","prot","message","warning","isProduction","prefix","w","y","ms","options","parse","fmtLong","fmtShort","str","match","msAbs","plural","isPlural","setup","env","createDebug","disable","enable","enabled","selectColor","namespace","prevTime","debug","_len","args","_key","self","curr","format","formatter","logFn","destroy","extend","delimiter","namespaces","split","instance","common","_typeof","exports","log","formatArgs","save","load","useColors","localstorage","lastC","_console","r","formatters","freeExports","freeModule","freeGlobal","regexSymbolWithCombiningMarks","regexSurrogatePair","$0","$1","$2","result","esrever","basePickBy","hasIn","require$$1","basePick","paths","path","_basePick","Symbol","isArguments","isArray","require$$2","spreadableSymbol","isFlattenable","_isFlattenable","arrayPush","baseFlatten","isStrict","length","_baseFlatten","flatten","flatten_1","apply","func","thisArg","_apply","nativeMax","overRest","transform","otherArgs","_overRest","constant","constant_1","defineProperty","identity","baseSetToString","_baseSetToString","HOT_COUNT","HOT_SPAN","nativeNow","shortOut","lastCalled","stamp","remaining","_shortOut","setToString","_setToString","flatRest","_flatRest","pick","pick_1","last","last_1","baseSlice","_baseSlice","baseGet","parent","_parent","castPath","toKey","require$$3","baseUnset","_baseUnset","customOmitClone","_customOmitClone","arrayMap","baseClone","copyObject","require$$4","require$$5","require$$6","getAllKeysIn","require$$7","CLONE_DEEP_FLAG","CLONE_FLAT_FLAG","CLONE_SYMBOLS_FLAG","omit","isDeep","omit_1","GROUP_LEFT_TO_RIGHT","GROUP_RIGHT_TO_LEFT","EXPRESSION_LEFT_TO_RIGHT","EXPRESSION_RIGHT_TO_LEFT","direction","direction_1","generate","create","setGenerator","resetGenerator","KeyUtils","classCallCheck","Constructor","defineProperties","target","props","descriptor","protoProps","staticProps","_extends","source","inherits","subClass","objectWithoutProperties","possibleConstructorReturn","call","slicedToArray","sliceIterator","_arr","_n","_d","_e","_i","_s","err","toConsumableArray","arr2","compare","min","pv","tv","create$1","attrs","crop","ca","cb","decrement","increment","getAncestors","ancestors","newPath","isAbove","_crop","_crop2","p","t","isAfter","_crop3","_crop4","isBefore","_crop5","_crop6","isEqual","isOlder","_crop7","_crop8","pl","tl","isPath","any","isSibling","isYounger","_crop9","_crop10","lift","ancestor","drop","relative","max","relate","av","bv","operation","position","pIndex","pEqual","pYounger","pAbove","np","PathUtils","DEFAULTS","Point","_Record","point","is$$1","range","first","_point","_point2","_text","before","_point3","block","_object$key","_object$offset","_object$path","Data","DEFAULTS$1","Mark","elements","_object$data","mark","item","DEFAULTS$2","Decoration","properties","decoration","anchor","focus","DEFAULTS$3","Selection","selection","_properties","_object$isFocused","isFocused","_object$marks","TYPES","DEFAULTS$4","DEFAULTS$5","Annotation","annotation","DEFAULTS$6","Document","_object$nodes","document","Node","DEFAULTS$7","Inline","inline","DEFAULTS$8","Leaf","Text","annotations","decorations","leaves","leaf","at","compile","kind","formats","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","middle","_split","_split2","_split3","_split4","newProperties","newMark","one","two","_object$text","Block","el","texts","DEFAULTS$9","DEFAULTS$10","Value","_value","_annotation","_value2","_value3","_value4","_value5","newDocument","withPath","newIndex","_value6","_value7","_annotation2","_value8","_value9","_range","_value10","_value11","_value12","_value13","_value14","_value15","_value16","_range2","_value17","sel","anns","_object$annotations","_object$document","_object$selection","Debug","applyOperation","op","Operation","_op","_op2","_op3","_next","_op4","_path","_next2","_op5","_path2","_next3","_op6","_path3","_next4","_op7","_path4","_next5","_op8","_next6","_op9","_path5","_mark","_next7","_op10","_path6","_next8","_op11","_path7","_offset","_next9","_op12","_next10","_op13","_path8","_newProperties","_next11","_op14","_path9","_newProperties2","_next12","_op15","_newProperties3","_next13","_op16","_newProperties4","_next14","_op17","_path10","_properties2","_next15","debug$1","invertOperation","inversePath","inverseNewPath","inverse","_inversePath","_inverse","_inversePath2","_inverse2","_inverse3","_inverse4","_inverse5","_inverse6","_inverse7","OPERATION_ATTRIBUTES","DEFAULTS$11","inverted","ATTRIBUTES","_v","_v2","_v3","_v4","_v5","_v6","DEFAULTS$12","Change","_object$operations","operations","change","CommandsPlugin","commands","onCommand","command","editor","onConstruct","SURROGATE_START","SURROGATE_END","SPACE","CHAMELEON","PUNCTUATION","isSurrogate","code","isModifier","isVariationSelector","isBMPEmoji","isWord","char","getCharLength","getCharOffset","chars","forward","charCode","modifier","nextCharCode","getCharOffsetBackward","getCharOffsetForward","getWordOffset","started","l","getWordOffsetBackward","getWordOffsetForward","TextUtils","deleteExpandedAtRange","Commands$1","startKey","startOffset","endKey","endOffset","isStartVoid","isEndVoid","startBlock","endBlock","isHanging","prevText","startVoid","nextText","endVoid","_prevText","startText","endText","startLength","endLength","startChild","endChild","startParent","startParentIndex","endParentIndex","child","_index","afters","startChildIndex","endChildIndex","middles","_index2","befores","onlyChildAncestor","_ref","_ref2","voidParent","prevBlock","prevVoid","traversed","_range3","nextBlock","_nextBlock","nextVoid","wordOffset","_range4","startInline","insertionMode","getInsertionMode","atEnd","siblingText","splitRange","fragment","_range5","isAtStart","blocks","firstChild","lastChild","firstBlock","lastBlock","insertionNode","findInsertionNode","lonelyParent","lonelyChild","startIndex","excludingLonelyChild","nextChild","nextNodes","lastIndex","inlineChild","inlineIndex","documentKey","deepestSingleBlock","doc","ancestorTypesMatch","fragmentAncestors","documentAncestors","fragmentNode","matchingFragmentAncestor","depthDifference","fragIdx","docIdx","getAncestorBlocks","fragmentStartBlock","_range6","_range7","isCollapsed","sets","inlines","height","_range8","_range9","wrappers","firstMatch","lastMatch","firstText","extra","firstblock","lastblock","siblings","p1","p2","indexes","ind","inlineParent","endInline","endIndex","startInner","startInnerIndex","endInner","startInlines","endInlines","startNode","endNode","suffix","startRange","endRange","Commands$2","marksSet","marksToApply","marksToRemove","isAtomic","original","previous","newParentPath","state","pth","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","parentPath","prevProperties","_options$target","textPath","textOffset","lastPath","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_iterator4","_step4","_ref3","_ref4","ancestorPath","parentIndex","grandPath","isLast","updatedPath","childIndex","childPath","COMMANDS","_loop","method","_len3","_key3","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_iterator5","_step5","newKey","textKey","_len2","_key2","Commands$3","_editor$tmp","merge","isValidOperation","undos","lastBatch","lastOperation","shouldMerge","batch","_batch","redos","newData","_o$newProperties","Commands$4","proxy","pointBackward","pointWordBackward","pointForward","_len4","_key4","pointWordForward","_len5","_key5","pointEdgeObject","pointEdgeSideObject","_len6","_key6","_len7","_key7","charsOffset","_len8","_key8","_len9","_key9","_len10","_key10","_len11","_key11","_len12","_key12","_len13","_key13","_len14","_key14","_len15","_key15","_len16","_key16","_len17","_key17","_len18","_key18","_len19","_key19","_len20","_key20","_len21","_key21","_len22","_key22","_editor$moveFocusWord","_len23","_key23","_len24","_key24","_len25","_key25","_len26","_key26","_len27","_key27","_len28","_key28","_len29","_key29","_len30","_key30","_len31","_key31","_len32","_key32","_len33","_key33","_len34","_key34","_options$snapshot","snapshot","_len35","_key35","_len36","_key36","_len37","_key37","_len38","_key38","_editor$value$selecti","_len39","_key39","edge","Edge","Object","getNode","side","Side","getDirectionNode","hasVoidParent","isInBlock","isPreviousInVoid","isNextInVoid","pointName","Commands$5","QueriesPlugin","queries","query","onQuery","ret","SlateError","_Error","_this","SchemaPlugin","schema","rules","schemaRules","rule","testRules","isVoid","normalizeNode","validateNode","defaultNormalize","matches","failure","validateRules","_options$every","every","_options$match","valid","fail","_error","validateObject","validateType","validateData","validateMarks","validateText","validateFirst","validateLast","validateNodes","def","_ret","defs","lastCount","nextDef","rewind","validateParent","validatePrevious","validateNext","lastMin","deleteExpanded","Commands$6","_marks","_sel","newTexts","fragmentLength","_marks2","_sel2","oldMark","CorePlugin","_options$plugins","plugins","debug$2","Editor","_options$controller","controller","_options$construct","construct","_attrs$onChange","onChange","_attrs$plugins","_attrs$readOnly","readOnly","_attrs$value","core","registerPlugin","newDirtyPaths","getDirtyPaths","dirty","transformed","pathIndex","dirtyPaths","dirtyPath","normalizeDirtyPaths","table","_this2","_this3","middleware","fns","overrides","_options$normalize","normalize","_this4","_ancestors","_ancestors2","nextPath","_ancestors3","previousPath","oldAncestors","newAncestors","_ancestors4","normalizeNodeByPath","_node","commandsPlugin","queriesPlugin","schemaPlugin","DEFAULTS$13","Leaf$1","newMarks","set$$1","invalid","firstLeaf","Interface","Classes","Class","desc","_name","create$2","TYPE","camel","ObjectInterface","ModelInterface","LEAF","STORE_KEY","UNDEFINED","NULL","UNSET","memoizeStore","memoize","property","_memoizeStore$get","noArgs","hasArgs","takesArguments","cachedValue","getIn","NodeInterface","descendant","dict","memo","normalizer","global$1","ElementInterface","onlyLeaves","onlyRoots","onlyTypes","_match","_options$direction","_options$downward","downward","_options$upward","upward","_options$includeBlock","includeBlocks","_options$includeDocum","includeDocument","_options$includeInlin","includeInlines","_options$includeRoot","includeRoot","_options$includeTarge","includeTarget","_options$includeTarge2","includeTargetAncestors","_options$includeTexts","includeTexts","targetPath","targetRange","targetNode","NativeSet","visited","startPath","endPath","includedTarget","includedStart","includingStart","nextIndex","_newPath","_newNode","_ref5","_start","_texts","_texts2","_texts2$","_texts3","_texts4","_texts4$","startMarks","endMarks","_texts5","_texts6","_texts6$","_texts7","_texts8","_texts8$","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","closest","startAt","_ref14","_ref15","targetPosition","results","_ref16","_ref17","furthest","_ref18","_ref19","_ref20","_ref21","blockNode","blockPath","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_iterator6","_step6","_entry","relativePath","_blockNode$texts","_blockNode$texts2","_previous","previousText","_ref22","_ref23","_ref24","_ref25","_ref26","_ref27","_ref28","_ref29","_ref30","_ref31","_blocks","_blocks2","_iterable","_siblings","_siblings2","_texts9","_texts10","_blocks3","_blocks4","_iterable2","_siblings3","_siblings4","_texts11","_texts12","_ref32","_ref33","_ref34","_ref35","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_iterator7","_step7","_ref36","_ref37","dir","getDirection","_ref38","_ref39","_ref40","_ref41","_match2","toStart","toEnd","isInRange","_options$onlyTypes","_iterator$next","done","deep","_child$splitText","_child$splitText2","_match3","nextNode","childMatch","assign","_childMatch","_childMatch2","pathToThisNode","previousNode","_match4","_childMatch3","_childMatch4","findLast","foundPath","isSelected","childStartPath","childEndPath","_ref43","_ref44","_ref45","_ref46","_ref47","_ref48","_ref49","_ref50","_ref53","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_iterator8","_step8","_ref51","_ref52","_this5","_ref54","_ref55","_ref56","_ref57","currentMarks","closestBlock","_texts13","_texts14","_previous2","_ref58","_ref59","ASSERTS","_loop$1","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_iterator9","_step9","method$1","RangeInterface","_values","isUnset","isBackward","isForward"],"mappings":"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","x_google_ignoreList":[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]}
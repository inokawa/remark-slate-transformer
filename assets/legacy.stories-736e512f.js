import{s as Ki,m as Ui,u as Fo,r as Vi,b as Po,c as Bo,d as Wi,a as Gi,j as vr,T as Yi,t as Za,e as Hi}from"./article-5df840c7.js";import{c as Lr,g as mr,a as Jr,_ as Io,e as Zi,i as Co,r as Rn}from"./isSymbol-2ff6717e.js";import{o as Ro,e as Qi,r as Kr,s as Xi,m as Mo,h as Lo,j as es,t as ts,g as zo,u as $o,v as rs,n as ns,k as Do,w as jo,x as as,y as os,z as qo,A as Jo,B as is,C as ss,a as us,d as qn,D as Ko,E as Uo,c as cs,i as fs,b as ls,F as vs,G as ds}from"./isPlainObject-eb8b4e9f.js";const hs=r=>Mn(r),Mn=r=>r.reduce((n,t)=>{const e=ms(t);return e&&n.push(e),n},[]),ms=r=>{switch(r.object){case"block":{const{type:n,nodes:t,data:e}=r;return{type:n,children:Mn(t),...e}}case"inline":{const{type:n,nodes:t,data:e}=r;return{type:n,children:Mn(t),...e}}case"text":{const{text:n="",marks:t}=r;return{text:n,...t==null?void 0:t.reduce((e,o)=>(e[o.type]=!0,e),{})}}}return null},ys=function(){return function(r){return Ki({type:"root",children:hs(r.children)},{})}},gs=ys,ps=r=>({object:"value",document:{object:"document",nodes:Ln(r)}}),Ln=r=>r.reduce((n,t)=>{const e=ks(t);return e&&n.push(e),n},[]),ks=r=>{if("text"in r){const{text:n,...t}=r,e=Object.keys(t).reduce((i,u)=>(t[u]&&i.push({object:"mark",type:u}),i),[]);return{object:"text",text:n,marks:e}}switch(r.type){case"paragraph":case"heading":case"blockquote":case"list":case"listItem":case"table":case"tableRow":case"tableCell":case"html":case"code":case"yaml":case"toml":case"thematicBreak":case"definition":case"break":case"math":{const{type:n,children:t,...e}=r;return{object:"block",type:n,nodes:Ln(t),data:{...e}}}case"footnoteDefinition":case"link":case"linkReference":case"image":case"imageReference":case"footnote":case"footnoteReference":case"inlineMath":{const{type:n,children:t,...e}=r;return{object:"inline",type:n,nodes:Ln(t),data:{...e}}}}return null},_s=function(){this.Compiler=function(r){return ps(Ui(r,{}))}},As=_s;var Vo={exports:{}};(function(r,n){(function(t,e){r.exports=e()})(Lr,function(){var t=Array.prototype.slice;function e(a,s){s&&(a.prototype=Object.create(s.prototype)),a.prototype.constructor=a}function o(a){return f(a)?a:Ae(a)}e(i,o);function i(a){return v(a)?a:Be(a)}e(u,o);function u(a){return h(a)?a:ne(a)}e(c,o);function c(a){return f(a)&&!m(a)?a:Ue(a)}function f(a){return!!(a&&a[k])}function v(a){return!!(a&&a[w])}function h(a){return!!(a&&a[E])}function m(a){return v(a)||h(a)}function g(a){return!!(a&&a[O])}o.isIterable=f,o.isKeyed=v,o.isIndexed=h,o.isAssociative=m,o.isOrdered=g,o.Keyed=i,o.Indexed=u,o.Set=c;var k="@@__IMMUTABLE_ITERABLE__@@",w="@@__IMMUTABLE_KEYED__@@",E="@@__IMMUTABLE_INDEXED__@@",O="@@__IMMUTABLE_ORDERED__@@",P="delete",F=5,z=1<<F,M=z-1,B={},D={value:!1},te={value:!1};function oe(a){return a.value=!1,a}function U(a){a&&(a.value=!0)}function se(){}function j(a,s){s=s||0;for(var l=Math.max(0,a.length-s),d=new Array(l),y=0;y<l;y++)d[y]=a[y+s];return d}function ue(a){return a.size===void 0&&(a.size=a.__iterate(H)),a.size}function ve(a,s){if(typeof s!="number"){var l=s>>>0;if(""+l!==s||l===4294967295)return NaN;s=l}return s<0?ue(a)+s:s}function H(){return!0}function re(a,s,l){return(a===0||l!==void 0&&a<=-l)&&(s===void 0||l!==void 0&&s>=l)}function Z(a,s){return G(a,s,0)}function K(a,s){return G(a,s,s)}function G(a,s,l){return a===void 0?l:a<0?Math.max(0,s+a):s===void 0?a:Math.min(s,a)}var Je=0,we=1,Pe=2,Oe=typeof Symbol=="function"&&Symbol.iterator,Ee="@@iterator",Ke=Oe||Ee;function V(a){this.next=a}V.prototype.toString=function(){return"[Iterator]"},V.KEYS=Je,V.VALUES=we,V.ENTRIES=Pe,V.prototype.inspect=V.prototype.toSource=function(){return this.toString()},V.prototype[Ke]=function(){return this};function Q(a,s,l,d){var y=a===0?s:a===1?l:[s,l];return d?d.value=y:d={value:y,done:!1},d}function ge(){return{value:void 0,done:!0}}function ut(a){return!!pt(a)}function Qe(a){return a&&typeof a.next=="function"}function at(a){var s=pt(a);return s&&s.call(a)}function pt(a){var s=a&&(Oe&&a[Oe]||a[Ee]);if(typeof s=="function")return s}function Ct(a){return a&&typeof a.length=="number"}e(Ae,o);function Ae(a){return a==null?Rt():f(a)?a.toSeq():Yr(a)}Ae.of=function(){return Ae(arguments)},Ae.prototype.toSeq=function(){return this},Ae.prototype.toString=function(){return this.__toString("Seq {","}")},Ae.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},Ae.prototype.__iterate=function(a,s){return Sr(this,a,s,!0)},Ae.prototype.__iterator=function(a,s){return wr(this,a,s,!0)},e(Be,Ae);function Be(a){return a==null?Rt().toKeyedSeq():f(a)?v(a)?a.toSeq():a.fromEntrySeq():_r(a)}Be.prototype.toKeyedSeq=function(){return this},e(ne,Ae);function ne(a){return a==null?Rt():f(a)?v(a)?a.entrySeq():a.toIndexedSeq():Nt(a)}ne.of=function(){return ne(arguments)},ne.prototype.toIndexedSeq=function(){return this},ne.prototype.toString=function(){return this.__toString("Seq [","]")},ne.prototype.__iterate=function(a,s){return Sr(this,a,s,!1)},ne.prototype.__iterator=function(a,s){return wr(this,a,s,!1)},e(Ue,Ae);function Ue(a){return(a==null?Rt():f(a)?v(a)?a.entrySeq():a:Nt(a)).toSetSeq()}Ue.of=function(){return Ue(arguments)},Ue.prototype.toSetSeq=function(){return this},Ae.isSeq=nr,Ae.Keyed=Be,Ae.Set=Ue,Ae.Indexed=ne;var pr="@@__IMMUTABLE_SEQ__@@";Ae.prototype[pr]=!0,e(Xe,ne);function Xe(a){this._array=a,this.size=a.length}Xe.prototype.get=function(a,s){return this.has(a)?this._array[ve(this,a)]:s},Xe.prototype.__iterate=function(a,s){for(var l=this._array,d=l.length-1,y=0;y<=d;y++)if(a(l[s?d-y:y],y,this)===!1)return y+1;return y},Xe.prototype.__iterator=function(a,s){var l=this._array,d=l.length-1,y=0;return new V(function(){return y>d?ge():Q(a,y,l[s?d-y++:y++])})},e(ct,Be);function ct(a){var s=Object.keys(a);this._object=a,this._keys=s,this.size=s.length}ct.prototype.get=function(a,s){return s!==void 0&&!this.has(a)?s:this._object[a]},ct.prototype.has=function(a){return this._object.hasOwnProperty(a)},ct.prototype.__iterate=function(a,s){for(var l=this._object,d=this._keys,y=d.length-1,p=0;p<=y;p++){var _=d[s?y-p:p];if(a(l[_],_,this)===!1)return p+1}return p},ct.prototype.__iterator=function(a,s){var l=this._object,d=this._keys,y=d.length-1,p=0;return new V(function(){var _=d[s?y-p:p];return p++>y?ge():Q(a,_,l[_])})},ct.prototype[O]=!0,e(xt,ne);function xt(a){this._iterable=a,this.size=a.length||a.size}xt.prototype.__iterateUncached=function(a,s){if(s)return this.cacheResult().__iterate(a,s);var l=this._iterable,d=at(l),y=0;if(Qe(d))for(var p;!(p=d.next()).done&&a(p.value,y++,this)!==!1;);return y},xt.prototype.__iteratorUncached=function(a,s){if(s)return this.cacheResult().__iterator(a,s);var l=this._iterable,d=at(l);if(!Qe(d))return new V(ge);var y=0;return new V(function(){var p=d.next();return p.done?p:Q(a,y++,p.value)})},e(Et,ne);function Et(a){this._iterator=a,this._iteratorCache=[]}Et.prototype.__iterateUncached=function(a,s){if(s)return this.cacheResult().__iterate(a,s);for(var l=this._iterator,d=this._iteratorCache,y=0;y<d.length;)if(a(d[y],y++,this)===!1)return y;for(var p;!(p=l.next()).done;){var _=p.value;if(d[y]=_,a(_,y++,this)===!1)break}return y},Et.prototype.__iteratorUncached=function(a,s){if(s)return this.cacheResult().__iterator(a,s);var l=this._iterator,d=this._iteratorCache,y=0;return new V(function(){if(y>=d.length){var p=l.next();if(p.done)return p;d[y]=p.value}return Q(a,y,d[y++])})};function nr(a){return!!(a&&a[pr])}var kr;function Rt(){return kr||(kr=new Xe([]))}function _r(a){var s=Array.isArray(a)?new Xe(a).fromEntrySeq():Qe(a)?new Et(a).fromEntrySeq():ut(a)?new xt(a).fromEntrySeq():typeof a=="object"?new ct(a):void 0;if(!s)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+a);return s}function Nt(a){var s=Ar(a);if(!s)throw new TypeError("Expected Array or iterable object of values: "+a);return s}function Yr(a){var s=Ar(a)||typeof a=="object"&&new ct(a);if(!s)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+a);return s}function Ar(a){return Ct(a)?new Xe(a):Qe(a)?new Et(a):ut(a)?new xt(a):void 0}function Sr(a,s,l,d){var y=a._cache;if(y){for(var p=y.length-1,_=0;_<=p;_++){var A=y[l?p-_:_];if(s(A[1],d?A[0]:_,a)===!1)return _+1}return _}return a.__iterateUncached(s,l)}function wr(a,s,l,d){var y=a._cache;if(y){var p=y.length-1,_=0;return new V(function(){var A=y[l?p-_:_];return _++>p?ge():Q(s,d?A[0]:_-1,A[1])})}return a.__iteratorUncached(s,l)}function Hr(a,s){return s?Zr(s,a,"",{"":a}):Qr(a)}function Zr(a,s,l,d){return Array.isArray(s)?a.call(d,l,ne(s).map(function(y,p){return Zr(a,y,p,s)})):aa(s)?a.call(d,l,Be(s).map(function(y,p){return Zr(a,y,p,s)})):s}function Qr(a){return Array.isArray(a)?ne(a).map(Qr).toList():aa(a)?Be(a).map(Qr).toMap():a}function aa(a){return a&&(a.constructor===Object||a.constructor===void 0)}function Ne(a,s){if(a===s||a!==a&&s!==s)return!0;if(!a||!s)return!1;if(typeof a.valueOf=="function"&&typeof s.valueOf=="function"){if(a=a.valueOf(),s=s.valueOf(),a===s||a!==a&&s!==s)return!0;if(!a||!s)return!1}return!!(typeof a.equals=="function"&&typeof s.equals=="function"&&a.equals(s))}function Xr(a,s){if(a===s)return!0;if(!f(s)||a.size!==void 0&&s.size!==void 0&&a.size!==s.size||a.__hash!==void 0&&s.__hash!==void 0&&a.__hash!==s.__hash||v(a)!==v(s)||h(a)!==h(s)||g(a)!==g(s))return!1;if(a.size===0&&s.size===0)return!0;var l=!m(a);if(g(a)){var d=a.entries();return s.every(function(T,x){var b=d.next().value;return b&&Ne(b[1],T)&&(l||Ne(b[0],x))})&&d.next().done}var y=!1;if(a.size===void 0)if(s.size===void 0)typeof a.cacheResult=="function"&&a.cacheResult();else{y=!0;var p=a;a=s,s=p}var _=!0,A=s.__iterate(function(T,x){if(l?!a.has(T):y?!Ne(T,a.get(x,B)):!Ne(a.get(x,B),T))return _=!1,!1});return _&&a.size===A}e(Me,ne);function Me(a,s){if(!(this instanceof Me))return new Me(a,s);if(this._value=a,this.size=s===void 0?1/0:Math.max(0,s),this.size===0){if(en)return en;en=this}}Me.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Me.prototype.get=function(a,s){return this.has(a)?this._value:s},Me.prototype.includes=function(a){return Ne(this._value,a)},Me.prototype.slice=function(a,s){var l=this.size;return re(a,s,l)?this:new Me(this._value,K(s,l)-Z(a,l))},Me.prototype.reverse=function(){return this},Me.prototype.indexOf=function(a){return Ne(this._value,a)?0:-1},Me.prototype.lastIndexOf=function(a){return Ne(this._value,a)?this.size:-1},Me.prototype.__iterate=function(a,s){for(var l=0;l<this.size;l++)if(a(this._value,l,this)===!1)return l+1;return l},Me.prototype.__iterator=function(a,s){var l=this,d=0;return new V(function(){return d<l.size?Q(a,d++,l._value):ge()})},Me.prototype.equals=function(a){return a instanceof Me?Ne(this._value,a._value):Xr(a)};var en;function Tr(a,s){if(!a)throw new Error(s)}e(Ie,ne);function Ie(a,s,l){if(!(this instanceof Ie))return new Ie(a,s,l);if(Tr(l!==0,"Cannot step a Range by 0"),a=a||0,s===void 0&&(s=1/0),l=l===void 0?1:Math.abs(l),s<a&&(l=-l),this._start=a,this._end=s,this._step=l,this.size=Math.max(0,Math.ceil((s-a)/l-1)+1),this.size===0){if(tn)return tn;tn=this}}Ie.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},Ie.prototype.get=function(a,s){return this.has(a)?this._start+ve(this,a)*this._step:s},Ie.prototype.includes=function(a){var s=(a-this._start)/this._step;return s>=0&&s<this.size&&s===Math.floor(s)},Ie.prototype.slice=function(a,s){return re(a,s,this.size)?this:(a=Z(a,this.size),s=K(s,this.size),s<=a?new Ie(0,0):new Ie(this.get(a,this._end),this.get(s,this._end),this._step))},Ie.prototype.indexOf=function(a){var s=a-this._start;if(s%this._step===0){var l=s/this._step;if(l>=0&&l<this.size)return l}return-1},Ie.prototype.lastIndexOf=function(a){return this.indexOf(a)},Ie.prototype.__iterate=function(a,s){for(var l=this.size-1,d=this._step,y=s?this._start+l*d:this._start,p=0;p<=l;p++){if(a(y,p,this)===!1)return p+1;y+=s?-d:d}return p},Ie.prototype.__iterator=function(a,s){var l=this.size-1,d=this._step,y=s?this._start+l*d:this._start,p=0;return new V(function(){var _=y;return y+=s?-d:d,p>l?ge():Q(a,p++,_)})},Ie.prototype.equals=function(a){return a instanceof Ie?this._start===a._start&&this._end===a._end&&this._step===a._step:Xr(this,a)};var tn;e(At,o);function At(){throw TypeError("Abstract")}e(ar,At);function ar(){}e(Mt,At);function Mt(){}e(Or,At);function Or(){}At.Keyed=ar,At.Indexed=Mt,At.Set=Or;var or=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(s,l){s=s|0,l=l|0;var d=s&65535,y=l&65535;return d*y+((s>>>16)*y+d*(l>>>16)<<16>>>0)|0};function rn(a){return a>>>1&1073741824|a&3221225471}function Ve(a){if(a===!1||a===null||a===void 0||typeof a.valueOf=="function"&&(a=a.valueOf(),a===!1||a===null||a===void 0))return 0;if(a===!0)return 1;var s=typeof a;if(s==="number"){if(a!==a||a===1/0)return 0;var l=a|0;for(l!==a&&(l^=a*4294967295);a>4294967295;)a/=4294967295,l^=a;return rn(l)}if(s==="string")return a.length>ki?yi(a):nn(a);if(typeof a.hashCode=="function")return a.hashCode();if(s==="object")return gi(a);if(typeof a.toString=="function")return nn(a.toString());throw new Error("Value type "+s+" cannot be hashed.")}function yi(a){var s=cn[a];return s===void 0&&(s=nn(a),un===_i&&(un=0,cn={}),un++,cn[a]=s),s}function nn(a){for(var s=0,l=0;l<a.length;l++)s=31*s+a.charCodeAt(l)|0;return rn(s)}function gi(a){var s;if(an&&(s=on.get(a),s!==void 0)||(s=a[bt],s!==void 0)||!ia&&(s=a.propertyIsEnumerable&&a.propertyIsEnumerable[bt],s!==void 0||(s=pi(a),s!==void 0)))return s;if(s=++sn,sn&1073741824&&(sn=0),an)on.set(a,s);else{if(oa!==void 0&&oa(a)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(ia)Object.defineProperty(a,bt,{enumerable:!1,configurable:!1,writable:!1,value:s});else if(a.propertyIsEnumerable!==void 0&&a.propertyIsEnumerable===a.constructor.prototype.propertyIsEnumerable)a.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},a.propertyIsEnumerable[bt]=s;else if(a.nodeType!==void 0)a[bt]=s;else throw new Error("Unable to set a non-enumerable property on object.")}return s}var oa=Object.isExtensible,ia=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function pi(a){if(a&&a.nodeType>0)switch(a.nodeType){case 1:return a.uniqueID;case 9:return a.documentElement&&a.documentElement.uniqueID}}var an=typeof WeakMap=="function",on;an&&(on=new WeakMap);var sn=0,bt="__immutablehash__";typeof Symbol=="function"&&(bt=Symbol(bt));var ki=16,_i=255,un=0,cn={};function We(a){Tr(a!==1/0,"Cannot perform this action with an infinite size.")}e(X,ar);function X(a){return a==null?ot():fn(a)&&!g(a)?a:ot().withMutations(function(s){var l=i(a);We(l.size),l.forEach(function(d,y){return s.set(y,d)})})}X.of=function(){var a=t.call(arguments,0);return ot().withMutations(function(s){for(var l=0;l<a.length;l+=2){if(l+1>=a.length)throw new Error("Missing value for key: "+a[l]);s.set(a[l],a[l+1])}})},X.prototype.toString=function(){return this.__toString("Map {","}")},X.prototype.get=function(a,s){return this._root?this._root.get(0,void 0,a,s):s},X.prototype.set=function(a,s){return fa(this,a,s)},X.prototype.setIn=function(a,s){return this.updateIn(a,B,function(){return s})},X.prototype.remove=function(a){return fa(this,a,B)},X.prototype.deleteIn=function(a){return this.updateIn(a,function(){return B})},X.prototype.update=function(a,s,l){return arguments.length===1?a(this):this.updateIn([a],s,l)},X.prototype.updateIn=function(a,s,l){l||(l=s,s=void 0);var d=ma(this,Ma(a),s,l);return d===B?void 0:d},X.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):ot()},X.prototype.merge=function(){return xr(this,void 0,arguments)},X.prototype.mergeWith=function(a){var s=t.call(arguments,1);return xr(this,a,s)},X.prototype.mergeIn=function(a){var s=t.call(arguments,1);return this.updateIn(a,ot(),function(l){return typeof l.merge=="function"?l.merge.apply(l,s):s[s.length-1]})},X.prototype.mergeDeep=function(){return xr(this,va,arguments)},X.prototype.mergeDeepWith=function(a){var s=t.call(arguments,1);return xr(this,da(a),s)},X.prototype.mergeDeepIn=function(a){var s=t.call(arguments,1);return this.updateIn(a,ot(),function(l){return typeof l.mergeDeep=="function"?l.mergeDeep.apply(l,s):s[s.length-1]})},X.prototype.sort=function(a){return xe(Jt(this,a))},X.prototype.sortBy=function(a,s){return xe(Jt(this,s,a))},X.prototype.withMutations=function(a){var s=this.asMutable();return a(s),s.wasAltered()?s.__ensureOwner(this.__ownerID):this},X.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new se)},X.prototype.asImmutable=function(){return this.__ensureOwner()},X.prototype.wasAltered=function(){return this.__altered},X.prototype.__iterator=function(a,s){return new ln(this,a,s)},X.prototype.__iterate=function(a,s){var l=this,d=0;return this._root&&this._root.iterate(function(y){return d++,a(y[1],y[0],l)},s),d},X.prototype.__ensureOwner=function(a){return a===this.__ownerID?this:a?dn(this.size,this._root,a,this.__hash):(this.__ownerID=a,this.__altered=!1,this)};function fn(a){return!!(a&&a[sa])}X.isMap=fn;var sa="@@__IMMUTABLE_MAP__@@",Y=X.prototype;Y[sa]=!0,Y[P]=Y.remove,Y.removeIn=Y.deleteIn;function ir(a,s){this.ownerID=a,this.entries=s}ir.prototype.get=function(a,s,l,d){for(var y=this.entries,p=0,_=y.length;p<_;p++)if(Ne(l,y[p][0]))return y[p][1];return d},ir.prototype.update=function(a,s,l,d,y,p,_){for(var A=y===B,T=this.entries,x=0,b=T.length;x<b&&!Ne(d,T[x][0]);x++);var C=x<b;if(C?T[x][1]===y:A)return this;if(U(_),(A||!C)&&U(p),!(A&&T.length===1)){if(!C&&!A&&T.length>=xi)return Ai(a,T,d,y);var L=a&&a===this.ownerID,J=L?T:j(T);return C?A?x===b-1?J.pop():J[x]=J.pop():J[x]=[d,y]:J.push([d,y]),L?(this.entries=J,this):new ir(a,J)}};function Lt(a,s,l){this.ownerID=a,this.bitmap=s,this.nodes=l}Lt.prototype.get=function(a,s,l,d){s===void 0&&(s=Ve(l));var y=1<<((a===0?s:s>>>a)&M),p=this.bitmap;return p&y?this.nodes[ya(p&y-1)].get(a+F,s,l,d):d},Lt.prototype.update=function(a,s,l,d,y,p,_){l===void 0&&(l=Ve(d));var A=(s===0?l:l>>>s)&M,T=1<<A,x=this.bitmap,b=(x&T)!==0;if(!b&&y===B)return this;var C=ya(x&T-1),L=this.nodes,J=b?L[C]:void 0,W=hn(J,a,s+F,l,d,y,p,_);if(W===J)return this;if(!b&&W&&L.length>=Ei)return wi(a,L,x,A,W);if(b&&!W&&L.length===2&&la(L[C^1]))return L[C^1];if(b&&W&&L.length===1&&la(W))return W;var ke=a&&a===this.ownerID,it=b?W?x:x^T:x|T,dt=b?W?ga(L,C,W,ke):Oi(L,C,ke):Ti(L,C,W,ke);return ke?(this.bitmap=it,this.nodes=dt,this):new Lt(a,it,dt)};function sr(a,s,l){this.ownerID=a,this.count=s,this.nodes=l}sr.prototype.get=function(a,s,l,d){s===void 0&&(s=Ve(l));var y=(a===0?s:s>>>a)&M,p=this.nodes[y];return p?p.get(a+F,s,l,d):d},sr.prototype.update=function(a,s,l,d,y,p,_){l===void 0&&(l=Ve(d));var A=(s===0?l:l>>>s)&M,T=y===B,x=this.nodes,b=x[A];if(T&&!b)return this;var C=hn(b,a,s+F,l,d,y,p,_);if(C===b)return this;var L=this.count;if(!b)L++;else if(!C&&(L--,L<Ni))return Si(a,x,L,A);var J=a&&a===this.ownerID,W=ga(x,A,C,J);return J?(this.count=L,this.nodes=W,this):new sr(a,L,W)};function zt(a,s,l){this.ownerID=a,this.keyHash=s,this.entries=l}zt.prototype.get=function(a,s,l,d){for(var y=this.entries,p=0,_=y.length;p<_;p++)if(Ne(l,y[p][0]))return y[p][1];return d},zt.prototype.update=function(a,s,l,d,y,p,_){l===void 0&&(l=Ve(d));var A=y===B;if(l!==this.keyHash)return A?this:(U(_),U(p),mn(this,a,s,l,[d,y]));for(var T=this.entries,x=0,b=T.length;x<b&&!Ne(d,T[x][0]);x++);var C=x<b;if(C?T[x][1]===y:A)return this;if(U(_),(A||!C)&&U(p),A&&b===2)return new kt(a,this.keyHash,T[x^1]);var L=a&&a===this.ownerID,J=L?T:j(T);return C?A?x===b-1?J.pop():J[x]=J.pop():J[x]=[d,y]:J.push([d,y]),L?(this.entries=J,this):new zt(a,this.keyHash,J)};function kt(a,s,l){this.ownerID=a,this.keyHash=s,this.entry=l}kt.prototype.get=function(a,s,l,d){return Ne(l,this.entry[0])?this.entry[1]:d},kt.prototype.update=function(a,s,l,d,y,p,_){var A=y===B,T=Ne(d,this.entry[0]);if(T?y===this.entry[1]:A)return this;if(U(_),A){U(p);return}return T?a&&a===this.ownerID?(this.entry[1]=y,this):new kt(a,this.keyHash,[d,y]):(U(p),mn(this,a,s,Ve(d),[d,y]))},ir.prototype.iterate=zt.prototype.iterate=function(a,s){for(var l=this.entries,d=0,y=l.length-1;d<=y;d++)if(a(l[s?y-d:d])===!1)return!1},Lt.prototype.iterate=sr.prototype.iterate=function(a,s){for(var l=this.nodes,d=0,y=l.length-1;d<=y;d++){var p=l[s?y-d:d];if(p&&p.iterate(a,s)===!1)return!1}},kt.prototype.iterate=function(a,s){return a(this.entry)},e(ln,V);function ln(a,s,l){this._type=s,this._reverse=l,this._stack=a._root&&ua(a._root)}ln.prototype.next=function(){for(var a=this._type,s=this._stack;s;){var l=s.node,d=s.index++,y;if(l.entry){if(d===0)return vn(a,l.entry)}else if(l.entries){if(y=l.entries.length-1,d<=y)return vn(a,l.entries[this._reverse?y-d:d])}else if(y=l.nodes.length-1,d<=y){var p=l.nodes[this._reverse?y-d:d];if(p){if(p.entry)return vn(a,p.entry);s=this._stack=ua(p,s)}continue}s=this._stack=this._stack.__prev}return ge()};function vn(a,s){return Q(a,s[0],s[1])}function ua(a,s){return{node:a,index:0,__prev:s}}function dn(a,s,l,d){var y=Object.create(Y);return y.size=a,y._root=s,y.__ownerID=l,y.__hash=d,y.__altered=!1,y}var ca;function ot(){return ca||(ca=dn(0))}function fa(a,s,l){var d,y;if(a._root){var p=oe(D),_=oe(te);if(d=hn(a._root,a.__ownerID,0,void 0,s,l,p,_),!_.value)return a;y=a.size+(p.value?l===B?-1:1:0)}else{if(l===B)return a;y=1,d=new ir(a.__ownerID,[[s,l]])}return a.__ownerID?(a.size=y,a._root=d,a.__hash=void 0,a.__altered=!0,a):d?dn(y,d):ot()}function hn(a,s,l,d,y,p,_,A){return a?a.update(s,l,d,y,p,_,A):p===B?a:(U(A),U(_),new kt(s,d,[y,p]))}function la(a){return a.constructor===kt||a.constructor===zt}function mn(a,s,l,d,y){if(a.keyHash===d)return new zt(s,d,[a.entry,y]);var p=(l===0?a.keyHash:a.keyHash>>>l)&M,_=(l===0?d:d>>>l)&M,A,T=p===_?[mn(a,s,l+F,d,y)]:(A=new kt(s,d,y),p<_?[a,A]:[A,a]);return new Lt(s,1<<p|1<<_,T)}function Ai(a,s,l,d){a||(a=new se);for(var y=new kt(a,Ve(l),[l,d]),p=0;p<s.length;p++){var _=s[p];y=y.update(a,0,void 0,_[0],_[1])}return y}function Si(a,s,l,d){for(var y=0,p=0,_=new Array(l),A=0,T=1,x=s.length;A<x;A++,T<<=1){var b=s[A];b!==void 0&&A!==d&&(y|=T,_[p++]=b)}return new Lt(a,y,_)}function wi(a,s,l,d,y){for(var p=0,_=new Array(z),A=0;l!==0;A++,l>>>=1)_[A]=l&1?s[p++]:void 0;return _[d]=y,new sr(a,p+1,_)}function xr(a,s,l){for(var d=[],y=0;y<l.length;y++){var p=l[y],_=i(p);f(p)||(_=_.map(function(A){return Hr(A)})),d.push(_)}return ha(a,s,d)}function va(a,s,l){return a&&a.mergeDeep&&f(s)?a.mergeDeep(s):Ne(a,s)?a:s}function da(a){return function(s,l,d){if(s&&s.mergeDeepWith&&f(l))return s.mergeDeepWith(a,l);var y=a(s,l,d);return Ne(s,y)?s:y}}function ha(a,s,l){return l=l.filter(function(d){return d.size!==0}),l.length===0?a:a.size===0&&!a.__ownerID&&l.length===1?a.constructor(l[0]):a.withMutations(function(d){for(var y=s?function(_,A){d.update(A,B,function(T){return T===B?_:s(T,_,A)})}:function(_,A){d.set(A,_)},p=0;p<l.length;p++)l[p].forEach(y)})}function ma(a,s,l,d){var y=a===B,p=s.next();if(p.done){var _=y?l:a,A=d(_);return A===_?a:A}Tr(y||a&&a.set,"invalid keyPath");var T=p.value,x=y?B:a.get(T,B),b=ma(x,s,l,d);return b===x?a:b===B?a.remove(T):(y?ot():a).set(T,b)}function ya(a){return a=a-(a>>1&1431655765),a=(a&858993459)+(a>>2&858993459),a=a+(a>>4)&252645135,a=a+(a>>8),a=a+(a>>16),a&127}function ga(a,s,l,d){var y=d?a:j(a);return y[s]=l,y}function Ti(a,s,l,d){var y=a.length+1;if(d&&s+1===y)return a[s]=l,a;for(var p=new Array(y),_=0,A=0;A<y;A++)A===s?(p[A]=l,_=-1):p[A]=a[A+_];return p}function Oi(a,s,l){var d=a.length-1;if(l&&s===d)return a.pop(),a;for(var y=new Array(d),p=0,_=0;_<d;_++)_===s&&(p=1),y[_]=a[_+p];return y}var xi=z/4,Ei=z/2,Ni=z/4;e(me,Mt);function me(a){var s=yn();if(a==null)return s;if(pa(a))return a;var l=u(a),d=l.size;return d===0?s:(We(d),d>0&&d<z?cr(0,d,F,null,new St(l.toArray())):s.withMutations(function(y){y.setSize(d),l.forEach(function(p,_){return y.set(_,p)})}))}me.of=function(){return this(arguments)},me.prototype.toString=function(){return this.__toString("List [","]")},me.prototype.get=function(a,s){if(a=ve(this,a),a>=0&&a<this.size){a+=this._origin;var l=Sa(this,a);return l&&l.array[a&M]}return s},me.prototype.set=function(a,s){return bi(this,a,s)},me.prototype.remove=function(a){return this.has(a)?a===0?this.shift():a===this.size-1?this.pop():this.splice(a,1):this},me.prototype.insert=function(a,s){return this.splice(a,0,s)},me.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=F,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):yn()},me.prototype.push=function(){var a=arguments,s=this.size;return this.withMutations(function(l){wt(l,0,s+a.length);for(var d=0;d<a.length;d++)l.set(s+d,a[d])})},me.prototype.pop=function(){return wt(this,0,-1)},me.prototype.unshift=function(){var a=arguments;return this.withMutations(function(s){wt(s,-a.length);for(var l=0;l<a.length;l++)s.set(l,a[l])})},me.prototype.shift=function(){return wt(this,1)},me.prototype.merge=function(){return Er(this,void 0,arguments)},me.prototype.mergeWith=function(a){var s=t.call(arguments,1);return Er(this,a,s)},me.prototype.mergeDeep=function(){return Er(this,va,arguments)},me.prototype.mergeDeepWith=function(a){var s=t.call(arguments,1);return Er(this,da(a),s)},me.prototype.setSize=function(a){return wt(this,0,a)},me.prototype.slice=function(a,s){var l=this.size;return re(a,s,l)?this:wt(this,Z(a,l),K(s,l))},me.prototype.__iterator=function(a,s){var l=0,d=_a(this,s);return new V(function(){var y=d();return y===ur?ge():Q(a,l++,y)})},me.prototype.__iterate=function(a,s){for(var l=0,d=_a(this,s),y;(y=d())!==ur&&a(y,l++,this)!==!1;);return l},me.prototype.__ensureOwner=function(a){return a===this.__ownerID?this:a?cr(this._origin,this._capacity,this._level,this._root,this._tail,a,this.__hash):(this.__ownerID=a,this)};function pa(a){return!!(a&&a[ka])}me.isList=pa;var ka="@@__IMMUTABLE_LIST__@@",Le=me.prototype;Le[ka]=!0,Le[P]=Le.remove,Le.setIn=Y.setIn,Le.deleteIn=Le.removeIn=Y.removeIn,Le.update=Y.update,Le.updateIn=Y.updateIn,Le.mergeIn=Y.mergeIn,Le.mergeDeepIn=Y.mergeDeepIn,Le.withMutations=Y.withMutations,Le.asMutable=Y.asMutable,Le.asImmutable=Y.asImmutable,Le.wasAltered=Y.wasAltered;function St(a,s){this.array=a,this.ownerID=s}St.prototype.removeBefore=function(a,s,l){if(l===s?1<<s:this.array.length===0)return this;var d=l>>>s&M;if(d>=this.array.length)return new St([],a);var y=d===0,p;if(s>0){var _=this.array[d];if(p=_&&_.removeBefore(a,s-F,l),p===_&&y)return this}if(y&&!p)return this;var A=$t(this,a);if(!y)for(var T=0;T<d;T++)A.array[T]=void 0;return p&&(A.array[d]=p),A},St.prototype.removeAfter=function(a,s,l){if(l===(s?1<<s:0)||this.array.length===0)return this;var d=l-1>>>s&M;if(d>=this.array.length)return this;var y;if(s>0){var p=this.array[d];if(y=p&&p.removeAfter(a,s-F,l),y===p&&d===this.array.length-1)return this}var _=$t(this,a);return _.array.splice(d+1),y&&(_.array[d]=y),_};var ur={};function _a(a,s){var l=a._origin,d=a._capacity,y=fr(d),p=a._tail;return _(a._root,a._level,0);function _(x,b,C){return b===0?A(x,C):T(x,b,C)}function A(x,b){var C=b===y?p&&p.array:x&&x.array,L=b>l?0:l-b,J=d-b;return J>z&&(J=z),function(){if(L===J)return ur;var W=s?--J:L++;return C&&C[W]}}function T(x,b,C){var L,J=x&&x.array,W=C>l?0:l-C>>b,ke=(d-C>>b)+1;return ke>z&&(ke=z),function(){do{if(L){var it=L();if(it!==ur)return it;L=null}if(W===ke)return ur;var dt=s?--ke:W++;L=_(J&&J[dt],b-F,C+(dt<<b))}while(!0)}}}function cr(a,s,l,d,y,p,_){var A=Object.create(Le);return A.size=s-a,A._origin=a,A._capacity=s,A._level=l,A._root=d,A._tail=y,A.__ownerID=p,A.__hash=_,A.__altered=!1,A}var Aa;function yn(){return Aa||(Aa=cr(0,0,F))}function bi(a,s,l){if(s=ve(a,s),s!==s)return a;if(s>=a.size||s<0)return a.withMutations(function(_){s<0?wt(_,s).set(0,l):wt(_,0,s+1).set(s,l)});s+=a._origin;var d=a._tail,y=a._root,p=oe(te);return s>=fr(a._capacity)?d=gn(d,a.__ownerID,0,s,l,p):y=gn(y,a.__ownerID,a._level,s,l,p),p.value?a.__ownerID?(a._root=y,a._tail=d,a.__hash=void 0,a.__altered=!0,a):cr(a._origin,a._capacity,a._level,y,d):a}function gn(a,s,l,d,y,p){var _=d>>>l&M,A=a&&_<a.array.length;if(!A&&y===void 0)return a;var T;if(l>0){var x=a&&a.array[_],b=gn(x,s,l-F,d,y,p);return b===x?a:(T=$t(a,s),T.array[_]=b,T)}return A&&a.array[_]===y?a:(U(p),T=$t(a,s),y===void 0&&_===T.array.length-1?T.array.pop():T.array[_]=y,T)}function $t(a,s){return s&&a&&s===a.ownerID?a:new St(a?a.array.slice():[],s)}function Sa(a,s){if(s>=fr(a._capacity))return a._tail;if(s<1<<a._level+F){for(var l=a._root,d=a._level;l&&d>0;)l=l.array[s>>>d&M],d-=F;return l}}function wt(a,s,l){s!==void 0&&(s=s|0),l!==void 0&&(l=l|0);var d=a.__ownerID||new se,y=a._origin,p=a._capacity,_=y+s,A=l===void 0?p:l<0?p+l:y+l;if(_===y&&A===p)return a;if(_>=A)return a.clear();for(var T=a._level,x=a._root,b=0;_+b<0;)x=new St(x&&x.array.length?[void 0,x]:[],d),T+=F,b+=1<<T;b&&(_+=b,y+=b,A+=b,p+=b);for(var C=fr(p),L=fr(A);L>=1<<T+F;)x=new St(x&&x.array.length?[x]:[],d),T+=F;var J=a._tail,W=L<C?Sa(a,A-1):L>C?new St([],d):J;if(J&&L>C&&_<p&&J.array.length){x=$t(x,d);for(var ke=x,it=T;it>F;it-=F){var dt=C>>>it&M;ke=ke.array[dt]=$t(ke.array[dt],d)}ke.array[C>>>F&M]=J}if(A<p&&(W=W&&W.removeAfter(d,0,A)),_>=L)_-=L,A-=L,T=F,x=null,W=W&&W.removeBefore(d,0,_);else if(_>y||L<C){for(b=0;x;){var Cr=_>>>T&M;if(Cr!==L>>>T&M)break;Cr&&(b+=(1<<T)*Cr),T-=F,x=x.array[Cr]}x&&_>y&&(x=x.removeBefore(d,T,_-b)),x&&L<C&&(x=x.removeAfter(d,T,L-b)),b&&(_-=b,A-=b)}return a.__ownerID?(a.size=A-_,a._origin=_,a._capacity=A,a._level=T,a._root=x,a._tail=W,a.__hash=void 0,a.__altered=!0,a):cr(_,A,T,x,W)}function Er(a,s,l){for(var d=[],y=0,p=0;p<l.length;p++){var _=l[p],A=u(_);A.size>y&&(y=A.size),f(_)||(A=A.map(function(T){return Hr(T)})),d.push(A)}return y>a.size&&(a=a.setSize(y)),ha(a,s,d)}function fr(a){return a<z?0:a-1>>>F<<F}e(xe,X);function xe(a){return a==null?Nr():wa(a)?a:Nr().withMutations(function(s){var l=i(a);We(l.size),l.forEach(function(d,y){return s.set(y,d)})})}xe.of=function(){return this(arguments)},xe.prototype.toString=function(){return this.__toString("OrderedMap {","}")},xe.prototype.get=function(a,s){var l=this._map.get(a);return l!==void 0?this._list.get(l)[1]:s},xe.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Nr()},xe.prototype.set=function(a,s){return Oa(this,a,s)},xe.prototype.remove=function(a){return Oa(this,a,B)},xe.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},xe.prototype.__iterate=function(a,s){var l=this;return this._list.__iterate(function(d){return d&&a(d[1],d[0],l)},s)},xe.prototype.__iterator=function(a,s){return this._list.fromEntrySeq().__iterator(a,s)},xe.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var s=this._map.__ensureOwner(a),l=this._list.__ensureOwner(a);return a?pn(s,l,a,this.__hash):(this.__ownerID=a,this._map=s,this._list=l,this)};function wa(a){return fn(a)&&g(a)}xe.isOrderedMap=wa,xe.prototype[O]=!0,xe.prototype[P]=xe.prototype.remove;function pn(a,s,l,d){var y=Object.create(xe.prototype);return y.size=a?a.size:0,y._map=a,y._list=s,y.__ownerID=l,y.__hash=d,y}var Ta;function Nr(){return Ta||(Ta=pn(ot(),yn()))}function Oa(a,s,l){var d=a._map,y=a._list,p=d.get(s),_=p!==void 0,A,T;if(l===B){if(!_)return a;y.size>=z&&y.size>=d.size*2?(T=y.filter(function(x,b){return x!==void 0&&p!==b}),A=T.toKeyedSeq().map(function(x){return x[0]}).flip().toMap(),a.__ownerID&&(A.__ownerID=T.__ownerID=a.__ownerID)):(A=d.remove(s),T=p===y.size-1?y.pop():y.set(p,void 0))}else if(_){if(l===y.get(p)[1])return a;A=d,T=y.set(p,[s,l])}else A=d.set(s,y.size),T=y.set(y.size,[s,l]);return a.__ownerID?(a.size=A.size,a._map=A,a._list=T,a.__hash=void 0,a):pn(A,T)}e(et,Be);function et(a,s){this._iter=a,this._useKeys=s,this.size=a.size}et.prototype.get=function(a,s){return this._iter.get(a,s)},et.prototype.has=function(a){return this._iter.has(a)},et.prototype.valueSeq=function(){return this._iter.valueSeq()},et.prototype.reverse=function(){var a=this,s=kn(this,!0);return this._useKeys||(s.valueSeq=function(){return a._iter.toSeq().reverse()}),s},et.prototype.map=function(a,s){var l=this,d=Ea(this,a,s);return this._useKeys||(d.valueSeq=function(){return l._iter.toSeq().map(a,s)}),d},et.prototype.__iterate=function(a,s){var l=this,d;return this._iter.__iterate(this._useKeys?function(y,p){return a(y,p,l)}:(d=s?Ia(this):0,function(y){return a(y,s?--d:d++,l)}),s)},et.prototype.__iterator=function(a,s){if(this._useKeys)return this._iter.__iterator(a,s);var l=this._iter.__iterator(we,s),d=s?Ia(this):0;return new V(function(){var y=l.next();return y.done?y:Q(a,s?--d:d++,y.value,y)})},et.prototype[O]=!0,e(Dt,ne);function Dt(a){this._iter=a,this.size=a.size}Dt.prototype.includes=function(a){return this._iter.includes(a)},Dt.prototype.__iterate=function(a,s){var l=this,d=0;return this._iter.__iterate(function(y){return a(y,d++,l)},s)},Dt.prototype.__iterator=function(a,s){var l=this._iter.__iterator(we,s),d=0;return new V(function(){var y=l.next();return y.done?y:Q(a,d++,y.value,y)})},e(jt,Ue);function jt(a){this._iter=a,this.size=a.size}jt.prototype.has=function(a){return this._iter.includes(a)},jt.prototype.__iterate=function(a,s){var l=this;return this._iter.__iterate(function(d){return a(d,d,l)},s)},jt.prototype.__iterator=function(a,s){var l=this._iter.__iterator(we,s);return new V(function(){var d=l.next();return d.done?d:Q(a,d.value,d.value,d)})},e(qt,Be);function qt(a){this._iter=a,this.size=a.size}qt.prototype.entrySeq=function(){return this._iter.toSeq()},qt.prototype.__iterate=function(a,s){var l=this;return this._iter.__iterate(function(d){if(d){Ba(d);var y=f(d);return a(y?d.get(1):d[1],y?d.get(0):d[0],l)}},s)},qt.prototype.__iterator=function(a,s){var l=this._iter.__iterator(we,s);return new V(function(){for(;;){var d=l.next();if(d.done)return d;var y=d.value;if(y){Ba(y);var p=f(y);return Q(a,p?y.get(0):y[0],p?y.get(1):y[1],d)}}})},Dt.prototype.cacheResult=et.prototype.cacheResult=jt.prototype.cacheResult=qt.prototype.cacheResult=Sn;function xa(a){var s=ft(a);return s._iter=a,s.size=a.size,s.flip=function(){return a},s.reverse=function(){var l=a.reverse.apply(this);return l.flip=function(){return a.reverse()},l},s.has=function(l){return a.includes(l)},s.includes=function(l){return a.has(l)},s.cacheResult=Sn,s.__iterateUncached=function(l,d){var y=this;return a.__iterate(function(p,_){return l(_,p,y)!==!1},d)},s.__iteratorUncached=function(l,d){if(l===Pe){var y=a.__iterator(l,d);return new V(function(){var p=y.next();if(!p.done){var _=p.value[0];p.value[0]=p.value[1],p.value[1]=_}return p})}return a.__iterator(l===we?Je:we,d)},s}function Ea(a,s,l){var d=ft(a);return d.size=a.size,d.has=function(y){return a.has(y)},d.get=function(y,p){var _=a.get(y,B);return _===B?p:s.call(l,_,y,a)},d.__iterateUncached=function(y,p){var _=this;return a.__iterate(function(A,T,x){return y(s.call(l,A,T,x),T,_)!==!1},p)},d.__iteratorUncached=function(y,p){var _=a.__iterator(Pe,p);return new V(function(){var A=_.next();if(A.done)return A;var T=A.value,x=T[0];return Q(y,x,s.call(l,T[1],x,a),A)})},d}function kn(a,s){var l=ft(a);return l._iter=a,l.size=a.size,l.reverse=function(){return a},a.flip&&(l.flip=function(){var d=xa(a);return d.reverse=function(){return a.flip()},d}),l.get=function(d,y){return a.get(s?d:-1-d,y)},l.has=function(d){return a.has(s?d:-1-d)},l.includes=function(d){return a.includes(d)},l.cacheResult=Sn,l.__iterate=function(d,y){var p=this;return a.__iterate(function(_,A){return d(_,A,p)},!y)},l.__iterator=function(d,y){return a.__iterator(d,!y)},l}function Na(a,s,l,d){var y=ft(a);return d&&(y.has=function(p){var _=a.get(p,B);return _!==B&&!!s.call(l,_,p,a)},y.get=function(p,_){var A=a.get(p,B);return A!==B&&s.call(l,A,p,a)?A:_}),y.__iterateUncached=function(p,_){var A=this,T=0;return a.__iterate(function(x,b,C){if(s.call(l,x,b,C))return T++,p(x,d?b:T-1,A)},_),T},y.__iteratorUncached=function(p,_){var A=a.__iterator(Pe,_),T=0;return new V(function(){for(;;){var x=A.next();if(x.done)return x;var b=x.value,C=b[0],L=b[1];if(s.call(l,L,C,a))return Q(p,d?C:T++,L,x)}})},y}function Fi(a,s,l){var d=X().asMutable();return a.__iterate(function(y,p){d.update(s.call(l,y,p,a),0,function(_){return _+1})}),d.asImmutable()}function Pi(a,s,l){var d=v(a),y=(g(a)?xe():X()).asMutable();a.__iterate(function(_,A){y.update(s.call(l,_,A,a),function(T){return T=T||[],T.push(d?[A,_]:_),T})});var p=Ca(a);return y.map(function(_){return fe(a,p(_))})}function _n(a,s,l,d){var y=a.size;if(s!==void 0&&(s=s|0),l!==void 0&&(l===1/0?l=y:l=l|0),re(s,l,y))return a;var p=Z(s,y),_=K(l,y);if(p!==p||_!==_)return _n(a.toSeq().cacheResult(),s,l,d);var A=_-p,T;A===A&&(T=A<0?0:A);var x=ft(a);return x.size=T===0?T:a.size&&T||void 0,!d&&nr(a)&&T>=0&&(x.get=function(b,C){return b=ve(this,b),b>=0&&b<T?a.get(b+p,C):C}),x.__iterateUncached=function(b,C){var L=this;if(T===0)return 0;if(C)return this.cacheResult().__iterate(b,C);var J=0,W=!0,ke=0;return a.__iterate(function(it,dt){if(!(W&&(W=J++<p)))return ke++,b(it,d?dt:ke-1,L)!==!1&&ke!==T}),ke},x.__iteratorUncached=function(b,C){if(T!==0&&C)return this.cacheResult().__iterator(b,C);var L=T!==0&&a.__iterator(b,C),J=0,W=0;return new V(function(){for(;J++<p;)L.next();if(++W>T)return ge();var ke=L.next();return d||b===we?ke:b===Je?Q(b,W-1,void 0,ke):Q(b,W-1,ke.value[1],ke)})},x}function Bi(a,s,l){var d=ft(a);return d.__iterateUncached=function(y,p){var _=this;if(p)return this.cacheResult().__iterate(y,p);var A=0;return a.__iterate(function(T,x,b){return s.call(l,T,x,b)&&++A&&y(T,x,_)}),A},d.__iteratorUncached=function(y,p){var _=this;if(p)return this.cacheResult().__iterator(y,p);var A=a.__iterator(Pe,p),T=!0;return new V(function(){if(!T)return ge();var x=A.next();if(x.done)return x;var b=x.value,C=b[0],L=b[1];return s.call(l,L,C,_)?y===Pe?x:Q(y,C,L,x):(T=!1,ge())})},d}function ba(a,s,l,d){var y=ft(a);return y.__iterateUncached=function(p,_){var A=this;if(_)return this.cacheResult().__iterate(p,_);var T=!0,x=0;return a.__iterate(function(b,C,L){if(!(T&&(T=s.call(l,b,C,L))))return x++,p(b,d?C:x-1,A)}),x},y.__iteratorUncached=function(p,_){var A=this;if(_)return this.cacheResult().__iterator(p,_);var T=a.__iterator(Pe,_),x=!0,b=0;return new V(function(){var C,L,J;do{if(C=T.next(),C.done)return d||p===we?C:p===Je?Q(p,b++,void 0,C):Q(p,b++,C.value[1],C);var W=C.value;L=W[0],J=W[1],x&&(x=s.call(l,J,L,A))}while(x);return p===Pe?C:Q(p,L,J,C)})},y}function Ii(a,s){var l=v(a),d=[a].concat(s).map(function(_){return f(_)?l&&(_=i(_)):_=l?_r(_):Nt(Array.isArray(_)?_:[_]),_}).filter(function(_){return _.size!==0});if(d.length===0)return a;if(d.length===1){var y=d[0];if(y===a||l&&v(y)||h(a)&&h(y))return y}var p=new Xe(d);return l?p=p.toKeyedSeq():h(a)||(p=p.toSetSeq()),p=p.flatten(!0),p.size=d.reduce(function(_,A){if(_!==void 0){var T=A.size;if(T!==void 0)return _+T}},0),p}function Fa(a,s,l){var d=ft(a);return d.__iterateUncached=function(y,p){var _=0,A=!1;function T(x,b){var C=this;x.__iterate(function(L,J){return(!s||b<s)&&f(L)?T(L,b+1):y(L,l?J:_++,C)===!1&&(A=!0),!A},p)}return T(a,0),_},d.__iteratorUncached=function(y,p){var _=a.__iterator(y,p),A=[],T=0;return new V(function(){for(;_;){var x=_.next();if(x.done!==!1){_=A.pop();continue}var b=x.value;if(y===Pe&&(b=b[1]),(!s||A.length<s)&&f(b))A.push(_),_=b.__iterator(y,p);else return l?x:Q(y,T++,b,x)}return ge()})},d}function Ci(a,s,l){var d=Ca(a);return a.toSeq().map(function(y,p){return d(s.call(l,y,p,a))}).flatten(!0)}function Ri(a,s){var l=ft(a);return l.size=a.size&&a.size*2-1,l.__iterateUncached=function(d,y){var p=this,_=0;return a.__iterate(function(A,T){return(!_||d(s,_++,p)!==!1)&&d(A,_++,p)!==!1},y),_},l.__iteratorUncached=function(d,y){var p=a.__iterator(we,y),_=0,A;return new V(function(){return(!A||_%2)&&(A=p.next(),A.done)?A:_%2?Q(d,_++,s):Q(d,_++,A.value,A)})},l}function Jt(a,s,l){s||(s=Ra);var d=v(a),y=0,p=a.toSeq().map(function(_,A){return[A,_,y++,l?l(_,A,a):_]}).toArray();return p.sort(function(_,A){return s(_[3],A[3])||_[2]-A[2]}).forEach(d?function(_,A){p[A].length=2}:function(_,A){p[A]=_[1]}),d?Be(p):h(a)?ne(p):Ue(p)}function br(a,s,l){if(s||(s=Ra),l){var d=a.toSeq().map(function(y,p){return[y,l(y,p,a)]}).reduce(function(y,p){return Pa(s,y[1],p[1])?p:y});return d&&d[0]}else return a.reduce(function(y,p){return Pa(s,y,p)?p:y})}function Pa(a,s,l){var d=a(l,s);return d===0&&l!==s&&(l==null||l!==l)||d>0}function An(a,s,l){var d=ft(a);return d.size=new Xe(l).map(function(y){return y.size}).min(),d.__iterate=function(y,p){for(var _=this.__iterator(we,p),A,T=0;!(A=_.next()).done&&y(A.value,T++,this)!==!1;);return T},d.__iteratorUncached=function(y,p){var _=l.map(function(x){return x=o(x),at(p?x.reverse():x)}),A=0,T=!1;return new V(function(){var x;return T||(x=_.map(function(b){return b.next()}),T=x.some(function(b){return b.done})),T?ge():Q(y,A++,s.apply(null,x.map(function(b){return b.value})))})},d}function fe(a,s){return nr(a)?s:a.constructor(s)}function Ba(a){if(a!==Object(a))throw new TypeError("Expected [K, V] tuple: "+a)}function Ia(a){return We(a.size),ue(a)}function Ca(a){return v(a)?i:h(a)?u:c}function ft(a){return Object.create((v(a)?Be:h(a)?ne:Ue).prototype)}function Sn(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Ae.prototype.cacheResult.call(this)}function Ra(a,s){return a>s?1:a<s?-1:0}function Ma(a){var s=at(a);if(!s){if(!Ct(a))throw new TypeError("Expected iterable or array-like: "+a);s=at(o(a))}return s}e(Ge,ar);function Ge(a,s){var l,d=function(_){if(_ instanceof d)return _;if(!(this instanceof d))return new d(_);if(!l){l=!0;var A=Object.keys(a);Mi(y,A),y.size=A.length,y._name=s,y._keys=A,y._defaultValues=a}this._map=X(_)},y=d.prototype=Object.create(Ce);return y.constructor=d,d}Ge.prototype.toString=function(){return this.__toString(La(this)+" {","}")},Ge.prototype.has=function(a){return this._defaultValues.hasOwnProperty(a)},Ge.prototype.get=function(a,s){if(!this.has(a))return s;var l=this._defaultValues[a];return this._map?this._map.get(a,l):l},Ge.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var a=this.constructor;return a._empty||(a._empty=Fr(this,ot()))},Ge.prototype.set=function(a,s){if(!this.has(a))throw new Error('Cannot set unknown key "'+a+'" on '+La(this));if(this._map&&!this._map.has(a)){var l=this._defaultValues[a];if(s===l)return this}var d=this._map&&this._map.set(a,s);return this.__ownerID||d===this._map?this:Fr(this,d)},Ge.prototype.remove=function(a){if(!this.has(a))return this;var s=this._map&&this._map.remove(a);return this.__ownerID||s===this._map?this:Fr(this,s)},Ge.prototype.wasAltered=function(){return this._map.wasAltered()},Ge.prototype.__iterator=function(a,s){var l=this;return i(this._defaultValues).map(function(d,y){return l.get(y)}).__iterator(a,s)},Ge.prototype.__iterate=function(a,s){var l=this;return i(this._defaultValues).map(function(d,y){return l.get(y)}).__iterate(a,s)},Ge.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var s=this._map&&this._map.__ensureOwner(a);return a?Fr(this,s,a):(this.__ownerID=a,this._map=s,this)};var Ce=Ge.prototype;Ce[P]=Ce.remove,Ce.deleteIn=Ce.removeIn=Y.removeIn,Ce.merge=Y.merge,Ce.mergeWith=Y.mergeWith,Ce.mergeIn=Y.mergeIn,Ce.mergeDeep=Y.mergeDeep,Ce.mergeDeepWith=Y.mergeDeepWith,Ce.mergeDeepIn=Y.mergeDeepIn,Ce.setIn=Y.setIn,Ce.update=Y.update,Ce.updateIn=Y.updateIn,Ce.withMutations=Y.withMutations,Ce.asMutable=Y.asMutable,Ce.asImmutable=Y.asImmutable;function Fr(a,s,l){var d=Object.create(Object.getPrototypeOf(a));return d._map=s,d.__ownerID=l,d}function La(a){return a._name||a.constructor.name||"Record"}function Mi(a,s){try{s.forEach(Li.bind(void 0,a))}catch{}}function Li(a,s){Object.defineProperty(a,s,{get:function(){return this.get(s)},set:function(l){Tr(this.__ownerID,"Cannot set on an immutable record."),this.set(s,l)}})}e(pe,Or);function pe(a){return a==null?On():wn(a)&&!g(a)?a:On().withMutations(function(s){var l=c(a);We(l.size),l.forEach(function(d){return s.add(d)})})}pe.of=function(){return this(arguments)},pe.fromKeys=function(a){return this(i(a).keySeq())},pe.prototype.toString=function(){return this.__toString("Set {","}")},pe.prototype.has=function(a){return this._map.has(a)},pe.prototype.add=function(a){return Tn(this,this._map.set(a,!0))},pe.prototype.remove=function(a){return Tn(this,this._map.remove(a))},pe.prototype.clear=function(){return Tn(this,this._map.clear())},pe.prototype.union=function(){var a=t.call(arguments,0);return a=a.filter(function(s){return s.size!==0}),a.length===0?this:this.size===0&&!this.__ownerID&&a.length===1?this.constructor(a[0]):this.withMutations(function(s){for(var l=0;l<a.length;l++)c(a[l]).forEach(function(d){return s.add(d)})})},pe.prototype.intersect=function(){var a=t.call(arguments,0);if(a.length===0)return this;a=a.map(function(l){return c(l)});var s=this;return this.withMutations(function(l){s.forEach(function(d){a.every(function(y){return y.includes(d)})||l.remove(d)})})},pe.prototype.subtract=function(){var a=t.call(arguments,0);if(a.length===0)return this;a=a.map(function(l){return c(l)});var s=this;return this.withMutations(function(l){s.forEach(function(d){a.some(function(y){return y.includes(d)})&&l.remove(d)})})},pe.prototype.merge=function(){return this.union.apply(this,arguments)},pe.prototype.mergeWith=function(a){var s=t.call(arguments,1);return this.union.apply(this,s)},pe.prototype.sort=function(a){return lt(Jt(this,a))},pe.prototype.sortBy=function(a,s){return lt(Jt(this,s,a))},pe.prototype.wasAltered=function(){return this._map.wasAltered()},pe.prototype.__iterate=function(a,s){var l=this;return this._map.__iterate(function(d,y){return a(y,y,l)},s)},pe.prototype.__iterator=function(a,s){return this._map.map(function(l,d){return d}).__iterator(a,s)},pe.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var s=this._map.__ensureOwner(a);return a?this.__make(s,a):(this.__ownerID=a,this._map=s,this)};function wn(a){return!!(a&&a[za])}pe.isSet=wn;var za="@@__IMMUTABLE_SET__@@",Ye=pe.prototype;Ye[za]=!0,Ye[P]=Ye.remove,Ye.mergeDeep=Ye.merge,Ye.mergeDeepWith=Ye.mergeWith,Ye.withMutations=Y.withMutations,Ye.asMutable=Y.asMutable,Ye.asImmutable=Y.asImmutable,Ye.__empty=On,Ye.__make=$a;function Tn(a,s){return a.__ownerID?(a.size=s.size,a._map=s,a):s===a._map?a:s.size===0?a.__empty():a.__make(s)}function $a(a,s){var l=Object.create(Ye);return l.size=a?a.size:0,l._map=a,l.__ownerID=s,l}var Da;function On(){return Da||(Da=$a(ot()))}e(lt,pe);function lt(a){return a==null?xn():ja(a)?a:xn().withMutations(function(s){var l=c(a);We(l.size),l.forEach(function(d){return s.add(d)})})}lt.of=function(){return this(arguments)},lt.fromKeys=function(a){return this(i(a).keySeq())},lt.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function ja(a){return wn(a)&&g(a)}lt.isOrderedSet=ja;var Pr=lt.prototype;Pr[O]=!0,Pr.__empty=xn,Pr.__make=qa;function qa(a,s){var l=Object.create(Pr);return l.size=a?a.size:0,l._map=a,l.__ownerID=s,l}var Ja;function xn(){return Ja||(Ja=qa(Nr()))}e(be,Mt);function be(a){return a==null?En():Ka(a)?a:En().unshiftAll(a)}be.of=function(){return this(arguments)},be.prototype.toString=function(){return this.__toString("Stack [","]")},be.prototype.get=function(a,s){var l=this._head;for(a=ve(this,a);l&&a--;)l=l.next;return l?l.value:s},be.prototype.peek=function(){return this._head&&this._head.value},be.prototype.push=function(){if(arguments.length===0)return this;for(var a=this.size+arguments.length,s=this._head,l=arguments.length-1;l>=0;l--)s={value:arguments[l],next:s};return this.__ownerID?(this.size=a,this._head=s,this.__hash=void 0,this.__altered=!0,this):lr(a,s)},be.prototype.pushAll=function(a){if(a=u(a),a.size===0)return this;We(a.size);var s=this.size,l=this._head;return a.reverse().forEach(function(d){s++,l={value:d,next:l}}),this.__ownerID?(this.size=s,this._head=l,this.__hash=void 0,this.__altered=!0,this):lr(s,l)},be.prototype.pop=function(){return this.slice(1)},be.prototype.unshift=function(){return this.push.apply(this,arguments)},be.prototype.unshiftAll=function(a){return this.pushAll(a)},be.prototype.shift=function(){return this.pop.apply(this,arguments)},be.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):En()},be.prototype.slice=function(a,s){if(re(a,s,this.size))return this;var l=Z(a,this.size),d=K(s,this.size);if(d!==this.size)return Mt.prototype.slice.call(this,a,s);for(var y=this.size-l,p=this._head;l--;)p=p.next;return this.__ownerID?(this.size=y,this._head=p,this.__hash=void 0,this.__altered=!0,this):lr(y,p)},be.prototype.__ensureOwner=function(a){return a===this.__ownerID?this:a?lr(this.size,this._head,a,this.__hash):(this.__ownerID=a,this.__altered=!1,this)},be.prototype.__iterate=function(a,s){if(s)return this.reverse().__iterate(a);for(var l=0,d=this._head;d&&a(d.value,l++,this)!==!1;)d=d.next;return l},be.prototype.__iterator=function(a,s){if(s)return this.reverse().__iterator(a);var l=0,d=this._head;return new V(function(){if(d){var y=d.value;return d=d.next,Q(a,l++,y)}return ge()})};function Ka(a){return!!(a&&a[Ua])}be.isStack=Ka;var Ua="@@__IMMUTABLE_STACK__@@",Kt=be.prototype;Kt[Ua]=!0,Kt.withMutations=Y.withMutations,Kt.asMutable=Y.asMutable,Kt.asImmutable=Y.asImmutable,Kt.wasAltered=Y.wasAltered;function lr(a,s,l,d){var y=Object.create(Kt);return y.size=a,y._head=s,y.__ownerID=l,y.__hash=d,y.__altered=!1,y}var Va;function En(){return Va||(Va=lr(0))}function vt(a,s){var l=function(d){a.prototype[d]=s[d]};return Object.keys(s).forEach(l),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(s).forEach(l),a}o.Iterator=V,vt(o,{toArray:function(){We(this.size);var a=new Array(this.size||0);return this.valueSeq().__iterate(function(s,l){a[l]=s}),a},toIndexedSeq:function(){return new Dt(this)},toJS:function(){return this.toSeq().map(function(a){return a&&typeof a.toJS=="function"?a.toJS():a}).__toJS()},toJSON:function(){return this.toSeq().map(function(a){return a&&typeof a.toJSON=="function"?a.toJSON():a}).__toJS()},toKeyedSeq:function(){return new et(this,!0)},toMap:function(){return X(this.toKeyedSeq())},toObject:function(){We(this.size);var a={};return this.__iterate(function(s,l){a[l]=s}),a},toOrderedMap:function(){return xe(this.toKeyedSeq())},toOrderedSet:function(){return lt(v(this)?this.valueSeq():this)},toSet:function(){return pe(v(this)?this.valueSeq():this)},toSetSeq:function(){return new jt(this)},toSeq:function(){return h(this)?this.toIndexedSeq():v(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return be(v(this)?this.valueSeq():this)},toList:function(){return me(v(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(a,s){return this.size===0?a+s:a+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+s},concat:function(){var a=t.call(arguments,0);return fe(this,Ii(this,a))},includes:function(a){return this.some(function(s){return Ne(s,a)})},entries:function(){return this.__iterator(Pe)},every:function(a,s){We(this.size);var l=!0;return this.__iterate(function(d,y,p){if(!a.call(s,d,y,p))return l=!1,!1}),l},filter:function(a,s){return fe(this,Na(this,a,s,!0))},find:function(a,s,l){var d=this.findEntry(a,s);return d?d[1]:l},forEach:function(a,s){return We(this.size),this.__iterate(s?a.bind(s):a)},join:function(a){We(this.size),a=a!==void 0?""+a:",";var s="",l=!0;return this.__iterate(function(d){l?l=!1:s+=a,s+=d!=null?d.toString():""}),s},keys:function(){return this.__iterator(Je)},map:function(a,s){return fe(this,Ea(this,a,s))},reduce:function(a,s,l){We(this.size);var d,y;return arguments.length<2?y=!0:d=s,this.__iterate(function(p,_,A){y?(y=!1,d=p):d=a.call(l,d,p,_,A)}),d},reduceRight:function(a,s,l){var d=this.toKeyedSeq().reverse();return d.reduce.apply(d,arguments)},reverse:function(){return fe(this,kn(this,!0))},slice:function(a,s){return fe(this,_n(this,a,s,!0))},some:function(a,s){return!this.every(Ir(a),s)},sort:function(a){return fe(this,Jt(this,a))},values:function(){return this.__iterator(we)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(a,s){return ue(a?this.toSeq().filter(a,s):this)},countBy:function(a,s){return Fi(this,a,s)},equals:function(a){return Xr(this,a)},entrySeq:function(){var a=this;if(a._cache)return new Xe(a._cache);var s=a.toSeq().map($i).toIndexedSeq();return s.fromEntrySeq=function(){return a.toSeq()},s},filterNot:function(a,s){return this.filter(Ir(a),s)},findEntry:function(a,s,l){var d=l;return this.__iterate(function(y,p,_){if(a.call(s,y,p,_))return d=[p,y],!1}),d},findKey:function(a,s){var l=this.findEntry(a,s);return l&&l[0]},findLast:function(a,s,l){return this.toKeyedSeq().reverse().find(a,s,l)},findLastEntry:function(a,s,l){return this.toKeyedSeq().reverse().findEntry(a,s,l)},findLastKey:function(a,s){return this.toKeyedSeq().reverse().findKey(a,s)},first:function(){return this.find(H)},flatMap:function(a,s){return fe(this,Ci(this,a,s))},flatten:function(a){return fe(this,Fa(this,a,!0))},fromEntrySeq:function(){return new qt(this)},get:function(a,s){return this.find(function(l,d){return Ne(d,a)},void 0,s)},getIn:function(a,s){for(var l=this,d=Ma(a),y;!(y=d.next()).done;){var p=y.value;if(l=l&&l.get?l.get(p,B):B,l===B)return s}return l},groupBy:function(a,s){return Pi(this,a,s)},has:function(a){return this.get(a,B)!==B},hasIn:function(a){return this.getIn(a,B)!==B},isSubset:function(a){return a=typeof a.includes=="function"?a:o(a),this.every(function(s){return a.includes(s)})},isSuperset:function(a){return a=typeof a.isSubset=="function"?a:o(a),a.isSubset(this)},keyOf:function(a){return this.findKey(function(s){return Ne(s,a)})},keySeq:function(){return this.toSeq().map(zi).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(a){return this.toKeyedSeq().reverse().keyOf(a)},max:function(a){return br(this,a)},maxBy:function(a,s){return br(this,s,a)},min:function(a){return br(this,a?Wa(a):Ya)},minBy:function(a,s){return br(this,s?Wa(s):Ya,a)},rest:function(){return this.slice(1)},skip:function(a){return this.slice(Math.max(0,a))},skipLast:function(a){return fe(this,this.toSeq().reverse().skip(a).reverse())},skipWhile:function(a,s){return fe(this,ba(this,a,s,!0))},skipUntil:function(a,s){return this.skipWhile(Ir(a),s)},sortBy:function(a,s){return fe(this,Jt(this,s,a))},take:function(a){return this.slice(0,Math.max(0,a))},takeLast:function(a){return fe(this,this.toSeq().reverse().take(a).reverse())},takeWhile:function(a,s){return fe(this,Bi(this,a,s))},takeUntil:function(a,s){return this.takeWhile(Ir(a),s)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=ji(this))}});var ze=o.prototype;ze[k]=!0,ze[Ke]=ze.values,ze.__toJS=ze.toArray,ze.__toStringMapper=Ga,ze.inspect=ze.toSource=function(){return this.toString()},ze.chain=ze.flatMap,ze.contains=ze.includes,vt(i,{flip:function(){return fe(this,xa(this))},mapEntries:function(a,s){var l=this,d=0;return fe(this,this.toSeq().map(function(y,p){return a.call(s,[p,y],d++,l)}).fromEntrySeq())},mapKeys:function(a,s){var l=this;return fe(this,this.toSeq().flip().map(function(d,y){return a.call(s,d,y,l)}).flip())}});var Br=i.prototype;Br[w]=!0,Br[Ke]=ze.entries,Br.__toJS=ze.toObject,Br.__toStringMapper=function(a,s){return JSON.stringify(s)+": "+Ga(a)},vt(u,{toKeyedSeq:function(){return new et(this,!1)},filter:function(a,s){return fe(this,Na(this,a,s,!1))},findIndex:function(a,s){var l=this.findEntry(a,s);return l?l[0]:-1},indexOf:function(a){var s=this.keyOf(a);return s===void 0?-1:s},lastIndexOf:function(a){var s=this.lastKeyOf(a);return s===void 0?-1:s},reverse:function(){return fe(this,kn(this,!1))},slice:function(a,s){return fe(this,_n(this,a,s,!1))},splice:function(a,s){var l=arguments.length;if(s=Math.max(s|0,0),l===0||l===2&&!s)return this;a=Z(a,a<0?this.count():this.size);var d=this.slice(0,a);return fe(this,l===1?d:d.concat(j(arguments,2),this.slice(a+s)))},findLastIndex:function(a,s){var l=this.findLastEntry(a,s);return l?l[0]:-1},first:function(){return this.get(0)},flatten:function(a){return fe(this,Fa(this,a,!1))},get:function(a,s){return a=ve(this,a),a<0||this.size===1/0||this.size!==void 0&&a>this.size?s:this.find(function(l,d){return d===a},void 0,s)},has:function(a){return a=ve(this,a),a>=0&&(this.size!==void 0?this.size===1/0||a<this.size:this.indexOf(a)!==-1)},interpose:function(a){return fe(this,Ri(this,a))},interleave:function(){var a=[this].concat(j(arguments)),s=An(this.toSeq(),ne.of,a),l=s.flatten(!0);return s.size&&(l.size=s.size*a.length),fe(this,l)},keySeq:function(){return Ie(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(a,s){return fe(this,ba(this,a,s,!1))},zip:function(){var a=[this].concat(j(arguments));return fe(this,An(this,Di,a))},zipWith:function(a){var s=j(arguments);return s[0]=this,fe(this,An(this,a,s))}}),u.prototype[E]=!0,u.prototype[O]=!0,vt(c,{get:function(a,s){return this.has(a)?a:s},includes:function(a){return this.has(a)},keySeq:function(){return this.valueSeq()}}),c.prototype.has=ze.includes,c.prototype.contains=c.prototype.includes,vt(Be,i.prototype),vt(ne,u.prototype),vt(Ue,c.prototype),vt(ar,i.prototype),vt(Mt,u.prototype),vt(Or,c.prototype);function zi(a,s){return s}function $i(a,s){return[s,a]}function Ir(a){return function(){return!a.apply(this,arguments)}}function Wa(a){return function(){return-a.apply(this,arguments)}}function Ga(a){return typeof a=="string"?JSON.stringify(a):String(a)}function Di(){return j(arguments)}function Ya(a,s){return a<s?1:a>s?-1:0}function ji(a){if(a.size===1/0)return 0;var s=g(a),l=v(a),d=s?1:0,y=a.__iterate(l?s?function(p,_){d=31*d+Ha(Ve(p),Ve(_))|0}:function(p,_){d=d+Ha(Ve(p),Ve(_))|0}:s?function(p){d=31*d+Ve(p)|0}:function(p){d=d+Ve(p)|0});return qi(y,d)}function qi(a,s){return s=or(s,3432918353),s=or(s<<15|s>>>-15,461845907),s=or(s<<13|s>>>-13,5),s=(s+3864292196|0)^a,s=or(s^s>>>16,2246822507),s=or(s^s>>>13,3266489909),s=rn(s^s>>>16),s}function Ha(a,s){return a^s+2654435769+(a<<6)+(a>>2)|0}var Ji={Iterable:o,Seq:Ae,Collection:At,Map:X,OrderedMap:xe,List:me,Stack:be,Set:pe,OrderedSet:lt,Record:Ge,Range:Ie,Repeat:Me,is:Ne,fromJS:Hr};return Ji})})(Vo);var N=Vo.exports;/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Ss=function(n){return n!=null&&typeof n=="object"&&Array.isArray(n)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var ws=Ss;function Qa(r){return ws(r)===!0&&Object.prototype.toString.call(r)==="[object Object]"}var Ts=function(n){var t,e;return!(Qa(n)===!1||(t=n.constructor,typeof t!="function")||(e=t.prototype,Qa(e)===!1)||e.hasOwnProperty("isPrototypeOf")===!1)};const he=mr(Ts);var Os=function(r,n){};const $=Os;var xs=!0,Xa="Invariant failed";function tt(r,n){if(!r)throw xs?new Error(Xa):new Error(Xa+": "+(n||""))}var zn={exports:{}},Nn,eo;function Es(){if(eo)return Nn;eo=1;var r=1e3,n=r*60,t=n*60,e=t*24,o=e*7,i=e*365.25;Nn=function(h,m){m=m||{};var g=typeof h;if(g==="string"&&h.length>0)return u(h);if(g==="number"&&isFinite(h))return m.long?f(h):c(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function u(h){if(h=String(h),!(h.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(m){var g=parseFloat(m[1]),k=(m[2]||"ms").toLowerCase();switch(k){case"years":case"year":case"yrs":case"yr":case"y":return g*i;case"weeks":case"week":case"w":return g*o;case"days":case"day":case"d":return g*e;case"hours":case"hour":case"hrs":case"hr":case"h":return g*t;case"minutes":case"minute":case"mins":case"min":case"m":return g*n;case"seconds":case"second":case"secs":case"sec":case"s":return g*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function c(h){var m=Math.abs(h);return m>=e?Math.round(h/e)+"d":m>=t?Math.round(h/t)+"h":m>=n?Math.round(h/n)+"m":m>=r?Math.round(h/r)+"s":h+"ms"}function f(h){var m=Math.abs(h);return m>=e?v(h,m,e,"day"):m>=t?v(h,m,t,"hour"):m>=n?v(h,m,n,"minute"):m>=r?v(h,m,r,"second"):h+" ms"}function v(h,m,g,k){var w=m>=g*1.5;return Math.round(h/g)+" "+k+(w?"s":"")}return Nn}function Ns(r){t.debug=t,t.default=t,t.coerce=f,t.disable=u,t.enable=i,t.enabled=c,t.humanize=Es(),Object.keys(r).forEach(function(v){t[v]=r[v]}),t.instances=[],t.names=[],t.skips=[],t.formatters={};function n(v){for(var h=0,m=0;m<v.length;m++)h=(h<<5)-h+v.charCodeAt(m),h|=0;return t.colors[Math.abs(h)%t.colors.length]}t.selectColor=n;function t(v){var h;function m(){if(m.enabled){for(var g=arguments.length,k=new Array(g),w=0;w<g;w++)k[w]=arguments[w];var E=m,O=Number(new Date),P=O-(h||O);E.diff=P,E.prev=h,E.curr=O,h=O,k[0]=t.coerce(k[0]),typeof k[0]!="string"&&k.unshift("%O");var F=0;k[0]=k[0].replace(/%([a-zA-Z%])/g,function(M,B){if(M==="%%")return M;F++;var D=t.formatters[B];if(typeof D=="function"){var te=k[F];M=D.call(E,te),k.splice(F,1),F--}return M}),t.formatArgs.call(E,k);var z=E.log||t.log;z.apply(E,k)}}return m.namespace=v,m.enabled=t.enabled(v),m.useColors=t.useColors(),m.color=n(v),m.destroy=e,m.extend=o,typeof t.init=="function"&&t.init(m),t.instances.push(m),m}function e(){var v=t.instances.indexOf(this);return v!==-1?(t.instances.splice(v,1),!0):!1}function o(v,h){return t(this.namespace+(typeof h>"u"?":":h)+v)}function i(v){t.save(v),t.names=[],t.skips=[];var h,m=(typeof v=="string"?v:"").split(/[\s,]+/),g=m.length;for(h=0;h<g;h++)m[h]&&(v=m[h].replace(/\*/g,".*?"),v[0]==="-"?t.skips.push(new RegExp("^"+v.substr(1)+"$")):t.names.push(new RegExp("^"+v+"$")));for(h=0;h<t.instances.length;h++){var k=t.instances[h];k.enabled=t.enabled(k.namespace)}}function u(){t.enable("")}function c(v){if(v[v.length-1]==="*")return!0;var h,m;for(h=0,m=t.skips.length;h<m;h++)if(t.skips[h].test(v))return!1;for(h=0,m=t.names.length;h<m;h++)if(t.names[h].test(v))return!0;return!1}function f(v){return v instanceof Error?v.stack||v.message:v}return t.enable(t.load()),t}var bs=Ns;(function(r,n){function t(h){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(g){return typeof g}:t=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},t(h)}n.log=i,n.formatArgs=o,n.save=u,n.load=c,n.useColors=e,n.storage=f(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function e(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(h){if(h[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+h[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!!this.useColors){var m="color: "+this.color;h.splice(1,0,m,"color: inherit");var g=0,k=0;h[0].replace(/%[a-zA-Z%]/g,function(w){w!=="%%"&&(g++,w==="%c"&&(k=g))}),h.splice(k,0,m)}}function i(){var h;return(typeof console>"u"?"undefined":t(console))==="object"&&console.log&&(h=console).log.apply(h,arguments)}function u(h){try{h?n.storage.setItem("debug",h):n.storage.removeItem("debug")}catch{}}function c(){var h;try{h=n.storage.getItem("debug")}catch{}return!h&&typeof process<"u"&&"env"in process&&(h={}.DEBUG),h}function f(){try{return localStorage}catch{}}r.exports=bs(n);var v=r.exports.formatters;v.j=function(h){try{return JSON.stringify(h)}catch(m){return"[UnexpectedJSONParseError]: "+m.message}}})(zn,zn.exports);var Fs=zn.exports;const Jn=mr(Fs);var Dr={exports:{}};/*! https://mths.be/esrever v0.2.0 by @mathias */Dr.exports;(function(r,n){(function(t){var e=n,o=r&&r.exports==e&&r,i=typeof Lr=="object"&&Lr;(i.global===i||i.window===i)&&(t=i);var u=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,c=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g,f=function(m){m=m.replace(u,function(w,E,O){return f(O)+E}).replace(c,"$2$1");for(var g="",k=m.length;k--;)g+=m.charAt(k);return g},v={version:"0.2.0",reverse:f};if(e&&!e.nodeType)if(o)o.exports=v;else for(var h in v)v.hasOwnProperty(h)&&(e[h]=v[h]);else t.esrever=v})(Lr)})(Dr,Dr.exports);var Wo=Dr.exports,Ps=Ro,Bs=Qi,Is=Object.prototype,Cs=Is.hasOwnProperty;function Rs(r,n,t){var e=r[n];(!(Cs.call(r,n)&&Bs(e,t))||t===void 0&&!(n in r))&&Ps(r,n,t)}var Kn=Rs,Ms=Kn,Ls=Kr,zs=Xi,to=Jr,$s=Mo;function Ds(r,n,t,e){if(!to(r))return r;n=Ls(n,r);for(var o=-1,i=n.length,u=i-1,c=r;c!=null&&++o<i;){var f=$s(n[o]),v=t;if(f==="__proto__"||f==="constructor"||f==="prototype")return r;if(o!=u){var h=c[f];v=e?e(h,f,c):void 0,v===void 0&&(v=to(h)?h:zs(n[o+1])?[]:{})}Ms(c,f,v),c=c[f]}return r}var js=Ds,qs=Lo,Js=js,Ks=Kr;function Us(r,n,t){for(var e=-1,o=n.length,i={};++e<o;){var u=n[e],c=qs(r,u);t(c,u)&&Js(i,Ks(u,r),c)}return i}var Vs=Us,Ws=Vs,Gs=es;function Ys(r,n){return Ws(r,n,function(t,e){return Gs(r,e)})}var Hs=Ys,ro=Io,Zs=ts,Qs=zo,no=ro?ro.isConcatSpreadable:void 0;function Xs(r){return Qs(r)||Zs(r)||!!(no&&r&&r[no])}var eu=Xs,tu=$o,ru=eu;function Go(r,n,t,e,o){var i=-1,u=r.length;for(t||(t=ru),o||(o=[]);++i<u;){var c=r[i];n>0&&t(c)?n>1?Go(c,n-1,t,e,o):tu(o,c):e||(o[o.length]=c)}return o}var nu=Go,au=nu;function ou(r){var n=r==null?0:r.length;return n?au(r,1):[]}var iu=ou;function su(r,n,t){switch(t.length){case 0:return r.call(n);case 1:return r.call(n,t[0]);case 2:return r.call(n,t[0],t[1]);case 3:return r.call(n,t[0],t[1],t[2])}return r.apply(n,t)}var uu=su,cu=uu,ao=Math.max;function fu(r,n,t){return n=ao(n===void 0?r.length-1:n,0),function(){for(var e=arguments,o=-1,i=ao(e.length-n,0),u=Array(i);++o<i;)u[o]=e[n+o];o=-1;for(var c=Array(n+1);++o<n;)c[o]=e[o];return c[n]=t(u),cu(r,this,c)}}var lu=fu;function vu(r){return function(){return r}}var du=vu,hu=du,oo=rs,mu=ns,yu=oo?function(r,n){return oo(r,"toString",{configurable:!0,enumerable:!1,value:hu(n),writable:!0})}:mu,gu=yu,pu=800,ku=16,_u=Date.now;function Au(r){var n=0,t=0;return function(){var e=_u(),o=ku-(e-t);if(t=e,o>0){if(++n>=pu)return arguments[0]}else n=0;return r.apply(void 0,arguments)}}var Su=Au,wu=gu,Tu=Su,Ou=Tu(wu),xu=Ou,Eu=iu,Nu=lu,bu=xu;function Fu(r){return bu(Nu(r,void 0,Eu),r+"")}var Yo=Fu,Pu=Hs,Bu=Yo,Iu=Bu(function(r,n){return r==null?{}:Pu(r,n)}),Cu=Iu;const hr=mr(Cu);function Ru(r,n){for(var t=-1,e=r==null?0:r.length;++t<e&&n(r[t],t,r)!==!1;);return r}var Mu=Ru,Lu=Kn,zu=Ro;function $u(r,n,t,e){var o=!t;t||(t={});for(var i=-1,u=n.length;++i<u;){var c=n[i],f=e?e(t[c],r[c],c,t,r):void 0;f===void 0&&(f=r[c]),o?zu(t,c,f):Lu(t,c,f)}return t}var yr=$u,Du=yr,ju=Do;function qu(r,n){return r&&Du(n,ju(n),r)}var Ju=qu;function Ku(r){var n=[];if(r!=null)for(var t in Object(r))n.push(t);return n}var Uu=Ku,Vu=Jr,Wu=jo,Gu=Uu,Yu=Object.prototype,Hu=Yu.hasOwnProperty;function Zu(r){if(!Vu(r))return Gu(r);var n=Wu(r),t=[];for(var e in r)e=="constructor"&&(n||!Hu.call(r,e))||t.push(e);return t}var Qu=Zu,Xu=as,ec=Qu,tc=os;function rc(r){return tc(r)?Xu(r,!0):ec(r)}var Un=rc,nc=yr,ac=Un;function oc(r,n){return r&&nc(n,ac(n),r)}var ic=oc,jr={exports:{}};jr.exports;(function(r,n){var t=Zi,e=n&&!n.nodeType&&n,o=e&&!0&&r&&!r.nodeType&&r,i=o&&o.exports===e,u=i?t.Buffer:void 0,c=u?u.allocUnsafe:void 0;function f(v,h){if(h)return v.slice();var m=v.length,g=c?c(m):new v.constructor(m);return v.copy(g),g}r.exports=f})(jr,jr.exports);var sc=jr.exports;function uc(r,n){var t=-1,e=r.length;for(n||(n=Array(e));++t<e;)n[t]=r[t];return n}var cc=uc,fc=yr,lc=qo;function vc(r,n){return fc(r,lc(r),n)}var dc=vc,hc=$o,mc=Jo,yc=qo,gc=is,pc=Object.getOwnPropertySymbols,kc=pc?function(r){for(var n=[];r;)hc(n,yc(r)),r=mc(r);return n}:gc,Ho=kc,_c=yr,Ac=Ho;function Sc(r,n){return _c(r,Ac(r),n)}var wc=Sc,Tc=ss,Oc=Ho,xc=Un;function Ec(r){return Tc(r,xc,Oc)}var Zo=Ec,Nc=Object.prototype,bc=Nc.hasOwnProperty;function Fc(r){var n=r.length,t=new r.constructor(n);return n&&typeof r[0]=="string"&&bc.call(r,"index")&&(t.index=r.index,t.input=r.input),t}var Pc=Fc,io=us;function Bc(r){var n=new r.constructor(r.byteLength);return new io(n).set(new io(r)),n}var Vn=Bc,Ic=Vn;function Cc(r,n){var t=n?Ic(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}var Rc=Cc,Mc=/\w*$/;function Lc(r){var n=new r.constructor(r.source,Mc.exec(r));return n.lastIndex=r.lastIndex,n}var zc=Lc,so=Io,uo=so?so.prototype:void 0,co=uo?uo.valueOf:void 0;function $c(r){return co?Object(co.call(r)):{}}var Dc=$c,jc=Vn;function qc(r,n){var t=n?jc(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var Jc=qc,Kc=Vn,Uc=Rc,Vc=zc,Wc=Dc,Gc=Jc,Yc="[object Boolean]",Hc="[object Date]",Zc="[object Map]",Qc="[object Number]",Xc="[object RegExp]",ef="[object Set]",tf="[object String]",rf="[object Symbol]",nf="[object ArrayBuffer]",af="[object DataView]",of="[object Float32Array]",sf="[object Float64Array]",uf="[object Int8Array]",cf="[object Int16Array]",ff="[object Int32Array]",lf="[object Uint8Array]",vf="[object Uint8ClampedArray]",df="[object Uint16Array]",hf="[object Uint32Array]";function mf(r,n,t){var e=r.constructor;switch(n){case nf:return Kc(r);case Yc:case Hc:return new e(+r);case af:return Uc(r,t);case of:case sf:case uf:case cf:case ff:case lf:case vf:case df:case hf:return Gc(r,t);case Zc:return new e;case Qc:case tf:return new e(r);case Xc:return Vc(r);case ef:return new e;case rf:return Wc(r)}}var yf=mf,gf=Jr,fo=Object.create,pf=function(){function r(){}return function(n){if(!gf(n))return{};if(fo)return fo(n);r.prototype=n;var t=new r;return r.prototype=void 0,t}}(),kf=pf,_f=kf,Af=Jo,Sf=jo;function wf(r){return typeof r.constructor=="function"&&!Sf(r)?_f(Af(r)):{}}var Tf=wf,Of=qn,xf=Co,Ef="[object Map]";function Nf(r){return xf(r)&&Of(r)==Ef}var bf=Nf,Ff=bf,Pf=Uo,lo=Ko,vo=lo&&lo.isMap,Bf=vo?Pf(vo):Ff,If=Bf,Cf=qn,Rf=Co,Mf="[object Set]";function Lf(r){return Rf(r)&&Cf(r)==Mf}var zf=Lf,$f=zf,Df=Uo,ho=Ko,mo=ho&&ho.isSet,jf=mo?Df(mo):$f,qf=jf,Jf=cs,Kf=Mu,Uf=Kn,Vf=Ju,Wf=ic,Gf=sc,Yf=cc,Hf=dc,Zf=wc,Qf=ls,Xf=Zo,el=qn,tl=Pc,rl=yf,nl=Tf,al=zo,ol=fs,il=If,sl=Jr,ul=qf,cl=Do,fl=Un,ll=1,vl=2,dl=4,Qo="[object Arguments]",hl="[object Array]",ml="[object Boolean]",yl="[object Date]",gl="[object Error]",Xo="[object Function]",pl="[object GeneratorFunction]",kl="[object Map]",_l="[object Number]",ei="[object Object]",Al="[object RegExp]",Sl="[object Set]",wl="[object String]",Tl="[object Symbol]",Ol="[object WeakMap]",xl="[object ArrayBuffer]",El="[object DataView]",Nl="[object Float32Array]",bl="[object Float64Array]",Fl="[object Int8Array]",Pl="[object Int16Array]",Bl="[object Int32Array]",Il="[object Uint8Array]",Cl="[object Uint8ClampedArray]",Rl="[object Uint16Array]",Ml="[object Uint32Array]",de={};de[Qo]=de[hl]=de[xl]=de[El]=de[ml]=de[yl]=de[Nl]=de[bl]=de[Fl]=de[Pl]=de[Bl]=de[kl]=de[_l]=de[ei]=de[Al]=de[Sl]=de[wl]=de[Tl]=de[Il]=de[Cl]=de[Rl]=de[Ml]=!0;de[gl]=de[Xo]=de[Ol]=!1;function zr(r,n,t,e,o,i){var u,c=n&ll,f=n&vl,v=n&dl;if(t&&(u=o?t(r,e,o,i):t(r)),u!==void 0)return u;if(!sl(r))return r;var h=al(r);if(h){if(u=tl(r),!c)return Yf(r,u)}else{var m=el(r),g=m==Xo||m==pl;if(ol(r))return Gf(r,c);if(m==ei||m==Qo||g&&!o){if(u=f||g?{}:nl(r),!c)return f?Zf(r,Wf(u,r)):Hf(r,Vf(u,r))}else{if(!de[m])return o?r:{};u=rl(r,m,c)}}i||(i=new Jf);var k=i.get(r);if(k)return k;i.set(r,u),ul(r)?r.forEach(function(O){u.add(zr(O,n,t,O,r,i))}):il(r)&&r.forEach(function(O,P){u.set(P,zr(O,n,t,P,r,i))});var w=v?f?Xf:Qf:f?fl:cl,E=h?void 0:w(r);return Kf(E||r,function(O,P){E&&(P=O,O=r[P]),Uf(u,P,zr(O,n,t,P,r,i))}),u}var Ll=zr;function zl(r){var n=r==null?0:r.length;return n?r[n-1]:void 0}var $l=zl;function Dl(r,n,t){var e=-1,o=r.length;n<0&&(n=-n>o?0:o+n),t=t>o?o:t,t<0&&(t+=o),o=n>t?0:t-n>>>0,n>>>=0;for(var i=Array(o);++e<o;)i[e]=r[e+n];return i}var jl=Dl,ql=Lo,Jl=jl;function Kl(r,n){return n.length<2?r:ql(r,Jl(n,0,-1))}var Ul=Kl,Vl=Kr,Wl=$l,Gl=Ul,Yl=Mo;function Hl(r,n){return n=Vl(n,r),r=Gl(r,n),r==null||delete r[Yl(Wl(n))]}var Zl=Hl,Ql=vs;function Xl(r){return Ql(r)?void 0:r}var ev=Xl,tv=ds,rv=Ll,nv=Zl,av=Kr,ov=yr,iv=ev,sv=Yo,uv=Zo,cv=1,fv=2,lv=4,vv=sv(function(r,n){var t={};if(r==null)return t;var e=!1;n=tv(n,function(i){return i=av(i,r),e||(e=i.length>1),i}),ov(r,uv(r),t),e&&(t=rv(t,cv|fv|lv,iv));for(var o=n.length;o--;)nv(t,n[o]);return t}),dv=vv;const ti=mr(dv);var Wn,Gn,ri,ni;Wn="A-Za-z--------";Gn="---";ri=new RegExp("^[^"+Gn+"]*["+Wn+"]");ni=new RegExp("^[^"+Wn+"]*["+Gn+"]");function hv(r){return r=r.toString(),ni.test(r)?"rtl":ri.test(r)?"ltr":"neutral"}var mv=hv;const yv=mr(mv);var yo=void 0,Yn=void 0;function gv(r){if(r==null)return Yn();if(typeof r=="string")return r;throw new Error("Keys must be strings, but you passed: "+r)}function pv(r){Yn=r}function ai(){yo=0,Yn=function(){return""+yo++}}ai();var Yt={create:gv,setGenerator:pv,resetGenerator:ai},Hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Se=function(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")},Te=function(){function r(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(n,t,e){return t&&r(n.prototype,t),e&&r(n,e),n}}(),$n=function(r,n,t){return n in r?Object.defineProperty(r,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[n]=t,r},$e=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}return r},je=function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)},Vt=function(r,n){var t={};for(var e in r)n.indexOf(e)>=0||Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t},qe=function(r,n){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:r},R=function(){function r(n,t){var e=[],o=!0,i=!1,u=void 0;try{for(var c=n[Symbol.iterator](),f;!(o=(f=c.next()).done)&&(e.push(f.value),!(t&&e.length===t));o=!0);}catch(v){i=!0,u=v}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return e}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return r(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Fe=function(r){if(Array.isArray(r)){for(var n=0,t=Array(r.length);n<r.length;n++)t[n]=r[n];return t}else return Array.from(r)};function Ur(r,n){for(var t=Vr(r,n),e=0;e<t;e++){var o=r.get(e),i=n.get(e);if(o<i)return-1;if(o>i)return 1}return r.size===n.size?0:null}function oi(r){if(r==null)return null;if(N.List.isList(r))return r;if(Array.isArray(r))return N.List(r);throw new Error("Paths can only be created from arrays or lists, but you passed: "+r)}function Ht(r,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Vr(r,n),e=r.slice(0,t),o=n.slice(0,t);return[e,o]}function Ft(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:r.size-1;return Tt(r,0-n,t)}function kv(r){var n=N.List().withMutations(function(t){for(var e=0;e<r.size;e++)t.push(r.slice(0,e))});return n}function Tt(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:r.size-1,e=r.get(t),o=e+n,i=r.set(t,o);return i}function Dn(r,n){var t=Ht(r,n),e=R(t,2),o=e[0],i=e[1];return r.size<n.size&&Ur(o,i)===0}function _v(r,n){var t=Ht(r,n),e=R(t,2),o=e[0],i=e[1];return Ur(o,i)===1}function Av(r,n){var t=Ht(r,n),e=R(t,2),o=e[0],i=e[1];return Ur(o,i)===-1}function Wt(r,n){return r.equals(n)}function Sv(r,n){var t=r.size-1,e=Ht(r,n,t),o=R(e,2),i=o[0],u=o[1],c=r.get(t),f=n.get(t);return Wt(i,u)&&c>f}function wv(r){return(N.List.isList(r)||Array.isArray(r))&&r.every(function(n){return typeof n=="number"})}function Tv(r,n){if(r.size!==n.size)return!1;var t=r.butLast(),e=n.butLast();return t.equals(e)}function $r(r,n){var t=r.size-1,e=Ht(r,n,t),o=R(e,2),i=o[0],u=o[1],c=r.get(t),f=n.get(t);return Wt(i,u)&&c<f}function Ov(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=r.slice(0,-1*n);return t}function xv(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=r.slice(n);return t}function Ev(r,n){var t=Math.max(r.size,n.size);return t}function Vr(r,n){var t=Math.min(r.size,n.size);return t}function Nv(r,n){for(var t=[],e=0;e<r.size&&e<n.size;e++){var o=r.get(e),i=n.get(e);if(o!==i)break;t.push(o)}var u=oi(t);return u}function bv(r,n){var t=n.type,e=n.position,o=n.path;if(t==="add_mark"||t==="insert_text"||t==="remove_mark"||t==="remove_text"||t==="set_mark"||t==="set_node"||t==="set_selection"||t==="set_value"||t==="add_annotation"||t==="remove_annotation"||t==="set_annotation"||r.size===0)return N.List([r]);var i=o.size-1,u=Wt(o,r),c=$r(o,r),f=Dn(o,r);if(t==="insert_node"&&(u||c||f)&&(r=Tt(r,1,i)),t==="remove_node"&&(c?r=Ft(r,1,i):(u||f)&&(r=[])),t==="merge_node"&&(u||c?r=Ft(r,1,i):f&&(r=Ft(r,1,i),r=Tt(r,e,i+1))),t==="split_node"&&(u?r=[r,Tt(r)]:c?r=Tt(r,1,i):f&&r.get(i+1)>=e&&(r=Tt(r,1,i),r=Ft(r,e,i+1))),t==="move_node"){var v=n.newPath;if(Wt(o,v))return N.List([r]);f||u?$r(o,v)&&o.size<v.size?r=Ft(v,1,Vr(v,o)-1).concat(r.slice(o.size)):r=v.concat(r.slice(o.size)):(c&&(r=Ft(r,1,i)),($r(v,r)||Wt(v,r)||Dn(v,r))&&(r=Tt(r,1,v.size-1)))}var h=Array.isArray(r)?r:[r];return N.List(h)}var I={compare:Ur,create:oi,crop:Ht,decrement:Ft,getAncestors:kv,increment:Tt,isAbove:Dn,isAfter:_v,isBefore:Av,isEqual:Wt,isOlder:Sv,isPath:wv,isSibling:Tv,isYounger:$r,lift:Ov,drop:xv,max:Ev,min:Vr,relate:Nv,transform:bv},Fv={key:void 0,offset:void 0,path:void 0},ee=function(r){je(n,r);function n(){return Se(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Te(n,[{key:"isAfterPoint",value:function(e){if(this.isUnset)return!1;var o=this.key===e.key&&this.offset>e.offset||I.compare(this.path,e.path)===1;return o}},{key:"isAfterRange",value:function(e){if(this.isUnset)return!1;var o=this.isAfterPoint(e.end);return o}},{key:"isAtEndOfRange",value:function(e){if(this.isUnset)return!1;var o=this.equals(e.end);return o}},{key:"isAtStartOfRange",value:function(e){if(this.isUnset)return!1;var o=this.equals(e.start);return o}},{key:"isBeforePoint",value:function(e){if(this.isUnset)return!1;var o=this.key===e.key&&this.offset<e.offset||I.compare(this.path,e.path)===-1;return o}},{key:"isBeforeRange",value:function(e){if(this.isUnset)return!1;var o=this.isBeforePoint(e.start);return o}},{key:"isInRange",value:function(e){if(this.isUnset)return!1;var o=this.equals(e.start)||this.equals(e.end)||this.isAfterPoint(e.start)&&this.isBeforePoint(e.end);return o}},{key:"isAtEndOfNode",value:function(e){if(this.isUnset)return!1;var o=e.getLastText(),i=this.key===o.key&&this.offset===o.text.length;return i}},{key:"isAtStartOfNode",value:function(e){if(this.isUnset||this.offset!==0)return!1;var o=e.getFirstText(),i=this.key===o.key;return i}},{key:"isInNode",value:function(e){return this.isUnset?!1:!!(e.object==="text"&&e.key===this.key||e.hasNode(this.key))}},{key:"moveBackward",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(e===0)return this;if(e<0)return this.moveForward(-e);var o=this.setOffset(this.offset-e);return o}},{key:"moveForward",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(e===0)return this;if(e<0)return this.moveBackward(-e);var o=this.setOffset(this.offset+e);return o}},{key:"moveTo",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=this.key;typeof e=="number"?(o=e,e=this.path):typeof e=="string"?(i=e,e=i===this.key?this.path:null):i=e.equals(this.path)?this.key:null;var u=this.merge({key:i,path:e,offset:o});return u}},{key:"moveToStartOfNode",value:function(e){var o=e.getFirstText(),i=this.moveTo(o.key,0);return i}},{key:"moveToEndOfNode",value:function(e){var o=e.getLastText(),i=this.moveTo(o.key,o.text.length);return i}},{key:"normalize",value:function(e){if(this.key==null&&this.path==null)return this.setOffset(null);var o=this.key,i=this.offset,u=this.path,c=u&&e.getNode(u);if(!c&&(c=e.getNode(o),c)){var f=this.merge({path:e.getPath(o)});return f}if(!c){$();var v=e.getFirstText();if(!v)return n.create();var h=this.merge({key:v.key,offset:0,path:e.getPath(v.key)});return h}if(c.object!=="text"){$();var m=c.getTextAtOffset(i),g=c.getOffset(m.key),k=this.merge({offset:i-g,key:m.key,path:e.getPath(m.key)});return k}c&&u&&o&&o!==c.key&&$();var w=this.merge({key:c.key,path:u??e.getPath(c.key),offset:i==null?0:Math.min(i,c.text.length)});if(w.offset===c.text.length){var E=e.getClosestBlock(w.path),O=E.getNextText();O&&(w=w.merge({key:O.key,path:e.getPath(O.key),offset:0}))}return w}},{key:"setKey",value:function(e){e!=null&&(e=Yt.create(e));var o=this.set("key",e);return o}},{key:"setOffset",value:function(e){var o=this.set("offset",e);return o}},{key:"setPath",value:function(e){e!=null&&(e=I.create(e));var o=this.set("path",e);return o}},{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,key:this.key,offset:this.offset,path:this.path&&this.path.toArray()};return e.preserveKeys||delete o.key,o}},{key:"unset",value:function(){return this.merge({key:null,offset:null,path:null})}},{key:"isSet",get:function(){return this.key!=null&&this.offset!=null&&this.path!=null}},{key:"isUnset",get:function(){return!this.isSet}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isPoint(e))return e;if(he(e))return n.fromJSON(e);throw new Error("`Point.create` only accepts objects or points, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isPoint(e))return{key:e.key,offset:e.offset,path:e.path};if(he(e)){var o={};return"key"in e&&(o.key=e.key),"offset"in e&&(o.offset=e.offset),"path"in e&&(o.path=I.create(e.path)),"path"in e&&!("key"in e)&&(o.key=null),"key"in e&&!("path"in e)&&(o.path=null),o}throw new Error("`Point.createProperties` only accepts objects or points, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.key,i=o===void 0?null:o,u=e.offset,c=u===void 0?null:u,f=e.path,v=f===void 0?null:f,h=new n({key:i,offset:c,path:I.create(v)});return h}}]),n}(N.Record(Fv)),mt=function(){function r(){Se(this,r)}return Te(r,null,[{key:"create",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(N.Map.isMap(t))return t;if(he(t))return r.fromJSON(t);throw new Error("`Data.create` only accepts objects or maps, but you passed it: "+t)}},{key:"fromJSON",value:function(t){return new N.Map(t)}}]),r}();mt.fromJS=mt.fromJSON;var Pv={data:void 0,type:void 0},ie=function(r){je(n,r);function n(){return Se(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Te(n,[{key:"toJSON",value:function(){var e={object:this.object,type:this.type,data:this.data.toJSON()};return e}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isMark(e))return e;if(typeof e=="string"&&(e={type:e}),he(e))return n.fromJSON(e);throw new Error("`Mark.create` only accepts objects, strings or marks, but you passed it: "+e)}},{key:"createSet",value:function(e){if(N.Set.isSet(e)||Array.isArray(e)){var o=new N.Set(e.map(n.create));return o}if(e==null)return N.Set();throw new Error("`Mark.createSet` only accepts sets, arrays or null, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isMark(e))return{data:e.data,type:e.type};if(typeof e=="string")return{type:e};if(he(e)){var o={};return"type"in e&&(o.type=e.type),"data"in e&&(o.data=mt.create(e.data)),o}throw new Error("`Mark.createProperties` only accepts objects, strings or marks, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.data,i=o===void 0?{}:o,u=e.type;if(typeof u!="string")throw new Error("`Mark.fromJS` requires a `type` string.");var c=new n({type:u,data:new N.Map(i)});return c}},{key:"isMarkSet",value:function(e){return N.Set.isSet(e)&&e.every(function(o){return n.isMark(o)})}}]),n}(N.Record(Pv)),Bv={type:void 0,data:void 0,anchor:void 0,focus:void 0},Bt=function(r){je(n,r);function n(){return Se(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Te(n,[{key:"setProperties",value:function(e){e=n.createProperties(e);var o=this.merge(e);return o}},{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,type:this.type,data:this.data.toJSON(),anchor:this.anchor.toJSON(e),focus:this.focus.toJSON(e)};return o}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isDecoration(e))return e;if(De.isRange(e))return n.fromJSON(De.createProperties(e));if(he(e))return n.fromJSON(e);throw new Error("`Decoration.create` only accepts objects or decorations, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(N.List.isList(e)||Array.isArray(e)){var o=new N.List(e.map(n.create));return o}throw new Error("`Decoration.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isDecoration(e))return{type:e.type,data:e.data,anchor:ee.createProperties(e.anchor),focus:ee.createProperties(e.focus),mark:ie.create(e.mark)};if(he(e)){var o={};return"type"in e&&(o.type=e.type),"data"in e&&(o.data=mt.create(e.data)),"anchor"in e&&(o.anchor=ee.create(e.anchor)),"focus"in e&&(o.focus=ee.create(e.focus)),o}throw new Error("`Decoration.createProperties` only accepts objects or decorations, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.anchor,i=e.focus,u=e.type,c=e.data;if(e.mark&&!u&&($(),u=e.mark.type,c=e.mark.data),!u)throw new Error("Decorations must be created with a `type`, but you passed: "+JSON.stringify(e));var f=new n({type:u,data:mt.create(c||{}),anchor:ee.fromJSON(o||{}),focus:ee.fromJSON(i||{})});return f}}]),n}(N.Record(Bv)),Iv={anchor:void 0,focus:void 0,isFocused:void 0,marks:void 0},_t=function(r){je(n,r);function n(){return Se(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Te(n,[{key:"setIsFocused",value:function(e){var o=this.set("isFocused",e);return o}},{key:"setMarks",value:function(e){var o=this.set("marks",e);return o}},{key:"setProperties",value:function(e){e=n.createProperties(e);var o=e,i=o.anchor,u=o.focus,c=Vt(o,["anchor","focus"]);i&&(c.anchor=ee.create(i)),u&&(c.focus=ee.create(u));var f=this.merge(c);return f}},{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,anchor:this.anchor.toJSON(e),focus:this.focus.toJSON(e),isFocused:this.isFocused,marks:this.marks==null?null:this.marks.toArray().map(function(i){return i.toJSON()})};return o}},{key:"isBlurred",get:function(){return!this.isFocused}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isSelection(e))return e;if(De.isRange(e))return n.fromJSON(De.createProperties(e));if(he(e))return n.fromJSON(e);throw new Error("`Selection.create` only accepts objects, ranges or selections, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isSelection(e))return{anchor:ee.createProperties(e.anchor),focus:ee.createProperties(e.focus),isFocused:e.isFocused,marks:e.marks};if(De.isRange(e))return{anchor:ee.createProperties(e.anchor),focus:ee.createProperties(e.focus)};if(he(e)){var o={};return"anchor"in e&&(o.anchor=ee.create(e.anchor)),"focus"in e&&(o.focus=ee.create(e.focus)),"isFocused"in e&&(o.isFocused=e.isFocused),"marks"in e&&(o.marks=e.marks==null?null:ie.createSet(e.marks)),o}throw new Error("`Selection.createProperties` only accepts objects, ranges or selections, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.anchor,i=e.focus,u=e.isFocused,c=u===void 0?!1:u,f=e.marks,v=f===void 0?null:f,h=new n({anchor:ee.fromJSON(o||{}),focus:ee.fromJSON(i||{}),isFocused:c,marks:v==null?null:new N.Set(v.map(ie.fromJSON))});return h}}]),n}(N.Record(Iv)),ii={annotation:"@@__SLATE_ANNOTATION__@@",block:"@@__SLATE_BLOCK__@@",change:"@@__SLATE_CHANGE__@@",decoration:"@@__SLATE_DECORATION__@@",document:"@@__SLATE_DOCUMENT__@@",editor:"@@__SLATE_EDITOR__@@",inline:"@@__SLATE_INLINE__@@",leaf:"@@__SLATE_LEAF__@@",mark:"@@__SLATE_MARK__@@",operation:"@@__SLATE_OPERATION__@@",point:"@@__SLATE_POINT__@@",range:"@@__SLATE_RANGE__@@",selection:"@@__SLATE_SELECTION__@@",text:"@@__SLATE_TEXT__@@",value:"@@__SLATE_VALUE__@@"};function si(r,n){return!!(n&&n[ii[r]])}var Cv={anchor:void 0,focus:void 0},De=function(r){je(n,r);function n(){return Se(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Te(n,[{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,anchor:this.anchor.toJSON(e),focus:this.focus.toJSON(e)};return o}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isRange(e))return e.object==="range"?e:n.fromJSON(n.createProperties(e));if(he(e))return n.fromJSON(e);throw new Error("`Range.create` only accepts objects or ranges, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(N.List.isList(e)||Array.isArray(e)){var o=new N.List(e.map(n.create));return o}throw new Error("`Range.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isRange(e))return{anchor:ee.createProperties(e.anchor),focus:ee.createProperties(e.focus)};if(he(e)){var o={};return"anchor"in e&&(o.anchor=ee.create(e.anchor)),"focus"in e&&(o.focus=ee.create(e.focus)),o}throw new Error("`Range.createProperties` only accepts objects, annotations, decorations, ranges or selections, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.anchor,i=e.focus,u=new n({anchor:ee.fromJSON(o||{}),focus:ee.fromJSON(i||{})});return u}},{key:"isRange",value:function(e){return si("range",e)||Bt.isDecoration(e)||_t.isSelection(e)}}]),n}(N.Record(Cv)),Rv={key:void 0,type:void 0,data:void 0,anchor:void 0,focus:void 0},Re=function(r){je(n,r);function n(){return Se(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Te(n,[{key:"setProperties",value:function(e){e=n.createProperties(e);var o=this.merge(e);return o}},{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,key:this.key,type:this.type,data:this.data.toJSON(),anchor:this.anchor.toJSON(e),focus:this.focus.toJSON(e)};return o}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isAnnotation(e))return e;if(De.isRange(e))return n.fromJSON(De.createProperties(e));if(he(e))return n.fromJSON(e);throw new Error("`Annotation.create` only accepts objects or annotations, but you passed it: "+e)}},{key:"createMap",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(N.Map.isMap(e))return e;if(he(e)){var o={};for(var i in e){var u=e[i],c=n.create(u);o[i]=c}return N.Map(o)}throw new Error("`Annotation.createMap` only accepts arrays or lists, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isAnnotation(e))return{key:e.key,type:e.type,data:e.data,anchor:ee.createProperties(e.anchor),focus:ee.createProperties(e.focus)};if(he(e)){var o={};return"key"in e&&(o.key=e.key),"type"in e&&(o.type=e.type),"data"in e&&(o.data=mt.create(e.data)),"anchor"in e&&(o.anchor=ee.create(e.anchor)),"focus"in e&&(o.focus=ee.create(e.focus)),o}throw new Error("`Annotation.createProperties` only accepts objects or annotations, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.key,i=e.type,u=e.data,c=e.anchor,f=e.focus;if(!o)throw new Error("Annotations must be created with a `key`, but you passed: "+JSON.stringify(e));if(!i)throw new Error("Annotations must be created with a `type`, but you passed: "+JSON.stringify(e));var v=new n({key:o,type:i,data:mt.create(u||{}),anchor:ee.fromJSON(c||{}),focus:ee.fromJSON(f||{})});return v}}]),n}(N.Record(Rv)),Mv={data:void 0,key:void 0,nodes:void 0},st=function(r){je(n,r);function n(){return Se(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Te(n,[{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,data:this.data.toJSON(),nodes:this.nodes.toArray().map(function(i){return i.toJSON(e)})};return e.preserveKeys&&(o.key=this.key),o}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isDocument(e))return e;if((N.List.isList(e)||Array.isArray(e))&&(e={nodes:e}),he(e))return n.fromJSON(e);throw new Error("`Document.create` only accepts objects, arrays, lists or documents, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(n.isDocument(e))return e;var o=e.data,i=o===void 0?{}:o,u=e.key,c=u===void 0?Yt.create():u,f=e.nodes,v=f===void 0?[]:f,h=new n({key:c,data:new N.Map(i),nodes:Ze.createList(v)});return h}}]),n}(N.Record(Mv)),Lv={data:void 0,key:void 0,nodes:void 0,type:void 0},rt=function(r){je(n,r);function n(){return Se(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Te(n,[{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,type:this.type,data:this.data.toJSON(),nodes:this.nodes.toArray().map(function(i){return i.toJSON(e)})};return e.preserveKeys&&(o.key=this.key),o}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isInline(e))return e;if(typeof e=="string"&&(e={type:e}),he(e))return n.fromJSON(e);throw new Error("`Inline.create` only accepts objects, strings or inlines, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(N.List.isList(e)||Array.isArray(e)){var o=new N.List(e.map(n.create));return o}throw new Error("`Inline.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(n.isInline(e))return e;var o=e.data,i=o===void 0?{}:o,u=e.key,c=u===void 0?Yt.create():u,f=e.nodes,v=f===void 0?[]:f,h=e.type;if(typeof h!="string")throw new Error("`Inline.fromJS` requires a `type` string.");var m=new n({key:c,type:h,data:new N.Map(i),nodes:Ze.createList(v)});return m}},{key:"isInlineList",value:function(e){return N.List.isList(e)&&e.every(function(o){return n.isInline(o)})}}]),n}(N.Record(Lv)),zv={key:void 0,marks:void 0,text:void 0},$v=N.Record({text:void 0,marks:void 0,annotations:void 0,decorations:void 0}),ht=function(r){je(n,r);function n(){return Se(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Te(n,[{key:"addMark",value:function(e){e=ie.create(e);var o=this.marks,i=o.add(e),u=this.set("marks",i);return u}},{key:"addMarks",value:function(e){e=ie.createSet(e);var o=this.set("marks",this.marks.union(e));return o}},{key:"getLeaves",value:function(e,o){var i=this.text,u=this.marks,c=[{text:i,marks:u,annotations:[],decorations:[]}],f=function(g,k){return[{text:g.text.slice(0,k),marks:g.marks,annotations:[].concat(Fe(g.annotations)),decorations:[].concat(Fe(g.decorations))},{text:g.text.slice(k),marks:g.marks,annotations:[].concat(Fe(g.annotations)),decorations:[].concat(Fe(g.decorations))}]},v=function(g){var k=g==="annotations"?e.values():o,w=!0,E=!1,O=void 0;try{for(var P=k[Symbol.iterator](),F;!(w=(F=P.next()).done);w=!0){var z=F.value,M=z.start,B=z.end,D=[],te=0,oe=!0,U=!1,se=void 0;try{for(var j=c[Symbol.iterator](),ue;!(oe=(ue=j.next()).done);oe=!0){var ve=ue.value,H=ve.text.length,re=te;if(te+=H,M.offset<=re&&B.offset>=re+H){ve[g].push(z),D.push(ve);continue}if(M.offset>re+H||B.offset<re||B.offset===re&&re!==0){D.push(ve);continue}var Z=ve,K=void 0,G=void 0;if(B.offset<re+H){var Je=f(Z,B.offset-re),we=R(Je,2);Z=we[0],G=we[1]}if(M.offset>re){var Pe=f(Z,M.offset-re),Oe=R(Pe,2);K=Oe[0],Z=Oe[1]}Z[g].push(z),K&&D.push(K),D.push(Z),G&&D.push(G)}}catch(Ee){U=!0,se=Ee}finally{try{!oe&&j.return&&j.return()}finally{if(U)throw se}}c=D}}catch(Ee){E=!0,O=Ee}finally{try{!w&&P.return&&P.return()}finally{if(E)throw O}}};v("annotations"),v("decorations"),c=c.map(function(m){return new $v($e({},m,{annotations:N.List(m.annotations),decorations:N.List(m.decorations)}))});var h=N.List(c);return h}},{key:"insertText",value:function(e,o){var i=this.text,u=i.slice(0,e)+o+i.slice(e),c=this.set("text",u);return c}},{key:"removeMark",value:function(e){e=ie.create(e);var o=this.marks,i=o.remove(e),u=this.set("marks",i);return u}},{key:"removeText",value:function(e,o){var i=this.text,u=i.slice(0,e)+i.slice(e+o),c=this.set("text",u);return c}},{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,text:this.text,marks:this.marks.toArray().map(function(i){return i.toJSON()})};return e.preserveKeys&&(o.key=this.key),o}},{key:"setMark",value:function(e,o){var i=this.marks,u=ie.create(e),c=u.merge(o),f=i.remove(u).add(c),v=this.set("marks",f);return v}},{key:"splitText",value:function(e){var o=this.text,i=this.set("text",o.slice(0,e)),u=this.set("text",o.slice(e)).regenerateKey();return[i,u]}},{key:"mergeText",value:function(e){var o=this.text+e.text,i=this.set("text",o);return i}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(n.isText(e))return e;if(typeof e=="string"&&(e={text:e}),he(e))return n.fromJSON(e);throw new Error("`Text.create` only accepts objects, arrays, strings or texts, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(N.List.isList(e)||Array.isArray(e)){var o=new N.List(e.map(n.create));return o}throw new Error("`Text.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(n.isText(e))return e;tt(e.leaves==null,"As of slate@0.46, the `leaves` property of text nodes has been removed! Each individual leaf should be created as a text node instead.");var o=e.text,i=o===void 0?"":o,u=e.marks,c=u===void 0?[]:u,f=e.key,v=f===void 0?Yt.create():f,h=new n({key:v,text:i,marks:ie.createSet(c)});return h}},{key:"isTextList",value:function(e){return N.List.isList(e)&&e.every(function(o){return n.isText(o)})}}]),n}(N.Record(zv)),Ze=function(){function r(){Se(this,r)}return Te(r,null,[{key:"create",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(r.isNode(t))return t;if(he(t)){var e=t.object;switch(!e&&t.kind&&($(),e=t.kind),e){case"block":return nt.create(t);case"document":return st.create(t);case"inline":return rt.create(t);case"text":return ht.create(t);default:throw new Error("`Node.create` requires a `object` string.")}}throw new Error("`Node.create` only accepts objects or nodes but you passed it: "+t)}},{key:"createList",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(N.List.isList(t)||Array.isArray(t)){var e=[];t.forEach(function(i){if(i&&i.object==="text"&&i.leaves&&Array.isArray(i.leaves)){$();var u=ht.createList(i.leaves).toArray();e=e.concat(u);return}var c=r.create(i);e.push(c)});var o=N.List(e);return o}throw new Error("`Node.createList` only accepts lists or arrays, but you passed it: "+t)}},{key:"createProperties",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(nt.isBlock(t)||rt.isInline(t))return{data:t.data,type:t.type};if(typeof t=="string")return{type:t};if(he(t)){var e={};return"type"in t&&(e.type=t.type),"data"in t&&(e.data=mt.create(t.data)),e}throw new Error("`Node.createProperties` only accepts objects, strings, blocks or inlines, but you passed it: "+t)}},{key:"fromJSON",value:function(t){var e=t.object;switch(!e&&t.kind&&($(),e=t.kind),e){case"block":return nt.fromJSON(t);case"document":return st.fromJSON(t);case"inline":return rt.fromJSON(t);case"text":return ht.fromJSON(t);default:throw new Error("`Node.fromJSON` requires an `object` of either 'block', 'document', 'inline' or 'text', but you passed: "+t)}}},{key:"isNode",value:function(t){return nt.isBlock(t)||st.isDocument(t)||rt.isInline(t)||ht.isText(t)}},{key:"isNodeList",value:function(t){return N.List.isList(t)&&t.every(function(e){return r.isNode(e)})}}]),r}(),Dv={data:void 0,key:void 0,nodes:void 0,type:void 0},nt=function(r){je(n,r);function n(){return Se(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Te(n,[{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,type:this.type,data:this.data.toJSON(),nodes:this.nodes.toArray().map(function(i){return i.toJSON(e)})};return e.preserveKeys&&(o.key=this.key),o}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isBlock(e))return e;if(typeof e=="string"&&(e={type:e}),he(e))return n.fromJSON(e);throw new Error("`Block.create` only accepts objects, strings or blocks, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(N.List.isList(e)||Array.isArray(e)){var o=new N.List(e.map(n.create));return o}throw new Error("`Block.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(n.isBlock(e))return e;var o=e.data,i=o===void 0?{}:o,u=e.key,c=u===void 0?Yt.create():u,f=e.nodes,v=f===void 0?[]:f,h=e.type;if(typeof h!="string")throw new Error("`Block.fromJSON` requires a `type` string.");var m=new n({key:c,type:h,data:N.Map(i),nodes:Ze.createList(v)});return m}},{key:"isBlockList",value:function(e){return N.List.isList(e)&&e.every(function(o){return n.isBlock(o)})}}]),n}(N.Record(Dv)),jv={annotations:void 0,data:void 0,document:void 0,selection:void 0},yt=function(r){je(n,r);function n(){return Se(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Te(n,[{key:"addAnnotation",value:function(e){e=Re.create(e);var o=this,i=o,u=i.annotations,c=i.document,f=e,v=f.key;return e=e.updatePoints(function(h){return h.normalize(c)}),u=u.set(v,e),o=o.set("annotations",u),o}},{key:"addMark",value:function(e,o){o=ie.create(o);var i=this,u=i,c=u.document;return c=c.addMark(e,o),i=i.set("document",c),i}},{key:"insertNode",value:function(e,o){var i=this,u=i,c=u.document;return c=c.insertNode(e,o),i=i.set("document",c),i=i.mapRanges(function(f){return f.updatePoints(function(v){return v.setPath(null)})}),i}},{key:"insertText",value:function(e,o,i){var u=this,c=u,f=c.document,v=f.assertNode(e);return f=f.insertText(e,o,i),v=f.assertNode(e),u=u.set("document",f),u=u.mapPoints(function(h){return h.key===v.key&&h.offset>=o?h.setOffset(h.offset+i.length):h}),u}},{key:"mergeNode",value:function(e){var o=this,i=o,u=i.document,c=u.mergeNode(e);e=u.resolvePath(e);var f=I.decrement(e),v=u.getNode(f),h=u.getNode(e);return o=o.set("document",c),o=o.mapRanges(function(m){if(h.object==="text"){var g=v.text.length;m.anchor.key===h.key&&(m=m.moveAnchorTo(v.key,g+m.anchor.offset)),m.focus.key===h.key&&(m=m.moveFocusTo(v.key,g+m.focus.offset))}return m=m.updatePoints(function(k){return k.setPath(null)}),m}),o}},{key:"moveNode",value:function(e,o){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=this,c=u,f=c.document;return I.isEqual(e,o)||(f=f.moveNode(e,o,i),u=u.set("document",f),u=u.mapPoints(function(v){return v.setPath(null)})),u}},{key:"removeAnnotation",value:function(e){e=Re.create(e);var o=this,i=o,u=i.annotations,c=e,f=c.key;return u=u.delete(f),o=o.set("annotations",u),o}},{key:"removeMark",value:function(e,o){o=ie.create(o);var i=this,u=i,c=u.document;return c=c.removeMark(e,o),i=i.set("document",c),i}},{key:"removeNode",value:function(e){var o=this,i=o,u=i.document,c=u.assertNode(e),f=c.object==="text"?c:c.getFirstText()||c,v=c.object==="text"?c:c.getLastText()||c,h=u.getPreviousText(f.key),m=u.getNextText(v.key);return u=u.removeNode(e),o=o.set("document",u),o=o.mapRanges(function(g){var k=g,w=k.anchor,E=k.focus;return c.hasNode(w.key)&&(g=h?g.moveAnchorTo(h.key,h.text.length):m?g.moveAnchorTo(m.key,0):g.unset()),c.hasNode(E.key)&&(g=h?g.moveFocusTo(h.key,h.text.length):m?g.moveFocusTo(m.key,0):g.unset()),g=g.updatePoints(function(O){return O.setPath(null)}),g}),o}},{key:"removeText",value:function(e,o,i){var u=this,c=u,f=c.document,v=f.assertNode(e);f=f.removeText(e,o,i),u=u.set("document",f);var h=i.length,m=o,g=o+h;return u=u.mapPoints(function(k){return k.key!==v.key?k:k.offset>=g?k.setOffset(k.offset-h):k.offset>m?k.setOffset(m):k}),u}},{key:"setAnnotation",value:function(e,o){o=Re.createProperties(o);var i=Re.create(e),u=i.merge(o),c=this,f=c,v=f.annotations,h=i.key;return v=v.set(h,u),c=c.set("annotations",v),c}},{key:"setNode",value:function(e,o){var i=this,u=i,c=u.document;return c=c.setNode(e,o),i=i.set("document",c),i}},{key:"setMark",value:function(e,o,i){var u=this,c=u,f=c.document;return f=f.setMark(e,o,i),u=u.set("document",f),u}},{key:"setProperties",value:function(e){var o=this,i=o,u=i.document,c=e.data,f=e.annotations,v={};return c&&(v.data=c),f&&(v.annotations=f.map(function(h){return h.isSet?h:u.resolveAnnotation(h)})),o=o.merge(v),o}},{key:"setSelection",value:function(e){var o=this,i=o,u=i.document,c=i.selection,f=c.setProperties(e);return c=u.resolveSelection(f),o=o.set("selection",c),o}},{key:"splitNode",value:function(e,o,i){var u=this,c=u,f=c.document,v=f.splitNode(e,o,i),h=f.assertNode(e);return u=u.set("document",v),u=u.mapRanges(function(m){var g=v.getNextText(h.key),k=m,w=k.anchor,E=k.focus;return h.key===w.key&&o<=w.offset&&(m=m.moveAnchorTo(g.key,w.offset-o)),h.key===E.key&&o<=E.offset&&(m=m.moveFocusTo(g.key,E.offset-o)),m=m.updatePoints(function(O){return O.setPath(null)}),m}),u}},{key:"mapRanges",value:function(e){var o=this,i=o,u=i.document,c=i.selection,f=i.annotations,v=c.isSet?e(c):c;v||(v=c.unset()),v!==c&&(v=u.createSelection(v)),o=o.set("selection",v);var h=f.map(function(m){var g=m.isSet?e(m):m;return g&&g!==m&&(g=u.createAnnotation(g)),g});return h=h.filter(function(m){return!!m}),o=o.set("annotations",h),o}},{key:"mapPoints",value:function(e){return this.mapRanges(function(o){return o.updatePoints(e)})}},{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,document:this.document.toJSON(e)};return e.preserveData&&(o.data=this.data.toJSON(e)),e.preserveAnnotations&&(o.annotations=this.annotations.map(function(i){return i.toJSON(e)}).toObject()),e.preserveSelection&&(o.selection=this.selection.toJSON(e)),o}},{key:"change",value:function(){tt(!1,"As of Slate 0.42.0, value object are no longer schema-aware, and the `value.change()` method is no longer available. Use the `editor.change()` method on the new `Editor` controller instead.")}},{key:"startBlock",get:function(){return this.selection.start.key&&this.document.getClosestBlock(this.selection.start.key)}},{key:"endBlock",get:function(){return this.selection.end.key&&this.document.getClosestBlock(this.selection.end.key)}},{key:"anchorBlock",get:function(){return this.selection.anchor.key&&this.document.getClosestBlock(this.selection.anchor.key)}},{key:"focusBlock",get:function(){return this.selection.focus.key&&this.document.getClosestBlock(this.selection.focus.key)}},{key:"startInline",get:function(){return this.selection.start.key&&this.document.getClosestInline(this.selection.start.key)}},{key:"endInline",get:function(){return this.selection.end.key&&this.document.getClosestInline(this.selection.end.key)}},{key:"anchorInline",get:function(){return this.selection.anchor.key&&this.document.getClosestInline(this.selection.anchor.key)}},{key:"focusInline",get:function(){return this.selection.focus.key&&this.document.getClosestInline(this.selection.focus.key)}},{key:"startText",get:function(){return this.selection.start.key&&this.document.getDescendant(this.selection.start.key)}},{key:"endText",get:function(){return this.selection.end.key&&this.document.getDescendant(this.selection.end.key)}},{key:"anchorText",get:function(){return this.selection.anchor.key&&this.document.getDescendant(this.selection.anchor.key)}},{key:"focusText",get:function(){return this.selection.focus.key&&this.document.getDescendant(this.selection.focus.key)}},{key:"nextBlock",get:function(){return this.selection.end.key&&this.document.getNextBlock(this.selection.end.key)}},{key:"previousBlock",get:function(){return this.selection.start.key&&this.document.getPreviousBlock(this.selection.start.key)}},{key:"nextInline",get:function(){return this.selection.end.key&&this.document.getNextInline(this.selection.end.key)}},{key:"previousInline",get:function(){return this.selection.start.key&&this.document.getPreviousInline(this.selection.start.key)}},{key:"nextText",get:function(){return this.selection.end.key&&this.document.getNextText(this.selection.end.key)}},{key:"previousText",get:function(){return this.selection.start.key&&this.document.getPreviousText(this.selection.start.key)}},{key:"marks",get:function(){return this.selection.isUnset?new N.Set:this.selection.marks||this.document.getMarksAtRange(this.selection)}},{key:"activeMarks",get:function(){return this.selection.isUnset?new N.Set:this.selection.marks||this.document.getActiveMarksAtRange(this.selection)}},{key:"blocks",get:function(){return this.selection.isUnset?new N.List:this.document.getLeafBlocksAtRange(this.selection)}},{key:"fragment",get:function(){return this.selection.isUnset?st.create():this.document.getFragmentAtRange(this.selection)}},{key:"inlines",get:function(){return this.selection.isUnset?new N.List:this.document.getLeafInlinesAtRange(this.selection)}},{key:"texts",get:function(){return this.selection.isUnset?new N.List:this.document.getTextsAtRange(this.selection)}},{key:"history",get:function(){tt(!1,"As of Slate 0.42.0, the `value.history` model no longer exists, and the history is stored in `value.data` instead using plugins.")}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n.isValue(e))return e;if(he(e))return n.fromJSON(e,o);throw new Error("`Value.create` only accepts objects or values, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isValue(e))return{annotations:e.annotations,data:e.data};if(he(e)){var o={};return"annotations"in e&&(o.annotations=Re.createMap(e.annotations)),"data"in e&&(o.data=mt.create(e.data)),o}throw new Error("`Value.createProperties` only accepts objects or values, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.data,i=o===void 0?{}:o,u=e.annotations,c=u===void 0?{}:u,f=e.document,v=f===void 0?{}:f,h=e.selection,m=h===void 0?{}:h;if(i=mt.fromJSON(i),v=st.fromJSON(v),m=v.createSelection(m),c=Re.createMap(c),m.isUnset){var g=v.getFirstText();g&&(m=m.moveToStartOfNode(g)),m=v.createSelection(m)}var k=new n({annotations:c,data:i,document:v,selection:m});return k}}]),n}(N.Record(jv)),qv=Jn("slate:operation:apply");function Jv(r,n){n=It.create(n);var t=n,e=t.type;switch(qv(e,n),e){case"add_annotation":{var o=n,i=o.annotation,u=r.addAnnotation(i);return u}case"add_mark":{var c=n,f=c.path,v=c.mark,h=r.addMark(f,v);return h}case"insert_node":{var m=n,g=m.path,k=m.node,w=r.insertNode(g,k);return w}case"insert_text":{var E=n,O=E.path,P=E.offset,F=E.text,z=E.marks,M=r.insertText(O,P,F,z);return M}case"merge_node":{var B=n,D=B.path,te=r.mergeNode(D);return te}case"move_node":{var oe=n,U=oe.path,se=oe.newPath,j=r.moveNode(U,se);return j}case"remove_annotation":{var ue=n,ve=ue.annotation,H=r.removeAnnotation(ve);return H}case"remove_mark":{var re=n,Z=re.path,K=re.mark,G=r.removeMark(Z,K);return G}case"remove_node":{var Je=n,we=Je.path,Pe=r.removeNode(we);return Pe}case"remove_text":{var Oe=n,Ee=Oe.path,Ke=Oe.offset,V=Oe.text,Q=r.removeText(Ee,Ke,V);return Q}case"set_annotation":{var ge=n,ut=ge.properties,Qe=ge.newProperties,at=r.setAnnotation(ut,Qe);return at}case"set_mark":{var pt=n,Ct=pt.path,Ae=pt.properties,Be=pt.newProperties,ne=r.setMark(Ct,Ae,Be);return ne}case"set_node":{var Ue=n,pr=Ue.path,Xe=Ue.newProperties,ct=r.setNode(pr,Xe);return ct}case"set_selection":{var xt=n,Et=xt.newProperties,nr=r.setSelection(Et);return nr}case"set_value":{var kr=n,Rt=kr.newProperties,_r=r.setProperties(Rt);return _r}case"split_node":{var Nt=n,Yr=Nt.path,Ar=Nt.position,Sr=Nt.properties,wr=r.splitNode(Yr,Ar,Sr);return wr}default:throw new Error('Unknown operation type: "'+e+'".')}}var Kv=Jn("slate:operation:invert");function Uv(r){r=It.create(r);var n=r,t=n.type;switch(Kv(t,r),t){case"move_node":{var e=r,o=e.newPath,i=e.path;if(I.isEqual(o,i))return r;var u=I.transform(i,r).first(),c=I.transform(I.increment(i),r).first(),f=r.set("path",u).set("newPath",c);return f}case"merge_node":{var v=r,h=v.path,m=I.decrement(h),g=r.set("type","split_node").set("path",m);return g}case"split_node":{var k=r,w=k.path,E=I.increment(w),O=r.set("type","merge_node").set("path",E);return O}case"set_annotation":case"set_node":case"set_value":case"set_selection":case"set_mark":{var P=r,F=P.properties,z=P.newProperties,M=r.set("properties",z).set("newProperties",F);return M}case"insert_node":case"insert_text":{var B=r.set("type",t.replace("insert_","remove_"));return B}case"remove_node":case"remove_text":{var D=r.set("type",t.replace("remove_","insert_"));return D}case"add_annotation":case"add_mark":{var te=r.set("type",t.replace("add_","remove_"));return te}case"remove_annotation":case"remove_mark":{var oe=r.set("type",t.replace("remove_","add_"));return oe}default:throw new Error('Unknown operation type: "'+t+'".')}}var go={add_mark:["path","mark","data"],add_annotation:["annotation","data"],insert_node:["path","node","data"],insert_text:["path","offset","text","data"],merge_node:["path","position","properties","target","data"],move_node:["path","newPath","data"],remove_annotation:["annotation","data"],remove_mark:["path","mark","data"],remove_node:["path","node","data"],remove_text:["path","offset","text","data"],set_annotation:["properties","newProperties","data"],set_mark:["path","properties","newProperties","data"],set_node:["path","properties","newProperties","data"],set_selection:["properties","newProperties","data"],set_value:["properties","newProperties","data"],split_node:["path","position","properties","target","data"]},Vv={annotation:void 0,data:void 0,length:void 0,mark:void 0,marks:void 0,newPath:void 0,newProperties:void 0,node:void 0,offset:void 0,path:void 0,position:void 0,properties:void 0,target:void 0,text:void 0,type:void 0},It=function(r){je(n,r);function n(){return Se(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Te(n,[{key:"apply",value:function(e){var o=Jv(e,this);return o}},{key:"invert",value:function(){var e=Uv(this);return e}},{key:"toJSON",value:function(){var e=this.object,o=this.type,i={object:e,type:o},u=go[o],c=!0,f=!1,v=void 0;try{for(var h=u[Symbol.iterator](),m;!(c=(m=h.next()).done);c=!0){var g=m.value,k=this[g];if((g==="annotation"||g==="mark"||g==="marks"||g==="node"||g==="path"||g==="newPath")&&(k=k.toJSON()),g==="properties"&&o==="merge_node"){var w={};"data"in k&&(w.data=k.data.toJS()),"type"in k&&(w.type=k.type),k=w}if((g==="properties"||g==="newProperties")&&o==="set_annotation"){var E={};"anchor"in k&&(E.anchor=k.anchor.toJS()),"focus"in k&&(E.focus=k.focus.toJS()),"key"in k&&(E.key=k.key),"data"in k&&(E.data=k.data.toJS()),"type"in k&&(E.type=k.type),k=E}if((g==="properties"||g==="newProperties")&&o==="set_mark"){var O={};"data"in k&&(O.data=k.data.toJS()),"type"in k&&(O.type=k.type),k=O}if((g==="properties"||g==="newProperties")&&o==="set_node"){var P={};"data"in k&&(P.data=k.data.toJS()),"type"in k&&(P.type=k.type),k=P}if((g==="properties"||g==="newProperties")&&o==="set_selection"){var F={};"anchor"in k&&(F.anchor=k.anchor.toJSON()),"focus"in k&&(F.focus=k.focus.toJSON()),"isFocused"in k&&(F.isFocused=k.isFocused),"marks"in k&&(F.marks=k.marks&&k.marks.toJSON()),k=F}if((g==="properties"||g==="newProperties")&&o==="set_value"){var z={};"data"in k&&(z.data=k.data.toJS()),k=z}if(g==="properties"&&o==="split_node"){var M={};"data"in k&&(M.data=k.data.toJS()),"type"in k&&(M.type=k.type),k=M}g==="data"&&(k=k.toJSON()),i[g]=k}}catch(B){f=!0,v=B}finally{try{!c&&h.return&&h.return()}finally{if(f)throw v}}return i}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isOperation(e))return e;if(he(e))return n.fromJSON(e);throw new Error("`Operation.create` only accepts objects or operations, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(N.List.isList(e)||Array.isArray(e)){var o=new N.List(e.map(n.create));return o}throw new Error("`Operation.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(n.isOperation(e))return e;var o=e.type,i=go[o],u={type:o};if(!i)throw new Error('`Operation.fromJSON` was passed an unrecognized operation type: "'+o+'"');var c=!0,f=!1,v=void 0;try{for(var h=i[Symbol.iterator](),m;!(c=(m=h.next()).done);c=!0){var g=m.value,k=e[g];if(g==="data"&&k===void 0&&(k={}),k===void 0)throw new Error('`Operation.fromJSON` was passed a "'+o+'" operation without the required "'+g+'" attribute.');g==="annotation"&&(k=Re.create(k)),(g==="path"||g==="newPath")&&(k=I.create(k)),g==="mark"&&(k=ie.create(k)),g==="node"&&(k=Ze.create(k)),(g==="properties"||g==="newProperties")&&o==="set_annotation"&&(k=Re.createProperties(k)),(g==="properties"||g==="newProperties")&&o==="set_mark"&&(k=ie.createProperties(k)),(g==="properties"||g==="newProperties")&&(o==="set_node"||o==="merge_node"||o==="split_node")&&(k=Ze.createProperties(k)),(g==="properties"||g==="newProperties")&&o==="set_selection"&&(k=_t.createProperties(k)),(g==="properties"||g==="newProperties")&&o==="set_value"&&(k=yt.createProperties(k)),g==="data"&&(k=N.Map(k)),u[g]=k}}catch(E){f=!0,v=E}finally{try{!c&&h.return&&h.return()}finally{if(f)throw v}}var w=new n(u);return w}},{key:"isOperationList",value:function(e){return N.List.isList(e)&&e.every(function(o){return n.isOperation(o)})}}]),n}(N.Record(Vv)),Wv={operations:void 0,value:void 0},Gv=function(r){je(n,r);function n(){return Se(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Te(n,[{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o={object:this.object,value:this.value.toJSON(e),operations:this.operations.toArray().map(function(i){return i.toJSON(e)})};return o}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.isChange(e))return e;if(he(e))return n.fromJSON(e);throw new Error("`Change.create` only accepts objects or changes, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.value,i=e.operations,u=i===void 0?[]:i,c=new n({value:yt.create(o),operations:It.createList(u)});return c}}]),n}(N.Record(Wv));function ui(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function n(e,o,i){var u=e.type,c=e.args,f=r[u];if(!f)return i();o.command.apply(o,[f].concat(Fe(c)))}function t(e,o){for(var i in r)e.registerCommand(i);return o()}return{onCommand:n,onConstruct:t}}var Yv=55296,Hv=57343,Zv=/\s/,Qv=/['\u2018\u2019]/,Xv=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/;function Zn(r){return Yv<=r&&r<=Hv}function po(r,n,t){if(r===55356){var e=n.charCodeAt(t+1);return e<=57343&&e>=57339}return!1}function ed(r){return r<=65039&&r>=65024}function td(r){return r===10084||r===9794||r===9792||r===9760||r===9877||r===9992||r===9711}function Qn(r,n){if(Zv.test(r))return!1;if(Qv.test(r)){var t=n.charAt(0),e=Xn(t);t=n.slice(0,e);var o=n.slice(e);if(Qn(t,o))return!0}return!Xv.test(r)}function Xn(r){return Zn(r.charCodeAt(0))?2:1}function ea(r,n,t){var e=0;if(r==="")return 1;for(var o=0;o<n;o++)for(var i=null,u=r.charCodeAt(e);u;){if(Zn(u)){var c=po(u,r,e);if(t){if(!c&&i&&i!=="ZWJ"||c&&i&&i!=="SURR")break}else if(i==="SURR"||i==="BMP")break;e+=2,i=c?"MOD":"SURR",u=r.charCodeAt(e);continue}if(u===8205){e+=1,i="ZWJ",u=r.charCodeAt(e);continue}if(td(u)){if(t&&i==="VAR"||i&&i!=="ZWJ"&&i!=="VAR")break;e+=1,i="BMP",u=r.charCodeAt(e);continue}if(ed(u)){if(!t&&i&&i!=="ZWJ")break;e+=1,i="VAR",u=r.charCodeAt(e);continue}if(t){var f=r.charCodeAt(e+1);if(po(f,r,e+1)){e+=3,i="MOD",u=r.charCodeAt(e);continue}}else if(i==="MOD"){e+=1;break}i===null&&(e+=1);break}return e}function rd(r,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return r=r.slice(0,n),r=Wo.reverse(r),ea(r,t)}function nd(r,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return r=r.slice(n),ea(r,t,!0)}function ta(r){for(var n=0,t=0,e=!1,o=void 0;o=r.charAt(t);){var i=Xn(o);o=r.slice(t,t+i);var u=r.slice(t+i);if(Qn(o,u))e=!0,n+=i;else if(!e)n+=i;else break;t+=i}return n}function ad(r,n){r=r.slice(0,n),r=Wo.reverse(r);var t=ta(r);return t}function od(r,n){r=r.slice(n);var t=ta(r);return t}var Ot={getCharLength:Xn,getCharOffset:ea,getCharOffsetBackward:rd,getCharOffsetForward:nd,getWordOffset:ta,getWordOffsetBackward:ad,getWordOffsetForward:od,isSurrogate:Zn,isWord:Qn};function Zt(r,n){n.isExpanded&&r.deleteAtRange(n);var t=r.value,e=t.document,o=n,i=o.start,u=o.end;return e.hasDescendant(i.path)?n=n.moveToStart():n=n.moveTo(u.path,0).normalize(e),n}var le={};le.addMarkAtRange=function(r,n,t){if(!n.isCollapsed){var e=r.value,o=e.document,i=n.start,u=n.end,c=o.getTextsAtRange(n);r.withoutNormalizing(function(){c.forEach(function(f){var v=f.key,h=0,m=f.text.length;v===i.key&&(h=i.offset),v===u.key&&(m=u.offset),v===i.key&&v===u.key&&(m=u.offset-i.offset),r.addMarkByKey(v,h,m,t)})})}};le.addMarksAtRange=function(r,n,t){t.forEach(function(e){return r.addMarkAtRange(n,e)})};le.deleteAtRange=function(r,n){r.snapshotSelection();var t=r.value,e=n.start,o=n.end,i=e.key,u=e.offset,c=o.key,f=o.offset,v=t.document,h=v.hasVoidParent(i,r),m=v.hasVoidParent(c,r),g=v.getClosestBlock(i),k=v.getClosestBlock(c),w=u===0&&f===0&&h===!1&&i===g.getFirstText().key&&c===k.getFirstText().key&&i!==c;if(w&&m){var E=v.getPreviousText(c);c=E.key,f=E.text.length,m=v.hasVoidParent(c,r)}r.withoutNormalizing(function(){for(;h;){var O=v.getClosestVoid(i,r),P=v.getNextText(i);if(r.removeNodeByKey(O.key),i===c||!P)return;v=r.value.document,i=P.key,u=0,h=v.hasVoidParent(i,r)}for(;m;){var F=v.getClosestVoid(c,r),z=v.getPreviousText(c);r.removeNodeByKey(F.key),v=r.value.document,c=z.key,f=z.text.length,m=v.hasVoidParent(c,r)}if(i===c&&w){r.removeNodeByKey(g.key);return}else if(i===c){var M=u,B=f-u;r.removeTextByKey(i,M,B);return}else{g=v.getClosestBlock(i),k=v.getClosestBlock(c);var D=v.getNode(i),te=v.getNode(c),oe=D.text.length-u,U=f,se=v.getCommonAncestor(i,c),j=se.getFurthestChild(i),ue=se.getFurthestChild(c),ve=v.getParent(g.key),H=ve.nodes.indexOf(g),re=ve.nodes.indexOf(k),Z=void 0;for(Z=D;Z.key!==j.key;){var K=v.getParent(Z.key),G=K.nodes.indexOf(Z),Je=K.nodes.slice(G+1);Je.reverse().forEach(function(ne){r.removeNodeByKey(ne.key)}),Z=K}var we=se.nodes.indexOf(j),Pe=se.nodes.indexOf(ue),Oe=se.nodes.slice(we+1,Pe);for(Oe.reverse().forEach(function(ne){r.removeNodeByKey(ne.key)}),Z=te;Z.key!==ue.key;){var Ee=v.getParent(Z.key),Ke=Ee.nodes.indexOf(Z),V=Ee.nodes.slice(0,Ke);V.reverse().forEach(function(ne){r.removeNodeByKey(ne.key)}),Z=Ee}if(oe!==0&&r.removeTextByKey(i,u,oe),U!==0&&r.removeTextByKey(c,0,f),g.key!==k.key){v=r.value.document;var Q=void 0,ge=!0,ut=!1,Qe=void 0;try{for(var at=v.ancestors(k.key)[Symbol.iterator](),pt;!(ge=(pt=at.next()).done);ge=!0){var Ct=pt.value,Ae=R(Ct,1),Be=Ae[0];if(Be.nodes.size>1)break;Q=Be}}catch(ne){ut=!0,Qe=ne}finally{try{!ge&&at.return&&at.return()}finally{if(ut)throw Qe}}re!==H+1&&r.moveNodeByKey(k.key,ve.key,H+1),w?r.removeNodeByKey(g.key):r.mergeNodeByKey(k.key),Q&&r.removeNodeByKey(Q.key)}}})};le.deleteBackwardAtRange=function(r,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(t!==0){var e=r.value,o=e.document,i=n,u=i.start,c=i.focus;if(n.isExpanded){r.deleteAtRange(n);return}var f=o.getClosestVoid(u.path,r);if(f){r.removeNodeByKey(f.key);return}if(!u.isAtStartOfNode(o)){var v=o.getClosestBlock(u.path);if(o.nodes.size!==1&&v&&v.text===""&&v.nodes.size===1){r.removeNodeByKey(v.key);return}var h=o.getDescendant(u.path);if(u.isAtStartOfNode(h)){var m=o.getPreviousText(h.key),g=o.getClosestInline(h.key);g&&m.text===""&&(m=o.getPreviousText(m.key));var k=o.getClosestBlock(m.key),w=o.getClosestVoid(m.key,r);if(w){r.removeNodeByKey(w.key);return}if(t===1&&k!==v){n=n.moveAnchorTo(m.key,m.text.length),r.deleteAtRange(n);return}}if(t<=c.offset){n=n.moveFocusBackward(t),r.deleteAtRange(n);return}for(var E=h,O=0,P=c.offset;t>P;){E=o.getPreviousText(E.key);var F=P+E.text.length;if(t<=F){O=F-t;break}else P=F}n=n.moveAnchorTo(E.key,O),r.deleteAtRange(n)}}};le.deleteCharBackwardAtRange=function(r,n){if(n.isExpanded){r.deleteAtRange(n);return}var t=r.value,e=t.document,o=n.start,i=e.getClosestBlock(o.path),u=i.getOffset(o.key),c=u+o.offset,f=i.text,v=Ot.getCharOffsetBackward(f,c);r.deleteBackwardAtRange(n,v)};le.deleteCharForwardAtRange=function(r,n){if(n.isExpanded){r.deleteAtRange(n);return}var t=r.value,e=t.document,o=n.start,i=e.getClosestBlock(o.path),u=i.getOffset(o.key),c=u+o.offset,f=i.text,v=Ot.getCharOffsetForward(f,c);r.deleteForwardAtRange(n,v)};le.deleteForwardAtRange=function(r,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(t!==0){var e=r.value,o=e.document,i=n,u=i.start,c=i.focus;if(n.isExpanded){r.deleteAtRange(n);return}var f=o.getClosestVoid(u.path,r);if(f){r.removeNodeByKey(f.key);return}var v=o.getClosestBlock(u.path);if(v&&!r.isVoid(v)&&v.text===""&&o.nodes.size!==1){var h=o.getNextBlock(v.key);r.removeNodeByKey(v.key),h&&h.key&&r.moveToStartOfNode(h);return}if(!u.isAtEndOfNode(o)){var m=o.getDescendant(u.path);if(u.isAtEndOfNode(m)){var g=o.getNextText(m.key),k=o.getClosestBlock(g.key),w=o.getClosestVoid(g.key,r);if(w){r.removeNodeByKey(w.key);return}if(t===1&&k!==v){n=n.moveFocusTo(g.key,0),r.deleteAtRange(n);return}}if(t<=m.text.length-c.offset){n=n.moveFocusForward(t),r.deleteAtRange(n);return}for(var E=m,O=c.offset,P=m.text.length-c.offset;t>P;){E=o.getNextText(E.key);var F=P+E.text.length;if(t<=F){O=t-P;break}else P=F}n=n.moveFocusTo(E.key,O),r.deleteAtRange(n)}}};le.deleteLineBackwardAtRange=function(r,n){if(n.isExpanded){r.deleteAtRange(n);return}var t=r.value,e=t.document,o=n.start,i=e.getClosestBlock(o.path),u=i.getOffset(o.key),c=u+o.offset;r.deleteBackwardAtRange(n,c)};le.deleteLineForwardAtRange=function(r,n){if(n.isExpanded){r.deleteAtRange(n);return}var t=r.value,e=t.document,o=n.start,i=e.getClosestBlock(o.path),u=i.getOffset(o.key),c=u+o.offset;r.deleteForwardAtRange(n,i.text.length-c)};le.deleteWordBackwardAtRange=function(r,n){if(n.isExpanded){r.deleteAtRange(n);return}var t=r.value,e=t.document,o=n.start,i=e.getClosestBlock(o.path),u=i.getOffset(o.key),c=u+o.offset,f=i.text,v=c===0?1:Ot.getWordOffsetBackward(f,c);r.deleteBackwardAtRange(n,v)};le.deleteWordForwardAtRange=function(r,n){if(n.isExpanded){r.deleteAtRange(n);return}var t=r.value,e=t.document,o=n.start,i=e.getClosestBlock(o.path),u=i.getOffset(o.key),c=u+o.offset,f=i.text,v=Ot.getWordOffsetForward(f,c),h=v===0?1:v;r.deleteForwardAtRange(n,h)};le.insertBlockAtRange=function(r,n,t){n=Zt(r,n),t=nt.create(t);var e=r.value,o=e.document,i=n,u=i.start,c=u.key,f=u.offset,v=o.getClosestBlock(c),h=o.getClosestInline(c),m=o.getParent(v.key),g=m.nodes.indexOf(v),k=ci(r,n);if(k==="before")r.insertNodeByKey(m.key,g,t);else if(k==="behind")r.insertNodeByKey(m.key,g+1,t);else{if(h&&r.isVoid(h)){var w=u.isAtEndOfNode(h),E=w?o.getNextText(c):o.getPreviousText(c),O=w?n.moveToStartOfNode(E):n.moveToEndOfNode(E);c=O.start.key,f=O.start.offset}r.withoutNormalizing(function(){r.splitDescendantsByKey(v.key,c,f),r.insertNodeByKey(m.key,g+1,t)})}};var ci=function(n,t){var e=n.value,o=e.document,i=t.start,u=i.key,c=o.getClosestBlock(u),f=o.getClosestInline(u);return n.isVoid(c)?i.isAtEndOfNode(c)?"behind":"before":!f&&c.text===""?"behind":i.isAtStartOfNode(c)?"before":i.isAtEndOfNode(c)?"behind":"split"};le.insertFragmentAtRange=function(r,n,t){r.withoutNormalizing(function(){if(n=Zt(r,n),!!t.nodes.size){t=t.mapDescendants(function(H){return H.regenerateKey()});var e=n,o=e.start,i=r.value,u=i.document,c=u.getDescendant(o.path),f=u.getClosestBlock(c.key),v=f.getFurthestChild(c.key),h=o.isAtStartOfNode(f),m=u.getParent(f.key),g=m.nodes.indexOf(f),k=t.getBlocks(),w=t.nodes.first(),E=t.nodes.last(),O=k.first(),P=k.last(),F=id(t,u,f.key);if(O===P&&r.isVoid(O)){r.insertBlockAtRange(n,O);return}if(F===t&&(w.hasBlockChildren()||E.hasBlockChildren())){var z=ci(r,n),M=z==="before"?t.nodes:t.nodes.reverse();M.forEach(function(H){r.insertBlockAtRange(n,H)});return}if(O!==P){var B=F.getFurthest(O.key,function(H){return H.nodes.size===1}),D=B||O,te=m.nodes.indexOf(f),oe=F.removeNode(D.key);oe.nodes.forEach(function(H,re){var Z=te+re+1;r.insertNodeByKey(m.key,Z,H)})}if(o.offset!==0&&r.splitDescendantsByKey(v.key,o.key,o.offset),u=r.value.document,c=u.getDescendant(o.key),f=u.getClosestBlock(o.key),v=f.getFurthestChild(c.key),O!==P){var U=h?v:f.getNextSibling(v.key),se=U?f.nodes.skipUntil(function(H){return H.key===U.key}):N.List(),j=P.nodes.size;se.forEach(function(H,re){var Z=j+re;r.moveNodeByKey(H.key,P.key,Z)})}if(!r.isVoid(f)&&f.text===""&&!f.findDescendant(function(H){return r.isVoid(H)}))r.removeNodeByKey(f.key),r.insertNodeByKey(m.key,g,O);else{var ue=f.getFurthestChild(c.key),ve=f.nodes.indexOf(ue);O.nodes.forEach(function(H,re){var Z=o.offset===0?0:1,K=ve+re+Z;r.insertNodeByKey(f.key,K,H)})}}})};var id=function(n,t,e){var o=function(g){for(var k=g;k.nodes.size===1&&k.nodes.first().object==="block";)k=k.nodes.first();return k===g?null:k},i=function(g,k){return k.size>=g.size&&g.every(function(w,E){return k.get(E).type===w.type})},u=function(g,k){var w=g.size-k.size;if(w<0)return n;for(var E=0;E<k.size;E++)for(var O=0;O<=w;O++)if(i(k.slice(E),g.slice(O)))return k.get(E);return n},c=function(g,k){return g.getAncestors(k).slice(1).push(g.getNode(k)).reverse()},f=o(n);if(!f)return n;var v=c(t,e),h=c(n,f.key);return u(v,h)};le.insertInlineAtRange=function(r,n,t){t=rt.create(t),r.withoutNormalizing(function(){n=Zt(r,n);var e=r.value,o=e.document,i=n,u=i.start,c=o.getParent(u.path),f=o.assertDescendant(u.path),v=c.nodes.indexOf(f);r.isVoid(c)||(r.splitNodeByPath(u.path,u.offset),r.insertNodeByKey(c.key,v+1,t))})};le.insertTextAtRange=function(r,n,t,e){r.withoutNormalizing(function(){n=Zt(r,n);var o=r.value,i=o.document,u=n,c=u.start,f=c.offset,v=i.getParent(c.path);r.isVoid(v)||r.insertTextByPath(c.path,f,t,e)})};le.removeMarkAtRange=function(r,n,t){if(!n.isCollapsed){var e=r.value,o=e.document,i=o.getTextsAtRange(n),u=n.start,c=n.end;r.withoutNormalizing(function(){i.forEach(function(f){var v=f.key,h=0,m=f.text.length;v===u.key&&(h=u.offset),v===c.key&&(m=c.offset),v===u.key&&v===c.key&&(m=c.offset-u.offset),r.removeMarkByKey(v,h,m,t)})})}};le.setBlocksAtRange=function(r,n,t){var e=r.value,o=e.document,i=o.getLeafBlocksAtRange(n),u=n.start,c=n.end,f=n.isCollapsed,v=o.hasVoidParent(u.path,r),h=o.getClosestBlock(u.path),m=o.getClosestBlock(c.key),g=f===!1&&u.offset===0&&c.offset===0&&v===!1&&u.key===h.getFirstText().key&&c.key===m.getFirstText().key,k=g?i.slice(0,-1):i;r.withoutNormalizing(function(){k.forEach(function(w){r.setNodeByKey(w.key,t)})})};le.setInlinesAtRange=function(r,n,t){var e=r.value,o=e.document,i=o.getLeafInlinesAtRange(n);r.withoutNormalizing(function(){i.forEach(function(u){r.setNodeByKey(u.key,t)})})};le.splitBlockAtRange=function(r,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;n=Zt(r,n);for(var e=n,o=e.start,i=e.end,u=r.value,c=u,f=c.document,v=f.assertDescendant(o.path),h=f.getClosestBlock(v.key),m=0;h&&h.object==="block"&&m<t;)v=h,h=f.getClosestBlock(h.key),m++;r.withoutNormalizing(function(){if(r.splitDescendantsByKey(v.key,o.path,o.offset),u=r.value,f=u.document,n.isExpanded){n.isBackward&&(n=n.flip());var g=f.getNextBlock(v.key);n=n.moveAnchorToStartOfNode(g),n=n.setFocus(n.focus.setPath(null)),o.path.equals(i.path)&&(n=n.moveFocusTo(n.anchor.key,i.offset-o.offset)),n=f.resolveRange(n),r.deleteAtRange(n)}})};le.splitInlineAtRange=function(r,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1/0;n=Zt(r,n);for(var e=n,o=e.start,i=r.value,u=i.document,c=u.assertDescendant(o.path),f=u.getClosestInline(c.key),v=0;f&&f.object==="inline"&&v<t;)c=f,f=u.getClosestInline(f.key),v++;r.splitDescendantsByKey(c.key,o.path,o.offset)};le.toggleMarkAtRange=function(r,n,t){if(!n.isCollapsed){t=ie.create(t);var e=r.value,o=e.document,i=o.getActiveMarksAtRange(n),u=i.some(function(c){return c.equals(t)});u?r.removeMarkAtRange(n,t):r.addMarkAtRange(n,t)}};le.unwrapBlockAtRange=function(r,n,t){t=Ze.createProperties(t);var e=r.value,o=e.document,i=o.getLeafBlocksAtRange(n),u=i.map(function(c){return o.getClosest(c.key,function(f){return!(f.object!=="block"||t.type!=null&&f.type!==t.type||t.data!=null&&!f.data.isSuperset(t.data))})}).filter(function(c){return c}).toOrderedSet().toList();r.withoutNormalizing(function(){u.forEach(function(c){var f=c.nodes.first(),v=c.nodes.last(),h=r.value.document.getParent(c.key),m=h.nodes.indexOf(c),g=c.nodes.filter(function(O){return i.some(function(P){return O===P||O.hasDescendant(P.key)})}),k=g.first(),w=g.last();if(f===k&&v===w)c.nodes.forEach(function(O,P){r.moveNodeByKey(O.key,h.key,m+P)}),r.removeNodeByKey(c.key);else if(v===w)c.nodes.skipUntil(function(O){return O===k}).forEach(function(O,P){r.moveNodeByKey(O.key,h.key,m+1+P)});else if(f===k)c.nodes.takeUntil(function(O){return O===w}).push(w).forEach(function(O,P){r.moveNodeByKey(O.key,h.key,m+P)});else{var E=k.getFirstText();r.splitDescendantsByKey(c.key,E.key,0),o=r.value.document,g.forEach(function(O,P){if(P===0){var F=O;O=o.getNextBlock(O.key),r.removeNodeByKey(F.key)}r.moveNodeByKey(O.key,h.key,m+1+P)})}})})};le.unwrapInlineAtRange=function(r,n,t){t=Ze.createProperties(t);var e=r.value,o=e.document,i=o.getTextsAtRange(n),u=i.map(function(c){return o.getClosest(c.key,function(f){return!(f.object!=="inline"||t.type!=null&&f.type!==t.type||t.data!=null&&!f.data.isSuperset(t.data))})}).filter(function(c){return c}).toOrderedSet().toList();r.withoutNormalizing(function(){u.forEach(function(c){var f=r.value.document.getParent(c.key),v=f.nodes.indexOf(c);c.nodes.forEach(function(h,m){r.moveNodeByKey(h.key,f.key,v+m)}),r.removeNodeByKey(c.key)})})};le.wrapBlockAtRange=function(r,n,t){t=nt.create(t),t=t.set("nodes",t.nodes.clear());var e=r.value,o=e.document,i=o.getLeafBlocksAtRange(n),u=i.first(),c=i.last(),f=void 0,v=void 0,h=void 0;if(i.length===1?(f=o.getParent(u.key),v=i):f=o.getClosest(u.key,function(g){return!!o.getClosest(c.key,function(k){return g===k})}),f==null&&(f=o),v==null){var m=f.nodes.reduce(function(g,k,w){return(k===u||k.hasDescendant(u.key))&&(g[0]=w),(k===c||k.hasDescendant(c.key))&&(g[1]=w),g},[]);h=m[0],v=f.nodes.slice(m[0],m[1]+1)}h==null&&(h=f.nodes.indexOf(v.first())),r.withoutNormalizing(function(){r.insertNodeByKey(f.key,h,t),v.forEach(function(g,k){r.moveNodeByKey(g.key,t.key,k)})})};le.wrapInlineAtRange=function(r,n,t){var e=r.value,o=e.document,i=n.start,u=n.end;if(n.isCollapsed){var c=o.getClosestInline(i.path);return!c||!r.isVoid(c)?void 0:r.wrapInlineByKey(c.key,t)}t=rt.create(t),t=t.set("nodes",t.nodes.clear());var f=o.getLeafBlocksAtRange(n),v=o.getClosestBlock(i.path),h=o.getClosestBlock(u.path),m=o.getClosestInline(i.path),g=o.getClosestInline(u.path),k=v.getFurthestChild(i.key),w=h.getFurthestChild(u.key);r.withoutNormalizing(function(){(!m||m!==g)&&(r.splitDescendantsByKey(w.key,u.key,u.offset),r.splitDescendantsByKey(k.key,i.key,i.offset)),o=r.value.document,v=o.getDescendant(v.key),h=o.getDescendant(h.key),k=v.getFurthestChild(i.key),w=h.getFurthestChild(u.key);var E=v.nodes.indexOf(k),O=h.nodes.indexOf(w);if(m&&m===g){var P=v.getTextsAtRange(n).map(function(j){return i.key===j.key&&u.key===j.key?j.splitText(i.offset)[1].splitText(u.offset-i.offset)[0].regenerateKey():i.key===j.key?j.splitText(i.offset)[1].regenerateKey():u.key===j.key?j.splitText(u.offset)[0].regenerateKey():j.regenerateKey()});t=t.set("nodes",P),r.insertInlineAtRange(n,t)}else if(v===h){o=r.value.document,v=o.getClosestBlock(i.key),k=v.getFurthestChild(i.key);var F=o.getNextSibling(k.key),z=v.nodes.indexOf(F),M=i.key===u.key?F:v.getFurthestChild(u.key),B=v.nodes.skipUntil(function(j){return j===F}).takeUntil(function(j){return j===M}).push(M),D=t.regenerateKey();r.insertNodeByKey(v.key,z,D),B.forEach(function(j,ue){r.moveNodeByKey(j.key,D.key,ue)})}else{var te=v.nodes.slice(E+1),oe=h.nodes.slice(0,O+1),U=t.regenerateKey(),se=t.regenerateKey();r.insertNodeByKey(v.key,E+1,U),r.insertNodeByKey(h.key,O,se),te.forEach(function(j,ue){r.moveNodeByKey(j.key,U.key,ue)}),oe.forEach(function(j,ue){r.moveNodeByKey(j.key,se.key,ue)}),f.slice(1,-1).forEach(function(j){var ue=t.regenerateKey();r.insertNodeByKey(j.key,0,ue),j.nodes.forEach(function(ve,H){r.moveNodeByKey(ve.key,ue.key,H)})})}})};le.wrapTextAtRange=function(r,n,t){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,o=n.start,i=n.end,u=n.moveToStart(),c=n.moveToEnd();o.path.equals(i.path)&&(c=c.moveForward(t.length)),r.withoutNormalizing(function(){r.insertTextAtRange(u,t),r.insertTextAtRange(c,e)})};var ae={};ae.addMarkByPath=function(r,n,t,e,o){o=ie.create(o),r.addMarksByPath(n,t,e,[o])};ae.addMarksByPath=function(r,n,t,e,o){if(o=ie.createSet(o),!!o.size){var i=r.value,u=i.document,c=u.assertNode(n);r.withoutNormalizing(function(){t+e<c.text.length&&r.splitNodeByPath(n,t+e),t>0&&(r.splitNodeByPath(n,t),n=I.increment(n),t=0),o.forEach(function(f){r.applyOperation({type:"add_mark",path:n,mark:ie.create(f)})})})}};ae.replaceMarksByPath=function(r,n,t,e,o){var i=ie.createSet(o),u=r.value,c=u.document,f=c.assertNode(n);f.marks.equals(i)||r.withoutNormalizing(function(){t+e<f.text.length&&r.splitNodeByPath(n,t+e),t>0&&(r.splitNodeByPath(n,t),n=I.increment(n),t=0);var v=i.subtract(f.marks),h=f.marks.subtract(i);h.forEach(function(m){r.applyOperation({type:"remove_mark",path:n,mark:ie.create(m)})}),v.forEach(function(m){r.applyOperation({type:"add_mark",path:n,mark:ie.create(m)})})})};ae.insertFragmentByPath=function(r,n,t,e){e.nodes.forEach(function(o,i){r.insertNodeByPath(n,t+i,o)})};ae.insertNodeByPath=function(r,n,t,e){r.applyOperation({type:"insert_node",path:n.concat(t),node:e})};ae.insertTextByPath=function(r,n,t,e,o){var i=r.value,u=i.annotations,c=i.document;c.assertNode(n),r.withoutNormalizing(function(){var f=!0,v=!1,h=void 0;try{for(var m=u.values()[Symbol.iterator](),g;!(f=(g=m.next()).done);f=!0){var k=g.value,w=k.start,E=k.end,O=r.isAtomic(k);O&&w.path.equals(n)&&w.offset<t&&(!E.path.equals(n)||E.offset>t)&&r.removeAnnotation(k)}}catch(P){v=!0,h=P}finally{try{!f&&m.return&&m.return()}finally{if(v)throw h}}r.applyOperation({type:"insert_text",path:n,offset:t,text:e}),o&&r.replaceMarksByPath(n,t,e.length,o)})};ae.mergeNodeByPath=function(r,n){var t=r.value,e=t.document,o=e.getDescendant(n),i=e.getPreviousSibling(n);if(!i)throw new Error('Unable to merge node with path "'+n+'", because it has no previous sibling.');var u=i.object==="text"?i.text.length:i.nodes.size;r.applyOperation({type:"merge_node",path:n,position:u,properties:{type:o.type,data:o.data},target:null})};ae.moveNodeByPath=function(r,n,t,e){if(I.isEqual(n,t))return r;var o=t.concat(e);if(I.isEqual(n,o))return r;r.applyOperation({type:"move_node",path:n,newPath:o})};ae.removeMarkByPath=function(r,n,t,e,o){o=ie.create(o),r.removeMarksByPath(n,t,e,[o])};ae.removeMarksByPath=function(r,n,t,e,o){if(o=ie.createSet(o),!!o.size){var i=r.value,u=i.document,c=u.assertNode(n);o.intersect(c.marks).isEmpty()||r.withoutNormalizing(function(){t+e<c.text.length&&r.splitNodeByPath(n,t+e),t>0&&(r.splitNodeByPath(n,t),n=I.increment(n),t=0),o.forEach(function(f){r.applyOperation({type:"remove_mark",path:n,offset:t,length:e,mark:f})})})}};ae.removeAllMarksByPath=function(r,n){var t=r.state,e=t.document,o=e.assertNode(n);r.withoutNormalizing(function(){if(o.object==="text"){r.removeMarksByPath(n,0,o.text.length,o.marks);return}var i=!0,u=!1,c=void 0;try{for(var f=o.texts()[Symbol.iterator](),v;!(i=(v=f.next()).done);i=!0){var h=v.value,m=R(h,2),g=m[0],k=m[1],w=n.concat(k);r.removeMarksByPath(w,0,g.text.length,g.marks)}}catch(E){u=!0,c=E}finally{try{!i&&f.return&&f.return()}finally{if(u)throw c}}})};ae.removeNodeByPath=function(r,n){var t=r.value,e=t.document,o=e.assertNode(n);r.applyOperation({type:"remove_node",path:n,node:o})};ae.removeTextByPath=function(r,n,t,e){var o=r.value,i=o.document,u=o.annotations,c=i.assertNode(n),f=c.text.slice(t,t+e);r.withoutNormalizing(function(){var v=!0,h=!1,m=void 0;try{for(var g=u.values()[Symbol.iterator](),k;!(v=(k=g.next()).done);v=!0){var w=k.value,E=w.start,O=w.end,P=r.isAtomic(w);P&&E.path.equals(n)&&E.offset<t&&(!O.path.equals(n)||O.offset>t)&&r.removeAnnotation(w)}}catch(F){h=!0,m=F}finally{try{!v&&g.return&&g.return()}finally{if(h)throw m}}r.applyOperation({type:"remove_text",path:n,offset:t,text:f})})};ae.replaceNodeByPath=function(r,n,t){t=Ze.create(t);var e=n.last(),o=I.lift(n);r.withoutNormalizing(function(){r.removeNodeByPath(n),r.insertNodeByPath(o,e,t)})};ae.replaceTextByPath=function(r,n,t,e,o,i){r.withoutNormalizing(function(){r.removeTextByPath(n,t,e),r.insertTextByPath(n,t,o,i)})};ae.setMarkByPath=function(r,n,t,e,o,i){o=ie.create(o),i=ie.createProperties(i);var u=r.value,c=u.document,f=c.assertNode(n);r.withoutNormalizing(function(){t+e<f.text.length&&r.splitNodeByPath(n,t+e),t>0&&(r.splitNodeByPath(n,t),n=I.increment(n),t=0),r.applyOperation({type:"set_mark",path:n,properties:o,newProperties:i})})};ae.setNodeByPath=function(r,n,t){var e=r.value,o=e.document,i=o.assertNode(n);t=Ze.createProperties(t);var u=hr(i,Object.keys(t));r.applyOperation({type:"set_node",path:n,properties:u,newProperties:t})};ae.setTextByPath=function(r,n,t,e){var o=r.value,i=o.document,u=i.assertNode(n),c=u.text.length;r.replaceTextByPath(n,0,c,t,e)};ae.splitNodeByPath=function(r,n,t){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=e.target,i=o===void 0?null:o,u=r.value,c=u.document,f=c.getDescendant(n);r.applyOperation({type:"split_node",path:n,position:t,target:i,properties:{type:f.type,data:f.data}})};ae.splitDescendantsByPath=function(r,n,t,e){if(n.equals(t)){r.splitNodeByPath(t,e);return}var o=r.value,i=o.document,u=e,c=t;r.withoutNormalizing(function(){r.splitNodeByKey(t,e);var f=!0,v=!1,h=void 0;try{for(var m=i.ancestors(t)[Symbol.iterator](),g;!(f=(g=m.next()).done);f=!0){var k=g.value,w=R(k,2),E=w[1],O=u;if(u=c.last()+1,c=E,r.splitNodeByPath(E,u,{target:O}),E.equals(n))break}}catch(P){v=!0,h=P}finally{try{!f&&m.return&&m.return()}finally{if(v)throw h}}})};ae.unwrapInlineByPath=function(r,n,t){var e=r.value,o=e.document,i=e.selection,u=o.assertNode(n),c=u.getFirstText(),f=u.getLastText(),v=i.moveToRangeOfNode(c,f);r.unwrapInlineAtRange(v,t)};ae.unwrapBlockByPath=function(r,n,t){var e=r.value,o=e.document,i=e.selection,u=o.assertNode(n),c=u.getFirstText(),f=u.getLastText(),v=i.moveToRangeOfNode(c,f);r.unwrapBlockAtRange(v,t)};ae.unwrapNodeByPath=function(r,n){var t=r.value,e=t.document;e.assertNode(n);var o=I.lift(n),i=e.assertNode(o),u=n.last(),c=o.last(),f=I.lift(o),v=u===0,h=u===i.nodes.size-1;r.withoutNormalizing(function(){if(i.nodes.size===1)r.moveNodeByPath(n,f,c+1),r.removeNodeByPath(o);else if(v)r.moveNodeByPath(n,f,c);else if(h)r.moveNodeByPath(n,f,c+1);else{var m=I.increment(n,1,o.size-1);m=m.set(m.size-1,0),r.splitNodeByPath(o,u),r.moveNodeByPath(m,f,c+1)}})};ae.unwrapChildrenByPath=function(r,n){n=I.create(n);var t=r.value,e=t.document,o=e.assertNode(n),i=I.lift(n),u=n.last(),c=o.nodes;r.withoutNormalizing(function(){c.reverse().forEach(function(f,v){var h=c.size-v-1,m=n.push(h);r.moveNodeByPath(m,i,u+1)}),r.removeNodeByPath(n)})};ae.wrapBlockByPath=function(r,n,t){t=nt.create(t),t=t.set("nodes",t.nodes.clear());var e=I.lift(n),o=n.last(),i=I.increment(n);r.withoutNormalizing(function(){r.insertNodeByPath(e,o,t),r.moveNodeByPath(i,n,0)})};ae.wrapInlineByPath=function(r,n,t){t=rt.create(t),t=t.set("nodes",t.nodes.clear());var e=I.lift(n),o=n.last(),i=I.increment(n);r.withoutNormalizing(function(){r.insertNodeByPath(e,o,t),r.moveNodeByPath(i,n,0)})};ae.wrapNodeByPath=function(r,n,t){t=Ze.create(t),t.object==="block"?r.wrapBlockByPath(n,t):t.object==="inline"&&r.wrapInlineByPath(n,t)};var sd=["addMark","insertFragment","insertNode","insertText","mergeNode","removeAllMarks","removeMark","removeNode","removeText","replaceMarks","replaceNode","replaceText","setMark","setNode","setText","splitNode","unwrapBlock","unwrapChildren","unwrapInline","unwrapNode","wrapBlock","wrapInline","wrapNode"],ud=function(n){ae[n+"ByKey"]=function(t,e){for(var o=arguments.length,i=Array(o>2?o-2:0),u=2;u<o;u++)i[u-2]=arguments[u];var c=t.value,f=c.document,v=f.assertPath(e);t[n+"ByPath"].apply(t,[v].concat(i))}},bn=!0,ko=!1,_o=void 0;try{for(var Fn=sd[Symbol.iterator](),Ao;!(bn=(Ao=Fn.next()).done);bn=!0){var cd=Ao.value;ud(cd)}}catch(r){ko=!0,_o=r}finally{try{!bn&&Fn.return&&Fn.return()}finally{if(ko)throw _o}}ae.moveNodeByKey=function(r,n,t){for(var e=arguments.length,o=Array(e>3?e-3:0),i=3;i<e;i++)o[i-3]=arguments[i];var u=r.value,c=u.document,f=c.assertPath(n),v=c.assertPath(t);r.moveNodeByPath.apply(r,[f,v].concat(o))};ae.splitDescendantsByKey=function(r,n,t){for(var e=arguments.length,o=Array(e>3?e-3:0),i=3;i<e;i++)o[i-3]=arguments[i];var u=r.value,c=u.document,f=c.assertPath(n),v=c.assertPath(t);r.splitDescendantsByPath.apply(r,[f,v].concat(o))};var Qt={};Qt.save=function(r,n){var t=r.operations,e=r.value,o=e.data,i=r.tmp,u=i.save,c=i.merge;if(!(u===!1||!ld(n))){var f=o.get("undos")||N.List(),v=f.last(),h=v&&v.last();if(c==null&&(t.size!==0?c=!0:c=fd(n,h)),c&&v){var m=v.push(n);f=f.pop(),f=f.push(m)}else{var g=N.List([n]);f=f.push(g)}f.size>100&&(f=f.takeLast(100)),r.withoutSaving(function(){var k=N.List(),w=o.set("undos",f).set("redos",k);r.setData(w)})}};Qt.redo=function(r){var n=r.value,t=n.data,e=t.get("redos")||N.List(),o=t.get("undos")||N.List(),i=e.last();i&&r.withoutSaving(function(){r.withoutNormalizing(function(){i.forEach(function(c){var f=c,v=f.type,h=f.newProperties;v==="set_selection"&&(c=c.set("newProperties",ti(h,"isFocused"))),r.applyOperation(c)}),e=e.pop(),o=o.push(i);var u=t.set("undos",o).set("redos",e);r.setData(u)})})};Qt.undo=function(r){var n=r.value,t=n.data,e=t.get("redos")||N.List(),o=t.get("undos")||N.List(),i=o.last();i&&r.withoutSaving(function(){r.withoutNormalizing(function(){i.slice().reverse().map(function(c){return c.invert()}).forEach(function(c){var f=c,v=f.type,h=f.newProperties;v==="set_selection"&&(c=c.set("newProperties",ti(h,"isFocused"))),r.applyOperation(c)}),e=e.push(i),o=o.pop();var u=t.set("undos",o).set("redos",e);r.setData(u)})})};Qt.withoutMerging=function(r,n){var t=r.tmp.merge;r.tmp.merge=!1,n(r),r.tmp.merge=t};Qt.withoutSaving=function(r,n){var t=r.tmp.save;r.tmp.save=!1,n(r),r.tmp.save=t};function fd(r,n){if(!n)return!1;var t=r.type==="set_selection"&&n.type==="set_selection"||r.type==="insert_text"&&n.type==="insert_text"&&r.offset===n.offset+n.text.length&&r.path.equals(n.path)||r.type==="remove_text"&&n.type==="remove_text"&&r.offset+r.text.length===n.offset&&r.path.equals(n.path);return t}function ld(r){if(r.type==="set_selection"){var n=r.newProperties,t=n.isFocused,e=n.anchor,o=n.focus;if(t!==void 0&&!e&&!o)return!1}return!0}var S={};S.blur=function(r){r.select({isFocused:!1})};S.deselect=function(r){var n=_t.create();r.select(n)};S.focus=function(r){r.select({isFocused:!0})};S.flip=function(r){r.command(ye,"flip")};S.moveAnchorBackward=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[Xt,"anchor"].concat(t))};S.moveAnchorWordBackward=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[Wr,"anchor"].concat(t))};S.moveAnchorForward=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[er,"anchor"].concat(t))};S.moveAnchorWordForward=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[Gr,"anchor"].concat(t))};S.moveAnchorTo=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"moveAnchorTo"].concat(t))};S.moveAnchorToEndOfBlock=function(r){r.command(_e,"anchor","end","block")};S.moveAnchorToEndOfInline=function(r){r.command(_e,"anchor","end","inline")};S.moveAnchorToEndOfDocument=function(r){r.moveAnchorToEndOfNode(r.value.document).moveToAnchor()};S.moveAnchorToEndOfNextBlock=function(r){r.command(q,"anchor","end","next","block")};S.moveAnchorToEndOfNextInline=function(r){r.command(q,"anchor","end","next","inline")};S.moveAnchorToEndOfNextText=function(r){r.command(q,"anchor","end","next","text")};S.moveAnchorToEndOfNode=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"moveAnchorToEndOfNode"].concat(t))};S.moveAnchorToEndOfPreviousBlock=function(r){r.command(q,"anchor","end","previous","block")};S.moveAnchorToEndOfPreviousInline=function(r){r.command(q,"anchor","end","previous","inline")};S.moveAnchorToEndOfPreviousText=function(r){r.command(q,"anchor","end","previous","text")};S.moveAnchorToEndOfText=function(r){r.command(_e,"anchor","end","text")};S.moveAnchorToStartOfBlock=function(r){r.command(_e,"anchor","start","block")};S.moveAnchorToStartOfDocument=function(r){r.moveAnchorToStartOfNode(r.value.document).moveToAnchor()};S.moveAnchorToStartOfInline=function(r){r.command(_e,"anchor","start","inline")};S.moveAnchorToStartOfNextBlock=function(r){r.command(q,"anchor","start","next","block")};S.moveAnchorToStartOfNextInline=function(r){r.command(q,"anchor","start","next","inline")};S.moveAnchorToStartOfNextText=function(r){r.command(q,"anchor","start","next","text")};S.moveAnchorToStartOfNode=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"moveAnchorToStartOfNode"].concat(t))};S.moveAnchorToStartOfPreviousBlock=function(r){r.command(q,"anchor","start","previous","block")};S.moveAnchorToStartOfPreviousInline=function(r){r.command(q,"anchor","start","previous","inline")};S.moveAnchorToStartOfPreviousText=function(r){r.command(q,"anchor","start","previous","text")};S.moveAnchorToStartOfText=function(r){r.command(_e,"anchor","start","text")};S.moveBackward=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(n!==0){var t=r.value,e=t.document,o=t.selection,i=o.start,u=e.getClosestBlock(i.key),c=u.getOffset(i.key),f=c+i.offset,v=u.text,h=Ot.getCharOffsetBackward(v,f,n);r.moveAnchorBackward(h).moveFocusBackward(h)}};S.moveWordBackward=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.moveFocusWordBackward.apply(r,t).moveToFocus()};S.moveEndBackward=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[Xt,"end"].concat(t))};S.moveEndWordBackward=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[Wr,"end"].concat(t))};S.moveEndForward=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[er,"end"].concat(t))};S.moveEndWordForward=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[Gr,"end"].concat(t))};S.moveEndTo=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"moveEndTo"].concat(t))};S.moveEndToEndOfBlock=function(r){r.command(_e,"end","end","block")};S.moveEndToEndOfDocument=function(r){r.moveEndToEndOfNode(r.value.document).moveToEnd()};S.moveEndToEndOfInline=function(r){r.command(_e,"end","end","inline")};S.moveEndToEndOfNextBlock=function(r){r.command(q,"end","end","next","block")};S.moveEndToEndOfNextInline=function(r){r.command(q,"end","end","next","inline")};S.moveEndToEndOfNextText=function(r){r.command(q,"end","end","next","text")};S.moveEndToEndOfNode=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"moveEndToEndOfNode"].concat(t))};S.moveEndToEndOfPreviousBlock=function(r){r.command(q,"end","end","previous","block")};S.moveEndToEndOfPreviousInline=function(r){r.command(q,"end","end","previous","inline")};S.moveEndToEndOfPreviousText=function(r){r.command(q,"end","end","previous","text")};S.moveEndToEndOfText=function(r){r.command(_e,"end","end","text")};S.moveEndToStartOfBlock=function(r){r.command(_e,"end","start","block")};S.moveEndToStartOfDocument=function(r){r.moveEndToStartOfNode(r.value.document).moveToEnd()};S.moveEndToStartOfInline=function(r){r.command(_e,"end","start","inline")};S.moveEndToStartOfNextBlock=function(r){r.command(q,"end","start","next","block")};S.moveEndToStartOfNextInline=function(r){r.command(q,"end","start","next","inline")};S.moveEndToStartOfNextText=function(r){r.command(q,"end","start","next","text")};S.moveEndToStartOfNode=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"moveEndToStartOfNode"].concat(t))};S.moveEndToStartOfPreviousBlock=function(r){r.command(q,"end","start","previous","block")};S.moveEndToStartOfPreviousInline=function(r){r.command(q,"end","start","previous","inline")};S.moveEndToStartOfPreviousText=function(r){r.command(q,"end","start","previous","text")};S.moveEndToStartOfText=function(r){r.command(_e,"end","start","text")};S.moveFocusBackward=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[Xt,"focus"].concat(t))};S.moveFocusWordBackward=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[Wr,"focus"].concat(t))};S.moveFocusForward=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[er,"focus"].concat(t))};S.moveFocusWordForward=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[Gr,"focus"].concat(t))};S.moveFocusTo=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"moveFocusTo"].concat(t))};S.moveFocusToEndOfBlock=function(r){r.command(_e,"focus","end","block")};S.moveFocusToEndOfDocument=function(r){r.moveFocusToEndOfNode(r.value.document).moveToFocus()};S.moveFocusToEndOfInline=function(r){r.command(_e,"focus","end","inline")};S.moveFocusToEndOfNextBlock=function(r){r.command(q,"focus","end","next","block")};S.moveFocusToEndOfNextInline=function(r){r.command(q,"focus","end","next","inline")};S.moveFocusToEndOfNextText=function(r){r.command(q,"focus","end","next","text")};S.moveFocusToEndOfNode=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"moveFocusToEndOfNode"].concat(t))};S.moveFocusToEndOfPreviousBlock=function(r){r.command(q,"focus","end","previous","block")};S.moveFocusToEndOfPreviousInline=function(r){r.command(q,"focus","end","previous","inline")};S.moveFocusToEndOfPreviousText=function(r){r.command(q,"focus","end","previous","text")};S.moveFocusToEndOfText=function(r){r.command(_e,"focus","end","text")};S.moveFocusToStartOfBlock=function(r){r.command(_e,"focus","start","block")};S.moveFocusToStartOfDocument=function(r){r.moveFocusToStartOfNode(r.value.document).moveToFocus()};S.moveFocusToStartOfInline=function(r){r.command(_e,"focus","start","inline")};S.moveFocusToStartOfNextBlock=function(r){r.command(q,"focus","start","next","block")};S.moveFocusToStartOfNextInline=function(r){r.command(q,"focus","start","next","inline")};S.moveFocusToStartOfNextText=function(r){r.command(q,"focus","start","next","text")};S.moveFocusToStartOfNode=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"moveFocusToStartOfNode"].concat(t))};S.moveFocusToStartOfPreviousBlock=function(r){r.command(q,"focus","start","previous","block")};S.moveFocusToStartOfPreviousInline=function(r){r.command(q,"focus","start","previous","inline")};S.moveFocusToStartOfPreviousText=function(r){r.command(q,"focus","start","previous","text")};S.moveFocusToStartOfText=function(r){r.command(_e,"focus","start","text")};S.moveForward=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(n!==0){var t=r.value,e=t.document,o=t.selection,i=o.start,u=e.getClosestBlock(i.path),c=u.getOffset(i.key),f=c+i.offset,v=u.text,h=Ot.getCharOffsetForward(v,f,n);r.moveAnchorForward(h).moveFocusForward(h)}};S.moveWordForward=function(r){for(var n,t=arguments.length,e=Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];(n=r.moveFocusWordForward.apply(r,e)).moveToFocus.apply(n,e)};S.moveStartBackward=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[Xt,"start"].concat(t))};S.moveStartWordBackward=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[Wr,"start"].concat(t))};S.moveStartForward=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[er,"start"].concat(t))};S.moveStartWordForward=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[Gr,"start"].concat(t))};S.moveStartTo=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"moveStartTo"].concat(t))};S.moveStartToEndOfBlock=function(r){r.command(_e,"start","end","block")};S.moveStartToEndOfDocument=function(r){r.moveStartToEndOfNode(r.value.document).moveToStart()};S.moveStartToEndOfInline=function(r){r.command(_e,"start","end","inline")};S.moveStartToEndOfNextBlock=function(r){r.command(q,"start","end","next","block")};S.moveStartToEndOfNextInline=function(r){r.command(q,"start","end","next","inline")};S.moveStartToEndOfNextText=function(r){r.command(q,"start","end","next","text")};S.moveStartToEndOfNode=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"moveStartToEndOfNode"].concat(t))};S.moveStartToEndOfPreviousBlock=function(r){r.command(q,"start","end","previous","block")};S.moveStartToEndOfPreviousInline=function(r){r.command(q,"start","end","previous","inline")};S.moveStartToEndOfPreviousText=function(r){r.command(q,"start","end","previous","text")};S.moveStartToEndOfText=function(r){r.command(_e,"start","end","text")};S.moveStartToStartOfBlock=function(r){r.command(_e,"start","start","block")};S.moveStartToStartOfDocument=function(r){r.moveStartToStartOfNode(r.value.document).moveToStart()};S.moveStartToStartOfInline=function(r){r.command(_e,"start","start","inline")};S.moveStartToStartOfNextBlock=function(r){r.command(q,"start","start","next","block")};S.moveStartToStartOfNextInline=function(r){r.command(q,"start","start","next","inline")};S.moveStartToStartOfNextText=function(r){r.command(q,"start","start","next","text")};S.moveStartToStartOfNode=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"moveStartToStartOfNode"].concat(t))};S.moveStartToStartOfPreviousBlock=function(r){r.command(q,"start","start","previous","block")};S.moveStartToStartOfPreviousInline=function(r){r.command(q,"start","start","previous","inline")};S.moveStartToStartOfPreviousText=function(r){r.command(q,"start","start","previous","text")};S.moveStartToStartOfText=function(r){r.command(_e,"start","start","text")};S.moveTo=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"moveTo"].concat(t))};S.moveToAnchor=function(r){r.command(ye,"moveToAnchor")};S.moveToEnd=function(r){r.command(ye,"moveToEnd")};S.moveToEndOfBlock=function(r){r.moveEndToEndOfBlock().moveToEnd()};S.moveToEndOfDocument=function(r){r.moveEndToEndOfNode(r.value.document).moveToEnd()};S.moveToEndOfInline=function(r){r.moveEndToEndOfInline().moveToEnd()};S.moveToEndOfNextBlock=function(r){r.moveEndToEndOfNextBlock().moveToEnd()};S.moveToEndOfNextInline=function(r){r.moveEndToEndOfNextInline().moveToEnd()};S.moveToEndOfNextText=function(r){r.moveEndToEndOfNextText().moveToEnd()};S.moveToEndOfNode=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"moveToEndOfNode"].concat(t))};S.moveToEndOfPreviousBlock=function(r){r.moveStartToEndOfPreviousBlock().moveToStart()};S.moveToEndOfPreviousInline=function(r){r.moveStartToEndOfPreviousInline().moveToStart()};S.moveToEndOfPreviousText=function(r){r.moveStartToEndOfPreviousText().moveToStart()};S.moveToEndOfText=function(r){r.moveEndToEndOfText().moveToEnd()};S.moveToFocus=function(r){r.command(ye,"moveToFocus")};S.moveToRangeOfDocument=function(r){r.moveToRangeOfNode(r.value.document)};S.moveToRangeOfNode=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"moveToRangeOfNode"].concat(t))};S.moveToStart=function(r){r.command(ye,"moveToStart")};S.moveToStartOfBlock=function(r){r.moveStartToStartOfBlock().moveToStart()};S.moveToStartOfDocument=function(r){r.moveStartToStartOfNode(r.value.document).moveToStart()};S.moveToStartOfInline=function(r){r.moveStartToStartOfInline().moveToStart()};S.moveToStartOfNextBlock=function(r){r.moveEndToStartOfNextBlock().moveToEnd()};S.moveToStartOfNextInline=function(r){r.moveEndToStartOfNextInline().moveToEnd()};S.moveToStartOfNextText=function(r){r.moveEndToStartOfNextText().moveToEnd()};S.moveToStartOfNode=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"moveToStartOfNode"].concat(t))};S.moveToStartOfPreviousBlock=function(r){r.moveStartToStartOfPreviousBlock().moveToStart()};S.moveToStartOfPreviousInline=function(r){r.moveStartToStartOfPreviousInline().moveToStart()};S.moveToStartOfPreviousText=function(r){r.moveStartToStartOfPreviousText().moveToStart()};S.moveToStartOfText=function(r){r.moveStartToStartOfText().moveToStart()};S.select=function(r,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n=_t.createProperties(n);var e=t.snapshot,o=e===void 0?!1:e,i=r.value,u=i.document,c=i.selection,f={},v=c.setProperties(n);v=u.resolveSelection(v),n=hr(v,Object.keys(n));for(var h in n)(o===!0||!N.is(n[h],c[h]))&&(f[h]=n[h]);if(c.marks&&!f.marks&&(f.anchor||f.focus)&&(f.marks=null),Object.keys(f).length!==0){var m=hr(c.toJSON(),Object.keys(f));r.applyOperation({type:"set_selection",value:i,properties:m,newProperties:f},o?{skip:!1,merge:!1}:{})}};S.setAnchor=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"setAnchor"].concat(t))};S.setEnd=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"setEnd"].concat(t))};S.setFocus=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"setFocus"].concat(t))};S.setStart=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];r.command.apply(r,[ye,"setStart"].concat(t))};S.snapshotSelection=function(r){r.withoutMerging(function(){r.select(r.value.selection,{snapshot:!0})})};function ye(r,n){for(var t,e=arguments.length,o=Array(e>2?e-2:0),i=2;i<e;i++)o[i-2]=arguments[i];var u=(t=r.value.selection)[n].apply(t,o);r.select(u)}function _e(r,n,t,e){var o=n.slice(0,1).toUpperCase()+n.slice(1),i=t.slice(0,1).toUpperCase()+t.slice(1),u=e.slice(0,1).toUpperCase()+e.slice(1),c="move"+o+"To"+i+"OfNode",f=e==="text"?"getNode":"getClosest"+u,v=r.value,h=v.document,m=v.selection,g=m[n],k=h[f](g.key);k&&r[c](k)}function q(r,n,t,e,o){var i=n.slice(0,1).toUpperCase()+n.slice(1),u=t.slice(0,1).toUpperCase()+t.slice(1),c=e.slice(0,1).toUpperCase()+e.slice(1),f=o.slice(0,1).toUpperCase()+o.slice(1),v="move"+i+"To"+u+"OfNode",h=o==="text"?"getNode":"getClosest"+f,m="get"+c+f,g=r.value,k=g.document,w=g.selection,E=w[n],O=k[h](E.key);if(O){var P=k[m](O.key);P&&r[v](P)}}function Xt(r,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(t!==0){if(t<0)return er(r,n,-t);var e=n.slice(0,1).toUpperCase()+n.slice(1),o=r.value,i=o.document,u=o.selection,c=u[n],f=i.hasVoidParent(c.path,r);if(!f&&c.offset-t>=0){var v=u["move"+e+"Backward"](t);r.select(v);return}var h=i.getPreviousText(c.path);if(h){var m=i.getClosestBlock(c.path),g=m.hasNode(h.key),k=h&&i.hasVoidParent(h.key,r);if(r["move"+e+"ToEndOfNode"](h),!f&&!k&&g){var w=r.value.selection["move"+e+"Backward"](t);r.select(w)}}}}function er(r,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(t!==0){if(t<0)return Xt(r,n,-t);var e=n.slice(0,1).toUpperCase()+n.slice(1),o=r.value,i=o.document,u=o.selection,c=u[n],f=i.getNode(c.path),v=i.hasVoidParent(c.path,r);if(!v&&c.offset+t<=f.text.length){var h=u["move"+e+"Forward"](t);r.select(h);return}var m=i.getNextText(c.path);if(m){var g=i.getClosestBlock(c.path),k=g.hasNode(m.key),w=i.hasVoidParent(m.key,r);if(r["move"+e+"ToStartOfNode"](m),!v&&!w&&k){var E=r.value.selection["move"+e+"Forward"](t);r.select(E)}}}}function Wr(r,n){var t=r.value,e=t.document,o=t.selection,i=o[n],u=e.getClosestBlock(i.key),c=u.getOffset(i.key),f=c+i.offset,v=u.text,h=Ot.getWordOffsetBackward(v,f);r.command(Xt,n,h>0?h:1)}function Gr(r,n){var t=r.value,e=t.document,o=t.selection,i=o[n],u=e.getClosestBlock(i.key),c=u.getOffset(i.key),f=c+i.offset,v=u.text,h=Ot.getWordOffsetForward(v,f);r.command(er,n,h>0?h:1)}var tr={};tr.setData=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.value,e=yt.createProperties({data:n}),o=hr(t,Object.keys(e));r.applyOperation({type:"set_value",properties:o,newProperties:e})};tr.addAnnotation=function(r,n){n=Re.create(n),r.applyOperation({type:"add_annotation",annotation:n})};tr.removeAnnotation=function(r,n){n=Re.create(n),r.applyOperation({type:"remove_annotation",annotation:n})};tr.setAnnotation=function(r,n,t){n=Re.create(n),t=Re.createProperties(t),r.applyOperation({type:"set_annotation",properties:n,newProperties:t})};tr.setAnnotations=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=r.value,e=yt.createProperties({annotations:n}),o=hr(t,Object.keys(e));r.applyOperation({type:"set_value",properties:o,newProperties:e})};function ra(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function n(e,o){for(var i in r)e.registerQuery(i);return o()}function t(e,o,i){var u=e.type,c=e.args,f=r[u];if(!f)return i();var v=f.apply(void 0,[o].concat(Fe(c)));return v===void 0?i():v}return{onConstruct:n,onQuery:t}}var vd=function(r){je(n,r);function n(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Se(this,n);var o=qe(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));o.code=t;for(var i in e)o[i]=e[i];return Error.captureStackTrace?Error.captureStackTrace(o,o.constructor):o.stack=new Error().stack,o}return n}(Error);function fi(r){var n=r.rules,t=r.document,e=r.blocks,o=r.inlines,i=r.marks,u=r.annotations,c=r.decorations,f=[];if(n&&(f=f.concat(n)),t&&f.push($e({match:[{object:"document"}]},t)),e)for(var v in e)f.push($e({match:[{object:"block",type:v}]},e[v]));if(o)for(var h in o)f.push($e({match:[{object:"inline",type:h}]},o[h]));if(i)for(var m in i)f.push($e({match:[{object:"mark",type:m}]},i[m]));if(u)for(var g in u)f.push($e({match:[{object:"annotation",type:g}]},u[g]));if(c)for(var k in c)f.push($e({match:[{object:"decoration",type:k}]},c[k]));function w(z,M){var B=f.find(function(D){return"isAtomic"in D&&Gt(M,D.match)});return B&&B.isAtomic}function E(z,M){var B=f.find(function(D){return"isVoid"in D&&Gt(M,D.match)});return B&&B.isVoid}function O(z,M,B){var D=P(z,M,function(){});return D?function(){var te=D.rule,oe=M.operations.size;te.normalize&&te.normalize(M,D),M.operations.size===oe&&dd(M,D)}:B()}function P(z,M,B){var D=f.filter(function(U){return Gt(z,U.match)}),te=gt(z,D,f,{every:!0});if(!te)return B();var oe=new vd(te.code,te);return oe}var F=ra({isAtomic:w,isVoid:E});return[{normalizeNode:O,validateNode:P},F]}function dd(r,n){var t=n.code,e=n.node,o=n.child,i=n.next,u=n.previous,c=n.key,f=n.mark;switch(t){case"child_max_invalid":case"child_object_invalid":case"child_type_invalid":case"child_unknown":case"first_child_object_invalid":case"first_child_type_invalid":case"last_child_object_invalid":case"last_child_type_invalid":return o.object==="text"&&e.object==="block"&&e.nodes.size===1?r.removeNodeByKey(e.key):r.removeNodeByKey(o.key);case"previous_sibling_object_invalid":case"previous_sibling_type_invalid":return u.object==="text"&&e.object==="block"&&e.nodes.size===1?r.removeNodeByKey(e.key):r.removeNodeByKey(u.key);case"next_sibling_object_invalid":case"next_sibling_type_invalid":return i.object==="text"&&e.object==="block"&&e.nodes.size===1?r.removeNodeByKey(e.key):r.removeNodeByKey(i.key);case"child_min_invalid":case"node_text_invalid":case"parent_object_invalid":case"parent_type_invalid":return e.object==="document"?e.nodes.forEach(function(v){return r.removeNodeByKey(v.key)}):r.removeNodeByKey(e.key);case"node_data_invalid":return e.data.get(c)===void 0&&e.object!=="document"?r.removeNodeByKey(e.key):r.setNodeByKey(e.key,{data:e.data.delete(c)});case"node_mark_invalid":return e.getTexts().forEach(function(v){return r.removeMarkByKey(v.key,0,v.text.length,f)});default:return r.removeNodeByKey(e.key)}}function Gt(r,n){var t=gt(r,n);return!t}function gt(r,n,t){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=e.every,i=o===void 0?!1:o,u=e.match,c=u===void 0?null:u;if(typeof n=="function"){var f=n(r,c);return f?null:He("node_invalid",{rule:n,node:r})}if(Array.isArray(n)){var v=n.length?n:[{}],h=void 0,m=!0,g=!1,k=void 0;try{for(var w=v[Symbol.iterator](),E;!(m=(E=w.next()).done);m=!0){var O=E.value,P=gt(r,O,t);if(h=h||P,i&&P)return P;if(!i&&!P)return}}catch(z){g=!0,k=z}finally{try{!m&&w.return&&w.return()}finally{if(g)throw k}}return h}var F=hd(r,n)||md(r,n)||yd(r,n)||gd(r,n)||pd(r,n)||kd(r,n)||_d(r,n)||Ad(r,n,t);return F}function hd(r,n){if(n.object!=null&&n.object!==r.object&&!(typeof n.object=="function"&&n.object(r.object)))return He("node_object_invalid",{rule:n,node:r})}function md(r,n){if(n.type!=null&&n.type!==r.type&&!(typeof n.type=="function"&&n.type(r.type)))return He("node_type_invalid",{rule:n,node:r})}function yd(r,n){if(n.data!=null&&r.data!=null){if(typeof n.data=="function")return n.data(r.data)?void 0:He("node_data_invalid",{rule:n,node:r});for(var t in n.data){var e=n.data[t],o=r.data&&r.data.get(t),i=typeof e=="function"?e(o):e===o;if(!i)return He("node_data_invalid",{rule:n,node:r,key:t,value:o})}}}function gd(r,n){if(n.marks!=null){var t=r.object==="text"?r.marks.toArray():r.getMarks().toArray(),e=function(g){var k=n.marks.some(function(w){return typeof w.type=="function"?w.type(g.type):w.type===g.type});return k?"continue":{v:He("node_mark_invalid",{rule:n,node:r,mark:g})}},o=!0,i=!1,u=void 0;try{for(var c=t[Symbol.iterator](),f;!(o=(f=c.next()).done);o=!0){var v=f.value,h=e(v);switch(h){case"continue":continue;default:if((typeof h>"u"?"undefined":Hn(h))==="object")return h.v}}}catch(m){i=!0,u=m}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}}}function pd(r,n){if(n.text!=null){var t=r.text,e=typeof n.text=="function"?n.text(t):n.text.test(t);if(!e)return He("node_text_invalid",{rule:n,node:r,text:t})}}function kd(r,n){if(n.first!=null){var t=r.nodes.first();if(t){var e=gt(t,n.first);if(e)return e.rule=n,e.node=r,e.child=t,e.code=e.code.replace("node_","first_child_"),e}}}function _d(r,n){if(n.last!=null){var t=r.nodes.last();if(t){var e=gt(t,n.last);if(e)return e.rule=n,e.node=r,e.child=t,e.code=e.code.replace("node_","last_child_"),e}}}function Ad(r,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r.nodes==null)return;var e=r.nodes,o=n.nodes!=null?n.nodes.slice():[],i=0,u=0,c=null,f=-1,v=null,h=null,m=null,g=null,k=null;function w(){return o.length===0?!1:(v=o.shift(),u=i,i=0,c=v.min||null,h=v.max||null,!0)}function E(){return f+=1,g=f?e.get(f-1):null,m=e.get(f),k=e.get(f+1),m?(u=i,i+=1,!0):!1}function O(){f>0&&(f-=1,i=u)}for(n.nodes!=null&&w();E();){var P=Sd(r,m,t)||wd(r,m,g,f,t)||Td(r,m,k,f,t);if(P)return P;if(n.nodes!=null){if(!v)return He("child_unknown",{rule:n,node:r,child:m,index:f});if(v.match){var F=gt(m,v.match);if(F){if(h!=null&&i-1>h)return O(),He("child_max_invalid",{rule:n,node:r,index:f,child:e.get(f),count:i,limit:h});var z=c;if(w()){if(u-1>=z){f-=1;continue}return gt(m,v.match)==null?(O(),He("child_min_invalid",{rule:n,node:r,index:f,count:u-1,limit:z})):(F.rule=n,F.node=r,F.child=m,F.index=f,F.code=F.code.replace("node_","child_"),F)}return h!=null&&i>h?He("child_unknown",{rule:n,node:r,child:m,index:f}):(F.rule=n,F.node=r,F.child=m,F.index=f,F.code=F.code.replace("node_","child_"),F)}}}}if(h!=null&&i>h)return He("child_max_invalid",{rule:n,node:r,index:f-1,count:i,child:e.get(f-1),limit:h});if(n.nodes!=null)do if(i<c)return He("child_min_invalid",{rule:n,node:r,index:f,count:i,limit:c});while(w())}function Sd(r,n,t){var e=!0,o=!1,i=void 0;try{for(var u=t[Symbol.iterator](),c;!(e=(c=u.next()).done);e=!0){var f=c.value;if(f.parent!=null&&Gt(n,f.match)){var v=gt(r,f.parent);if(v)return v.rule=f,v.parent=r,v.node=n,v.code=v.code.replace("node_","parent_"),v}}}catch(h){o=!0,i=h}finally{try{!e&&u.return&&u.return()}finally{if(o)throw i}}}function wd(r,n,t,e,o){if(t){var i=!0,u=!1,c=void 0;try{for(var f=o[Symbol.iterator](),v;!(i=(v=f.next()).done);i=!0){var h=v.value;if(h.previous!=null&&Gt(n,h.match)){var m=gt(t,h.previous);if(m)return m.rule=h,m.node=r,m.child=n,m.index=e,m.previous=t,m.code=m.code.replace("node_","previous_sibling_"),m}}}catch(g){u=!0,c=g}finally{try{!i&&f.return&&f.return()}finally{if(u)throw c}}}}function Td(r,n,t,e,o){if(t){var i=!0,u=!1,c=void 0;try{for(var f=o[Symbol.iterator](),v;!(i=(v=f.next()).done);i=!0){var h=v.value;if(h.next!=null&&Gt(n,h.match)){var m=gt(t,h.next,[],{match:n});if(m)return m.rule=h,m.node=r,m.child=n,m.index=e,m.next=t,m.code=m.code.replace("node_","next_sibling_"),m}}}catch(g){u=!0,c=g}finally{try{!i&&f.return&&f.return()}finally{if(u)throw c}}}}function He(r,n){return $e({code:r},n)}function rr(r){var n=r.value,t=n.selection;t.isExpanded&&r.delete()}var ce={};ce.addMark=function(r,n){n=ie.create(n);var t=r.value,e=t.document,o=t.selection;if(o.isExpanded)r.addMarkAtRange(o,n);else if(o.marks){var i=o.marks.add(n),u=o.set("marks",i);r.select(u)}else{var c=e.getActiveMarksAtRange(o).add(n),f=o.set("marks",c);r.select(f)}};ce.addMarks=function(r,n){n.forEach(function(t){return r.addMark(t)})};ce.delete=function(r){var n=r.value,t=n.selection;r.deleteAtRange(t),r.moveToFocus()};ce.deleteBackward=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=r.value,e=t.selection;e.isExpanded?r.delete():r.deleteBackwardAtRange(e,n)};ce.deleteCharBackward=function(r){var n=r.value,t=n.selection;t.isExpanded?r.delete():r.deleteCharBackwardAtRange(t)};ce.deleteLineBackward=function(r){var n=r.value,t=n.selection;t.isExpanded?r.delete():r.deleteLineBackwardAtRange(t)};ce.deleteWordBackward=function(r){var n=r.value,t=n.selection;t.isExpanded?r.delete():r.deleteWordBackwardAtRange(t)};ce.deleteForward=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=r.value,e=t.selection;e.isExpanded?r.delete():r.deleteForwardAtRange(e,n)};ce.deleteCharForward=function(r){var n=r.value,t=n.selection;t.isExpanded?r.delete():r.deleteCharForwardAtRange(t)};ce.deleteLineForward=function(r){var n=r.value,t=n.selection;t.isExpanded?r.delete():r.deleteLineForwardAtRange(t)};ce.deleteWordForward=function(r){var n=r.value,t=n.selection;t.isExpanded?r.delete():r.deleteWordForwardAtRange(t)};ce.insertBlock=function(r,n){rr(r),n=nt.create(n);var t=r.value,e=t.selection;r.insertBlockAtRange(e,n);var o=r.value.document.getNode(n.key);o&&r.moveToEndOfNode(o)};ce.insertFragment=function(r,n){if(n.nodes.size){rr(r);var t=r.value,e=t,o=e.document,i=e.selection,u=i.start,c=Array.from(o.texts(),function(w){var E=R(w,1),O=E[0];return O.key});r.insertFragmentAtRange(i,n),t=r.value,o=t.document;var f=o.getTexts().filter(function(w){return!c.includes(w.key)});if(f.size!==0){var v=n.text.length,h=o.getNode(u.key)||f.first(),m=f.last()||h;if(h===m){r.moveTo(m.key,v);return}var g=o.getCommonAncestor(h.key,m.key),k=g.getOffset(h.key)+(u.key===h.key?u.offset:0);m=g.getTextAtOffset(k+v-1)||m,r.moveTo(m.key,k+v-g.getOffset(m.key))}}};ce.insertInline=function(r,n){rr(r),n=rt.create(n);var t=r.value,e=t.selection;r.insertInlineAtRange(e,n);var o=r.value.document.getNode(n.key);o&&r.moveToEndOfNode(o)};ce.insertText=function(r,n,t){rr(r);var e=r.value,o=e.document,i=e.selection;t=t||i.marks||o.getInsertMarksAtRange(i),r.withoutNormalizing(function(){r.insertTextAtRange(i,n,t),i.marks&&o!==r.value.document&&r.select({marks:null})})};ce.removeMark=function(r,n){n=ie.create(n);var t=r.value,e=t.document,o=t.selection;if(o.isExpanded)r.removeMarkAtRange(o,n);else if(o.marks){var i=o.marks.remove(n),u=o.set("marks",i);r.select(u)}else{var c=e.getActiveMarksAtRange(o).remove(n),f=o.set("marks",c);r.select(f)}};ce.replaceMark=function(r,n,t){r.removeMark(n),r.addMark(t)};ce.setBlocks=function(r,n){var t=r.value,e=t.selection;r.setBlocksAtRange(e,n)};ce.setInlines=function(r,n){var t=r.value,e=t.selection;r.setInlinesAtRange(e,n)};ce.splitBlock=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;rr(r);var t=r.value,e=t.selection,o=t.document,i=e.marks||o.getInsertMarksAtRange(e);r.splitBlockAtRange(e,n).moveToEnd(),i&&i.size!==0&&r.select({marks:i})};ce.splitInline=function(r,n){rr(r);var t=r.value,e=t.selection;r.splitInlineAtRange(e,n)};ce.toggleMark=function(r,n){n=ie.create(n);var t=r.value,e=t.activeMarks.has(n);e?r.removeMark(n):r.addMark(n)};ce.unwrapBlock=function(r,n){var t=r.value,e=t.selection;r.unwrapBlockAtRange(e,n)};ce.unwrapInline=function(r,n){var t=r.value,e=t.selection;r.unwrapInlineAtRange(e,n)};ce.wrapBlock=function(r,n){var t=r.value,e=t.selection;r.wrapBlockAtRange(e,n)};ce.wrapInline=function(r,n){var t=r.value,e=t.selection;r.wrapInlineAtRange(e,n)};ce.wrapText=function(r,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:n,e=r.value,o=e.selection;r.wrapTextAtRange(o,n,t),o.isCollapsed&&r.moveStartBackward(n.length),r.moveEndBackward(t.length),o.isForward!==r.value.selection.isForward&&r.flip()};function Od(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.plugins,t=n===void 0?[]:n,e=ui($e({},le,ae,Qt,S,tr,ce)),o=ra({isAtomic:function(){return!1},isVoid:function(){return!1}}),i=fi({rules:[{match:{object:"document"},nodes:[{match:{object:"block"}}]},{match:{object:"block",first:{object:"block"}},nodes:[{match:{object:"block"}}]},{match:{object:"block",first:[{object:"inline"},{object:"text"}]},nodes:[{match:[{object:"inline"},{object:"text"}]}]},{match:{object:"inline"},nodes:[{match:[{object:"inline"},{object:"text"}]}]},{match:[{object:"block"},{object:"inline"}],nodes:[{min:1}],normalize:function(c,f){var v=f.code,h=f.node;v==="child_min_invalid"&&h.nodes.isEmpty()&&c.insertNodeByKey(h.key,0,ht.create())}},{match:{object:"block"},first:[{object:"block"},{object:"text"}],last:[{object:"block"},{object:"text"}],normalize:function(c,f){var v=f.code,h=f.node,m=ht.create(),g=void 0;if(v==="first_child_object_invalid")g=0;else if(v==="last_child_object_invalid")g=h.nodes.size;else return;c.insertNodeByKey(h.key,g,m)}},{match:{object:"inline"},first:[{object:"block"},{object:"text"}],last:[{object:"block"},{object:"text"}],previous:[{object:"block"},{object:"text"}],next:[{object:"block"},{object:"text"}],normalize:function(c,f){var v=f.code,h=f.node,m=f.index,g=ht.create(),k=void 0;if(v==="first_child_object_invalid")k=0;else if(v==="last_child_object_invalid")k=h.nodes.size;else if(v==="previous_sibling_object_invalid")k=m;else if(v==="next_sibling_object_invalid")k=m+1;else return;c.insertNodeByKey(h.key,k,g)}},{match:{object:"text"},next:function(c,f){return c.object!=="text"||!f.marks.equals(c.marks)},normalize:function(c,f){var v=f.code,h=f.next;v==="next_sibling_invalid"&&c.mergeNodeByKey(h.key)}},{match:{object:"text"},previous:function(c){return c.object!=="text"||c.text!==""},next:function(c){return c.object!=="text"||c.text!==""},normalize:function(c,f){var v=f.code,h=f.next,m=f.previous;v==="next_sibling_invalid"?c.removeNodeByKey(h.key):v==="previous_sibling_invalid"&&c.removeNodeByKey(m.key)}}]});return[i].concat(Fe(t),[e,o])}var Pn=Jn("slate:editor"),xd=function(){function r(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Se(this,r);var e=t.controller,o=e===void 0?this:e,i=t.construct,u=i===void 0?!0:i,c=n.onChange,f=c===void 0?function(){}:c,v=n.plugins,h=v===void 0?[]:v,m=n.readOnly,g=m===void 0?!1:m,k=n.value,w=k===void 0?yt.create():k;this.controller=o,this.middleware={},this.onChange=f,this.operations=N.List(),this.readOnly=null,this.value=null,this.tmp={dirty:[],flushing:!1,merge:null,normalize:!0,save:!0};var E=Od({plugins:h});dr(this,E),u&&(this.run("onConstruct"),this.setReadOnly(g),this.setValue(w,t))}return Te(r,[{key:"applyOperation",value:function(t){var e=this,o=this.operations,i=this.controller,u=this.value;he(t)&&(t=$e({},t,{value:u})),t=It.create(t),this.withoutNormalizing(function(){i.save(t),u=e.value}),Pn("apply",{operation:t}),this.value=t.apply(u),this.operations=o.push(t);var c=Ed(t),f=this.tmp.dirty.map(function(m){m=I.create(m);var g=I.transform(m,t);return g.toArray()}),v={},h=Array.prototype.concat.apply(c,f);return this.tmp.dirty=[],h.forEach(function(m){var g=m.join(",");v[g]||e.tmp.dirty.push(m),v[g]=!0}),this.tmp.flushing||(this.tmp.flushing=!0,Promise.resolve().then(function(){return e.flush()})),i}},{key:"flush",value:function(){this.run("onChange");var t=this.value,e=this.operations,o=this.controller,i={value:t,operations:e};return this.operations=N.List(),this.tmp.flushing=!1,this.onChange(i),o}},{key:"command",value:function(t){for(var e=arguments.length,o=Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];var u=this.controller;if(typeof t=="function")return t.apply(void 0,[u].concat(o)),Rr(this),u;Pn("command",{type:t,args:o});var c={type:t,args:o};return this.run("onCommand",c),Rr(this),u}},{key:"hasCommand",value:function(t){var e=this.controller,o=t in e&&e[t].__command;return o}},{key:"hasQuery",value:function(t){var e=this.controller,o=t in e&&e[t].__query;return o}},{key:"normalize",value:function(){var t=this.value,e=this.controller,o=t.document,i=o.getKeysToPathsTable(),u=Object.values(i).map(I.create);this.tmp.dirty=this.tmp.dirty.concat(u),Rr(this);var c=t.selection;return o=t.document,c.isUnset&&o.nodes.size&&e.moveToStartOfDocument(),e}},{key:"query",value:function(t){for(var e=arguments.length,o=Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];var u=this.controller;if(typeof t=="function")return t.apply(void 0,[u].concat(o));Pn("query",{type:t,args:o});var c={type:t,args:o};return this.run("onQuery",c)}},{key:"registerCommand",value:function(t){var e=this,o=this.controller;if(t in o&&o[t].__command)return o;tt(!(t in o),"You cannot register a `"+t+"` command because it would overwrite an existing property of the `Editor`.");var i=function(){for(var c=arguments.length,f=Array(c),v=0;v<c;v++)f[v]=arguments[v];return e.command.apply(e,[t].concat(f))};return o[t]=i,i.__command=!0,o}},{key:"registerQuery",value:function(t){var e=this,o=this.controller;if(t in o&&o[t].__query)return o;tt(!(t in o),"You cannot register a `"+t+"` query because it would overwrite an existing property of the `Editor`.");var i=function(){for(var c=arguments.length,f=Array(c),v=0;v<c;v++)f[v]=arguments[v];return e.query.apply(e,[t].concat(f))};return o[t]=i,i.__query=!0,o}},{key:"run",value:function(t){for(var e=arguments.length,o=Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];var u=this.controller,c=this.middleware,f=c[t]||[],v=0;function h(){var m=f[v++];if(m){for(var g=arguments.length,k=Array(g),w=0;w<g;w++)k[w]=arguments[w];k.length&&(o=k);var E=m.apply(void 0,Fe(o).concat([u,h]));return E}}return Object.defineProperty(h,"change",{get:function(){tt(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(h,"onChange",{get:function(){tt(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(h,"props",{get:function(){tt(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(h,"schema",{get:function(){tt(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(h,"stack",{get:function(){tt(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),h()}},{key:"setReadOnly",value:function(t){return this.readOnly=t,this}},{key:"setValue",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=e.normalize,i=o===void 0?t!==this.value:o;return this.value=t,i&&this.normalize(),this}},{key:"withoutNormalizing",value:function(t){var e=this.controller,o=this.tmp.normalize;return this.tmp.normalize=!1,t(e),this.tmp.normalize=o,Rr(this),e}},{key:"change",value:function(t){$();for(var e=arguments.length,o=Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];t.apply(void 0,[this.controller].concat(o))}},{key:"call",value:function(t){$();for(var e=arguments.length,o=Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];return t.apply(void 0,[this.controller].concat(o)),this.controller}},{key:"applyOperations",value:function(t){var e=this;return $(),t.forEach(function(o){return e.applyOperation(o)}),this.controller}},{key:"setOperationFlag",value:function(t,e){return $(),this.tmp[t]=e,this}},{key:"getFlag",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return $(),e[t]!==void 0?e[t]:this.tmp[t]}},{key:"unsetOperationFlag",value:function(t){return $(),delete this.tmp[t],this}},{key:"withoutNormalization",value:function(t){return $(),this.withoutNormalizing(t)}},{key:"editor",get:function(){return $(),this.controller}}]),r}();function Ed(r){var n=r.type,t=r.node,e=r.path,o=r.newPath;switch(n){case"add_mark":case"insert_text":case"remove_mark":case"remove_text":case"set_mark":case"set_node":{var i=I.getAncestors(e).toArray();return[].concat(Fe(i),[e])}case"insert_node":{var u=t.getKeysToPathsTable(),c=Object.values(u).map(function(O){return e.concat(O)}),f=I.getAncestors(e).toArray();return[].concat(Fe(f),[e],Fe(c))}case"split_node":{var v=I.getAncestors(e).toArray(),h=I.increment(e);return[].concat(Fe(v),[e,h])}case"merge_node":{var m=I.getAncestors(e).toArray(),g=I.decrement(e);return[].concat(Fe(m),[g])}case"move_node":{if(I.isEqual(e,o))return[];var k=I.getAncestors(e).reduce(function(O,P){return O.push.apply(O,Fe(I.transform(P,r).toArray())),O},[]),w=I.getAncestors(o).reduce(function(O,P){return O.push.apply(O,Fe(I.transform(P,r).toArray())),O},[]);return[].concat(Fe(k),Fe(w))}case"remove_node":{var E=I.getAncestors(e).toArray();return[].concat(Fe(E))}default:return[]}}function Rr(r){r.tmp.normalize&&r.tmp.dirty.length&&r.withoutNormalizing(function(){for(;r.tmp.dirty.length;){var n=r.tmp.dirty.pop();Nd(r,n)}})}function Nd(r,n){for(var t=r.controller,e=r.value,o=e,i=o.document,u=i.assertNode(n),c=0,f=100+(u.object==="text"?1:u.nodes.size);u;){var v=u.normalize(t);if(!v)break;v(t),e=r.value,i=e.document;var h=u,m=h.key,g=i.getDescendant(n);if(g&&g.key===m)u=g;else if(g=i.getDescendant(m),g)u=g,n=i.getPath(m);else break;if(c++,c>f)throw new Error("A schema rule could not be normalized after sufficient iterations. This is usually due to a `rule.normalize` or `plugin.normalizeNode` function of a schema being incorrectly written, causing an infinite loop.")}}function dr(r,n){if(Array.isArray(n)){n.forEach(function(g){return dr(r,g)});return}if(n!=null){var t=n.commands,e=n.queries,o=n.schema,i=Vt(n,["commands","queries","schema"]);if(t){var u=ui(t);dr(r,u)}if(e){var c=ra(e);dr(r,c)}if(o){var f=fi(o);dr(r,f)}for(var v in i){var h=i[v],m=r.middleware[v]=r.middleware[v]||[];m.push(h)}}}var bd={marks:void 0,text:void 0},li=function(r){je(n,r);function n(){return Se(this,n),qe(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Te(n,[{key:"updateMark",value:function(e,o){var i=this.marks;if(o.equals(e))return this;if(!i.has(e))return this;var u=i.withMutations(function(c){c.remove(e).add(o)});return this.set("marks",u)}},{key:"addMark",value:function(e){var o=this.marks;return this.set("marks",o.add(e))}},{key:"addMarks",value:function(e){var o=this.marks;return this.set("marks",o.union(e))}},{key:"insertText",value:function(e,o){var i=this.text,u=i.slice(0,e)+o+i.slice(e);return this.set("text",u)}},{key:"removeMark",value:function(e){var o=this.marks;return this.set("marks",o.remove(e))}},{key:"toJSON",value:function(){var e={object:this.object,text:this.text,marks:this.marks.toArray().map(function(o){return o.toJSON()})};return e}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if($(),n.isLeaf(e))return e;if(typeof e=="string"&&(e={text:e}),he(e))return n.fromJSON(e);throw new Error("`Leaf.create` only accepts objects, strings or leaves, but you passed it: "+e)}},{key:"createLeaves",value:function(e){if(e.size<=1)return e;var o=!1,i=N.List().withMutations(function(u){e.findLast(function(c,f){var v=u.first();if(v){if(v.marks.equals(c.marks)){o=!0,u.set(0,v.set("text",""+c.text+v.text));return}if(v.text===""){o=!0,u.set(0,c);return}if(c.text===""){o=!0;return}}u.unshift(c)})});return o?i:e}},{key:"splitLeaves",value:function(e,o){if(o<0)return[N.List(),e];if(e.size===0)return[N.List(),N.List()];var i=0,u=-1,c=void 0,f=void 0;return e.find(function(v){u++;var h=i,m=v.text;if(i+=m.length,i<o||h>o)return!1;var g=o-h;return c=v.set("text",m.slice(0,g)),f=v.set("text",m.slice(g)),!0}),c?c.text===""?u===0?[N.List.of(c),e]:[e.take(u),e.skip(u)]:f.text===""?u===e.size-1?[e,N.List.of(f)]:[e.take(u+1),e.skip(u+1)]:[e.take(u).push(c),e.skip(u+1).unshift(f)]:[e,N.List()]}},{key:"createList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(N.List.isList(e)||Array.isArray(e)){var o=new N.List(e.map(n.create));return o}throw new Error("`Leaf.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var o=e.text,i=o===void 0?"":o,u=e.marks,c=u===void 0?[]:u,f=new n({text:i,marks:N.Set(c.map(ie.fromJSON))});return f}},{key:"isLeafList",value:function(e){return N.List.isList(e)&&e.every(function(o){return n.isLeaf(o)})}}]),n}(N.Record(bd));function gr(r,n){var t=!0,e=!1,o=void 0;try{for(var i=n[Symbol.iterator](),u;!(t=(u=i.next()).done);t=!0){var c=u.value,f=!0,v=!1,h=void 0;try{for(var m=Object.getOwnPropertyNames(r)[Symbol.iterator](),g;!(f=(g=m.next()).done);f=!0){var k=g.value;if(!c.hasOwnProperty(k)){var w=Object.getOwnPropertyDescriptor(r,k);Object.defineProperty(c,k,w)}}}catch(B){v=!0,h=B}finally{try{!f&&m.return&&m.return()}finally{if(v)throw h}}var E=!0,O=!1,P=void 0;try{for(var F=Object.getOwnPropertyNames(r.prototype)[Symbol.iterator](),z;!(E=(z=F.next()).done);E=!0){var M=z.value;if(!c.prototype.hasOwnProperty(M)){var w=Object.getOwnPropertyDescriptor(r.prototype,M);Object.defineProperty(c.prototype,M,w)}}}catch(B){O=!0,P=B}finally{try{!E&&F.return&&F.return()}finally{if(O)throw P}}}}catch(B){e=!0,o=B}finally{try{!t&&i.return&&i.return()}finally{if(e)throw o}}}function Fd(r){var n=ii[r],t=""+r.charAt(0).toUpperCase()+r.slice(1),e="is"+t,o=function(){function i(){Se(this,i)}return Te(i,[{key:"object",get:function(){return r}}]),i}();return o[e]=si.bind(null,r),o.prototype[n]=!0,o}Object.entries({Annotation:Re,Block:nt,Change:Gv,Decoration:Bt,Document:st,Editor:xd,Inline:rt,Leaf:li,Mark:ie,Node:Ze,Operation:It,Point:ee,Range:De,Selection:_t,Text:ht,Value:yt}).forEach(function(r){var n=R(r,2),t=n[0],e=n[1];return gr(Fd(t.toLowerCase()),[e])});var Pd=function(){function r(){Se(this,r)}return Te(r,[{key:"toJS",value:function(){return this.toJSON.apply(this,arguments)}}],[{key:"fromJS",value:function(){return this.fromJSON.apply(this,arguments)}}]),r}();gr(Pd,[Re,nt,Bt,st,rt,li,ie,Ze,It,ee,De,_t,ht,yt]);var vi=Symbol("LEAF"),Pt=Symbol("STORE_KEY"),qr=Symbol("undefined"),di=Symbol("null"),jn=void 0,Bn=new WeakMap;function hi(r,n){var t=function(h){var m=r[h];if(!m)throw new Error('Object does not have a property named "'+h+'".');r[h]=function(){for(var g=arguments.length,k=Array(g),w=0;w<g;w++)k[w]=arguments[w];Bn.has(this)||Bn.set(this,{noArgs:{},hasArgs:{}});var E=Bn.get(this),O=E.noArgs,P=E.hasArgs,F=k.length!==0,z=void 0,M=void 0;if(F?(M=[h].concat(k),z=Bd(P,M)):z=O[h],z!==jn)return z===qr?void 0:z;var B=m.apply(this,k),D=B===void 0?qr:B;return F?Id(P,M,D):O[h]=D,B}},e=!0,o=!1,i=void 0;try{for(var u=n[Symbol.iterator](),c;!(e=(c=u.next()).done);e=!0){var f=c.value;t(f)}}catch(v){o=!0,i=v}finally{try{!e&&u.return&&u.return()}finally{if(o)throw i}}}function Bd(r,n){var t=!0,e=!1,o=void 0;try{for(var i=n[Symbol.iterator](),u;!(t=(u=i.next()).done);t=!0){var c=u.value;if(c===void 0?c=qr:c==null&&(c=di),(typeof c>"u"?"undefined":Hn(c))==="object"?r=r[Pt]&&r[Pt].get(c):r=r[c],r===jn)return jn}}catch(f){e=!0,o=f}finally{try{!t&&i.return&&i.return()}finally{if(e)throw o}}return r[vi]}function Id(r,n,t){var e=r,o=!0,i=!1,u=void 0;try{for(var c=n[Symbol.iterator](),f;!(o=(f=c.next()).done);o=!0){var v=f.value;if(v===void 0?v=qr:v==null&&(v=di),(typeof v>"u"?"undefined":Hn(v))!=="object"){e[v]||(e[v]={}),e=e[v];continue}if(e[Pt]||(e[Pt]=new WeakMap),!e[Pt].has(v)){var h={};e[Pt].set(v,h),e=h;continue}e=e[Pt].get(v)}}catch(m){i=!0,u=m}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return e[vi]=t,r}var mi=function(){function r(){Se(this,r)}return Te(r,[{key:"getFirstText",value:function(){if(this.object==="text")return this;var t=null,e=this.nodes.find(function(o){return o.object==="text"?!0:(t=o.getFirstText(),!!t)});return t||e}},{key:"getKeysToPathsTable",value:function(){var t=$n({},this.key,[]);return this.nodes&&this.nodes.forEach(function(e,o){var i=e.getKeysToPathsTable();for(var u in i){var c=i[u];$(),t[u]=[o].concat(Fe(c))}}),t}},{key:"getLastText",value:function(){if(this.object==="text")return this;var t=null,e=this.nodes.findLast(function(o){return o.object==="text"?!0:(t=o.getLastText(),t)});return t||e}},{key:"getNode",value:function(t){if(t=this.resolvePath(t),!t||this.object==="text"&&t.size)return null;var e=t.size?this.getDescendant(t):this;return e}},{key:"getPath",value:function(t){if(N.List.isList(t))return t;if(Ze.isNode(t)&&this.descendants){var e=!0,o=!1,i=void 0;try{for(var u=this.descendants()[Symbol.iterator](),c;!(e=(c=u.next()).done);e=!0){var f=c.value,v=R(f,2),h=v[0],m=v[1];if(t===h)return m}}catch(w){o=!0,i=w}finally{try{!e&&u.return&&u.return()}finally{if(o)throw i}}}var g=this.getKeysToPathsTable(),k=g[t];return k?N.List(k):null}},{key:"getText",value:function(){if(this.object==="text")return this.text;var t=this.nodes.reduce(function(e,o){return e+o.text},"");return t}},{key:"hasNode",value:function(t){var e=this.getNode(t);return!!e}},{key:"normalize",value:function(t){var e=t.run("normalizeNode",this);return e}},{key:"regenerateKey",value:function(){var t=Yt.create(),e=this.set("key",t);return e}},{key:"resolvePath",value:function(t,e){return typeof t=="string"?(t=this.getPath(t),e!=null&&(t=t.concat(e))):t=I.create(t),t}},{key:"validate",value:function(t){var e=t.run("validateNode",this);return e}}]),r}();hi(mi.prototype,["getFirstText","getKeysToPathsTable","getLastText","getText","normalize","validate"]);gr(mi,[nt,st,rt,ht]);var So=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function Ut(){return!0}var na=function(){function r(){Se(this,r)}return Te(r,[{key:"addMark",value:function(t,e){t=this.resolvePath(t);var o=this.assertDescendant(t);o=o.addMark(e);var i=this.replaceNode(t,o);return i}},{key:"ancestors",value:function(t){var e=this.createIterable({path:t,direction:null,downward:!1,includeTargetAncestors:!0,includeRoot:!0});return e}},{key:"blocks",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.onlyLeaves,o=t.onlyRoots,i=t.onlyTypes,u=t.match,c=Vt(t,["onlyLeaves","onlyRoots","onlyTypes","match"]),f=this.descendants($e({includeDocument:!1,includeInlines:!1,includeTexts:!1},c,{match:function(h,m){return i&&!i.includes(h.type)||o&&m.size!==1||e&&!h.isLeafBlock()?!1:!(u&&!u(h,m))}}));return f}},{key:"createAnnotation",value:function(t){t=Re.createProperties(t);var e=this.resolveAnnotation(t);return e}},{key:"createDecoration",value:function(t){t=Bt.createProperties(t);var e=this.resolveDecoration(t);return e}},{key:"createIterable",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.direction,o=e===void 0?"forward":e,i=t.downward,u=i===void 0?!0:i,c=t.upward,f=c===void 0?!0:c,v=t.includeBlocks,h=v===void 0?!0:v,m=t.includeDocument,g=m===void 0?!0:m,k=t.includeInlines,w=k===void 0?!0:k,E=t.includeRoot,O=E===void 0?!1:E,P=t.includeTarget,F=P===void 0?!!t.range:P,z=t.includeTargetAncestors,M=z===void 0?!1:z,B=t.includeTexts,D=B===void 0?!0:B,te=t.match,oe=te===void 0?null:te,U=this,se=null,j=null;t.range?(j=U.resolveRange(t.range),se=U.resolvePath(j.start.path)):t.path&&(se=U.resolvePath(t.path));var ue=se&&U.assertNode(se),ve=typeof window>"u"?So.Set:window.Set;return $n({},Symbol.iterator,function(){var H=new ve,re=j&&j.start.path,Z=j&&j.end.path,K=se,G=ue,Je=!1,we=!1,Pe=!1,Oe=function(){return!K||!G?{done:!0}:!O&&G===U||!h&&G.object==="block"||!g&&G.object==="document"||!w&&G.object==="inline"||!D&&G.object==="text"||oe&&!oe(G,K)?Ee():{value:[G,K],done:!1}},Ee=function Ke(){if(!K||!G)return Oe();if(re&&!we)return Pe?K.size===re.size-1?(we=!0,K=se,G=ue,Ke()):(K=re.slice(0,K.size+1),G=U.assertNode(K),Oe()):(Pe=!0,K=I.create([]),G=U,Oe());if(F&&!Je)return Je=!0,Oe();if(Z&&K.equals(Z))return G=null,K=null,Ke();if(u&&G.nodes&&G.nodes.size&&!H.has(G)){H.add(G);var V=o==="forward"?0:G.nodes.size-1;return K=K.push(V),G=U.assertNode(K),Oe()}if(o==="forward"){var Q=I.increment(K),ge=U.getNode(Q);if(ge)return K=Q,G=ge,Oe()}if(o==="backward"&&K.last()!==0){var ut=I.decrement(K),Qe=U.getNode(ut);if(Qe)return K=ut,G=Qe,Oe()}return f&&K.size?(K=I.lift(K),G=U.assertNode(K),H.has(G)?Ke():(H.add(G),M?Oe():Ke())):(K=null,G=null,Ke())};return{next:Ee}})}},{key:"createPoint",value:function(t){t=ee.createProperties(t);var e=this.resolvePoint(t);return e}},{key:"createRange",value:function(t){t=De.createProperties(t);var e=this.resolveRange(t);return e}},{key:"createSelection",value:function(t){t=_t.createProperties(t);var e=this.resolveSelection(t);return e}},{key:"descendants",value:function(t){var e=this.createIterable($e({path:[]},t));return e}},{key:"filterDescendants",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ut,e=[],o=!0,i=!1,u=void 0;try{for(var c=this.descendants()[Symbol.iterator](),f;!(o=(f=c.next()).done);o=!0){var v=f.value,h=R(v,2),m=h[0],g=h[1];t(m,g)&&e.push(m)}}catch(k){i=!0,u=k}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return N.List(e)}},{key:"findDescendant",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ut,e=!0,o=!1,i=void 0;try{for(var u=this.descendants()[Symbol.iterator](),c;!(e=(c=u.next()).done);e=!0){var f=c.value,v=R(f,2),h=v[0],m=v[1];if(t(h,m))return h}}catch(g){o=!0,i=g}finally{try{!e&&u.return&&u.return()}finally{if(o)throw i}}return null}},{key:"forEachDescendant",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ut,e=!0,o=!1,i=void 0;try{for(var u=this.descendants()[Symbol.iterator](),c;!(e=(c=u.next()).done);e=!0){var f=c.value,v=t.apply(void 0,Fe(f));if(v===!1)return}}catch(h){o=!0,i=h}finally{try{!e&&u.return&&u.return()}finally{if(o)throw i}}}},{key:"getActiveMarksAtRange",value:function(t){if(t=this.resolveRange(t),t.isUnset)return N.Set();if(t.isCollapsed){var e=t,o=e.start;return this.getInsertMarksAtPoint(o)}var i=t,u=i.start,c=i.end,f=u.path,v=u.offset,h=c.path,m=c.offset,g=this.getDescendant(f),k=this.getDescendant(h);if(!f.equals(h)){for(;!f.equals(h)&&m===0;){var w=this.texts({path:h,direction:"backward"}),E=R(w,1),O=R(E[0],2);k=O[0],h=O[1],m=k.text.length}for(;!f.equals(h)&&v===g.text.length;){var P=this.texts({path:f}),F=R(P,1),z=R(F[0],2);g=z[0],f=z[1],v=0}}if(f.equals(h))return g.marks;var M=g.marks;if(M.size===0)return N.Set();var B=k.marks,D=M.intersect(B);if(D.size===0)return D;var te=this.texts({path:f}),oe=R(te,1),U=R(oe[0],2);for(g=U[0],f=U[1];!f.equals(h);){if(g.text.length!==0&&(D=D.intersect(g.marks),D.size===0))return N.Set();var se=this.texts({path:f}),j=R(se,1),ue=R(j[0],2);g=ue[0],f=ue[1]}return D}},{key:"getAncestors",value:function(t){var e=this.ancestors(t),o=Array.from(e,function(u){var c=R(u,1),f=c[0];return f}).reverse(),i=N.List(o);return i}},{key:"getBlocks",value:function(){var t=this.blocks({onlyLeaves:!0}),e=Array.from(t,function(i){var u=R(i,1),c=u[0];return c}),o=N.List(e);return o}},{key:"getBlocksByType",value:function(t){var e=this.blocks({onlyLeaves:!0,onlyTypes:[t]}),o=Array.from(e,function(u){var c=R(u,1),f=c[0];return f}),i=N.List(o);return i}},{key:"getChild",value:function(t){if(t=this.resolvePath(t),!t||t.size>1)return null;var e=this.nodes.get(t.first());return e}},{key:"getClosest",value:function(t,e){var o=!0,i=!1,u=void 0;try{for(var c=this.ancestors(t)[Symbol.iterator](),f;!(o=(f=c.next()).done);o=!0){var v=f.value,h=R(v,2),m=h[0],g=h[1];if(e(m,g))return m}}catch(k){i=!0,u=k}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return null}},{key:"getClosestBlock",value:function(t){var e=this.getClosest(t,function(o){return o.object==="block"});return e}},{key:"getClosestInline",value:function(t){var e=this.getClosest(t,function(o){return o.object==="inline"});return e}},{key:"getClosestVoid",value:function(t,e){tt(!yt.isValue(e),"As of Slate 0.42.0, the `node.getClosestVoid` method takes an `editor` instead of a `value`.");var o=this.getClosest(t,function(i){return e.isVoid(i)});return o}},{key:"getCommonAncestor",value:function(t,e){if(t=this.resolvePath(t),e=this.resolvePath(e),!t||!e)return null;var o=I.relate(t,e),i=this.getNode(o);return i}},{key:"getDecorations",value:function(t){var e=t.run("decorateNode",this);return e=Bt.createList(e),e}},{key:"getDepth",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(t=this.resolvePath(t),!t)return null;var o=this.getNode(t),i=o?t.size-1+e:null;return i}},{key:"getDescendant",value:function(t){if(t=this.resolvePath(t),!t||!t.size)return null;var e=this;return t.forEach(function(o){return e=e.getIn(["nodes",o]),!!e}),e}},{key:"getDescendantsAtRange",value:function(t){var e=this.descendants({range:t}),o=Array.from(e,function(u){var c=R(u,1),f=c[0];return f}),i=N.List(o);return i}},{key:"getFragmentAtRange",value:function(t){if(t=this.resolveRange(t),t.isUnset)return st.create();for(var e=t,o=e.start,i=e.end,u=this,c=i.path,f=i.offset,v="end";c.size;){var h=c.last();u=u.splitNode(c,f),f=h+1,c=I.lift(c),!c.size&&v==="end"&&(c=o.path,f=o.offset,v="start")}var m=o.path.first()+1,g=i.path.first()+2,k=u.nodes.slice(m,g),w=st.create({nodes:k});return w}},{key:"getFurthest",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ut,o=this.ancestors(t),i=Array.from(o).reverse(),u=!0,c=!1,f=void 0;try{for(var v=i[Symbol.iterator](),h;!(u=(h=v.next()).done);u=!0){var m=h.value,g=R(m,2),k=g[0],w=g[1];if(e(k,w))return k}}catch(E){c=!0,f=E}finally{try{!u&&v.return&&v.return()}finally{if(c)throw f}}return null}},{key:"getFurthestBlock",value:function(t){var e=this.getFurthest(t,function(o){return o.object==="block"});return e}},{key:"getFurthestChild",value:function(t){if(t=this.resolvePath(t),!t||!t.size)return null;var e=this.nodes.get(t.first());return e}},{key:"getFurthestInline",value:function(t){var e=this.getFurthest(t,function(o){return o.object==="inline"});return e}},{key:"getInlines",value:function(){var t=this.inlines({onlyLeaves:!0}),e=Array.from(t,function(i){var u=R(i,1),c=u[0];return c}),o=N.List(e);return o}},{key:"getInlinesByType",value:function(t){var e=this.inlines({onlyLeaves:!0,onlyTypes:[t]}),o=Array.from(e,function(u){var c=R(u,1),f=c[0];return f}),i=N.List(o);return i}},{key:"getInsertMarksAtPoint",value:function(t){t=this.resolvePoint(t);var e=t,o=e.path,i=e.offset,u=this.getDescendant(o);if(i!==0)return u.marks;var c=void 0,f=void 0,v=!0,h=!1,m=void 0;try{for(var g=this.ancestors(o)[Symbol.iterator](),k;!(v=(k=g.next()).done);v=!0){var w=k.value,E=R(w,2),O=E[0],P=E[1];O.object==="block"&&(c=O,f=P)}}catch(oe){h=!0,m=oe}finally{try{!v&&g.return&&g.return()}finally{if(h)throw m}}var F=I.drop(o,f.size),z=c.texts({path:F,direction:"backward"}),M=R(z,1),B=M[0];if(!B)return u.marks;var D=R(B,1),te=D[0];return te.marks}},{key:"getInsertMarksAtRange",value:function(t){t=this.resolveRange(t);var e=t,o=e.start;if(t.isUnset)return N.Set();if(t.isCollapsed)return this.getInsertMarksAtPoint(o);var i=this.getDescendant(o.path);return i.marks}},{key:"getLeafBlocksAtRange",value:function(t){var e=this.blocks({range:t,onlyLeaves:!0}),o=Array.from(e,function(u){var c=R(u,1),f=c[0];return f}),i=N.List(o);return i}},{key:"getLeafInlinesAtRange",value:function(t){var e=this.inlines({range:t,onlyLeaves:!0}),o=Array.from(e,function(u){var c=R(u,1),f=c[0];return f}),i=N.List(o);return i}},{key:"getNodesToPathsMap",value:function(){var t=this,e=typeof window>"u"?new So.Map:new window.Map;return e.set(t,I.create([])),t.forEachDescendant(function(o,i){e.set(o,i)}),e}},{key:"getMarks",value:function(){var t=this.marks(),e=Array.from(t,function(o){var i=R(o,1),u=i[0];return u});return N.OrderedSet(e)}},{key:"getMarksAtRange",value:function(t){var e=this.marks({range:t}),o=Array.from(e,function(i){var u=R(i,1),c=u[0];return c});return N.OrderedSet(o)}},{key:"getMarksByType",value:function(t){var e=this.marks({onlyTypes:[t]}),o=Array.from(e,function(i){var u=R(i,1),c=u[0];return c});return N.OrderedSet(o)}},{key:"getNextBlock",value:function(t){var e=this.blocks({path:t,onlyLeaves:!0}),o=R(e,1),i=o[0],u=i?i[0]:null;return u}},{key:"getNextNode",value:function(t){var e=this.createIterable({path:t,downward:!1}),o=R(e,1),i=o[0],u=i?i[0]:null;return u}},{key:"getNextSibling",value:function(t){var e=this.siblings(t),o=R(e,1),i=o[0],u=i?i[0]:null;return u}},{key:"getNextText",value:function(t){var e=this.texts({path:t}),o=R(e,1),i=o[0],u=i?i[0]:null;return u}},{key:"getOffset",value:function(t){t=this.resolvePath(t),this.assertDescendant(t);var e=t.first(),o=this.nodes.slice(0,e).reduce(function(u,c){return u+c.text.length},0),i=t.size===1?o:o+this.nodes.get(e).getOffset(I.drop(t));return i}},{key:"getOffsetAtRange",value:function(t){if(t=this.resolveRange(t),t.isUnset)throw new Error("The range cannot be unset to calculcate its offset.");if(t.isExpanded)throw new Error("The range must be collapsed to calculcate its offset.");var e=t,o=e.start,i=this.getOffset(o.path)+o.offset;return i}},{key:"getParent",value:function(t){if(t=this.resolvePath(t),!t||!t.size)return null;var e=I.lift(t),o=this.getNode(e);return o}},{key:"getPreviousBlock",value:function(t){var e=this.blocks({path:t,onlyLeaves:!0,direction:"backward"}),o=R(e,1),i=o[0],u=i?i[0]:null;return u}},{key:"getPreviousNode",value:function(t){var e=this.createIterable({path:t,downward:!1,direction:"backward"}),o=R(e,1),i=o[0],u=i?i[0]:null;return u}},{key:"getPreviousSibling",value:function(t){var e=this.siblings(t,{direction:"backward"}),o=R(e,1),i=o[0],u=i?i[0]:null;return u}},{key:"getPreviousText",value:function(t){var e=this.texts({path:t,direction:"backward"}),o=R(e,1),i=o[0],u=i?i[0]:null;return u}},{key:"getRootBlocksAtRange",value:function(t){var e=this.blocks({range:t,onlyRoots:!0}),o=Array.from(e,function(u){var c=R(u,1),f=c[0];return f}),i=N.List(o);return i}},{key:"getRootInlinesAtRange",value:function(t){var e=this.inlines({range:t,onlyRoots:!0}),o=Array.from(e,function(u){var c=R(u,1),f=c[0];return f}),i=N.List(o);return i}},{key:"getTextAtOffset",value:function(t){if(t===0)return this.getFirstText();if(t===this.text.length)return this.getLastText();if(t<0||t>this.text.length)return null;var e=0,o=!0,i=!1,u=void 0;try{for(var c=this.texts()[Symbol.iterator](),f;!(o=(f=c.next()).done);o=!0){var v=f.value,h=R(v,1),m=h[0];if(e+=m.text.length,e>t)return m}}catch(g){i=!0,u=g}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return null}},{key:"getTextDirection",value:function(){var t=yv(this.text);return t==="neutral"?null:t}},{key:"getTexts",value:function(){var t=this.texts(),e=Array.from(t,function(i){var u=R(i,1),c=u[0];return c}),o=N.List(e);return o}},{key:"getTextsAtRange",value:function(t){var e=this.texts({range:t}),o=Array.from(e,function(u){var c=R(u,1),f=c[0];return f}),i=N.List(o);return i}},{key:"hasBlockChildren",value:function(){return!!(this.nodes&&this.nodes.find(function(t){return t.object==="block"}))}},{key:"hasChild",value:function(t){var e=this.getChild(t);return!!e}},{key:"hasInlineChildren",value:function(){return!!(this.nodes&&this.nodes.find(function(t){return t.object==="inline"||t.object==="text"}))}},{key:"hasDescendant",value:function(t){var e=this.getDescendant(t);return!!e}},{key:"hasVoidParent",value:function(t,e){tt(!yt.isValue(e),"As of Slate 0.42.0, the `node.hasVoidParent` method takes an `editor` instead of a `value`.");var o=this.getClosestVoid(t,e);return!!o}},{key:"inlines",value:function(){var t=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=e.onlyLeaves,i=e.onlyRoots,u=e.onlyTypes,c=e.match,f=Vt(e,["onlyLeaves","onlyRoots","onlyTypes","match"]),v=this.descendants($e({includeBlocks:!1,includeTexts:!1,includeDocument:!1},f,{match:function(m,g){return u&&!u.includes(m.type)||o&&!m.isLeafInline()||i&&t.getParent(g).object!=="block"?!1:!(c&&!c(m,g))}}));return v}},{key:"insertNode",value:function(t,e){t=this.resolvePath(t);var o=t.last(),i=I.lift(t),u=this.assertNode(i),c=u.nodes.splice(o,0,e);u=u.set("nodes",c);var f=this.replaceNode(i,u);return f}},{key:"insertText",value:function(t,e,o){t=this.resolvePath(t);var i=this.assertDescendant(t);i=i.insertText(e,o);var u=this.replaceNode(t,i);return u}},{key:"isLeafBlock",value:function(){return!(this.object!=="block"||this.nodes.some(function(t){return t.object==="block"}))}},{key:"isLeafInline",value:function(){return!(this.object!=="inline"||this.nodes.some(function(t){return t.object==="inline"}))}},{key:"isInRange",value:function(t,e){if(t=this.resolvePath(t),e=this.resolveRange(e),e.isUnset)return!1;var o=I.compare(t,e.start.path),i=I.compare(t,e.end.path),u=o!==-1&&i!==1;return u}},{key:"mapChildren",value:function(){var t=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ut,o=this.nodes;o.forEach(function(u,c){var f=e(u,c,t.nodes);f!==u&&(o=o.set(f.key,f))});var i=this.set("nodes",o);return i}},{key:"mapDescendants",value:function(){var t=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ut,o=this.nodes;o.forEach(function(u,c){var f=u;f.object!=="text"&&(f=f.mapDescendants(e)),f=e(f,c,t.nodes),f!==u&&(o=o.set(c,f))});var i=this.set("nodes",o);return i}},{key:"marks",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.onlyTypes,o=e===void 0?null:e,i=t.match,u=Vt(t,["onlyTypes","match"]),c=this.texts(u);return $n({},Symbol.iterator,function(){var f=c[Symbol.iterator](),v=null,h=null,m=[],g=function k(){if(m.length){var w=m.shift();return o&&!o.includes(w.type)||i&&!i(w,v,h)?k():{value:[w,v,h],done:!1}}var E=f.next(),O=E.value,P=E.done;if(P)return{done:!0};var F=R(O,2);return v=F[0],h=F[1],m=v.marks.toArray(),k()};return{next:g}})}},{key:"mergeNode",value:function(t){var e=this.assertNode(t);if(t=this.resolvePath(t),t.last()===0)throw new Error("Unable to merge node because it has no previous sibling: "+e);var o=I.decrement(t),i=this.assertNode(o);if(i.object!==e.object)throw new Error("Unable to merge two different kinds of nodes: "+i+" and "+e);var u=i.object==="text"?i.mergeText(e):i.set("nodes",i.nodes.concat(e.nodes)),c=this;return c=c.removeNode(t),c=c.removeNode(o),c=c.insertNode(o,u),c}},{key:"moveNode",value:function(t,e){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=this.assertNode(t);t=this.resolvePath(t),e=this.resolvePath(e,o);var u=I.lift(e);this.assertNode(u);var c=It.create({type:"move_node",path:t,newPath:e});e=I.transform(t,c).first();var f=this;return f=f.removeNode(t),f=f.insertNode(e,i),f}},{key:"removeMark",value:function(t,e){t=this.resolvePath(t);var o=this.assertDescendant(t);o=o.removeMark(e);var i=this.replaceNode(t,o);return i}},{key:"removeNode",value:function(t){this.assertDescendant(t),t=this.resolvePath(t);var e=t.flatMap(function(i){return["nodes",i]}),o=this.deleteIn(e);return o}},{key:"removeText",value:function(t,e,o){var i=this.assertDescendant(t);i=i.removeText(e,o.length);var u=this.replaceNode(t,i);return u}},{key:"replaceNode",value:function(t,e){if(t=this.resolvePath(t),!t)throw new Error("Unable to replace a node because it could not be found in the first place: "+t);if(!t.size)return e;this.assertNode(t);var o=t.flatMap(function(u){return["nodes",u]}),i=this.setIn(o,e);return i}},{key:"resolveAnnotation",value:function(t){return t=Re.create(t),t=t.normalize(this),t}},{key:"resolveDecoration",value:function(t){return t=Bt.create(t),t=t.normalize(this),t}},{key:"resolvePoint",value:function(t){return t=ee.create(t),t=t.normalize(this),t}},{key:"resolveRange",value:function(t){return t=De.create(t),t=t.normalize(this),t}},{key:"resolveSelection",value:function(t){return t=_t.create(t),t=t.normalize(this),t}},{key:"setNode",value:function(t,e){var o=this.assertNode(t);o=o.merge(e);var i=this.replaceNode(t,o);return i}},{key:"setMark",value:function(t,e,o){t=this.resolvePath(t);var i=this.assertDescendant(t);i=i.setMark(e,o);var u=this.replaceNode(t,i);return u}},{key:"siblings",value:function(t,e){var o=this.createIterable($e({path:t,upward:!1,downward:!1},e));return o}},{key:"splitNode",value:function(t,e,o){var i=this.assertNode(t);t=this.resolvePath(t);var u=void 0,c=void 0;if(i.object==="text"){var f=i.splitText(e),v=R(f,2);u=v[0],c=v[1]}else{var h=i.nodes.take(e),m=i.nodes.skip(e);u=i.set("nodes",h),c=i.set("nodes",m).regenerateKey()}o&&i.object!=="text"&&(c=c.merge(o));var g=this;return g=g.removeNode(t),g=g.insertNode(t,c),g=g.insertNode(t,u),g}},{key:"texts",value:function(t){var e=this.descendants($e({includeBlocks:!1,includeInlines:!1,includeDocument:!1},t));return e}},{key:"getBlocksAtRange",value:function(t){return $(),this.getLeafBlocksAtRange(t)}},{key:"getBlocksAtRangeAsArray",value:function(t){return $(),this.getLeafBlocksAtRangeAsArray(t)}},{key:"getInlinesAtRange",value:function(t){return $(),this.getLeafInlinesAtRange(t)}},{key:"getInlinesAtRangeAsArray",value:function(t){return $(),this.getLeafInlinesAtRangeAsArray(t)}},{key:"getNextTextAndPath",value:function(t){return $(),this.getNextTextEntry(t)}},{key:"getNextDeepMatchingNodeAndPath",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};$();var o=this.getNextMatchingNodeAndPath(t);if(!o)return null;for(var i=R(o,2),u=i[0],c=i[1],f=void 0,v=function(){return f=u.object!=="text"&&u.findFirstDescendantAndPath(e,c),f};v();){var h=f,m=R(h,2);u=m[0],c=m[1]}return u?e(u)?[u,c]:this.getNextDeepMatchingNodeAndPath(o[1],e):null}},{key:"getPreviousTextAndPath",value:function(t){return $(),this.getPreviousTextEntry(t)}},{key:"findFirstDescendantAndPath",value:function(t,e){return $(),this.findDescendantAndPath(t,e,!1)}},{key:"getPreviousMatchingNodeAndPath",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};if($(),!t)return null;for(var o=t.size;o>0;o--){var i=t.slice(0,o);if(i.last()!==0){for(var u=I.decrement(i),c=this.getNode(u);c&&!e(c);)u=I.decrement(u),c=this.getNode(u);if(c)return[c,u]}}return null}},{key:"getPreviousDeepMatchingNodeAndPath",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};$();var o=this.getPreviousMatchingNodeAndPath(t);if(!o)return null;for(var i=R(o,2),u=i[0],c=i[1],f=void 0,v=function(){return f=u.object!=="text"&&u.findLastDescendantAndPath(e,c),f};v();){var h=f,m=R(h,2);u=m[0],c=m[1]}return u?e(u)?[u,c]:this.getPreviousDeepMatchingNodeAndPath(o[1],e):null}},{key:"findLastDescendantAndPath",value:function(t,e){return $(),this.findDescendantAndPath(t,e,!0)}},{key:"findDescendantAndPath",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:I.create([]),o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;$();var i=void 0,u=void 0;return this.forEachDescendantWithPath(function(c,f,v){if(t(c,f,v))return i=c,u=f,!1},e,o),i?[i,u]:null}},{key:"forEachDescendantWithPath",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:I.create([]),o=arguments[2];$();var i=this.nodes,u=void 0;return o&&(i=i.reverse()),i.forEach(function(c,f){var v=e.concat(f);if(t(c,v,i)===!1)return u=!1,!1;if(c.object!=="text")return u=c.forEachDescendantWithPath(t,v,o),u}),u}},{key:"getNextMatchingNodeAndPath",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};if($(),!t)return null;for(var o=t.size;o>0;o--){for(var i=t.slice(0,o),u=I.increment(i),c=this.getNode(u);c&&!e(c);)u=I.increment(u),c=this.getNode(u);if(c)return[c,u]}return null}},{key:"getSelectionIndexes",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;$();var o=t.start,i=t.end;if(!e||t.isUnset)return null;if(o.path.equals(i.path)){var u=this.getFurthestAncestor(o.path),c=u?this.nodes.indexOf(u):null;return{start:c,end:c+1}}var f=null,v=null;return this.nodes.forEach(function(h,m){return h.object==="text"?(f==null&&h.key===o.key&&(f=m),v==null&&h.key===i.key&&(v=m+1)):(f==null&&h.hasDescendant(o.key)&&(f=m),v==null&&h.hasDescendant(i.key)&&(v=m+1)),f==null||v==null}),e&&f==null&&(f=0),e&&v==null&&(v=this.nodes.size),f==null?null:{start:f,end:v}}},{key:"getTextsBetweenPositionsAsArray",value:function(t,e){return $(),t=this.resolvePath(t),e=this.resolvePath(e),this.getTextsBetweenPathPositionsAsArray(t,e)}},{key:"getOrderedMarksBetweenPositions",value:function(t,e,o,i){$(),t=this.resolvePath(t),o=this.resolvePath(o);var u=this.getDescendant(t);if(I.isEqual(t,o))return u.marks;var c=this.getTextsBetweenPathPositionsAsArray(t,o);return N.OrderedSet().withMutations(function(f){c.forEach(function(v){f.union(v.marks)})})}},{key:"getTextsBetweenPathPositionsAsArray",value:function(t,e){if($(),t&&e&&I.isEqual(t,e))return[this.getDescendant(t)];if(!t&&!e)return this.getTextsAsArray();var o=t?t.get(0,0):0,i=e?e.get(0,this.nodes.size-1):this.nodes.size-1,u=[];return this.nodes.slice(o,i+1).forEach(function(c,f){if(c.object==="text")u.push(c);else{var v=t&&f===0?I.drop(t):null,h=e&&f===i-o?I.drop(e):null;u=u.concat(c.getTextsBetweenPathPositionsAsArray(v,h))}}),u}},{key:"getFurthestAncestor",value:function(t){return $(),this.getFurthestChild(t)}},{key:"getLeafBlocksAtRangeAsArray",value:function(t){if($(),t=this.resolveRange(t),t.isUnset)return[];var e=t,o=e.start,i=e.end;return this.getLeafBlocksBetweenPathPositionsAsArray(o.path,i.path)}},{key:"getLeafBlocksBetweenPathPositionsAsArray",value:function(t,e){if($(),t&&e&&I.isEqual(t,e))return[this.getClosestBlock(t)];if(!t&&!e)return this.getBlocksAsArray();var o=t?t.get(0,0):0,i=e?e.get(0,this.nodes.size-1):this.nodes.size-1,u=[];return this.nodes.slice(o,i+1).forEach(function(c,f){if(c.object==="block")if(c.isLeafBlock())u.push(c);else{var v=t&&f===0?I.drop(t):null,h=e&&f===i-o?I.drop(e):null;u=u.concat(c.getLeafBlocksBetweenPathPositionsAsArray(v,h))}}),u}},{key:"getBlocksAsArray",value:function(){$();var t=this.blocks({onlyLeaves:!0}),e=Array.from(t,function(o){var i=R(o,1),u=i[0];return u});return e}},{key:"getBlocksByTypeAsArray",value:function(t){$();var e=this.blocks({onlyLeaves:!0,onlyTypes:[t]}),o=Array.from(e,function(i){var u=R(i,1),c=u[0];return c});return o}},{key:"getFurthestOnlyChildAncestor",value:function(t){$();var e=this.getAncestors(t);if(!e)return null;var o=e.rest().reverse().takeUntil(function(i){return i.nodes.size>1}).last();return o||null}},{key:"getInlinesAsArray",value:function(){$();var t=Array.from(this.inlines({onlyLeaves:!0}),function(e){var o=R(e,1),i=o[0];return i});return t}},{key:"getInlinesByTypeAsArray",value:function(t){$();var e=Array.from(this.inlines({onlyLeaves:!0,onlyTypes:[t]}),function(o){var i=R(o,1),u=i[0];return u});return e}},{key:"getLeafInlinesAtRangeAsArray",value:function(t){var e=this;if($(),t=this.resolveRange(t),t.isUnset)return[];var o=this.getTextsAtRangeAsArray(t).map(function(i){return e.getClosestInline(i.key)}).filter(function(i){return i});return o}},{key:"getOrderedMarks",value:function(){return $(),this.getMarks()}},{key:"getOrderedMarksAtRange",value:function(t){return $(),this.getMarksAtRange(t)}},{key:"getOrderedMarksByType",value:function(t){return $(),this.getMarksByType(t)}},{key:"getMarksByTypeAsArray",value:function(t){$();var e=this.nodes.reduce(function(o,i){return i.object==="text"?o.concat(i.marks.filter(function(u){return u.type===t})):o.concat(i.getMarksByTypeAsArray(t))},[]);return e}},{key:"getMarksAsArray",value:function(){var t;$();var e=[],o=!0,i=!1,u=void 0;try{for(var c=this.texts()[Symbol.iterator](),f;!(o=(f=c.next()).done);o=!0){var v=f.value,h=R(v,1),m=h[0];e.push(m.marks.toArray())}}catch(k){i=!0,u=k}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}var g=(t=[]).concat.apply(t,e);return g}},{key:"getRootInlinesAtRangeAsArray",value:function(t){var e=this;if($(),t=this.resolveRange(t),t.isUnset)return N.List();var o=this.getTextsAtRangeAsArray(t).map(function(i){return e.getFurthestInline(i.key)}).filter(function(i){return i});return o}},{key:"getTextsAsArray",value:function(){$();var t=this.texts(),e=Array.from(t,function(o){var i=R(o,1),u=i[0];return u});return e}},{key:"getTextsAtRangeAsArray",value:function(t){$();var e=this.texts({range:t}),o=Array.from(e,function(i){var u=R(i,1),c=u[0];return c});return o}},{key:"getMarksAtPosition",value:function(t,e){$(),t=this.resolvePath(t);var o=this.getDescendant(t),i=o.marks;if(e!==0)return N.OrderedSet(i);var u=this.getClosestBlock(t);if(u.text==="")return N.OrderedSet(i);var c=this.texts({path:t,direction:"backward"}),f=R(c,1),v=f[0];if(!v)return N.OrderedSet();var h=R(v,2),m=h[0],g=h[1];return u.hasDescendant(g)?N.OrderedSet(m.marks):N.OrderedSet(i)}},{key:"getNodesAtRange",value:function(t){$();var e=this.descendants({range:t}),o=Array.from(e,function(u){var c=R(u,1),f=c[0];return f}),i=N.List(o);return i}},{key:"isNodeInRange",value:function(t,e){return $(),this.isInRange(t,e)}},{key:"text",get:function(){return this.getText()}}]),r}(),Cd=["Child","Depth","Descendant","Node","Parent","Path"],Rd=function(n){na.prototype["assert"+n]=function(t){for(var e=arguments.length,o=Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];var u=this["get"+n].apply(this,[t].concat(o));if(u==null)throw new Error("`Node.assert"+n+"` could not find node with path or key: "+t);return u}},In=!0,wo=!1,To=void 0;try{for(var Cn=Cd[Symbol.iterator](),Oo;!(In=(Oo=Cn.next()).done);In=!0){var Md=Oo.value;Rd(Md)}}catch(r){wo=!0,To=r}finally{try{!In&&Cn.return&&Cn.return()}finally{if(wo)throw To}}hi(na.prototype,["getBlocksAsArray","getBlocksByTypeAsArray","getDecorations","getFragmentAtRange","getInlinesAsArray","getInlinesByTypeAsArray","getInsertMarksAtRange","getLeafBlocksAtRangeAsArray","getLeafBlocksAtRangeAsArray","getLeafInlinesAtRangeAsArray","getMarksAsArray","getMarksAtPosition","getMarksByTypeAsArray","getNextBlock","getNodesAtRange","getNodesToPathsMap","getOffset","getOffsetAtRange","getOrderedMarksBetweenPositions","getPreviousBlock","getRootBlocksAtRange","getRootInlinesAtRangeAsArray","getTextAtOffset","getTextDirection","getTextsAsArray","getTextsBetweenPathPositionsAsArray"]);gr(na,[nt,st,rt]);var Ld=function(){function r(){Se(this,r)}return Te(r,[{key:"flip",value:function(){var t=this.setPoints([this.focus,this.anchor]);return t}},{key:"moveForward",value:function(t){return this.updatePoints(function(e){return e.moveForward(t)})}},{key:"moveBackward",value:function(t){return this.updatePoints(function(e){return e.moveBackward(t)})}},{key:"moveAnchorBackward",value:function(t){var e=this.setAnchor(this.anchor.moveBackward(t));return e}},{key:"moveAnchorForward",value:function(t){var e=this.setAnchor(this.anchor.moveForward(t));return e}},{key:"moveAnchorTo",value:function(t,e){var o=this.setAnchor(this.anchor.moveTo(t,e));return o}},{key:"moveAnchorToStartOfNode",value:function(t){var e=this.setAnchor(this.anchor.moveToStartOfNode(t));return e}},{key:"moveAnchorToEndOfNode",value:function(t){var e=this.setAnchor(this.anchor.moveToEndOfNode(t));return e}},{key:"moveEndBackward",value:function(t){var e=this.setEnd(this.end.moveBackward(t));return e}},{key:"moveEndForward",value:function(t){var e=this.setEnd(this.end.moveForward(t));return e}},{key:"moveEndTo",value:function(t,e){var o=this.setEnd(this.end.moveTo(t,e));return o}},{key:"moveEndToStartOfNode",value:function(t){var e=this.setEnd(this.end.moveToStartOfNode(t));return e}},{key:"moveEndToEndOfNode",value:function(t){var e=this.setEnd(this.end.moveToEndOfNode(t));return e}},{key:"moveFocusBackward",value:function(t){var e=this.setFocus(this.focus.moveBackward(t));return e}},{key:"moveFocusForward",value:function(t){var e=this.setFocus(this.focus.moveForward(t));return e}},{key:"moveFocusTo",value:function(t,e){var o=this.setFocus(this.focus.moveTo(t,e));return o}},{key:"moveFocusToStartOfNode",value:function(t){var e=this.setFocus(this.focus.moveToStartOfNode(t));return e}},{key:"moveFocusToEndOfNode",value:function(t){var e=this.setFocus(this.focus.moveToEndOfNode(t));return e}},{key:"moveStartBackward",value:function(t){var e=this.setStart(this.start.moveBackward(t));return e}},{key:"moveStartForward",value:function(t){var e=this.setStart(this.start.moveForward(t));return e}},{key:"moveStartTo",value:function(t,e){var o=this.setStart(this.start.moveTo(t,e));return o}},{key:"moveStartToStartOfNode",value:function(t){var e=this.setStart(this.start.moveToStartOfNode(t));return e}},{key:"moveStartToEndOfNode",value:function(t){var e=this.setStart(this.start.moveToEndOfNode(t));return e}},{key:"moveTo",value:function(t,e){return this.updatePoints(function(o){return o.moveTo(t,e)})}},{key:"moveToAnchor",value:function(){var t=this.setFocus(this.anchor);return t}},{key:"moveToEnd",value:function(){var t=this.setStart(this.end);return t}},{key:"moveToEndOfNode",value:function(t){return this.updatePoints(function(e){return e.moveToEndOfNode(t)})}},{key:"moveToFocus",value:function(){var t=this.setAnchor(this.focus);return t}},{key:"moveToRangeOfNode",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,o=this.setPoints([this.anchor.moveToStartOfNode(t),this.focus.moveToEndOfNode(e)]);return o}},{key:"moveToStart",value:function(){var t=this.setEnd(this.start);return t}},{key:"moveToStartOfNode",value:function(t){return this.updatePoints(function(e){return e.moveToStartOfNode(t)})}},{key:"normalize",value:function(t){return this.updatePoints(function(e){return e.normalize(t)})}},{key:"setAnchor",value:function(t){var e=this.set("anchor",t);return e}},{key:"setEnd",value:function(t){var e=this.isBackward?this.setAnchor(t):this.setFocus(t);return e}},{key:"setFocus",value:function(t){var e=this.set("focus",t);return e}},{key:"setPoints",value:function(t){var e=R(t,2),o=e[0],i=e[1],u=this.set("anchor",o).set("focus",i);return u}},{key:"updatePoints",value:function(t){var e=this.anchor,o=this.focus;return e=t(e),o=t(o),this.merge({anchor:e,focus:o})}},{key:"setStart",value:function(t){var e=this.isBackward?this.setFocus(t):this.setAnchor(t);return e}},{key:"setProperties",value:function(t){t=De.createProperties(t);var e=t,o=e.anchor,i=e.focus,u=Vt(e,["anchor","focus"]);o&&(u.anchor=ee.create(o)),i&&(u.focus=ee.create(i));var c=this.merge(u);return c}},{key:"toJSON",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e={object:this.object,anchor:this.anchor.toJSON(t),focus:this.focus.toJSON(t)};return e}},{key:"toRange",value:function(){var t=De.createProperties(this),e=De.create(t);return e}},{key:"unset",value:function(){var t=this.updatePoints(function(e){return e.unset()});return t}},{key:"isCollapsed",get:function(){return this.anchor===this.focus||this.anchor.key===this.focus.key&&this.anchor.offset===this.focus.offset}},{key:"isExpanded",get:function(){return!this.isCollapsed}},{key:"isBackward",get:function(){var t=this.isUnset,e=this.anchor,o=this.focus;if(t)return null;if(e.key===o.key)return e.offset>o.offset;var i=I.isBefore(o.path,e.path);return i}},{key:"isForward",get:function(){var t=this.isBackward,e=t==null?null:!t;return e}},{key:"isUnset",get:function(){var t=this.anchor,e=this.focus,o=t.isUnset||e.isUnset;return o}},{key:"isSet",get:function(){return!this.isUnset}},{key:"start",get:function(){return this.isBackward?this.focus:this.anchor}},{key:"end",get:function(){return this.isBackward?this.anchor:this.focus}}]),r}();gr(Ld,[Re,Bt,De,_t]);const zd=Fo().use(Vi).use(Po).use(Bo).use(As);Fo().use(gs).use(Po).use(Bo).use(Wi);const xo=r=>yt.fromJSON(zd.processSync(r).result),Jd={title:"Playground/Slate ~0.47"},$d=({children:r})=>vr("div",{style:Rn.useMemo(()=>({width:"100vw",height:"100vh",display:"flex",flexDirection:"row",fontSize:"10.5pt"}),[]),children:r}),Mr={render:()=>{const[r,n]=Rn.useState(xo(Za)),t=Rn.useRef(null);return Gi($d,{children:[vr(Yi,{ref:t,initialValue:Za}),vr("div",{style:{padding:10},children:vr("button",{style:{height:"100%"},onClick:()=>{t.current&&n(xo(t.current.value))},children:"md -> slate"})}),vr(Hi,{children:JSON.stringify(r,null,2)})]})}};var Eo,No,bo;Mr.parameters={...Mr.parameters,docs:{...(Eo=Mr.parameters)==null?void 0:Eo.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState(toSlate(text));
    const ref = useRef<HTMLTextAreaElement>(null);
    return <Wrapper>
        <TextEditor ref={ref} initialValue={text} />
        <div style={{
        padding: 10
      }}>
          <button style={{
          height: "100%"
        }} onClick={() => {
          if (!ref.current) return;
          setValue(toSlate(ref.current.value));
        }}>
            {"md -> slate"}
          </button>
        </div>
        <Text>{JSON.stringify(value, null, 2)}</Text>
      </Wrapper>;
  }
}`,...(bo=(No=Mr.parameters)==null?void 0:No.docs)==null?void 0:bo.source}}};const Kd=["MarkdownToSlateJson"];export{Mr as MarkdownToSlateJson,Kd as __namedExportsOrder,Jd as default};
//# sourceMappingURL=legacy.stories-736e512f.js.map
